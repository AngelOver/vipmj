import{H as $,T as z}from"./components.0ae37164.js";import{_ as q}from"./nuxt-link.b5f02e4c.js";import{d as A,Q as D,r as i,u as W,a as F,b as N,o as v,c as w,g as x,w as y,e,t as d,j as I,F as U,l as E,M as f,f as T,h as P,J as Q}from"./entry.f78ca6a6.js";import{u as G,w as K,a as X}from"./counter.a6829455.js";import{m as V,H as S}from"./index.08a9178a.js";const Y={class:"main overflow-auto ai-app-appid"},Z={class:"w-full pb-20"},ee={class:"mx-auto max-w-7xl px-4 pt-10 sm:px-6 lg:px-8"},te={class:"flex","aria-label":"Breadcrumb"},ae={role:"list",class:"flex items-center space-x-4"},se=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",class:"h-5 w-5 flex-shrink-0"},[e("path",{"fill-rule":"evenodd",d:"M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z","clip-rule":"evenodd"})],-1),le=e("span",{class:""},"应用列表",-1),oe={class:"mx-auto flex max-w-3xl flex-col items-center justify-center py-2"},ne={class:"mt-12 flex w-full flex-1 flex-col items-center justify-center px-4 sm:mt-20"},re={class:"max-w-[708px] text-4xl font-bold text-slate-900 sm:text-6xl"},ie={class:"mt-6 text-lg leading-8 text-gray-600"},ce={class:"flex w-full max-w-xl flex-col items-center"},de={class:"flex gap-4 self-end"},ue=["innerHTML"],pe={class:"qas"},_e={class:"mx-auto max-w-7xl py-16 px-6 sm:py-24 lg:px-8"},me=e("h2",{class:"text-2xl font-bold leading-10 tracking-tight text-gray-900"},"小应用可以做什么",-1),xe=e("p",{class:"mt-6 max-w-2xl text-base leading-7 text-gray-600"}," 问答系统：根据用户提供的问题生成有关某个主题的答案。 文本摘要：从长文章中提取关键信息，生成简洁易懂的摘要。 语言翻译：将文本从一种语言翻译成另一种语言。 代码生成：根据用户提供的描述自动生成代码片段。 创意写作：为用户生成短篇或长篇的创意性文本，如故事、博客文章、广告文案等。 ",-1),fe={class:"mt-20"},ge={class:"space-y-16 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:gap-y-16 sm:space-y-0 lg:grid-cols-3 lg:gap-x-10"},he={class:"text-base font-semibold leading-7 text-gray-900"},ve={class:"mt-2 text-base leading-7 text-gray-600"},Ve=A({__name:"[appid]",setup(we){const B=D(),k=i(B.params.appid),J=W("token"),u=i({}),b=G();F({meta:[{name:"description",content:b.setting.description},{name:"keywords",content:b.setting.keywords}]}),(()=>{K({appid:k.value}).then(s=>{u.value=s._rawValue.data,c.value=u.value.test_input})})();const M=s=>V({highlight:(l,r)=>{if(r&&S.getLanguage(r))try{return`<pre class="hljs"><code>${S.highlight(l,{language:r,ignoreIllegals:!0}).value}</code></pre>`}catch{}return`<pre class="hljs"><code>${V().utils.escapeHtml(l)}</code></pre>`},breaks:!0}).render(s),{public:{baseUrl:j}}=Q(),L={Authorization:`Bearer ${J.value}`,Accept:"text/event-stream"},g=i(),o=i(!1),p=i(""),c=i(""),O=async()=>{var h;p.value="",o.value=!0;const s=await fetch(`${j}api/now_app`,{method:"POST",headers:L,body:JSON.stringify({code:c.value,appid:k.value})});if(c.value.length=="")return o.value=!1,f.error("内容不得为空"),!1;if(s.status==500)return o.value=!1,f.error("服务器错误"),!1;if(s.status==401)return o.value=!1,f.error("请先登录"),!1;if(s.status==402)return o.value=!1,f.error("发送次数已达上限或余额不足"),!1;if(s.status==403)return o.value=!1,f.error("禁止发送违禁词"),!1;const l=(h=s.body)==null?void 0:h.getReader(),r=({value:n})=>{let a=new TextDecoder().decode(n).split(`

`).map(t=>t.replace(/\n/g,"")),m=[];for(let t=0;t<a.length;t++)if(a[t].slice(-2)=="]}"&&a[t].startsWith("data:"))m.push(JSON.parse(a[t].replace("data:","")));else if(a[t].startsWith("data:")&&a[t].slice(-2)!="]}")g.value=a[t].replace("data:","");else if(a[t].slice(-2)=="]}"&&a[t].startsWith("data:")==!1){let R=g.value+=a[t];m.push(JSON.parse(R.replace("data:",""))),g.value=""}else a[t].includes('"error"')&&(p.value=JSON.parse(a[t]).error.message),g.value="";for(let t=0;t<m.length;t++)setTimeout(()=>{m[t].choices[0].delta.content&&(p.value+=m[t].choices[0].delta.content)},100)},_=async()=>{const n=await(l==null?void 0:l.read());n!=null&&n.done?(o.value=!1,c.value=""):(r(n),await _())};await _()},H=i([]);return(()=>{X().then(s=>{H.value=s._rawValue.data}).catch(s=>{console.log(s)})})(),(s,l)=>{const r=z,_=$,h=q,n=N("a-textarea"),C=N("a-button");return v(),w("main",Y,[x(_,null,{default:y(()=>[x(r,null,{default:y(()=>[T(d(u.value.title)+" - "+d(P(b).setting.title),1)]),_:1})]),_:1}),e("div",Z,[e("div",ee,[e("nav",te,[e("ol",ae,[e("li",null,[e("div",null,[x(h,{class:"flex items-center gap-2 text-sm text-gray-400 hover:text-gray-500",to:"/ai_application"},{default:y(()=>[se,le]),_:1})])])])]),e("div",oe,[e("main",ne,[e("h1",re,d(u.value.title),1),e("p",ie,d(u.value.description),1),e("div",ce,[x(n,{"auto-size":{minRows:3,maxRows:12},modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=a=>c.value=a),disabled:o.value,class:"mt-5","allow-clear":"","show-word-limit":"",placeholder:"请输入点什么吧~"},null,8,["modelValue","disabled"]),e("div",de,[x(C,{type:"primary",size:"large",round:"",onClick:l[1]||(l[1]=a=>O()),loading:o.value,class:"mx-atuo mt-8 rounded-xl bg-black px-8 py-2 font-medium text-white hover:bg-black/80 sm:mt-10"},{default:y(()=>[T(" 运行 ")]),_:1},8,["loading"])]),p.value?(v(),w("div",{key:0,class:"my-10 w-full space-y-10 bg-white rounded p-3 shadow-sm",innerHTML:M(p.value).replace(/\\n/g,`
`)},null,8,ue)):I("",!0)])])])]),e("div",pe,[e("div",_e,[me,xe,e("div",fe,[e("dl",ge,[(v(!0),w(U,null,E(H.value,a=>(v(),w("div",{key:a.id},[e("dt",he,d(a.title),1),e("dd",ve,d(a.answer),1)]))),128))])])])])])])}}});export{Ve as default};
