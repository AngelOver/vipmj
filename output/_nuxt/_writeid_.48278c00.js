import{H as MG,T as NG}from"./components.df59135d.js";import{_ as BG}from"./nuxt-link.1091ffc1.js";import{p as tG,d as cF,q as nG,s as tw,x as oG,o as Om,c as Mp,n as sG,y as rG,e as So,R as $G,A as AD,S as PG,r as Pu,T as Kj,U as aG,V as FG,W as IG,X as LG,Y as Xj,Z as HG,t as qT,g as wn,h as Al,$ as VG,Q as zG,u as UG,K as WG,b as Yg,w as Jn,F as Yj,f as Uv,G as ZG,i as CZ,j as JC,O as aF,l as jG,a0 as GG,a1 as qG,M as Wd,J as KG}from"./entry.fcfc6558.js";import{u as XG,x as YG,y as JG,r as QG}from"./counter.50291c7b.js";import{_ as eq,a as tq,b as nq,c as oq}from"./gousi.b7d17a72.js";import{a as sq}from"./index.017b1aad.js";import{f as rq}from"./FileSaver.min.64a9fe46.js";import{I as aq}from"./index.c56a5bca.js";import{I as cq}from"./index.dcdca7c1.js";const lq=cF({name:"IconArrowLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:qe=>["butt","round","square"].includes(qe)},strokeLinejoin:{type:String,default:"miter",validator:qe=>["arcs","bevel","miter","miter-clip","round"].includes(qe)},rotate:Number,spin:Boolean},emits:{click:qe=>!0},setup(qe,{emit:on}){const qt=nG("icon"),Rn=tw(()=>[qt,`${qt}-arrow-left`,{[`${qt}-spin`]:qe.spin}]),Un=tw(()=>{const Kt={};return qe.size&&(Kt.fontSize=oG(qe.size)?`${qe.size}px`:qe.size),qe.rotate&&(Kt.transform=`rotate(${qe.rotate}deg)`),Kt});return{cls:Rn,innerStyle:Un,onClick:Kt=>{on("click",Kt)}}}}),iq=["stroke-width","stroke-linecap","stroke-linejoin"],uq=So("path",{d:"M20.272 11.27 7.544 23.998l12.728 12.728M43 24H8.705"},null,-1),dq=[uq];function mq(qe,on,qt,Rn,Un,Fn){return Om(),Mp("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:sG(qe.cls),style:rG(qe.innerStyle),"stroke-width":qe.strokeWidth,"stroke-linecap":qe.strokeLinecap,"stroke-linejoin":qe.strokeLinejoin,onClick:on[0]||(on[0]=(...Kt)=>qe.onClick&&qe.onClick(...Kt))},dq,14,iq)}var wZ=tG(lq,[["render",mq]]);const kD=Object.assign(wZ,{install:(qe,on)=>{var qt;const Rn=(qt=on==null?void 0:on.iconPrefix)!=null?qt:"";qe.component(Rn+wZ.name,wZ)}}),fq=cF({name:"IconCodepen",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:qe=>["butt","round","square"].includes(qe)},strokeLinejoin:{type:String,default:"miter",validator:qe=>["arcs","bevel","miter","miter-clip","round"].includes(qe)},rotate:Number,spin:Boolean},emits:{click:qe=>!0},setup(qe,{emit:on}){const qt=nG("icon"),Rn=tw(()=>[qt,`${qt}-codepen`,{[`${qt}-spin`]:qe.spin}]),Un=tw(()=>{const Kt={};return qe.size&&(Kt.fontSize=oG(qe.size)?`${qe.size}px`:qe.size),qe.rotate&&(Kt.transform=`rotate(${qe.rotate}deg)`),Kt});return{cls:Rn,innerStyle:Un,onClick:Kt=>{on("click",Kt)}}}}),gq=["stroke-width","stroke-linecap","stroke-linejoin"],hq=So("path",{d:"M45 15.7v17.1L24.5 44.7c-.3.2-.7.2-1 0l-20-11.5c-.3-.2-.5-.5-.5-.9V15.7c0-.4.2-.7.5-.9l20-11.6c.3-.2.7-.2 1 0l20 11.6c.3.2.5.5.5.9ZM26 9v9.8l5.5 3.2 8.5-4.9L26 9Zm-4 0L8 17.1l8.4 4.9 5.6-3.2V9Zm0 21.2L16.5 27 9 31.4 22 39v-8.8Zm17 1.2L31.4 27 26 30.2V39l13-7.6Zm2-3.4v-6l-5 3 5 3Zm-29-3-5-3v6l5-3Zm8 0 4 2 4-2-4-2-4 2Z",fill:"currentColor",stroke:"none"},null,-1),pq=[hq];function bq(qe,on,qt,Rn,Un,Fn){return Om(),Mp("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:sG(qe.cls),style:rG(qe.innerStyle),"stroke-width":qe.strokeWidth,"stroke-linecap":qe.strokeLinecap,"stroke-linejoin":qe.strokeLinejoin,onClick:on[0]||(on[0]=(...Kt)=>qe.onClick&&qe.onClick(...Kt))},pq,14,gq)}var SZ=tG(fq,[["render",bq]]);const vq=Object.assign(SZ,{install:(qe,on)=>{var qt;const Rn=(qt=on==null?void 0:on.iconPrefix)!=null?qt:"";qe.component(Rn+SZ.name,SZ)}});var cG={exports:{}};(function(qe){(function(){var on=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},qt=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Rn=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Un=function(e,n){return Fn(function(o,r){return e.eq(n(o),n(r))})},Fn=function(e){return{eq:e}},Kt=Fn(function(e,n){return e===n}),$e=Kt,Ht=function(e){return Fn(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Zs=function(e,n){return Un(Ht(e),function(o){return Rn(o,n)})},To=function(e){return Fn(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Zs($e).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},As=Fn(function(e,n){if(e===n)return!0;var o=on(e),r=on(n);return o!==r?!1:qt(o)?e===n:o==="array"?Ht(As).eq(e,n):o==="object"?To(As).eq(e,n):!1});const _o=Object.getPrototypeOf,Wo=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},qo=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Wo(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Fs=e=>n=>qo(n)===e,at=e=>n=>typeof n===e,tr=e=>n=>e===n,Ut=(e,n)=>On(e)&&Wo(e,n,(o,r)=>_o(o)===r),ee=Fs("string"),On=Fs("object"),Za=e=>Ut(e,Object),Bn=Fs("array"),q=tr(null),mn=at("boolean"),xo=tr(void 0),It=e=>e==null,Oe=e=>!It(e),oe=at("function"),Os=at("number"),jn=(e,n)=>{if(Bn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Ot=()=>{},O=(e,n)=>(...o)=>e(n.apply(null,o)),io=(e,n)=>o=>e(n(o)),Te=e=>()=>e,ht=e=>e,$t=(e,n)=>e===n;function Be(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Tn=e=>n=>!e(n),ko=e=>()=>{throw new Error(e)},Gn=e=>e(),Dn=e=>{e()},ke=Te(!1),De=Te(!0);class L{constructor(n,o){this.tag=n,this.value=o}static some(n){return new L(!0,n)}static none(){return L.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?L.some(n(this.value)):L.none()}bind(n){return this.tag?n(this.value):L.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:L.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Oe(n)?L.some(n):L.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}L.singletonNone=new L(!1);const dc=Array.prototype.slice,qn=Array.prototype.indexOf,Ro=Array.prototype.push,fn=(e,n)=>qn.call(e,n),Fu=(e,n)=>{const o=fn(e,n);return o===-1?L.none():L.some(o)},Me=(e,n)=>fn(e,n)>-1,Ie=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},He=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},me=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},ro=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Zo=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},Ct=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},fr=(e,n,o)=>(ro(e,(r,c)=>{o=n(o,r,c)}),o),Eo=(e,n,o)=>(me(e,(r,c)=>{o=n(o,r,c)}),o),mc=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return L.some(u);if(o(u,r))break}return L.none()},Jo=(e,n)=>mc(e,n,ke),Hr=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return L.some(o)}return L.none()},Zc=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Bn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Ro.apply(n,e[o])}return n},Ma=(e,n)=>Zc(He(e,n)),gr=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},Qo=e=>{const n=dc.call(e,0);return n.reverse(),n},Dm=(e,n)=>Ct(e,o=>!Me(n,o)),Is=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Mo=(e,n)=>{const o=dc.call(e,0);return o.sort(n),o},Rm=(e,n)=>n>=0&&n<e.length?L.some(e[n]):L.none(),In=e=>Rm(e,0),Na=e=>Rm(e,e.length-1),hr=oe(Array.from)?Array.from:e=>dc.call(e),mi=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return L.none()},Iu=(e,n)=>{const o=[],r=oe(n)?c=>Ie(o,u=>n(u,c)):c=>Me(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},bs=Object.keys,Mm=Object.hasOwnProperty,Qe=(e,n)=>{const o=bs(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},Qn=(e,n)=>ba(e,(o,r)=>({k:r,v:n(o,r)})),ba=(e,n)=>{const o={};return Qe(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},va=e=>(n,o)=>{e[o]=n},Ol=(e,n,o,r)=>{Qe(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},Dl=(e,n)=>{const o={},r={};return Ol(e,n,va(o),va(r)),{t:o,f:r}},Ko=(e,n)=>{const o={};return Ol(e,n,va(o),Ot),o},Ji=(e,n)=>{const o=[];return Qe(e,(r,c)=>{o.push(n(r,c))}),o},Tc=e=>Ji(e,ht),No=(e,n)=>tn(e,n)?L.from(e[n]):L.none(),tn=(e,n)=>Mm.call(e,n),Vr=(e,n)=>tn(e,n)&&e[n]!==void 0&&e[n]!==null,Qi=(e,n,o=As)=>To(o).eq(e,n),Lu=e=>{const n={};return me(e,o=>{n[o]={}}),bs(n)},Hu=e=>e.length!==void 0,is=Array.isArray,Dr=e=>{if(is(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ms=(e,n,o)=>{if(!e)return!1;if(o=o||e,Hu(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(tn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Rr=(e,n)=>{const o=[];return ms(e,(r,c)=>{o.push(n(r,c,e))}),o},eu=(e,n)=>{const o=[];return ms(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},Mr=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},fc=(e,n,o,r)=>{let c=xo(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},vs=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},ya=e=>e[e.length-1],fi=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Vf=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),T=u||f&&!y,N=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!T&&!y&&!N;return{isiPad:Te(c),isiPhone:Te(u),isTablet:Te(y),isPhone:Te(T),isTouch:Te(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Te(N),isDesktop:Te(R)}},tu=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Rl=(e,n)=>{const o=tu(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Ca(r(1),r(2))},Vu=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?ue():Rl(e,o)},ue=()=>Ca(0,0),Ca=(e,n)=>({major:e,minor:n}),Ml={nu:Ca,detect:Vu,unknown:ue},gi=(e,n)=>mi(n.brands,o=>{const r=o.brand.toLowerCase();return Jo(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:Ml.nu(parseInt(o.version,10),0)}))}),Nm=(e,n)=>{const o=String(n).toLowerCase();return Jo(e,r=>r.search(o))},Bo=(e,n)=>Nm(e,n).map(o=>{const r=Ml.detect(o.versionRegexes,n);return{current:o.name,version:r}}),zf=(e,n)=>Nm(e,n).map(o=>{const r=Ml.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Np=(e,n)=>e.substring(n),Nl=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,zu=(e,n)=>jo(e,n)?Np(e,n.length):e,es=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?xo(r)?!0:c+n.length<=r:!1},jo=(e,n)=>Nl(e,n,0),Bl=(e,n)=>Nl(e,n,e.length-n.length),_c=e=>n=>n.replace(e,""),hi=_c(/^\s+|\s+$/g),Uu=_c(/^\s+/g),pi=_c(/\s+$/g),po=e=>e.length>0,wa=e=>!po(e),Bm=(e,n)=>n<=0?"":new Array(n+1).join(e),bi=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?L.none():L.some(o)},kc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ls=e=>n=>es(n,e),fs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>es(e,"edge/")&&es(e,"chrome")&&es(e,"safari")&&es(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,kc],search:e=>es(e,"chrome")&&!es(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>es(e,"msie")||es(e,"trident")},{name:"Opera",versionRegexes:[kc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ls("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ls("firefox")},{name:"Safari",versionRegexes:[kc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(es(e,"safari")||es(e,"mobile/"))&&es(e,"applewebkit")}],Bp=[{name:"Windows",search:Ls("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>es(e,"iphone")||es(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ls("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ls("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ls("linux"),versionRegexes:[]},{name:"Solaris",search:Ls("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ls("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ls("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Uf={browsers:Te(fs),oses:Te(Bp)},Ao="Edge",Sa="Chromium",ja="IE",nr="Opera",$m="Firefox",fl="Safari",Ac=()=>Ba({current:void 0,version:Ml.unknown()}),Ba=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Ao),isChromium:r(Sa),isIE:r(ja),isOpera:r(nr),isFirefox:r($m),isSafari:r(fl)}},Jg={unknown:Ac,nu:Ba,edge:Te(Ao),chromium:Te(Sa),ie:Te(ja),opera:Te(nr),firefox:Te($m),safari:Te(fl)},Wf="Windows",Pm="iOS",Oc="Android",gl="Linux",Zf="macOS",hl="Solaris",Zd="FreeBSD",Fm="ChromeOS",Wu=()=>Im({current:void 0,version:Ml.unknown()}),Im=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(Wf),isiOS:r(Pm),isAndroid:r(Oc),isMacOS:r(Zf),isLinux:r(gl),isSolaris:r(hl),isFreeBSD:r(Zd),isChromeOS:r(Fm)}},Jr={unknown:Wu,nu:Im,windows:Te(Wf),ios:Te(Pm),android:Te(Oc),linux:Te(gl),macos:Te(Zf),solaris:Te(hl),freebsd:Te(Zd),chromeos:Te(Fm)},nu={detect:(e,n,o)=>{const r=Uf.browsers(),c=Uf.oses(),u=n.bind(y=>gi(r,y)).orThunk(()=>Bo(r,e)).fold(Jg.unknown,Jg.nu),f=zf(c,e).fold(Jr.unknown,Jr.nu),b=Vf(f,u,e,o);return{browser:u,os:f,deviceType:b}}},jd=e=>window.matchMedia(e).matches;let jf=fi(()=>nu.detect(navigator.userAgent,L.from(navigator.userAgentData),jd));const jc=()=>jf(),Qg=navigator.userAgent,$a=jc(),Nr=$a.browser,Gc=$a.os,vi=$a.deviceType,gn=Qg.indexOf("Windows Phone")!==-1,Kn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Nr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Nr.isIE(),windowsPhone:gn,browser:{current:Nr.current,version:Nr.version,isChromium:Nr.isChromium,isEdge:Nr.isEdge,isFirefox:Nr.isFirefox,isIE:Nr.isIE,isOpera:Nr.isOpera,isSafari:Nr.isSafari},os:{current:Gc.current,version:Gc.version,isAndroid:Gc.isAndroid,isChromeOS:Gc.isChromeOS,isFreeBSD:Gc.isFreeBSD,isiOS:Gc.isiOS,isLinux:Gc.isLinux,isMacOS:Gc.isMacOS,isSolaris:Gc.isSolaris,isWindows:Gc.isWindows},deviceType:{isDesktop:vi.isDesktop,isiPad:vi.isiPad,isiPhone:vi.isiPhone,isPhone:vi.isPhone,isTablet:vi.isTablet,isTouch:vi.isTouch,isWebView:vi.isWebView}},zr=/^\s*|\s*$/g,Ds=e=>It(e)?"":(""+e).replace(zr,""),eh=(e,n)=>n?n==="array"&&is(e)?!0:typeof e===n:e!==void 0,ws=(e,n,o={})=>{const r=ee(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},$p=tn,ou=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(tn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Qr=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ms(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Qr(c,n,o,r),!0)))},Ve={trim:Ds,isArray:is,is:eh,toArray:Dr,makeMap:ws,each:ms,map:Rr,grep:eu,inArray:Mr,hasOwn:$p,extend:ou,walk:Qr,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Bn(e)?e:e===""?[]:Rr(e.split(n||","),Ds),_addCacheSuffix:e=>{const n=Kn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},qc=(e,n,o=$t)=>e.exists(r=>o(r,n)),Gs=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},ea=(e,n,o)=>e.isSome()&&n.isSome()?L.some(o(e.getOrDie(),n.getOrDie())):L.none(),Lm=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?L.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):L.none(),Ln=(e,n)=>e?L.some(n):L.none(),yi=typeof window<"u"?window:Function("return this;")(),su=(e,n)=>{let o=n??yi;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},qs=(e,n)=>{const o=e.split(".");return su(o,n)},ys=(e,n)=>qs(e,n),ru=(e,n)=>{const o=ys(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Tb=Object.getPrototypeOf,Gf=e=>ru("HTMLElement",e),ts=e=>{const n=qs("ownerDocument.defaultView",e);return On(e)&&(Gf(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Tb(e).constructor.name))},Ga=8,qa=9,xa=11,$l=1,Pl=3,Io=e=>e.dom.nodeName.toLowerCase(),or=e=>e.dom.nodeType,Ur=e=>n=>or(n)===e,Gd=e=>or(e)===Ga||Io(e)==="#comment",Rc=e=>$o(e)&&ts(e.dom),$o=Ur($l),sr=Ur(Pl),Kc=Ur(qa),Zu=Ur(xa),Fl=e=>n=>$o(n)&&Io(n)===e,Xc=(e,n,o)=>{if(ee(o)||mn(o)||Os(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Ss=(e,n,o)=>{Xc(e.dom,n,o)},ta=(e,n)=>{const o=e.dom;Qe(n,(r,c)=>{Xc(o,c,r)})},pr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Yc=(e,n)=>L.from(pr(e,n)),Ci=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},ao=(e,n)=>{e.dom.removeAttribute(n)},gc=e=>{const n=e.dom.attributes;return n==null||n.length===0},qd=e=>Eo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Il=(e,n)=>{const o=pr(e,n);return o===void 0||o===""?[]:o.split(" ")},ju=(e,n,o)=>{const c=Il(e,n).concat([o]);return Ss(e,n,c.join(" ")),!0},Hm=(e,n,o)=>{const r=Ct(Il(e,n),c=>c!==o);return r.length>0?Ss(e,n,r.join(" ")):ao(e,n),!1},Ll=e=>e.dom.classList!==void 0,Ka=e=>Il(e,"class"),au=(e,n)=>ju(e,"class",n),Ea=(e,n)=>Hm(e,"class",n),Hl=(e,n)=>Me(Ka(e),n)?Ea(e,n):au(e,n),bl=(e,n)=>{Ll(e)?e.dom.classList.add(n):au(e,n)},Vm=e=>{(Ll(e)?e.dom.classList:Ka(e)).length===0&&ao(e,"class")},Jc=(e,n)=>{Ll(e)?e.dom.classList.remove(n):Ea(e,n),Vm(e)},zm=(e,n)=>{const o=Ll(e)?e.dom.classList.toggle(n):Hl(e,n);return Vm(e),o},Kd=(e,n)=>Ll(e)&&e.dom.classList.contains(n),wi=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return cu(r.childNodes[0])},Um=(e,n)=>{const r=(n||document).createElement(e);return cu(r)},Wm=(e,n)=>{const r=(n||document).createTextNode(e);return cu(r)},cu=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},Y={fromHtml:wi,fromTag:Um,fromText:Wm,fromDom:cu,fromPoint:(e,n,o)=>L.from(e.dom.elementFromPoint(n,o)).map(cu)},Zm=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Ta=(e,n)=>{const o=e.dom;if(o.nodeType!==$l)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},qf=e=>e.nodeType!==$l&&e.nodeType!==qa&&e.nodeType!==xa||e.childElementCount===0,Pp=(e,n)=>{const o=n===void 0?document:n.dom;return qf(o)?[]:He(o.querySelectorAll(e),Y.fromDom)},Fp=(e,n)=>{const o=n===void 0?document:n.dom;return qf(o)?L.none():L.from(o.querySelector(e)).map(Y.fromDom)},uo=(e,n)=>e.dom===n.dom,hc=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Br=e=>Y.fromDom(e.dom.ownerDocument),Vl=e=>Kc(e)?e:Br(e),Si=e=>Y.fromDom(Vl(e).dom.documentElement),Gu=e=>Y.fromDom(Vl(e).dom.defaultView),Pa=e=>L.from(e.dom.parentNode).map(Y.fromDom),jm=e=>L.from(e.dom.parentElement).map(Y.fromDom),Xd=(e,n)=>{const o=oe(n)?n:ke;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=Y.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Gm=e=>{const n=o=>Ct(o,r=>!uo(e,r));return Pa(e).map(br).map(n).getOr([])},Qc=e=>L.from(e.dom.previousSibling).map(Y.fromDom),lu=e=>L.from(e.dom.nextSibling).map(Y.fromDom),nh=e=>Qo(Zm(e,Qc)),Xa=e=>Zm(e,lu),br=e=>He(e.dom.childNodes,Y.fromDom),xi=(e,n)=>{const o=e.dom.childNodes;return L.from(o[n]).map(Y.fromDom)},qu=e=>xi(e,0),Ya=e=>xi(e,e.dom.childNodes.length-1),_a=e=>e.dom.childNodes.length,Kf=e=>e.dom.hasChildNodes(),oh=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return Y.fromDom(n)},Ku=e=>Zu(e)&&Oe(e.dom.host),Yd=oe(Element.prototype.attachShadow)&&oe(Node.prototype.getRootNode),Xf=Te(Yd),vl=Yd?e=>Y.fromDom(e.dom.getRootNode()):Vl,qm=e=>Ku(e)?e:oh(Vl(e)),Wv=e=>Ku(e)?e:Y.fromDom(Vl(e).dom.body),Ip=e=>{const n=vl(e);return Ku(n)?L.some(n):L.none()},Yf=e=>Y.fromDom(e.dom.host),Xu=e=>{if(Xf()&&Oe(e.target)){const n=Y.fromDom(e.target);if($o(n)&&sh(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return In(o)}}return L.from(e.target)},sh=e=>Oe(e.dom.shadowRoot),zl=e=>{const n=sr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Ip(Y.fromDom(n)).fold(()=>o.body.contains(n),io(zl,Yf))};var _=(e,n,o,r,c)=>e(o,r)?L.some(o):oe(c)&&c(o)?L.none():n(o,r,c);const M=(e,n,o)=>{let r=e.dom;const c=oe(o)?o:ke;for(;r.parentNode;){r=r.parentNode;const u=Y.fromDom(r);if(n(u))return L.some(u);if(c(u))break}return L.none()},V=(e,n,o)=>_((c,u)=>u(c),M,e,n,o),te=(e,n)=>{const o=e.dom;return o.parentNode?se(Y.fromDom(o.parentNode),r=>!uo(e,r)&&n(r)):L.none()},se=(e,n)=>{const o=c=>n(Y.fromDom(c));return Jo(e.dom.childNodes,o).map(Y.fromDom)},Ze=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=Y.fromDom(r.childNodes[c]);if(n(u))return L.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return L.none()};return o(e.dom)},Wt=(e,n,o)=>M(e,r=>Ta(r,n),o),rn=(e,n)=>Fp(n,e),an=(e,n,o)=>_((c,u)=>Ta(c,u),Wt,e,n,o),Qt=e=>an(e,"[contenteditable]"),St=(e,n=!1)=>zl(e)?e.dom.isContentEditable:Qt(e).fold(Te(n),o=>us(o)==="true"),us=e=>e.dom.contentEditable,vr=e=>e.style!==void 0&&oe(e.style.getPropertyValue),Lp=(e,n,o)=>{if(!ee(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);vr(e)&&e.style.setProperty(n,o)},Jf=(e,n)=>{vr(e)&&e.style.removeProperty(n)},rh=(e,n,o)=>{const r=e.dom;Lp(r,n,o)},ah=(e,n)=>{const o=e.dom;Qe(n,(r,c)=>{Lp(o,c,r)})},rr=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!zl(e)?ka(o,n):c},ka=(e,n)=>vr(e)?e.style.getPropertyValue(n):"",Ja=(e,n)=>{const o=e.dom,r=ka(o,n);return L.from(r).filter(c=>c.length>0)},na=e=>{const n={},o=e.dom;if(vr(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},ch=(e,n)=>{const o=e.dom;Jf(o,n),qc(Yc(e,"style").map(hi),"")&&ao(e,"style")},gs=e=>e.dom.offsetWidth,Qa=(e,n)=>{Pa(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Mc=(e,n)=>{lu(e).fold(()=>{Pa(e).each(c=>{Rs(c,n)})},r=>{Qa(r,n)})},Km=(e,n)=>{qu(e).fold(()=>{Rs(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Rs=(e,n)=>{e.dom.appendChild(n.dom)},_b=(e,n)=>{Qa(e,n),Rs(n,e)},Hp=(e,n)=>{me(n,(o,r)=>{const c=r===0?e:n[r-1];Mc(c,o)})},Lo=(e,n)=>{me(n,o=>{Rs(e,o)})},Ei=e=>{e.dom.textContent="",me(br(e),n=>{no(n)})},no=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Fa=e=>{const n=br(e);n.length>0&&Hp(e,n),no(e)},Yu=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,br(Y.fromDom(r))},Ju=e=>He(e,Y.fromDom),Jd=e=>e.dom.innerHTML,xn=(e,n)=>{const r=Br(e).dom,c=Y.fromDom(r.createDocumentFragment()),u=Yu(n,r);Lo(c,u),Ei(e),Rs(e,c)},lh=e=>{const n=Y.fromTag("div"),o=Y.fromDom(e.dom.cloneNode(!0));return Rs(n,o),Jd(n)},ih=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),Zv=e=>{const n=Y.fromDom(Xu(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=O(r,o);return ih(n,e.clientX,e.clientY,o,r,c,e)},nw=(e,n)=>o=>{e(o)&&n(Zv(o))},uh=(e,n,o,r,c)=>{const u=nw(o,r);return e.dom.addEventListener(n,u,c),{unbind:Be(jv,e,n,u,c)}},Qf=(e,n,o,r)=>uh(e,n,o,r,!1),jv=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Ti=(e,n)=>({left:e,top:n,translate:(r,c)=>Ti(e+r,n+c)}),Qd=Ti,Gv=e=>{const n=e.getBoundingClientRect();return Qd(n.left,n.top)},eg=(e,n)=>e!==void 0?e:n!==void 0?n:0,iu=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Qd(o.offsetLeft,o.offsetTop);const u=eg(r==null?void 0:r.pageYOffset,c.scrollTop),f=eg(r==null?void 0:r.pageXOffset,c.scrollLeft),b=eg(c.clientTop,o.clientTop),y=eg(c.clientLeft,o.clientLeft);return Vp(e).translate(f-y,u-b)},Vp=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Qd(r.offsetLeft,r.offsetTop):zl(e)?Gv(n):Qd(0,0)},Ul=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Qd(o,r)},Qu=(e,n)=>{jc().browser.isSafari()&&oe(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},qv=e=>{const n=e===void 0?window:e;return jc().browser.isFirefox()?L.none():L.from(n.visualViewport)},dh=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),zp=e=>{const n=e===void 0?window:e,o=n.document,r=Ul(Y.fromDom(o));return qv(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return dh(r.left,r.top,u,f)},c=>dh(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Up=(e,n)=>Ct(br(e),n),Wp=(e,n)=>{let o=[];return me(br(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Wp(r,n))}),o},Wr=(e,n)=>Pp(n,e),mh=(e,n,o)=>Wt(e,n,o).isSome();class Ks{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const oa=e=>n=>!!n&&n.nodeType===e,Bt=e=>!!e&&!Object.getPrototypeOf(e),dt=oa(1),Xm=e=>{const n=e.toLowerCase();return o=>Oe(o)&&o.nodeName.toLowerCase()===n},el=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Me(n,r)}return!1}},Ym=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(dt(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},tg=e=>n=>dt(n)&&n.hasAttribute(e),Nc=(e,n)=>o=>dt(o)&&o.getAttribute(e)===n,Bc=e=>dt(e)&&e.hasAttribute("data-mce-bogus"),Jm=e=>dt(e)&&e.getAttribute("data-mce-bogus")==="all",hs=e=>dt(e)&&e.tagName==="TABLE",Qm=e=>n=>!!(dt(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ng=el(["textarea","input"]),je=oa(3),Kv=oa(4),Xv=oa(7),pc=oa(8),ef=oa(9),ed=oa(11),ds=Xm("br"),kb=Xm("img"),bo=Qm("true"),co=Qm("false"),sa=el(["td","th"]),tf=el(["td","th","caption"]),Hs=el(["video","audio","object","embed"]),em=Xm("li"),yr=Xm("details"),Ia=Xm("summary"),uu="\uFEFF",Ce=" ",ec=e=>e===uu,Ab=e=>e.replace(/\uFEFF/g,""),yl=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?L.from(u.dom.nodeValue):L.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(sr,"text"),fh=e=>yl.get(e),$c=e=>yl.getOption(e),Yv=(e,n)=>yl.set(e,n),td=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Zp=["td","th"],bc=["thead","tbody","tfoot"],oo=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],_i=["h1","h2","h3","h4","h5","h6"],og=["li","dd","dt"],ra=["ul","ol","dl"],gh=["pre","script","textarea","style"],nd=["pre"].concat(_i),du=e=>{let n;return o=>(n=n||Is(e,De),tn(n,Io(o)))},Ms=du(td),hh=e=>Io(e)==="table",fe=e=>$o(e)&&!Ms(e),aa=e=>$o(e)&&Io(e)==="br",sg=du(oo),La=du(ra),Ha=du(og),ca=du(bc),xs=du(Zp),ph=du(gh),tm=du(nd),od=e=>tm(e)||fe(e),Lt=e=>{const n=[];let o=e.dom;for(;o;)n.push(Y.fromDom(o)),o=o.lastChild;return n},ow=e=>{const n=Wr(e,"br"),o=Ct(Lt(e).slice(-1),aa);n.length===o.length&&me(o,no)},w=()=>{const e=Y.fromTag("br");return Ss(e,"data-mce-bogus","1"),e},E=e=>{Ei(e),Rs(e,w())},F=e=>{Ya(e).each(n=>{Qc(n).each(o=>{Ms(e)&&aa(n)&&Ms(o)&&no(n)})})},U=uu,ne=ec,ye=Ab,We=dt,ct=je,Vt=e=>(ct(e)&&(e=e.parentNode),We(e)&&e.hasAttribute("data-mce-caret")),jt=e=>ct(e)&&ne(e.data),mo=e=>Vt(e)||jt(e),eo=e=>e.firstChild!==e.lastChild||!ds(e.firstChild),ns=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(U),u=e.parentNode;if(n){const f=e.previousSibling;if(ct(f)){if(mo(f))return f;if(nm(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(ct(f)){if(mo(f))return f;if(tc(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},la=e=>{const n=e.container();return je(n)?n.data.charAt(e.offset())===U||e.isAtStart()&&jt(n.previousSibling):!1},tl=e=>{const n=e.container();return je(n)?n.data.charAt(e.offset()-1)===U||e.isAtEnd()&&jt(n.nextSibling):!1},mu=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(w().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},tc=e=>ct(e)&&e.data[0]===U,nm=e=>ct(e)&&e.data[e.data.length-1]===U,bh=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Bc(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},om=e=>e&&e.hasAttribute("data-mce-caret")?(bh(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,sd=e=>Vt(e.startContainer),Vs=bo,nl=co,fu=ds,sm=je,Ob=el(["script","style","textarea"]),Sn=el(["img","input","textarea","hr","iframe","video","audio","object","embed"]),os=el(["table"]),Zr=mo,Es=e=>Zr(e)?!1:sm(e)?!Ob(e.parentNode):Sn(e)||fu(e)||os(e)||ki(e),gu=e=>dt(e)&&e.getAttribute("unselectable")==="true",ki=e=>!gu(e)&&nl(e),Wl=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(ki(o))return!1;if(Vs(o))return!0}return!0},vc=e=>ki(e)?!Eo(hr(e.getElementsByTagName("*")),(n,o)=>n||Vs(o),!1):!1,sw=e=>Sn(e)||vc(e),nf=(e,n)=>Es(e)&&Wl(e,n),vh=/^[ \t\r\n]*$/,Zl=e=>vh.test(e),rw=e=>{for(const n of e)if(!ec(n))return!1;return!0},jp=e=>" \f	\v".indexOf(e)!==-1,Jv=e=>e===`
`||e==="\r",Qv=(e,n)=>n<e.length&&n>=0?Jv(e[n]):!1,Ns=(e,n=4,o=!0,r=!0)=>{const c=Bm(" ",n),u=e.replace(/\t/g,c);return Eo(u,(b,y)=>jp(y)||y===Ce?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Qv(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Ce}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Jv(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},aw=(e,n)=>{const o=Y.fromDom(n),r=Y.fromDom(e);return mh(r,"pre,code",Be(uo,o))},rd=(e,n)=>je(e)&&Zl(e.data)&&!aw(e,n),yh=e=>dt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),hu=(e,n)=>Es(e)&&!rd(e,n)||yh(e)||pu(e),pu=tg("data-mce-bookmark"),Cl=tg("data-mce-bogus"),Ch=Nc("data-mce-bogus","all"),Gp=(e,n)=>{let o=0;if(hu(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new Ks(r,e);do{if(n){if(Ch(r)){r=c.next(!0);continue}if(Cl(r)){r=c.next();continue}}if(ds(r)){o++,r=c.next();continue}if(hu(r,e))return!1;r=c.next()}while(r);return o<=1}},Cr=(e,n=!0)=>Gp(e.dom,n),of="data-mce-block",ey=e=>Ct(bs(e),n=>!/[A-Z]/.test(n)),rg=e=>ey(e).join(","),wh=(e,n)=>Oe(n.querySelector(e))?(n.setAttribute(of,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(of),!1),ty=(e,n)=>{const o=rg(e.getTransparentElements()),r=rg(e.getBlockElements());return Ct(n.querySelectorAll(o),c=>wh(r,c))},ag=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(Cr(Y.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},rm=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();ag(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();ag(u,!1),Cr(Y.fromDom(c))||r.insertBefore(c,e),Cr(Y.fromDom(n))||r.insertBefore(n,e),Cr(Y.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},Pc=(e,n,o)=>{const r=e.getBlockElements(),c=Y.fromDom(n),u=b=>Io(b)in r,f=b=>uo(b,c);me(Ju(o),b=>{M(b,u,f).each(y=>{const T=Up(b,N=>u(N)&&!e.isValidChild(Io(y),Io(N)));if(T.length>0){const N=jm(y);me(T,R=>{M(R,u,f).each(I=>{rm(I.dom,R.dom)})}),N.each(R=>ty(e,R.dom))}})})},am=(e,n,o)=>{me([...o,...sf(e,n)?[n]:[]],r=>me(Wr(Y.fromDom(r),r.nodeName.toLowerCase()),c=>{lw(e,c.dom)&&Fa(c)}))},cm=(e,n)=>{const o=ty(e,n);Pc(e,n,o),am(e,n,o)},ny=(e,n)=>{if(Sh(e,n)){const o=rg(e.getBlockElements());wh(o,n)}},cw=(e,n,o)=>{const r=u=>uo(u,Y.fromDom(n)),c=Xd(Y.fromDom(o),r);Rm(c,c.length-2).filter($o).fold(()=>cm(e,n),u=>cm(e,u.dom))},qp=e=>e.hasAttribute(of),Kp=(e,n)=>tn(e.getTransparentElements(),n),Sh=(e,n)=>dt(n)&&Kp(e,n.nodeName),sf=(e,n)=>Sh(e,n)&&qp(n),lw=(e,n)=>Sh(e,n)&&!qp(n),Db=(e,n)=>n.type===1&&Kp(e,n.name)&&ee(n.attr(of)),lo=(e,n)=>n.type===1&&Kp(e,n.name)&&xo(n.attr(of)),Mt=jc().browser,rf=e=>Jo(e,$o),oy=e=>Mt.isFirefox()&&Io(e)==="table"?rf(br(e)).filter(n=>Io(n)==="caption").bind(n=>rf(Xa(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,Xp=(e,n)=>e.children&&Me(e.children,n),iw=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&rr(Y.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!Xp(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!Xp(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=oy(Y.fromDom(n))}return{x:r,y:c}},sy=(e,n={})=>{let o=0;const r={},c=Y.fromDom(e),u=Vl(c),f=W=>{n.referrerPolicy=W},b=W=>{n.contentCssCors=W},y=W=>{Rs(qm(c),W)},T=W=>{const K=qm(c);rn(K,"#"+W).each(no)},N=W=>No(r,W).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),R=W=>new Promise((K,ae)=>{let le;const ce=Ve._addCacheSuffix(W),he=N(ce);r[ce]=he,he.count++;const Fe=(_e,et)=>{me(_e,Dn),he.status=et,he.passed=[],he.failed=[],le&&(le.onload=null,le.onerror=null,le=null)},Et=()=>Fe(he.passed,2),Ue=()=>Fe(he.failed,3);if(K&&he.passed.push(K),ae&&he.failed.push(ae),he.status===1)return;if(he.status===2){Et();return}if(he.status===3){Ue();return}he.status=1;const ve=Y.fromTag("link",u.dom);ta(ve,{rel:"stylesheet",type:"text/css",id:he.id}),n.contentCssCors&&Ss(ve,"crossOrigin","anonymous"),n.referrerPolicy&&Ss(ve,"referrerpolicy",n.referrerPolicy),le=ve.dom,le.onload=Et,le.onerror=Ue,y(ve),Ss(ve,"href",ce)}),I=W=>Promise.allSettled(He(W,ae=>R(ae).then(Te(ae)))).then(ae=>{const le=Zo(ae,ce=>ce.status==="fulfilled");return le.fail.length>0?Promise.reject(He(le.fail,ce=>ce.reason)):He(le.pass,ce=>ce.value)}),G=W=>{const K=Ve._addCacheSuffix(W);No(r,K).each(ae=>{--ae.count===0&&(delete r[K],T(ae.id))})};return{load:R,loadAll:I,unload:G,unloadAll:W=>{me(W,K=>{G(K)})},_setReferrerPolicy:f,_setContentCssCors:b}},Yp=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=vl(o).dom;return L.from(e.get(u)).getOrThunk(()=>{const f=sy(u,r);return e.set(u,f),f})}}})(),KT=e=>e.nodeName.toLowerCase()==="span",xh=(e,n)=>Oe(e)&&(hu(e,n)||fe(Y.fromDom(e))),Pe=(e,n)=>{const o=new Ks(e,n).prev(!1),r=new Ks(e,n).next(!1),c=xo(o)||xh(o,n),u=xo(r)||xh(r,n);return c&&u},cg=e=>KT(e)&&e.getAttribute("data-mce-type")==="bookmark",XT=(e,n)=>je(e)&&e.data.length>0&&Pe(e,n),Rb=e=>dt(e)?e.childNodes.length>0:!1,YT=e=>ed(e)||ef(e),af=(e,n,o)=>{var r;const c=o||n;if(dt(n)&&cg(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)af(e,u[f],c);if(dt(n)){const f=n.childNodes;f.length===1&&cg(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!YT(n)&&!hu(n,c)&&!Rb(n)&&!XT(n,c)&&e.remove(n),n},ry=Ve.makeMap,ad=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mb=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Eh=/[<>&\"\']/g,rs=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ai={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},lg={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},bu={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Nb=e=>{const n=Y.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Th=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!lg[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},cf=Th("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ay=(e,n)=>e.replace(n?ad:Mb,o=>lg[o]||o),JT=e=>(""+e).replace(Eh,n=>lg[n]||n),uw=(e,n)=>e.replace(n?ad:Mb,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":lg[o]||"&#"+o.charCodeAt(0)+";"),Bb=(e,n,o)=>{const r=o||cf;return e.replace(n?ad:Mb,c=>lg[c]||r[c]||c)},lf={encodeRaw:ay,encodeAllRaw:JT,encodeNumeric:uw,encodeNamed:Bb,getEncodeFunc:(e,n)=>{const o=Th(n)||cf,r=(f,b)=>f.replace(b?ad:Mb,y=>lg[y]!==void 0?lg[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>Bb(f,b,o),u=ry(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:Bb:u.numeric?uw:ay},decode:e=>e.replace(rs,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Ai[o]||String.fromCharCode(o)):bu[n]||cf[n]||Nb(n))},$b={},uf={},pt={},_h=Ve.makeMap,Aa=Ve.each,cy=Ve.extend,Jp=Ve.explode,e_=Ve.inArray,ia=(e,n)=>(e=Ve.trim(e),e?e.split(n||" "):[]),Oi=(e,n={})=>{const o=_h(e," ",_h(e.toUpperCase()," "));return cy(o,n)},cd=e=>Oi("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),t_=e=>{const n={};let o,r,c,u;const f=(y,T="",N="")=>{const R=ia(N),I=ia(y);let G=I.length;for(;G--;){const X=ia([o,T].join(" "));n[I[G]]={attributes:Is(X,()=>({})),attributesOrder:X,children:Is(R,Te(pt))}}},b=(y,T)=>{const N=ia(y),R=ia(T);let I=N.length;for(;I--;){const G=n[N[I]];for(let X=0,W=R.length;X<W;X++)G.attributes[R[X]]={},G.attributesOrder.push(R[X])}};if($b[e])return $b[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const y="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+y,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const y="acronym applet basefont big font strike tt";c=[c,y].join(" "),Aa(ia(y),N=>{f(N,"",c)});const T="center dir isindex noframes";r=[r,T].join(" "),u=[r,c].join(" "),Aa(ia(T),N=>{f(N,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("dd div","",u),f("address dt caption","",e==="html4"?c:u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?c:u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&me([n.video,n.audio],y=>{delete y.children.audio,delete y.children.video}),Aa(ia("a form meter progress dfn"),y=>{n[y]&&delete n[y].children[y]}),delete n.caption.children.table,delete n.script,$b[e]=n,n},kh=(e,n)=>{if(e){const o={};return ee(e)&&(e={"*":e}),Aa(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?_h(r,/[, ]/):Jp(r,/[, ]/)}),o}else return},df=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(un,Nt,ps)=>{const Do=e[un];if(Do)return _h(Do,/[, ]/,_h(Do.toUpperCase(),/[, ]/));{let ks=uf[un];return ks||(ks=Oi(Nt,ps),uf[un]=ks),ks}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",T=t_(y);e.verify_html===!1&&(e.valid_elements="*[*]");const N=kh(e.valid_styles),R=kh(e.invalid_styles,"map"),I=kh(e.valid_classes,"map"),G=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),X=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),W=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),K=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ae="td th iframe video audio object script code",le=b("non_empty_elements",ae+" pre",W),ce=b("move_caret_before_on_enter_elements",ae+" table",W),he=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Fe=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",he),Et=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ue=b("transparent_elements","a ins del canvas map");Aa("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),un=>{f[un]=new RegExp("</"+un+"[^>]*>","gi")});const ve=un=>new RegExp("^"+un.replace(/([?+*])/g,".$1")+"$"),_e=un=>{const Nt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,ps=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Do=/[*?+]/;if(un){const ks=ia(un,",");let $s,cs;o["@"]&&($s=o["@"].attributes,cs=o["@"].attributesOrder);for(let Ar=0,li=ks.length;Ar<li;Ar++){let uc=Nt.exec(ks[Ar]);if(uc){const Ld=uc[1],ii=uc[2],qg=uc[3],Dp=uc[5],Ki={},Hd=[],Lr={attributes:Ki,attributesOrder:Hd};if(Ld==="#"&&(Lr.paddEmpty=!0),Ld==="-"&&(Lr.removeEmpty=!0),uc[4]==="!"&&(Lr.removeEmptyAttrs=!0),$s&&(Qe($s,(Ru,Am)=>{Ki[Am]=Ru}),cs&&Hd.push(...cs)),Dp){const Ru=ia(Dp,"|");for(let Am=0,Mu=Ru.length;Am<Mu;Am++)if(uc=ps.exec(Ru[Am]),uc){const Nu={},Lf=uc[1],Ec=uc[2].replace(/[\\:]:/g,":"),Kg=uc[3],Hf=uc[4];if(Lf==="!"&&(Lr.attributesRequired=Lr.attributesRequired||[],Lr.attributesRequired.push(Ec),Nu.required=!0),Lf==="-"){delete Ki[Ec],Hd.splice(e_(Hd,Ec),1);continue}if(Kg&&(Kg==="="&&(Lr.attributesDefault=Lr.attributesDefault||[],Lr.attributesDefault.push({name:Ec,value:Hf}),Nu.defaultValue=Hf),Kg==="~"&&(Lr.attributesForced=Lr.attributesForced||[],Lr.attributesForced.push({name:Ec,value:Hf}),Nu.forcedValue=Hf),Kg==="<"&&(Nu.validValues=_h(Hf,"?"))),Do.test(Ec)){const Bu=Nu;Lr.attributePatterns=Lr.attributePatterns||[],Bu.pattern=ve(Ec),Lr.attributePatterns.push(Bu)}else Ki[Ec]||Hd.push(Ec),Ki[Ec]=Nu}}if(!$s&&ii==="@"&&($s=Ki,cs=Hd),qg&&(Lr.outputName=ii,o[qg]=Lr),Do.test(ii)){const Ru=Lr;Ru.pattern=ve(ii),c.push(Ru)}else o[ii]=Lr}}}},et=un=>{c=[],me(bs(o),Nt=>{delete o[Nt]}),_e(un),Aa(T,(Nt,ps)=>{r[ps]=Nt.children})},ot=un=>{const Nt=/^(~)?(.+)$/;un&&(delete uf.text_block_elements,delete uf.block_elements,Aa(ia(un,","),ps=>{const Do=Nt.exec(ps);if(Do){const ks=Do[1]==="~",$s=ks?"span":"div",cs=Do[2];if(r[cs]=r[$s],u[cs]=$s,le[cs.toUpperCase()]={},le[cs]={},ks||(Fe[cs.toUpperCase()]={},Fe[cs]={}),!o[cs]){let Ar=o[$s];Ar=cy({},Ar),delete Ar.removeEmptyAttrs,delete Ar.removeEmpty,o[cs]=Ar}Aa(r,(Ar,li)=>{Ar[$s]&&(r[li]=Ar=cy({},r[li]),Ar[cs]=Ar[$s])})}}))},bt=un=>{const Nt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete $b[y],un&&Aa(ia(un,","),ps=>{const Do=Nt.exec(ps);if(Do){const ks=Do[1];let $s;ks?$s=r[Do[2]]:$s=r[Do[2]]={"#comment":{}},$s=r[Do[2]],Aa(ia(Do[3],"|"),cs=>{ks==="-"?delete $s[cs]:$s[cs]={}})}})},sn=un=>{const Nt=o[un];if(Nt)return Nt;let ps=c.length;for(;ps--;){const Do=c[ps];if(Do.pattern.test(un))return Do}};e.valid_elements?et(e.valid_elements):(Aa(T,(un,Nt)=>{o[Nt]={attributes:un.attributes,attributesOrder:un.attributesOrder},r[Nt]=un.children}),Aa(ia("strong/b em/i"),un=>{const Nt=ia(un,"/");o[Nt[1]].outputName=Nt[0]}),Aa(Et,(un,Nt)=>{o[Nt]&&(e.padd_empty_block_inline_children&&(o[Nt].paddInEmptyBlock=!0),o[Nt].removeEmpty=!0)}),Aa(ia("ol ul blockquote a table tbody"),un=>{o[un]&&(o[un].removeEmpty=!0)}),Aa(ia("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),un=>{o[un]&&(o[un].paddEmpty=!0)}),Aa(ia("span"),un=>{o[un].removeEmptyAttrs=!0})),ot(e.custom_elements),bt(e.valid_children),_e(e.extended_valid_elements),bt("+ol[ul|ol],+ul[ul|ol]"),Aa({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(un,Nt)=>{o[Nt]&&(o[Nt].parentsRequired=ia(un))}),e.invalid_elements&&Aa(Jp(e.invalid_elements),un=>{o[un]&&delete o[un]}),sn("span")||_e("span[!data-mce-type|*]");const Rt=Te(N),kn=Te(R),go=Te(I),Bs=Te(K),ha=Te(Fe),kr=Te(he),Ye=Te(Et),Tt=Te(Object.seal(W)),Zn=Te(X),Vn=Te(le),_t=Te(ce),vt=Te(G),Ke=Te(Ue),Jt=Te(Object.seal(f)),ln=(un,Nt)=>{const ps=r[un.toLowerCase()];return!!(ps&&ps[Nt.toLowerCase()])},Co=(un,Nt)=>{const ps=sn(un);if(ps)if(Nt){if(ps.attributes[Nt])return!0;const Do=ps.attributePatterns;if(Do){let ks=Do.length;for(;ks--;)if(Do[ks].pattern.test(Nt))return!0}}else return!0;return!1},ho=Te(u);return{type:y,children:r,elements:o,getValidStyles:Rt,getValidClasses:go,getBlockElements:ha,getInvalidStyles:kn,getVoidElements:Tt,getTextBlockElements:kr,getTextInlineElements:Ye,getBoolAttrs:Bs,getElementRule:sn,getSelfClosingElements:Zn,getNonEmptyElements:Vn,getMoveCaretBeforeOnEnterElements:_t,getWhitespaceElements:vt,getTransparentElements:Ke,getSpecialElements:Jt,isValidChild:ln,isValid:Co,getCustomElements:ho,addValidElements:_e,setValidElements:et,addCustomElements:ot,addValidChildren:bt}},Pb=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const y=uu;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const T=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let R=0;R<T.length;R++)u[T[R]]=y+R,u[y+R]=T[R];const N={parse:R=>{const I={};let G=!1;const X=e.url_converter,W=e.url_converter_scope||N,K=(ve,_e,et)=>{const ot=I[ve+"-top"+_e];if(!ot)return;const bt=I[ve+"-right"+_e];if(!bt)return;const sn=I[ve+"-bottom"+_e];if(!sn)return;const Rt=I[ve+"-left"+_e];if(!Rt)return;const kn=[ot,bt,sn,Rt];let go=kn.length-1;for(;go--&&kn[go]===kn[go+1];);go>-1&&et||(I[ve+_e]=go===-1?kn[0]:kn.join(" "),delete I[ve+"-top"+_e],delete I[ve+"-right"+_e],delete I[ve+"-bottom"+_e],delete I[ve+"-left"+_e])},ae=ve=>{const _e=I[ve];if(!_e)return;const et=_e.split(" ");let ot=et.length;for(;ot--;)if(et[ot]!==et[0])return!1;return I[ve]=et[0],!0},le=(ve,_e,et,ot)=>{ae(_e)&&ae(et)&&ae(ot)&&(I[ve]=I[_e]+" "+I[et]+" "+I[ot],delete I[_e],delete I[et],delete I[ot])},ce=ve=>(G=!0,u[ve]),he=(ve,_e)=>(G&&(ve=ve.replace(/\uFEFF[0-9]/g,et=>u[et])),_e||(ve=ve.replace(/\\([\'\";:])/g,"$1")),ve),Fe=ve=>String.fromCharCode(parseInt(ve.slice(1),16)),Et=ve=>ve.replace(/\\[0-9a-f]+/gi,Fe),Ue=(ve,_e,et,ot,bt,sn)=>{if(bt=bt||sn,bt)return bt=he(bt),"'"+bt.replace(/\'/g,"\\'")+"'";if(_e=he(_e||et||ot||""),!e.allow_script_urls){const Rt=_e.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Rt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Rt))return""}return X&&(_e=X.call(W,_e,"style")),"url('"+_e.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,ce).replace(/\"[^\"]+\"|\'[^\']+\'/g,_e=>_e.replace(/[;:]/g,ce));let ve;for(;ve=r.exec(R);){r.lastIndex=ve.index+ve[0].length;let _e=ve[1].replace(c,"").toLowerCase(),et=ve[2].replace(c,"");if(_e&&et){if(_e=Et(_e),et=Et(et),_e.indexOf(y)!==-1||_e.indexOf('"')!==-1||!e.allow_script_urls&&(_e==="behavior"||/expression\s*\(|\/\*|\*\//.test(et)))continue;_e==="font-weight"&&et==="700"?et="bold":(_e==="color"||_e==="background-color")&&(et=et.toLowerCase()),et=et.replace(o,Ue),I[_e]=G?he(et,!0):et}}K("border","",!0),K("border","-width"),K("border","-color"),K("border","-style"),K("padding",""),K("margin",""),le("border","border-width","border-style","border-color"),I.border==="medium none"&&delete I.border,I["border-image"]==="none"&&delete I["border-image"]}return I},serialize:(R,I)=>{let G="";const X=(K,ae)=>{const le=ae[K];if(le)for(let ce=0,he=le.length;ce<he;ce++){const Fe=le[ce],Et=R[Fe];Et&&(G+=(G.length>0?" ":"")+Fe+": "+Et+";")}},W=(K,ae)=>{if(!b||!ae)return!0;let le=b["*"];return le&&le[K]?!1:(le=b[ae],!(le&&le[K]))};return I&&f?(X("*",f),X(I,f)):Qe(R,(K,ae)=>{K&&W(ae,I)&&(G+=(G.length>0?" ":"")+ae+": "+K+";")}),G}};return N},ly={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Qp=e=>e instanceof Event||oe(e.initEvent),ld=e=>e.isDefaultPrevented===De||e.isDefaultPrevented===ke,Fb=e=>It(e.preventDefault)||Qp(e),iy=(e,n)=>{const o=n??{};for(const r in e)tn(ly,r)||(o[r]=e[r]);return Oe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},uy=(e,n,o,r)=>{var c;const u=iy(n,r);return u.type=e,It(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),Fb(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=De,oe(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=De,oe(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=De,u.stopPropagation()},ld(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?De:ke,u.isPropagationStopped=u.cancelBubble===!0?De:ke,u.isImmediatePropagationStopped=ke)),u},dw="mce-data-",Ib=/^(?:mouse|contextmenu)|click/,yc=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},nc=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},mw=e=>Oe(e)&&Ib.test(e.type),Ah=(e,n)=>{const o=uy(e.type,e,document,n);if(mw(e)&&xo(e.pageX)&&!xo(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},n_=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{nc(e,"DOMContentLoaded",f),nc(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():yc(e,"DOMContentLoaded",f),o.domLoaded||yc(e,"load",f)};class mf{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=dw+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=I=>{u.executeHandlers(Ah(I||b.event),T)};if(!n||je(n)||pc(n))return r;let T;n[u.expando]?T=n[u.expando]:(T=u.count++,n[u.expando]=T,u.events[T]={}),c=c||n;const N=o.split(" ");let R=N.length;for(;R--;){let I=N[R],G=y,X=!1,W=!1;if(I==="DOMContentLoaded"&&(I="ready"),u.domLoaded&&I==="ready"&&n.readyState==="complete"){r.call(c,Ah({type:I}));continue}!u.hasFocusIn&&(I==="focusin"||I==="focusout")&&(X=!0,W=I==="focusin"?"focus":"blur",G=K=>{const ae=Ah(K||b.event);ae.type=ae.type==="focus"?"focusin":"focusout",u.executeHandlers(ae,T)}),f=u.events[T][I],f?I==="ready"&&u.domLoaded?r(Ah({type:I})):f.push({func:r,scope:c}):(u.events[T][I]=f=[{func:r,scope:c}],f.fakeName=W,f.capture=X,f.nativeHandler=G,I==="ready"?n_(n,G,u):yc(n,W||I,G,X))}return n=f=null,r}unbind(n,o,r){if(!n||je(n)||pc(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],T=u[y];if(T){if(r){let N=T.length;for(;N--;)if(T[N].func===r){const R=T.nativeHandler,I=T.fakeName,G=T.capture,X=T.slice(0,N).concat(T.slice(N+1));X.nativeHandler=R,X.fakeName=I,X.capture=G,u[y]=X}}(!r||T.length===0)&&(delete u[y],nc(n,T.fakeName||y,T.nativeHandler,T.capture))}}}else Qe(u,(f,b)=>{nc(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(tn(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||je(n)||pc(n))return this;const c=Ah({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||je(n)||pc(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}mf.Event=new mf;const wl=Ve.each,o_=Ve.grep,Oh="data-mce-style",fw=Ve.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Dh=(e,n,o)=>{It(o)||o===""?ao(e,n):Ss(e,n,o)},e1=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Rh=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&je(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},t1=(e,n)=>{const o=pr(n,"style"),r=e.serialize(e.parse(o),Io(n));Dh(n,Oh,r)},dy=(e,n)=>Os(e)?tn(fw,n)?e+"":e+"px":e,Lb=(e,n,o)=>{const r=e1(n);It(o)||o===""?ch(e,r):rh(e,r,dy(o,r))},Hb=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const T=Y.fromDom(f);oe(n.url_converter)&&Oe(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const N="data-mce-"+y;Dh(T,N,b),Dh(T,y,b)},get:(f,b)=>{const y=Y.fromDom(f);return pr(y,"data-mce-"+b)||pr(y,b)}},u={style:{set:(f,b)=>{const y=Y.fromDom(f);r&&Dh(y,Oh,b),ao(y,"style"),ee(b)&&ah(y,e.parse(b))},get:f=>{const b=Y.fromDom(f),y=pr(b,Oh)||pr(b,"style");return e.serialize(e.parse(y),Io(b))}}};return r&&(u.href=u.src=c),u},Po=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=Yp.forElement(Y.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),T=[],N=n.schema?n.schema:df({}),R=Pb({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),I=n.ownEvents?new mf:mf.Event,G=N.getBlockElements(),X=pe=>ee(pe)?tn(G,pe):dt(pe)&&(tn(G,pe.nodeName)||sf(N,pe)),W=pe=>pe&&e&&ee(pe)?e.getElementById(pe):pe,K=pe=>{const be=W(pe);return Oe(be)?Y.fromDom(be):null},ae=(pe,be,Je="")=>{let Ge;const Ft=K(pe);if(Oe(Ft)&&$o(Ft)){const Yn=Cb[be];Yn&&Yn.get?Ge=Yn.get(Ft.dom,be):Ge=pr(Ft,be)}return Oe(Ge)?Ge:Je},le=pe=>{const be=W(pe);return It(be)?[]:be.attributes},ce=(pe,be,Je)=>{Tt(pe,Ge=>{if(dt(Ge)){const Ft=Y.fromDom(Ge),Yn=Je===""?null:Je,ls=pr(Ft,be),pa=Cb[be];pa&&pa.set?pa.set(Ft.dom,Yn,be):Dh(Ft,be,Yn),ls!==Yn&&n.onSetAttrib&&n.onSetAttrib({attrElm:Ft.dom,attrName:be,attrValue:Yn})}})},he=(pe,be)=>pe.cloneNode(be),Fe=()=>n.root_element||e.body,Et=pe=>{const be=zp(pe);return{x:be.x,y:be.y,w:be.width,h:be.height}},Ue=(pe,be)=>iw(e.body,W(pe),be),ve=(pe,be,Je)=>{Tt(pe,Ge=>{const Ft=Y.fromDom(Ge);Lb(Ft,be,Je),n.update_styles&&t1(R,Ft)})},_e=(pe,be)=>{Tt(pe,Je=>{const Ge=Y.fromDom(Je);Qe(be,(Ft,Yn)=>{Lb(Ge,Yn,Ft)}),n.update_styles&&t1(R,Ge)})},et=(pe,be,Je)=>{const Ge=W(pe);if(!(It(Ge)||!dt(Ge)))return Je?rr(Y.fromDom(Ge),e1(be)):(be=be.replace(/-(\D)/g,(Ft,Yn)=>Yn.toUpperCase()),be==="float"&&(be="cssFloat"),Ge.style?Ge.style[be]:void 0)},ot=pe=>{const be=W(pe);if(!be)return{w:0,h:0};let Je=et(be,"width"),Ge=et(be,"height");return(!Je||Je.indexOf("px")===-1)&&(Je="0"),(!Ge||Ge.indexOf("px")===-1)&&(Ge="0"),{w:parseInt(Je,10)||be.offsetWidth||be.clientWidth,h:parseInt(Ge,10)||be.offsetHeight||be.clientHeight}},bt=pe=>{const be=W(pe),Je=Ue(be),Ge=ot(be);return{x:Je.x,y:Je.y,w:Ge.w,h:Ge.h}},sn=(pe,be)=>{if(!pe)return!1;const Je=Bn(pe)?pe:[pe];return Ie(Je,Ge=>Ta(Y.fromDom(Ge),be))},Rt=(pe,be,Je,Ge)=>{const Ft=[];let Yn=W(pe);Ge=Ge===void 0;const ls=Je||(Fe().nodeName!=="BODY"?Fe().parentNode:null);if(ee(be))if(be==="*")be=dt;else{const pa=be;be=Ra=>sn(Ra,pa)}for(;Yn&&!(Yn===ls||It(Yn.nodeType)||ef(Yn)||ed(Yn));){if(!be||be(Yn))if(Ge)Ft.push(Yn);else return[Yn];Yn=Yn.parentNode}return Ge?Ft:null},kn=(pe,be,Je)=>{const Ge=Rt(pe,be,Je,!1);return Ge&&Ge.length>0?Ge[0]:null},go=(pe,be,Je)=>{let Ge=be;if(pe){ee(be)&&(Ge=Ft=>sn(Ft,be));for(let Ft=pe[Je];Ft;Ft=Ft[Je])if(oe(Ge)&&Ge(Ft))return Ft}return null},Bs=(pe,be)=>go(pe,be,"nextSibling"),ha=(pe,be)=>go(pe,be,"previousSibling"),kr=pe=>oe(pe.querySelectorAll),Ye=(pe,be)=>{var Je,Ge;const Ft=(Ge=(Je=W(be))!==null&&Je!==void 0?Je:n.root_element)!==null&&Ge!==void 0?Ge:e;return kr(Ft)?hr(Ft.querySelectorAll(pe)):[]},Tt=function(pe,be,Je){const Ge=Je??this;if(Bn(pe)){const Ft=[];return wl(pe,(Yn,ls)=>{const pa=W(Yn);pa&&Ft.push(be.call(Ge,pa,ls))}),Ft}else{const Ft=W(pe);return Ft?be.call(Ge,Ft):!1}},Zn=(pe,be)=>{Tt(pe,Je=>{Qe(be,(Ge,Ft)=>{ce(Je,Ft,Ge)})})},Vn=(pe,be)=>{Tt(pe,Je=>{const Ge=Y.fromDom(Je);xn(Ge,be)})},_t=(pe,be,Je,Ge,Ft)=>Tt(pe,Yn=>{const ls=ee(be)?e.createElement(be):be;return Oe(Je)&&Zn(ls,Je),Ge&&(!ee(Ge)&&Ge.nodeType?ls.appendChild(Ge):ee(Ge)&&Vn(ls,Ge)),Ft?ls:Yn.appendChild(ls)}),vt=(pe,be,Je)=>_t(e.createElement(pe),pe,be,Je,!0),Ke=lf.decode,Jt=lf.encodeAllRaw,ln=(pe,be,Je="")=>{let Ge="<"+pe;for(const Ft in be)Vr(be,Ft)&&(Ge+=" "+Ft+'="'+Jt(be[Ft])+'"');return wa(Je)&&tn(N.getVoidElements(),pe)?Ge+" />":Ge+">"+Je+"</"+pe+">"},Co=pe=>{const be=e.createElement("div"),Je=e.createDocumentFragment();Je.appendChild(be),pe&&(be.innerHTML=pe);let Ge;for(;Ge=be.firstChild;)Je.appendChild(Ge);return Je.removeChild(be),Je},ho=(pe,be)=>Tt(pe,Je=>{const Ge=Y.fromDom(Je);return be&&me(br(Ge),Ft=>{sr(Ft)&&Ft.dom.length===0?no(Ft):Qa(Ge,Ft)}),no(Ge),Ge.dom}),un=pe=>Tt(pe,be=>{const Je=be.attributes;for(let Ge=Je.length-1;Ge>=0;Ge--)be.removeAttributeNode(Je.item(Ge))}),Nt=pe=>R.parse(pe),ps=(pe,be)=>R.serialize(pe,be),Do=pe=>{if(Vd!==Po.DOM&&e===document){if(o[pe])return;o[pe]=!0}let be=e.getElementById("mceDefaultStyles");if(!be){be=e.createElement("style"),be.id="mceDefaultStyles",be.type="text/css";const Je=e.head;Je.firstChild?Je.insertBefore(be,Je.firstChild):Je.appendChild(be)}be.styleSheet?be.styleSheet.cssText+=pe:be.appendChild(e.createTextNode(pe))},ks=pe=>{pe||(pe=""),me(pe.split(","),be=>{c[be]=!0,y.load(be).catch(Ot)})},$s=(pe,be,Je)=>{Tt(pe,Ge=>{if(dt(Ge)){const Ft=Y.fromDom(Ge),Yn=be.split(" ");me(Yn,ls=>{Oe(Je)?(Je?bl:Jc)(Ft,ls):zm(Ft,ls)})}})},cs=(pe,be)=>{$s(pe,be,!0)},Ar=(pe,be)=>{$s(pe,be,!1)},li=(pe,be)=>{const Je=K(pe),Ge=be.split(" ");return Oe(Je)&&gr(Ge,Ft=>Kd(Je,Ft))},uc=pe=>{Tt(pe,be=>ch(Y.fromDom(be),"display"))},Ld=pe=>{Tt(pe,be=>rh(Y.fromDom(be),"display","none"))},ii=pe=>{const be=K(pe);return Oe(be)&&qc(Ja(be,"display"),"none")},qg=pe=>(pe||"mce_")+u++,Dp=pe=>{const be=K(pe);return Oe(be)?dt(be.dom)?be.dom.outerHTML:lh(be):""},Ki=(pe,be)=>{Tt(pe,Je=>{dt(Je)&&(Je.outerHTML=be)})},Hd=(pe,be)=>{const Je=W(be);return Tt(pe,Ge=>{const Ft=Je==null?void 0:Je.parentNode,Yn=Je==null?void 0:Je.nextSibling;return Ft&&(Yn?Ft.insertBefore(Ge,Yn):Ft.appendChild(Ge)),Ge})},Lr=(pe,be,Je)=>Tt(be,Ge=>{var Ft;const Yn=Bn(be)?pe.cloneNode(!0):pe;return Je&&wl(o_(Ge.childNodes),ls=>{Yn.appendChild(ls)}),(Ft=Ge.parentNode)===null||Ft===void 0||Ft.replaceChild(Yn,Ge),Ge}),Ru=(pe,be)=>{if(pe.nodeName!==be.toUpperCase()){const Je=vt(be);return wl(le(pe),Ge=>{ce(Je,Ge.nodeName,ae(pe,Ge.nodeName))}),Lr(Je,pe,!0),Je}else return pe},Am=(pe,be)=>{let Je=pe;for(;Je;){let Ge=be;for(;Ge&&Je!==Ge;)Ge=Ge.parentNode;if(Je===Ge)break;Je=Je.parentNode}return!Je&&pe.ownerDocument?pe.ownerDocument.documentElement:Je},Mu=pe=>{if(dt(pe)){const be=pe.nodeName.toLowerCase()==="a"&&!ae(pe,"href")&&ae(pe,"id");if(ae(pe,"name")||ae(pe,"data-mce-bookmark")||be)return!0}return!1},Nu=(pe,be,Je)=>{let Ge=0;if(Mu(pe))return!1;const Ft=pe.firstChild;if(Ft){const Yn=new Ks(Ft,pe),ls=N?N.getWhitespaceElements():{},pa=be||(N?N.getNonEmptyElements():null);let Ra=Ft;do{if(dt(Ra)){const Hv=Ra.getAttribute("data-mce-bogus");if(Hv){Ra=Yn.next(Hv==="all");continue}const wb=Ra.nodeName.toLowerCase();if(pa&&pa[wb]){if(wb==="br"){Ge++,Ra=Yn.next();continue}return!1}if(Mu(Ra))return!1}if(pc(Ra)||je(Ra)&&!Zl(Ra.data)&&(!(Je!=null&&Je.includeZwsp)||!rw(Ra.data))||je(Ra)&&Ra.parentNode&&ls[Ra.parentNode.nodeName]&&Zl(Ra.data))return!1;Ra=Yn.next()}while(Ra)}return Ge<=1},Lf=()=>e.createRange(),Ec=(pe,be,Je)=>{let Ge=Lf(),Ft,Yn;if(pe&&be&&pe.parentNode&&be.parentNode){const ls=pe.parentNode;return Ge.setStart(ls,Rh(pe)),Ge.setEnd(be.parentNode,Rh(be)),Ft=Ge.extractContents(),Ge=Lf(),Ge.setStart(be.parentNode,Rh(be)+1),Ge.setEnd(ls,Rh(pe)+1),Yn=Ge.extractContents(),ls.insertBefore(af(Vd,Ft),pe),Je?ls.insertBefore(Je,pe):ls.insertBefore(be,pe),ls.insertBefore(af(Vd,Yn),pe),ho(pe),Je||be}else return},Kg=(pe,be,Je,Ge)=>{if(Bn(pe)){let Ft=pe.length;const Yn=[];for(;Ft--;)Yn[Ft]=Kg(pe[Ft],be,Je,Ge);return Yn}else return n.collect&&(pe===e||pe===r)&&T.push([pe,be,Je,Ge]),I.bind(pe,be,Je,Ge||Vd)},Hf=(pe,be,Je)=>{if(Bn(pe)){let Ge=pe.length;const Ft=[];for(;Ge--;)Ft[Ge]=Hf(pe[Ge],be,Je);return Ft}else{if(T.length>0&&(pe===e||pe===r)){let Ge=T.length;for(;Ge--;){const[Ft,Yn,ls]=T[Ge];pe===Ft&&(!be||be===Yn)&&(!Je||Je===ls)&&I.unbind(Ft,Yn,ls)}}return I.unbind(pe,be,Je)}},Bu=(pe,be,Je)=>I.dispatch(pe,be,Je),Rp=(pe,be,Je)=>I.dispatch(pe,be,Je),LT=pe=>{if(pe&&dt(pe)){const be=pe.getAttribute("data-mce-contenteditable");return be&&be!=="inherit"?be:pe.contentEditable!=="inherit"?pe.contentEditable:null}else return null},Vd={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:T,styles:R,schema:N,events:I,isBlock:X,root:null,clone:he,getRoot:Fe,getViewPort:Et,getRect:bt,getSize:ot,getParent:kn,getParents:Rt,get:W,getNext:Bs,getPrev:ha,select:Ye,is:sn,add:_t,create:vt,createHTML:ln,createFragment:Co,remove:ho,setStyle:ve,getStyle:et,setStyles:_e,removeAllAttribs:un,setAttrib:ce,setAttribs:Zn,getAttrib:ae,getPos:Ue,parseStyle:Nt,serializeStyle:ps,addStyle:Do,loadCSS:ks,addClass:cs,removeClass:Ar,hasClass:li,toggleClass:$s,show:uc,hide:Ld,isHidden:ii,uniqueId:qg,setHTML:Vn,getOuterHTML:Dp,setOuterHTML:Ki,decode:Ke,encode:Jt,insertAfter:Hd,replace:Lr,rename:Ru,findCommonAncestor:Am,run:Tt,getAttribs:le,isEmpty:Nu,createRng:Lf,nodeIndex:Rh,split:Ec,bind:Kg,unbind:Hf,fire:Rp,dispatch:Bu,getContentEditable:LT,getContentEditableParent:pe=>{const be=Fe();let Je=null;for(let Ge=pe;Ge&&Ge!==be&&(Je=LT(Ge),Je===null);Ge=Ge.parentNode);return Je},isEditable:pe=>{if(Oe(pe)){const be=dt(pe)?pe:pe.parentElement;return Oe(be)&&St(Y.fromDom(be))}else return!1},destroy:()=>{if(T.length>0){let pe=T.length;for(;pe--;){const[be,Je,Ge]=T[pe];I.unbind(be,Je,Ge)}}Qe(c,(pe,be)=>{y.unload(be),delete c[be]})},isChildOf:(pe,be)=>pe===be||be.contains(pe),dumpRng:pe=>"startContainer: "+pe.startContainer.nodeName+", startOffset: "+pe.startOffset+", endContainer: "+pe.endContainer.nodeName+", endOffset: "+pe.endOffset},Cb=Hb(R,n,Te(Vd));return Vd};Po.DOM=Po(document),Po.nodeIndex=Rh;const s_=Po.DOM,gw=0,my=1,Vb=2,ff=3;class vu{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=s_;let u;const f=()=>{c.remove(T),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},T=c.uniqueId();u=document.createElement("script"),u.id=T,u.type="text/javascript",u.src=Ve._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Vb}markDone(n){this.states[n]=Vb}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=gw),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,T)=>{No(o.scriptLoadedCallbacks,T).each(N=>{me(N,R=>R[y](T))}),delete o.scriptLoadedCallbacks[T]},c=y=>{const T=Ct(y,N=>N.status==="rejected");return T.length>0?Promise.reject(Ma(T,({reason:N})=>Bn(N)?N:[N])):Promise.resolve()},u=y=>Promise.allSettled(He(y,T=>o.states[T]===Vb?(r("resolve",T),Promise.resolve()):o.states[T]===ff?(r("reject",T),Promise.reject(T)):(o.states[T]=my,o.loadScript(T).then(()=>{o.states[T]=Vb,r("resolve",T);const N=o.queue;return N.length>0?(o.queue=[],u(N).then(c)):Promise.resolve()},()=>(o.states[T]=ff,r("reject",T),Promise.reject(T)))))),f=y=>(o.loading=!0,u(y).then(T=>{o.loading=!1;const N=o.queueLoadedCallbacks.shift();return L.from(N).each(Dn),c(T)})),b=Lu(n);return o.loading?new Promise((y,T)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(y,T)})}):f(b)}}vu.ScriptLoader=new vu;const $r=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},hw=e=>On(e)&&tn(e,"raw"),pw=e=>Bn(e)&&e.length>1,Mh={},zb=$r("en"),r_=()=>No(Mh,zb.get()),Oo={getData:()=>Qn(Mh,e=>({...e})),setCode:e=>{e&&zb.set(e)},getCode:()=>zb.get(),add:(e,n)=>{let o=Mh[e];o||(Mh[e]=o={}),Qe(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=r_().getOr({}),o=f=>oe(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return No(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(hw(e))return o(e.raw);if(pw(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,T)=>tn(f,T)?o(f[T]):y);return u(b)}return u(c(e))},isRtl:()=>r_().bind(e=>No(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>tn(Mh,e)},as=()=>{const e=[],n={},o={},r=[],c=(W,K)=>{const ae=Ct(r,le=>le.name===W&&le.state===K);me(ae,le=>le.resolve())},u=W=>tn(n,W),f=W=>tn(o,W),b=W=>{if(o[W])return o[W].instance},y=(W,K)=>{const ae=Oo.getCode(),le=","+(K||"")+",";!ae||K&&le.indexOf(","+ae+",")===-1||vu.ScriptLoader.add(n[W]+"/langs/"+ae+".js")},T=(W,K)=>{as.languageLoad!==!1&&(u(W)?y(W,K):X(W,"loaded").then(()=>y(W,K)))},N=(W,K)=>(e.push(K),o[W]={instance:K},c(W,"added"),K),R=W=>{delete n[W],delete o[W]},I=(W,K)=>ee(K)?ee(W)?{prefix:"",resource:K,suffix:""}:{prefix:W.prefix,resource:K,suffix:W.suffix}:K,G=(W,K)=>{if(n[W])return Promise.resolve();let ae=ee(K)?K:K.prefix+K.resource+K.suffix;ae.indexOf("/")!==0&&ae.indexOf("://")===-1&&(ae=as.baseURL+"/"+ae),n[W]=ae.substring(0,ae.lastIndexOf("/"));const le=()=>(c(W,"loaded"),Promise.resolve());return o[W]?le():vu.ScriptLoader.add(ae).then(le)},X=(W,K="added")=>K==="added"&&f(W)||K==="loaded"&&u(W)?Promise.resolve():new Promise(ae=>{r.push({name:W,state:K,resolve:ae})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:T,add:N,remove:R,createUrl:I,load:G,waitFor:X}};as.languageLoad=!0,as.baseURL="",as.PluginManager=as(),as.ThemeManager=as(),as.ModelManager=as();const id=e=>{const n=$r(L.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(L.some(b))}}},Sl=e=>{const n=$r(L.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(L.some(setInterval(b,e)))}}},jl=()=>{const e=id(Ot);return{...e,on:o=>e.get().each(o)}},Wb=(e,n)=>{let o=null;return{cancel:()=>{q(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{q(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Nh=(e,n)=>{let o=null;const r=()=>{q(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Fc=Te("mce-annotation"),Ic=Te("data-mce-annotation"),cr=Te("data-mce-annotation-uid"),Bh=Te("data-mce-annotation-active"),hf=Te("data-mce-annotation-classes"),$h=Te("data-mce-annotation-attrs"),vw=e=>n=>uo(n,e),ud=(e,n)=>{const o=e.selection.getRng(),r=Y.fromDom(o.startContainer),c=Y.fromDom(e.getBody()),u=n.fold(()=>"."+Fc(),y=>`[${Ic()}="${y}"]`),f=xi(r,o.startOffset).getOr(r);return an(f,u,vw(c)).bind(y=>Yc(y,`${cr()}`).bind(T=>Yc(y,`${Ic()}`).map(N=>{const R=fy(e,T);return{uid:T,name:N,elements:R}})))},dd=e=>$o(e)&&Kd(e,Fc()),yw=(e,n)=>Ci(e,"data-mce-bogus")||mh(e,'[data-mce-bogus="all"]',vw(n)),fy=(e,n)=>{const o=Y.fromDom(e.getBody()),r=Wr(o,`[${cr()}="${n}"]`);return Ct(r,c=>!yw(c,o))},Cw=(e,n)=>{const o=Y.fromDom(e.getBody()),r=Wr(o,`[${Ic()}="${n}"]`),c={};return me(r,u=>{if(!yw(u,o)){const f=pr(u,cr()),b=No(c,f).getOr([]);c[f]=b.concat([u])}}),c},a_=(e,n)=>{const o=$r({}),r=()=>({listeners:[],previous:jl()}),c=(R,I)=>{u(R,G=>(I(G),G))},u=(R,I)=>{const G=o.get(),X=No(G,R).getOrThunk(r),W=I(X);G[R]=W,o.set(G)},f=(R,I,G)=>{c(R,X=>{me(X.listeners,W=>W(!0,R,{uid:I,nodes:He(G,K=>K.dom)}))})},b=R=>{c(R,I=>{me(I.listeners,G=>G(!1,R))})},y=(R,I)=>{me(fy(e,R),G=>{I?Ss(G,Bh(),"true"):ao(G,Bh())})},T=Nh(()=>{const R=Mo(n.getNames());me(R,I=>{u(I,G=>{const X=G.previous.get();return ud(e,L.some(I)).fold(()=>{X.each(W=>{b(I),G.previous.clear(),y(W,!1)})},({uid:W,name:K,elements:ae})=>{qc(X,W)||(X.each(le=>y(le,!1)),f(K,W,ae),G.previous.set(W),y(W,!0))}),{previous:G.previous,listeners:G.listeners}})})},30);return e.on("remove",()=>{T.cancel()}),e.on("NodeChange",()=>{T.throttle()}),{addListener:(R,I)=>{u(R,G=>({previous:G.previous,listeners:G.listeners.concat([I])}))}}},c_=(e,n)=>{const o=Ic(),r=u=>L.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(cr(),null),u.attr(Ic(),null),u.attr(Bh(),null);const y=L.from(u.attr($h())).map(I=>I.split(",")).getOr([]),T=L.from(u.attr(hf())).map(I=>I.split(",")).getOr([]);me(y,I=>u.attr(I,null));const N=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],R=Dm(N,[Fc()].concat(T));u.attr("class",R.length>0?R.join(" "):null),u.attr(hf(),null),u.attr($h(),null)};e.serializer.addTempAttr(Bh()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},ww=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>No(e,c).map(u=>u.settings),getNames:()=>bs(e)}};let Sw=0;const n1=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return Sw++,e+"_"+r+Sw+String(o)},l_=(e,n)=>{me(n,o=>{bl(e,o)})},xw=(e,n)=>{me(n,o=>{Jc(e,o)})},gy=(e,n)=>Y.fromDom(e.dom.cloneNode(n)),Ph=e=>gy(e,!1),o1=e=>gy(e,!0),Xs=(e,n)=>{const o=Y.fromTag(n),r=qd(e);return ta(o,r),o},Zb=(e,n)=>{const o=Xs(e,n);Mc(e,o);const r=br(e);return Lo(o,r),no(e),o},hy=(e,n,o=ke)=>{const r=new Ks(e,n),c=u=>{let f;do f=r[u]();while(f&&!je(f)&&!o(f));return L.from(f).filter(je)};return{current:()=>L.from(r.current()).filter(je),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},lm=(e,n)=>{const o=n||(f=>e.isBlock(f)||ds(f)||co(f)),r=(f,b,y,T)=>{if(je(f)){const N=T(f,b,f.data);if(N!==-1)return L.some({container:f,offset:N})}return y().bind(N=>r(N.container,N.offset,y,T))};return{backwards:(f,b,y,T)=>{const N=hy(f,T??e.getRoot(),o);return r(f,b,()=>N.prev().map(R=>({container:R,offset:R.length})),y).getOrNull()},forwards:(f,b,y,T)=>{const N=hy(f,T??e.getRoot(),o);return r(f,b,()=>N.next().map(R=>({container:R,offset:0})),y).getOrNull()}}},pf=Math.round,Sr=e=>e?{left:pf(e.left),top:pf(e.top),bottom:pf(e.bottom),right:pf(e.right),width:pf(e.width),height:pf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Gl=(e,n)=>(e=Sr(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Fh=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,py=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Ih=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:py(n.top-e.bottom,e,n)},s1=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:py(n.bottom-e.top,e,n),Ew=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Tw=e=>Eo(e,(n,o)=>n.fold(()=>L.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return L.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),L.none()),md=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},jb=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),lr=(e,n,o)=>Math.min(Math.max(e,n),o),ol=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Di=(e,n)=>{if(dt(e)&&e.hasChildNodes()){const o=e.childNodes,r=lr(n,0,o.length-1);return o[r]}else return e},_w=(e,n)=>{if(!(n<0&&dt(e)&&e.hasChildNodes()))return Di(e,n)},kw=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Aw=e=>ee(e)&&e.charCodeAt(0)>=768&&kw.test(e),ug=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},Ow=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},bf=dt,by=Es,Dw=Ym("display","block table"),Rw=Ym("float","left right"),r1=Ow(bf,by,Tn(Rw)),i_=Tn(Ym("white-space","pre pre-line pre-wrap")),Lh=je,dg=ds,vy=Po.nodeIndex,a1=_w,Hh=e=>e?e.createRange():Po.DOM.createRng(),yy=e=>ee(e)&&/[\r\n\t ]/.test(e),Cy=e=>!!e.setStart&&!!e.setEnd,Mw=e=>{const n=e.startContainer,o=e.startOffset;if(yy(e.toString())&&i_(n.parentNode)&&je(n)){const r=n.data;if(yy(r[o-1])||yy(r[o+1]))return!0}return!1},fd=e=>{const n=e.ownerDocument,o=Hh(n),r=n.createTextNode(Ce),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Sr(o.getBoundingClientRect());return c.removeChild(r),u},Vh=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&je(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),_n(u)}else return null},gd=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,_n=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Sr(r[0]):o=Sr(e.getBoundingClientRect()),!Cy(e)&&dg(e)&&gd(o)?fd(e):gd(o)&&Cy(e)&&(n=Vh(e))!==null&&n!==void 0?n:o},ua=(e,n)=>{const o=Gl(e,n);return o.width=1,o.right=o.left+1,o},vf=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&Fh(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=Hh(f.ownerDocument);if(b<f.data.length){if(Aw(f.data[b]))return;if(Aw(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!Mw(y))){o(ua(_n(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),Mw(y)||o(ua(_n(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),Mw(y)||o(ua(_n(y),!0)))},c=e.container(),u=e.offset();if(Lh(c))return r(c,u),n;if(bf(c))if(e.isAtEnd()){const f=a1(c,u);Lh(f)&&r(f,f.data.length),r1(f)&&!dg(f)&&o(ua(_n(f),!1))}else{const f=a1(c,u);if(Lh(f)&&r(f,0),r1(f)&&e.isAtEnd())return o(ua(_n(f),!1)),n;const b=a1(e.container(),e.offset()-1);r1(b)&&!dg(b)&&(Dw(b)||Dw(f)||!r1(f))&&o(ua(_n(b),!1)),r1(f)&&o(ua(_n(f),!0))}return n},we=(e,n,o)=>{const r=()=>(Lh(e),n===0),c=()=>Lh(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const N=Hh(e.ownerDocument);return N.setStart(e,n),N.setEnd(e,n),N},f=()=>(o||(o=vf(we(e,n))),o),b=()=>f().length>0,y=N=>N&&e===N.container()&&n===N.offset(),T=N=>a1(e,N?n-1:n);return{container:Te(e),offset:Te(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:T}};we.fromRangeStart=e=>we(e.startContainer,e.startOffset),we.fromRangeEnd=e=>we(e.endContainer,e.endOffset),we.after=e=>we(e.parentNode,vy(e)+1),we.before=e=>we(e.parentNode,vy(e)),we.isAbove=(e,n)=>ea(In(n.getClientRects()),Na(e.getClientRects()),Ih).getOr(!1),we.isBelow=(e,n)=>ea(Na(n.getClientRects()),In(e.getClientRects()),s1).getOr(!1),we.isAtStart=e=>e?e.isAtStart():!1,we.isAtEnd=e=>e?e.isAtEnd():!1,we.isTextPosition=e=>e?je(e.container()):!1,we.isElementPosition=e=>!we.isTextPosition(e);const Ho=(e,n)=>{je(n)&&n.data.length===0&&e.remove(n)},Nw=(e,n,o)=>{n.insertNode(o),Ho(e,o.previousSibling),Ho(e,o.nextSibling)},Bw=(e,n,o)=>{const r=L.from(o.firstChild),c=L.from(o.lastChild);n.insertNode(o),r.each(u=>Ho(e,u.previousSibling)),c.each(u=>Ho(e,u.nextSibling))},jr=(e,n,o)=>{ed(o)?Bw(e,n,o):Nw(e,n,o)},oc=je,Gb=Bc,wy=Po.nodeIndex,$w=e=>{const n=e.parentNode;return Gb(n)?$w(n):n},zh=e=>e?fc(e.childNodes,(n,o)=>(Gb(o)&&o.nodeName!=="BR"?n=n.concat(zh(o)):n.push(o),n),[]):[],Sy=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&oc(o);)n+=o.data.length;return n},im=e=>n=>e===n,qb=e=>{let n,o;n=zh($w(e)),o=vs(n,im(e),e),n=n.slice(0,o+1);const r=fc(n,(c,u,f)=>(oc(u)&&oc(n[f-1])&&c++,c),0);return n=eu(n,el([e.nodeName])),o=vs(n,im(e),e),o-r},Kb=e=>(oc(e)?"text()":e.nodeName.toLowerCase())+"["+qb(e)+"]",xy=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},Ey=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(oc(r))u=Sy(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(Kb(r));let f=xy(e,r);return f=eu(f,Tn(Bc)),o=o.concat(Rr(f,b=>Kb(b))),o.reverse().join("/")+","+u},Pw=(e,n,o)=>{let r=zh(e);return r=eu(r,(c,u)=>!oc(c)||!oc(r[u-1])),r=eu(r,el([n])),r[o]},Uh=(e,n)=>{let o=e,r=0;for(;oc(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!oc(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return oc(e)&&n>e.data.length&&(n=e.data.length),we(e,n)},Lc=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=fc(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),Pw(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!oc(u)&&u.parentNode){let f;return c==="after"?f=wy(u)+1:f=wy(u),we(u.parentNode,f)}return Uh(u,parseInt(c,10))},Ty=co,Xo=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&je(c);c=c.previousSibling)r+=e(c.data).length;return r},Fw=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(je(u))b.push(o?Xo(n,u,f):f);else{let T=0;const N=u.childNodes;f>=N.length&&N.length&&(T=1,f=Math.max(0,N.length-1)),b.push(e.nodeIndex(N[f],o)+T)}for(let T=u;T&&T!==y;T=T.parentNode)b.push(e.nodeIndex(T,o));return b},yf=(e,n,o,r)=>{const c=n.dom,u=Fw(c,e,o,r,!0),f=n.isForward(),b=sd(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=Fw(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},Xb=(e,n,o)=>{let r=0;return Ve.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},_y=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(dt(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},c1=e=>(_y(e,!0),_y(e,!1),e),Wh=(e,n)=>{if(dt(e)&&(e=Di(e,n),Ty(e)))return e;if(mo(e)){je(e)&&Vt(e)&&(e=e.parentNode);let o=e.previousSibling;if(Ty(o)||(o=e.nextSibling,Ty(o)))return o}},ky=e=>Wh(e.startContainer,e.startOffset)||Wh(e.endContainer,e.endOffset),Ay=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Ty(r)){const f=r.nodeName;return{name:f,index:Xb(o.dom,f,r)}}const u=ky(c);if(u){const f=u.tagName;return{name:f,index:Xb(o.dom,f,u)}}return yf(e,o,n,c)},u_=e=>{const n=e.getRng();return{start:Ey(e.dom.getRoot(),we.fromRangeStart(n)),end:Ey(e.dom.getRoot(),we.fromRangeEnd(n)),forward:e.isForward()}},Iw=e=>({rng:e.getRng(),forward:e.isForward()}),Gr=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},xr=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:Xb(o,b,f)};const T=c1(r.cloneRange());if(!u){T.collapse(!1);const R=Gr(o,c+"_end",n);jr(o,T,R)}r=c1(r),r.collapse(!0);const N=Gr(o,c+"_start",n);return jr(o,r,N),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},Hc=(e,n,o=!1)=>n===2?Ay(ye,o,e):n===3?u_(e):n?Iw(e):xr(e,!1),sc=Be(Ay,ht,!0),Cs=e=>{const n=u=>u(e),o=Te(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:De,isError:ke,map:u=>rc.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>L.some(e)};return c},Ys=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:ke,isError:De,map:n,mapError:r=>rc.error(r(e)),bind:n,exists:ke,forall:De,getOr:ht,or:ht,getOrThunk:Gn,orThunk:Gn,getOrDie:ko(String(e)),each:Ot,toOptional:L.none};return o},rc={value:Cs,error:Ys,fromOption:(e,n)=>e.fold(()=>Ys(n),Cs)},yu={generate:e=>{if(!Bn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return me(e,(r,c)=>{const u=bs(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Bn(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const T=y.length;if(T!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+T);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[c].apply(null,y)},match:R=>{const I=bs(R);if(n.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+I.join(","));if(!gr(n,X=>Me(I,X)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+n.join(", "));return R[f].apply(null,y)},log:R=>{console.log(R,{constructors:n,constructor:f,params:y})}}}}),o}};yu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Hw=e=>{const n=[],o=[];return me(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},Vw=e=>e.type==="inline-command"||e.type==="inline-format",Oy=e=>e.type==="block-command"||e.type==="block-format",Dy=e=>{const n=r=>rc.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(Bn(e.format)){if(!gr(e.format,ee))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(ee(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return rc.value(c(f))}else return e.cmd!==void 0?ee(e.cmd)?rc.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!On(e))return n("Raw pattern is not an object");if(!ee(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ee(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?ee(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):rc.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},Yb=e=>Ct(e,Oy),m_=e=>Ct(e,Vw),f_=(e,n)=>({inlinePatterns:m_(e),blockPatterns:Yb(e),dynamicPatternsLookup:n}),zw=e=>{const n=Hw(He(e,Dy));return me(n.errors,o=>console.error(o.message,o.pattern)),n.values},g_=e=>n=>{const o=e(n);return zw(o)},l1=jc().deviceType,h_=l1.isTouch(),p_=Po.DOM,b_=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Eo(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[hi(u)]=hi(f),o},{})},i1=e=>Ut(e,RegExp),ft=e=>n=>n.options.get(e),Xe=e=>ee(e)||On(e),Uw=(e,n="")=>o=>{const r=ee(o);if(r)if(o.indexOf("=")!==-1){const c=b_(o);return{value:No(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},da=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:Uw(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Uw(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ee(o)&&po(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Me(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>mn(o)?{valid:!0,value:o}:ee(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ee(o)||jn(o,ee);return r?ee(o)?{value:He(o.split(","),hi),valid:r}:Bn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:n0(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ee(o)||jn(o,ee);return r?{value:Bn(o)?o:He(o.split(","),hi),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=mn(o)||ee(o);return r?o===!1||l1.isiPhone()||l1.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!h_}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ee(o)||oe(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ee(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Xe}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Xe}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Xe}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ee(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>jn(o,On)||o===!1?{value:zw(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>oe(o)?{value:g_(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>jn(o,i1)?{value:o,valid:!0}:i1(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Me(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Me(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Oo.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:p_.getAttrib(e.getElement(),"placeholder")})})},v_=ft("iframe_attrs"),Ww=ft("doctype"),Zw=ft("document_base_url"),Vc=ft("body_id"),jw=ft("body_class"),Ry=ft("content_security_policy"),ql=ft("br_in_pre"),Va=ft("forced_root_block"),hd=ft("forced_root_block_attrs"),pd=ft("newline_behavior"),Ri=ft("br_newline_selector"),u1=ft("no_newline_selector"),sl=ft("keep_styles"),y_=ft("end_container_on_empty_block"),My=ft("automatic_uploads"),Jb=ft("images_reuse_filename"),Gw=ft("images_replace_blob_uris"),Ny=ft("icons"),By=ft("icons_url"),C_=ft("images_upload_url"),qw=ft("images_upload_base_path"),w_=ft("images_upload_credentials"),S_=ft("images_upload_handler"),x_=ft("content_css_cors"),$y=ft("referrer_policy"),Kw=ft("language"),Py=ft("language_url"),Xw=ft("indent_use_margin"),Yw=ft("indentation"),E_=ft("content_css"),Qb=ft("content_style"),Jw=ft("font_css"),T_=ft("directionality"),__=ft("inline_boundaries_selector"),Qw=ft("object_resizing"),k_=ft("resize_img_proportional"),e0=ft("placeholder"),Fy=ft("event_root"),Mi=ft("service_message"),Fo=ft("theme"),eS=ft("theme_url"),za=ft("model"),Iy=ft("model_url"),um=ft("inline_boundaries"),qr=ft("formats"),t0=ft("preview_styles"),tS=ft("format_empty_lines"),A_=ft("format_noneditable_selector"),nS=ft("custom_ui_selector"),n0=ft("inline"),O_=ft("hidden_input"),D_=ft("submit_patch"),R_=ft("add_form_submit_trigger"),M_=ft("add_unload_trigger"),d1=ft("custom_undo_redo_levels"),oS=ft("disable_nodechange"),N_=ft("readonly"),mg=ft("editable_root"),sS=ft("content_css_cors"),o0=ft("plugins"),rS=ft("external_plugins"),B_=ft("block_unsupported_drop"),Zh=ft("visual"),s0=ft("visual_table_class"),aS=ft("visual_anchor_class"),$_=ft("iframe_aria_text"),P_=ft("setup"),jh=ft("init_instance_callback"),r0=ft("urlconverter_callback"),a0=ft("auto_focus"),Ly=ft("browser_spellcheck"),cS=ft("protect"),bd=ft("paste_block_drop"),fg=ft("paste_data_images"),lS=ft("paste_preprocess"),dm=ft("paste_postprocess"),gg=ft("newdocument_content"),m1=ft("paste_webkit_styles"),Hy=ft("paste_remove_styles_if_webkit"),iS=ft("paste_merge_formats"),F_=ft("smart_paste"),uS=ft("paste_as_text"),I_=ft("paste_tab_spaces"),L_=ft("allow_html_data_urls"),dS=ft("text_patterns"),H_=ft("text_patterns_lookup"),c0=ft("noneditable_class"),V_=ft("editable_class"),z_=ft("noneditable_regexp"),U_=ft("preserve_cdata"),mS=ft("highlight_on_focus"),f1=ft("xss_sanitization"),fS=ft("init_content_sync"),W_=e=>e.options.isSet("text_patterns_lookup"),Z_=e=>Ve.explode(e.options.get("font_size_style_values")),j_=e=>Ve.explode(e.options.get("font_size_classes")),l0=e=>e.options.get("encoding")==="xml",gS=e=>Ve.explode(e.options.get("images_file_types")),g1=ft("table_tab_navigation"),h1=ft("details_initial_state"),hS=ft("details_serialized_state"),Vy=dt,zy=je,Uy=e=>{const n=e.parentNode;n&&n.removeChild(e)},Wy=e=>{const n=ye(e);return{count:e.length-n.length,text:n}},pS=e=>{let n;for(;(n=e.data.lastIndexOf(U))!==-1;)e.deleteData(n,1)},Gh=(e,n)=>(hg(e),n),bS=(e,n)=>{const o=Wy(e.data.substr(0,n.offset())),r=Wy(e.data.substr(n.offset()));return(o.text+r.text).length>0?(pS(e),we(e,n.offset()-o.count)):n},G_=(e,n)=>{const o=n.container(),r=Fu(hr(o.childNodes),e).map(c=>c<n.offset()?we(o,n.offset()-1):n).getOr(n);return hg(e),r},Zy=(e,n)=>zy(e)&&n.container()===e?bS(e,n):Gh(e,n),q_=(e,n)=>n.container()===e.parentNode?G_(e,n):Gh(e,n),K_=(e,n)=>we.isTextPosition(n)?Zy(e,n):q_(e,n),hg=e=>{Vy(e)&&mo(e)&&(eo(e)?e.removeAttribute("data-mce-caret"):Uy(e)),zy(e)&&(pS(e),e.data.length===0&&Uy(e))},jy=co,p1=Hs,X_=sa,Y_="*[contentEditable=false],video,audio,embed,object",Gy=(e,n,o)=>{const r=Gl(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},vS=e=>{var n,o;const r=Wr(Y.fromDom(e),Y_);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(nm(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,tc(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},ac=(e,n,o,r)=>{const c=jl();let u,f;const b=Va(e),y=e.dom,T=(W,K)=>{let ae;if(N(),X_(K))return null;if(o(K)){const le=mu(b,K,W),ce=Gy(n,K,W);y.setStyle(le,"top",ce.top),f=le;const he=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(he,{...ce}),y.add(n,he),c.set({caret:he,element:K,before:W}),W&&y.addClass(he,"mce-visual-caret-before"),R(),ae=K.ownerDocument.createRange(),ae.setStart(le,0),ae.setEnd(le,0)}else return f=ns(K,W),ae=K.ownerDocument.createRange(),vd(f.nextSibling)?(ae.setStart(f,0),ae.setEnd(f,0)):(ae.setStart(f,1),ae.setEnd(f,1)),ae;return ae},N=()=>{vS(n),f&&(hg(f),f=null),c.on(W=>{y.remove(W.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=setInterval(()=>{c.on(W=>{r()?y.toggleClass(W.caret,"mce-visual-caret-hidden"):y.addClass(W.caret,"mce-visual-caret-hidden")})},500)};return{show:T,hide:N,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(W=>{const K=Gy(n,W.element,W.before);y.setStyles(W.caret,{...K})})},destroy:()=>clearInterval(u)}},J_=()=>Kn.browser.isFirefox(),vd=e=>jy(e)||p1(e),mm=e=>(vd(e)||hs(e)&&J_())&&jm(Y.fromDom(e)).exists(St),yS=bo,qy=co,Q_=Hs,CS=Ym("display","block table table-cell table-caption list-item"),i0=mo,b1=Vt,Cc=dt,ek=je,v1=Es,pg=e=>e>0,Cf=e=>e<0,u0=(e,n)=>{let o;for(;o=e(n);)if(!b1(o))return o;return null},qh=(e,n,o,r,c)=>{const u=new Ks(e,r),f=qy(e)||b1(e);let b;if(Cf(n)){if(f&&(b=u0(u.prev.bind(u),!0),o(b)))return b;for(;b=u0(u.prev.bind(u),c);)if(o(b))return b}if(pg(n)){if(f&&(b=u0(u.next.bind(u),!0),o(b)))return b;for(;b=u0(u.next.bind(u),c);)if(o(b))return b}return null},d0=(e,n)=>{const o=c=>yS(c.dom),r=c=>c.dom===n;return M(Y.fromDom(e),o,r).map(c=>c.dom).getOr(n)},bg=(e,n)=>{for(;e&&e!==n;){if(CS(e))return e;e=e.parentNode}return null},Kl=(e,n,o)=>bg(e.container(),o)===bg(n.container(),o),wS=(e,n)=>{if(!n)return L.none();const o=n.container(),r=n.offset();return Cc(o)?L.from(o.childNodes[r+e]):L.none()},Ky=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},y1=(e,n,o)=>bg(n,e)===bg(o,e),C1=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&i0(u)&&(u=u[r]),qy(u)||Q_(u)){if(y1(n,u,c))return u;break}if(v1(u))break;c=c.parentNode}return null},Kh=Be(Ky,!0),wf=Be(Ky,!1),m0=(e,n,o)=>{let r;const c=Be(C1,!0,n),u=Be(C1,!1,n),f=o.startContainer,b=o.startOffset;if(Vt(f)){const y=ek(f)?f.parentNode:f,T=y.getAttribute("data-mce-caret");if(T==="before"&&(r=y.nextSibling,mm(r)))return Kh(r);if(T==="after"&&(r=y.previousSibling,mm(r)))return wf(r)}if(!o.collapsed)return o;if(je(f)){if(i0(f)){if(e===1){if(r=u(f),r)return Kh(r);if(r=c(f),r)return wf(r)}if(e===-1){if(r=c(f),r)return wf(r);if(r=u(f),r)return Kh(r)}return o}if(nm(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Kh(r):o;if(tc(f)&&b<=1)return e===-1&&(r=c(f),r)?wf(r):o;if(b===f.data.length)return r=u(f),r?Kh(r):o;if(b===0)return r=c(f),r?wf(r):o}return o},f0=(e,n)=>wS(e?0:-1,n).filter(qy),Xh=(e,n,o)=>{const r=m0(e,n,o);return e===-1?we.fromRangeStart(r):we.fromRangeEnd(r)},Ni=e=>L.from(e.getNode()).map(Y.fromDom),Yh=e=>L.from(e.getNode(!0)).map(Y.fromDom),g0=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Jh=(e,n)=>{const o=Kl(e,n);return!o&&ds(e.getNode())?!0:o};var ma;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(ma||(ma={}));const tk=co,Bi=je,w1=dt,h0=ds,vg=Es,p0=sw,b0=nf,nk=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},Xy=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Yy=(e,n)=>{if(pg(e)){if(vg(n.previousSibling)&&!Bi(n.previousSibling))return we.before(n);if(Bi(n))return we(n,0)}if(Cf(e)){if(vg(n.nextSibling)&&!Bi(n.nextSibling))return we.after(n);if(Bi(n))return we(n,n.data.length)}return Cf(e)?h0(n)?we.before(n):we.after(n):we.before(n)},v0=(e,n)=>{const o=n.nextSibling;return o&&vg(o)?Bi(o)?we(o,0):we.before(o):y0(ma.Forwards,we.after(n),e)},y0=(e,n,o)=>{let r,c,u,f;if(!w1(o)||!n)return null;if(n.isEqual(we.after(o))&&o.lastChild){if(f=we.after(o.lastChild),Cf(e)&&vg(o.lastChild)&&w1(o.lastChild))return h0(o.lastChild)?we.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(Bi(b)){if(Cf(e)&&y>0)return we(b,--y);if(pg(e)&&y<b.length)return we(b,++y);r=b}else{if(Cf(e)&&y>0&&(c=Xy(b,y-1),vg(c)))return!p0(c)&&(u=qh(c,e,b0,c),u)?Bi(u)?we(u,u.data.length):we.after(u):Bi(c)?we(c,c.data.length):we.before(c);if(pg(e)&&y<b.childNodes.length&&(c=Xy(b,y),vg(c)))return h0(c)?v0(o,c):!p0(c)&&(u=qh(c,e,b0,c),u)?Bi(u)?we(u,0):we.before(u):Bi(c)?we(c,0):we.after(c);r=c||f.getNode()}if(r&&(pg(e)&&f.isAtEnd()||Cf(e)&&f.isAtStart())&&(r=qh(r,e,De,o,!0),b0(r,o)))return Yy(e,r);c=r&&qh(r,e,b0,o);const T=ya(Ct(nk(b,o),tk));return T&&(!c||!T.contains(c))?(pg(e)?f=we.after(T):f=we.before(T),f):c?Yy(e,c):null},Cu=e=>({next:n=>y0(ma.Forwards,n,e),prev:n=>y0(ma.Backwards,n,e)}),ok=(e,n,o)=>{const r=e?we.before(o):we.after(o);return wu(e,n,r)},sk=e=>ds(e)?we.before(e):we.after(e),SS=e=>we.isTextPosition(e)?e.offset()===0:Es(e.getNode()),Qh=e=>{if(we.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Es(e.getNode(!0))},rk=(e,n)=>!we.isTextPosition(e)&&!we.isTextPosition(n)&&e.getNode()===n.getNode(!0),MD=e=>!we.isTextPosition(e)&&ds(e.getNode()),ND=(e,n,o)=>e?!rk(n,o)&&!MD(n)&&Qh(n)&&SS(o):!rk(o,n)&&SS(n)&&Qh(o),wu=(e,n,o)=>{const r=Cu(n);return L.from(e?r.next(o):r.prev(o))},yd=(e,n,o)=>wu(e,n,o).bind(r=>Kl(o,r,n)&&ND(e,o,r)?wu(e,n,r):L.some(r)),Ua=(e,n,o,r)=>yd(e,n,o).bind(c=>r(c)?Ua(e,n,c,r):L.some(c)),Sf=(e,n)=>{const o=e?n.firstChild:n.lastChild;return je(o)?L.some(we(o,e?0:o.data.length)):o?Es(o)?L.some(e?we.before(o):sk(o)):ok(e,n,o):L.none()},fa=Be(wu,!0),Kr=Be(wu,!1),Oa=Be(Sf,!0),xl=Be(Sf,!1),C0="_mce_caret",$i=e=>dt(e)&&e.id===C0,yg=(e,n)=>{let o=n;for(;o&&o!==e;){if($i(o))return o;o=o.parentNode}return null},ak=e=>ee(e.start),Cd=e=>tn(e,"rng"),S1=e=>tn(e,"id"),w0=e=>tn(e,"name"),wd=e=>Ve.isArray(e.start),x1=e=>!w0(e)&&mn(e.forward)?e.forward:!0,S0=(e,n)=>(dt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Cg=(e,n)=>{const o=L.from(Lc(e.getRoot(),n.start)),r=L.from(Lc(e.getRoot(),n.end));return ea(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:x1(n)}})},Jy=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(U);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},xS=e=>!e.hasChildNodes(),Qy=(e,n)=>xl(e).fold(ke,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),fm=(e,n,o)=>xS(n)&&yg(e,n)?(Jy(n,o),!0):!1,ES=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const T=f.childNodes;if(fm(u,f,r))return!0;if(c[y]>T.length-1)return fm(u,f,r)?!0:Qy(f,r);f=T[c[y]]}je(f)&&(b=Math.min(c[0],f.data.length)),dt(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},Pi=e=>je(e)&&e.data.length>0,e2=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Pi(r.nextSibling)?(f=r.nextSibling,b=0):Pi(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Pi(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,T=r.nextSibling;Ve.each(Ve.grep(r.childNodes),R=>{je(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let N;for(;N=e.get(o.id+"_"+n);)e.remove(N,!0);if(je(T)&&je(y)&&!Kn.browser.isOpera()){const R=y.data.length;y.appendData(T.data),e.remove(T),f=y,b=R}}return L.some(we(f,b))}else return L.none()},t2=(e,n)=>{const o=e.createRng();return ES(e,!0,n,o)&&ES(e,!1,n,o)?L.some({range:o,forward:x1(n)}):L.none()},ck=(e,n)=>{const o=e2(e,"start",n),r=e2(e,"end",n);return ea(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(S0(e,c.container()),c.offset()),f.setEnd(S0(e,u.container()),u.offset()),{range:f,forward:x1(n)}})},BD=(e,n)=>L.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),lk=(e,n)=>{const o=e.dom;if(n){if(wd(n))return t2(o,n);if(ak(n))return Cg(o,n);if(S1(n))return ck(o,n);if(w0(n))return BD(o,n);if(Cd(n))return L.some({range:n.rng,forward:x1(n)})}return L.none()},ik=(e,n,o)=>Hc(e,n,o),TS=(e,n)=>{lk(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Xl=e=>dt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",x0=(e=>n=>e===n)(Ce),ep=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,E1=e=>!ep(e)&&!x0(e)&&!ec(e),uk=e=>({value:$D(e)}),$D=e=>zu(e,"#").toUpperCase(),T1=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Wn=e=>{const n=T1(e.red)+T1(e.green)+T1(e.blue);return uk(n)},gm=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,tp=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,E0=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),_S=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return E0(c,u,f,b)},T0=e=>{if(e==="transparent")return L.some(E0(0,0,0,0));const n=gm.exec(e);if(n!==null)return L.some(_S(n[1],n[2],n[3],"1"));const o=tp.exec(e);return o!==null?L.some(_S(o[1],o[2],o[3],o[4])):L.none()},_1=e=>T0(e).map(Wn).map(n=>"#"+n.value).getOr(e),k1=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},o2=e=>Ma(e,n=>{const o=ol(n);return o?[Y.fromDom(o)]:[]}),s2=e=>k1(e).length>1,kS=e=>Ct(o2(e),xs),PD=e=>Wr(e,"td[data-mce-selected],th[data-mce-selected]"),_0=(e,n)=>{const o=PD(n);return o.length>0?o:kS(e)},wg=e=>_0(k1(e.selection.getSel()),Y.fromDom(e.getBody())),k0=(e,n)=>Wt(e,"table",n),dk=e=>{const n=e.startContainer,o=e.startOffset;return je(n)?o===0?L.some(Y.fromDom(n)):L.none():L.from(n.childNodes[o]).map(Y.fromDom)},r2=e=>{const n=e.endContainer,o=e.endOffset;return je(n)?o===n.data.length?L.some(Y.fromDom(n)):L.none():L.from(n.childNodes[o-1]).map(Y.fromDom)},a2=e=>qu(e).fold(Te([e]),n=>[e].concat(a2(n))),hm=e=>Ya(e).fold(Te([e]),n=>Io(n)==="br"?Qc(n).map(o=>[e].concat(hm(o))).getOr([]):[e].concat(hm(n))),A0=(e,n)=>ea(dk(n),r2(n),(o,r)=>{const c=Jo(a2(e),Be(uo,o)),u=Jo(hm(e),Be(uo,r));return c.isSome()&&u.isSome()}).getOr(!1),np=(e,n,o,r)=>{const c=o,u=new Ks(o,c),f=Ko(e.schema.getMoveCaretBeforeOnEnterElements(),(y,T)=>!Me(["td","th","table"],T.toLowerCase()));let b=o;do{if(je(b)&&Ve.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},Sd=e=>{const n=e.selection.getSel();return Oe(n)&&n.rangeCount>0},c2=(e,n)=>{const o=wg(e);o.length>0?me(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},AS=(e,n,o)=>{const r=xr(e,n);o(r),e.moveToBookmark(r)},A1=e=>Os(e==null?void 0:e.nodeType),l2=e=>dt(e)&&!Xl(e)&&!$i(e)&&!Bc(e),O0=(e,n)=>{if(l2(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Sg=e=>e.isContentEditable===!0,OS=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=co(u);AS(r,!0,()=>{n()}),f&&co(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&mk(c,r)},mk=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!O0(e,b)&&dt(u)){const y=u.childNodes,T=e.getRoot();let N;if(f<y.length){const R=y[f];N=new Ks(R,(o=e.getParent(R,e.isBlock))!==null&&o!==void 0?o:T)}else{const R=y[y.length-1];N=new Ks(R,(r=e.getParent(R,e.isBlock))!==null&&r!==void 0?r:T),N.next(!0)}for(let R=N.current();R;R=N.next()){if(e.getContentEditable(R)==="false")return;if(je(R)&&!u2(R)){c.setStart(R,0),n.setRng(c);return}}}},DS=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(dt(e)||!u2(e))return e}},i2=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||sf(e,n),op=(e,n,o)=>e.schema.isValidChild(n,o),u2=(e,n=!1)=>{if(Oe(e)&&je(e)){const o=n?e.data.replace(/ /g," "):e.data;return Zl(o)}else return!1},sp=e=>Oe(e)&&je(e)&&e.length===0,fk=(e,n)=>{const o="[data-mce-cef-wrappable]",r=A_(e),c=wa(r)?o:`${o},${r}`;return Ta(Y.fromDom(n),c)},ut=(e,n)=>{const o=e.dom;return l2(n)&&o.getContentEditable(n)==="false"&&fk(e,n)&&o.select('[contenteditable="true"]',n).length===0},Ts=(e,n)=>oe(e)?e(n):(Oe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),rp=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),Js=(e,n)=>{if(It(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=_1(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},rl=(e,n,o)=>{const r=e.getStyle(n,o);return Js(r,o)},d2=(e,n)=>{let o;return e.getParent(n,r=>dt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},xg=(e,n,o)=>e.getParents(n,o,e.getRoot()),O1=(e,n,o)=>{const r=e.formatter.get(n);return Oe(r)&&Ie(r,o)},D0=(e,n)=>O1(e,n,r=>{const c=u=>oe(u)||u.length>1&&u.charAt(0)==="%";return Ie(["styles","attributes"],u=>No(r,u).exists(f=>{const b=Bn(f)?f:Tc(f);return Ie(b,c)}))}),RS=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Ko(u,(f,b)=>Ie(r,y=>y===b));return O1(e,n,u=>{const f=c(u);return O1(e,o,b=>{const y=c(b);return Qi(f,y)})})},Yl=e=>Vr(e,"block"),gk=e=>Yl(e)&&e.wrapper===!0,MS=e=>Yl(e)&&e.wrapper!==!0,El=e=>Vr(e,"selector"),Er=e=>Vr(e,"inline"),NS=e=>El(e)&&Er(e)&&qc(No(e,"mixed"),!0),R0=e=>El(e)&&e.expand!==!1&&!Er(e),xd=Xl,D1=xg,R1=u2,M0=i2,m2=e=>ds(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,BS=(e,n)=>{let o=n;for(;o;){if(dt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Eg=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},pm=(e,n,o)=>Eg(e,n,o,r=>x0(r)||ep(r)),hk=(e,n,o)=>Eg(e,n,o,E1),f2=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(N,R,I)=>{const G=lm(e),X=c?G.backwards:G.forwards;return L.from(X(N,R,(W,K)=>xd(W.parentNode)?-1:(f=W,I(c,W,K)),b))};return y(o,r,pm).bind(N=>u?y(N.container,N.offset+(c?-1:0),hk):L.some(N)).orThunk(()=>f?L.some({container:f,offset:c?0:f.length}):L.none())},N0=(e,n,o,r,c)=>{const u=r[c];je(r)&&wa(r.data)&&u&&(r=u);const f=D1(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const T=n[y];if(!(Oe(T.collapsed)&&T.collapsed!==o.collapsed)&&El(T)&&e.is(f[b],T.selector))return f[b]}return r},$S=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(Yl(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(je(o)?o.parentNode:o,T=>T!==f&&M0(e.schema,T),y)}if(u&&Yl(b)&&b.wrapper&&(u=D1(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!rp(u,"br")););return u||o},g2=(e,n,o,r)=>{const c=o.parentNode;return Oe(o[r])?!1:c===n||It(c)||e.isBlock(c)?!0:g2(e,n,c,r)},Tg=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(je(o)&&!R1(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const T=je(y)&&!g2(e,b,y,f);if(!xd(y)&&!m2(y)&&!R1(y,T))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},PS=e=>xd(e.parentNode)||xd(e),Ed=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return dt(c)&&c.hasChildNodes()&&(c=Di(c,u),je(c)&&(u=0)),dt(f)&&f.hasChildNodes()&&(f=Di(f,n.collapsed?b:b-1),je(f)&&(b=f.data.length)),c=BS(e,c),f=BS(e,f),PS(c)&&(c=xd(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,je(c)&&(u=n.collapsed?c.length:0)),PS(f)&&(f=xd(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,je(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(f2(e,e.getRoot(),c,u,!0,r).each(({container:R,offset:I})=>{c=R,u=I}),f2(e,e.getRoot(),f,b,!1,r).each(({container:R,offset:I})=>{f=R,b=I})),(Er(y)||y.block_expand)&&((!Er(y)||!je(c)||u===0)&&(c=Tg(e,o,c,u,!0)),(!Er(y)||!je(f)||b===f.data.length)&&(f=Tg(e,o,f,b,!1))),R0(y)&&(c=N0(e,o,n,c,"previousSibling"),f=N0(e,o,n,f,"nextSibling")),(Yl(y)||El(y))&&(c=$S(e,o,c,"previousSibling"),f=$S(e,o,f,"nextSibling"),Yl(y)&&(e.isBlock(c)||(c=Tg(e,o,c,u,!0)),e.isBlock(f)||(f=Tg(e,o,f,b,!1)))),dt(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),dt(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},Qs=(e,n,o)=>{var r;const c=n.startOffset,u=Di(n.startContainer,c),f=n.endOffset,b=Di(n.endContainer,f-1),y=K=>{const ae=K[0];je(ae)&&ae===u&&c>=ae.data.length&&K.splice(0,1);const le=K[K.length-1];return f===0&&K.length>0&&le===b&&je(le)&&K.splice(K.length-1,1),K},T=(K,ae,le)=>{const ce=[];for(;K&&K!==le;K=K[ae])ce.push(K);return ce},N=(K,ae)=>e.getParent(K,le=>le.parentNode===ae,ae),R=(K,ae,le)=>{const ce=le?"nextSibling":"previousSibling";for(let he=K,Fe=he.parentNode;he&&he!==ae;he=Fe){Fe=he.parentNode;const Et=T(he===K?he:he[ce],ce);Et.length&&(le||Et.reverse(),o(y(Et)))}};if(u===b)return o(y([u]));const I=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return R(u,I,!0);if(e.isChildOf(b,u))return R(b,I);const G=N(u,I)||u,X=N(b,I)||b;R(u,G,!0);const W=T(G===u?G:G.nextSibling,"nextSibling",X===b?X.nextSibling:X);W.length&&o(y(W)),R(b,X)},Fi=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Jl=e=>sr(e)&&fh(e)===U,B0=(e,n,o,r)=>Pa(n).fold(()=>"skipping",c=>r==="br"||Jl(n)?"valid":dd(n)?"existing":$i(n.dom)?"caret":Ie(Fi,u=>Ta(n,u))?"valid-block":!op(e,o,r)||!op(e,Io(c),o)?"invalid-child":"valid"),Su=(e,n)=>{const o=Ed(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},FS=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;bl(e,Fc()),Ss(e,`${cr()}`,f),Ss(e,`${Ic()}`,r);const{attributes:y={},classes:T=[]}=c(f,b);if(ta(e,y),l_(e,T),u){T.length>0&&Ss(e,`${hf()}`,T.join(","));const N=bs(y);N.length>0&&Ss(e,`${$h()}`,N.join(","))}},h2=e=>{Jc(e,Fc()),ao(e,`${cr()}`),ao(e,`${Ic()}`),ao(e,`${Bh()}`);const n=Yc(e,`${$h()}`).map(r=>r.split(",")).getOr([]),o=Yc(e,`${hf()}`).map(r=>r.split(",")).getOr([]);me(n,r=>ao(e,r)),xw(e,o),ao(e,`${hf()}`),ao(e,`${$h()}`)},$0=(e,n,o,r,c)=>{const u=Y.fromTag("span",e);return FS(u,n,o,r,c,!1),u},p2=(e,n,o,r,c,u)=>{const f=[],b=$0(e.getDoc(),o,u,r,c),y=jl(),T=()=>{y.clear()},N=()=>y.get().getOrThunk(()=>{const X=Ph(b);return f.push(X),y.set(X),X}),R=X=>{me(X,I)},I=X=>{switch(B0(e,X,"span",Io(X))){case"invalid-child":{T();const K=br(X);R(K),T();break}case"valid-block":{T(),FS(X,o,u,r,c,!0);break}case"valid":{const K=N();_b(X,K);break}}},G=X=>{const W=He(X,Y.fromDom);R(W)};return Qs(e.dom,n,X=>{T(),G(X)}),f},pk=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=wg(e).length>0,b=n1("mce-annotation");if(u.collapsed&&!f&&Su(e,u),c.getRng().collapsed&&!f){const y=$0(e.getDoc(),b,r,n,o.decorate);xn(y,Ce),c.getRng().insertNode(y.dom),c.select(y.dom)}else AS(c,!1,()=>{c2(e,y=>{p2(e,y,b,n,o.decorate,r)})})})},P0=e=>{const n=ww();c_(e,n);const o=a_(e,n),r=Fl("span"),c=u=>{me(u,f=>{r(f)?Fa(f):h2(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{pk(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{ud(e,L.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();Qe(Cw(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Cw(e,u);return Qn(f,b=>He(b,y=>y.dom))}}},M1=e=>({getBookmark:Be(ik,e),moveToBookmark:Be(TS,e)});M1.isBookmarkNode=Xl;const IS=(e,n,o)=>o.collapsed?!1:Ie(o.getClientRects(),r=>Ew(r,e,n)),b2=(e,n)=>e.dispatch("PreProcess",n),v2=(e,n)=>e.dispatch("PostProcess",n),Vo=e=>{e.dispatch("remove")},bm=e=>{e.dispatch("detach")},LS=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},HS=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},VS=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},y2=e=>{e.dispatch("PreInit")},zS=e=>{e.dispatch("PostRender")},C2=e=>{e.dispatch("Init")},US=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},WS=(e,n,o)=>{e.dispatch(n,o)},w2=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},ZS=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},S2=(e,n)=>e.dispatch("BeforeSetContent",n),jS=(e,n)=>e.dispatch("SetContent",n),_g=(e,n)=>e.dispatch("BeforeGetContent",n),ap=(e,n)=>e.dispatch("GetContent",n),x2=(e,n)=>{e.dispatch("AutocompleterStart",n)},bk=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},ir=e=>{e.dispatch("AutocompleterEnd")},Tr=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),cp=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),N1=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),vk=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),gt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||gt.metaKeyPressed(e),metaKeyPressed:e=>Kn.os.isMacOS()||Kn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},En="data-mce-selected",yk="table,img,figure.image,hr,video,span.mce-preview-object,details",E2=Math.abs,lp=Math.round,T2={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Ck=e=>e.type==="longpress"||e.type.indexOf("touch")===0,F0=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,T,N,R,I,G,X,W,K,ae,le,ce,he,Fe,Et;const Ue=Ke=>Oe(Ke)&&(kb(Ke)||o.is(Ke,"figure.image")),ve=Ke=>Hs(Ke)||o.hasClass(Ke,"mce-preview-object"),_e=(Ke,Jt)=>{if(Ck(Ke)){const ln=Ke.touches[0];return Ue(Ke.target)&&!IS(ln.clientX,ln.clientY,Jt)}else return Ue(Ke.target)&&!IS(Ke.clientX,Ke.clientY,Jt)},et=Ke=>{const Jt=Ke.target;_e(Ke,n.selection.getRng())&&!Ke.isDefaultPrevented()&&n.selection.select(Jt)},ot=Ke=>o.hasClass(Ke,"mce-preview-object")&&Oe(Ke.firstElementChild)?[Ke,Ke.firstElementChild]:o.is(Ke,"figure.image")?[Ke.querySelector("img")]:[Ke],bt=Ke=>{const Jt=Qw(n);return!Jt||Ke.getAttribute("data-mce-resize")==="false"||Ke===n.getBody()?!1:o.hasClass(Ke,"mce-preview-object")&&Oe(Ke.firstElementChild)?Ta(Y.fromDom(Ke.firstElementChild),Jt):Ta(Y.fromDom(Ke),Jt)},sn=Ke=>ve(Ke)?o.create("img",{src:Kn.transparentSrc}):Ke.cloneNode(!0),Rt=(Ke,Jt,ln)=>{if(Oe(ln)){const Co=ot(Ke);me(Co,ho=>{ho.style[Jt]||!n.schema.isValid(ho.nodeName.toLowerCase(),Jt)?o.setStyle(ho,Jt,ln):o.setAttrib(ho,Jt,""+ln)})}},kn=(Ke,Jt,ln)=>{Rt(Ke,"width",Jt),Rt(Ke,"height",ln)},go=Ke=>{let Jt,ln,Co,ho,un;Jt=Ke.screenX-R,ln=Ke.screenY-I,ce=Jt*T[2]+W,he=ln*T[3]+K,ce=ce<5?5:ce,he=he<5?5:he,(Ue(f)||ve(f))&&k_(n)!==!1?Co=!gt.modifierPressed(Ke):Co=gt.modifierPressed(Ke),Co&&(E2(Jt)>E2(ln)?(he=lp(ce*ae),ce=lp(he/ae)):(ce=lp(he/ae),he=lp(ce*ae))),kn(b,ce,he),ho=T.startPos.x+Jt,un=T.startPos.y+ln,ho=ho>0?ho:0,un=un>0?un:0,o.setStyles(y,{left:ho,top:un,display:"block"}),y.innerHTML=ce+" &times; "+he,T[2]<0&&b.clientWidth<=ce&&o.setStyle(b,"left",G+(W-ce)),T[3]<0&&b.clientHeight<=he&&o.setStyle(b,"top",X+(K-he)),Jt=u.scrollWidth-Fe,ln=u.scrollHeight-Et,Jt+ln!==0&&o.setStyles(y,{left:ho-Jt,top:un-ln}),le||(HS(n,f,W,K,"corner-"+T.name),le=!0)},Bs=()=>{const Ke=le;le=!1,Ke&&(Rt(f,"width",ce),Rt(f,"height",he)),o.unbind(r,"mousemove",go),o.unbind(r,"mouseup",Bs),c!==r&&(o.unbind(c,"mousemove",go),o.unbind(c,"mouseup",Bs)),o.remove(b),o.remove(y),o.remove(N),ha(f),Ke&&(VS(n,f,ce,he,"corner-"+T.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},ha=Ke=>{Vn();const Jt=o.getPos(Ke,u),ln=Jt.x,Co=Jt.y,ho=Ke.getBoundingClientRect(),un=ho.width||ho.right-ho.left,Nt=ho.height||ho.bottom-ho.top;f!==Ke&&(Ye(),f=Ke,ce=he=0);const ps=n.dispatch("ObjectSelected",{target:Ke});bt(Ke)&&!ps.isDefaultPrevented()?Qe(T2,(Do,ks)=>{const $s=Ar=>{const li=ot(f)[0];R=Ar.screenX,I=Ar.screenY,W=li.clientWidth,K=li.clientHeight,ae=K/W,T=Do,T.name=ks,T.startPos={x:un*Do[0]+ln,y:Nt*Do[1]+Co},Fe=u.scrollWidth,Et=u.scrollHeight,N=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(N,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=sn(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:ln,top:Co,margin:0}),kn(b,un,Nt),b.removeAttribute(En),u.appendChild(b),o.bind(r,"mousemove",go),o.bind(r,"mouseup",Bs),c!==r&&(o.bind(c,"mousemove",go),o.bind(c,"mouseup",Bs)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},W+" &times; "+K)};let cs=o.get("mceResizeHandle"+ks);cs&&o.remove(cs),cs=o.add(u,"div",{id:"mceResizeHandle"+ks,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ks+"-resize; margin:0; padding:0"}),o.bind(cs,"mousedown",Ar=>{Ar.stopImmediatePropagation(),Ar.preventDefault(),$s(Ar)}),Do.elm=cs,o.setStyles(cs,{left:un*Do[0]+ln-cs.offsetWidth/2,top:Nt*Do[1]+Co-cs.offsetHeight/2})}):Ye(!1)},kr=Wb(ha,0),Ye=(Ke=!0)=>{kr.cancel(),Vn(),f&&Ke&&f.removeAttribute(En),Qe(T2,(Jt,ln)=>{const Co=o.get("mceResizeHandle"+ln);Co&&(o.unbind(Co),o.remove(Co))})},Tt=(Ke,Jt)=>o.isChildOf(Ke,Jt),Zn=Ke=>{if(le||n.removed||n.composing)return;const Jt=Ke.type==="mousedown"?Ke.target:e.getNode(),ln=an(Y.fromDom(Jt),yk).map(ho=>ho.dom).filter(ho=>o.isEditable(ho.parentElement)).getOrUndefined(),Co=Oe(ln)?o.getAttrib(ln,En,"1"):"1";if(me(o.select(`img[${En}],hr[${En}]`),ho=>{ho.removeAttribute(En)}),Oe(ln)&&Tt(ln,u)&&n.hasFocus()){_t();const ho=e.getStart(!0);if(Tt(ho,ln)&&Tt(e.getEnd(!0),ln)){o.setAttrib(ln,En,Co),kr.throttle(ln);return}}Ye()},Vn=()=>{Qe(T2,Ke=>{Ke.elm&&(o.unbind(Ke.elm),delete Ke.elm)})},_t=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{_t(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Zn),n.on("keyup compositionend",Ke=>{f&&f.nodeName==="TABLE"&&Zn(Ke)}),n.on("hide blur",Ye),n.on("contextmenu longpress",et,!0)}),n.on("remove",Vn),{isResizable:bt,showResizeRect:ha,hideResizeRect:Ye,updateResizeRect:Zn,destroy:()=>{kr.cancel(),f=b=N=null}}},wk=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Sk=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},GS=(e,n,o)=>{const r=e.document.createRange();return wk(r,n),Sk(r,o),r},B1=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},kg=yu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),_2=(e,n,o)=>n(Y.fromDom(o.startContainer),o.startOffset,Y.fromDom(o.endContainer),o.endOffset),FD=(e,n)=>n.match({domRange:o=>({ltr:Te(o),rtl:L.none}),relative:(o,r)=>({ltr:fi(()=>GS(e,o,r)),rtl:fi(()=>L.some(GS(e,r,o)))}),exact:(o,r,c,u)=>({ltr:fi(()=>B1(e,o,r,c,u)),rtl:fi(()=>L.some(B1(e,c,u,o,r)))})}),qS=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>kg.rtl(Y.fromDom(c.endContainer),c.endOffset,Y.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>_2(e,kg.ltr,o)):_2(e,kg.ltr,o)},lF=(e,n)=>{const o=FD(e,n);return qS(e,o)};kg.ltr,kg.rtl;const KS={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},LD=(e,n,o)=>{var r,c;return L.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return L.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),L.some(f)})},zt=(e,n,o)=>{var r,c;return L.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},xk=(()=>document.caretPositionFromPoint?LD:document.caretRangeFromPoint?zt:L.none)(),HD=(e,n,o)=>{const r=Y.fromDom(e.document);return xk(r,n,o).map(c=>KS.create(Y.fromDom(c.startContainer),c.startOffset,Y.fromDom(c.endContainer),c.endOffset))},k2=yu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$1=(e,n,o,r)=>e.fold(n,o,r),VD=e=>e.fold(ht,ht,ht),I0=k2.before,Ek=k2.on,Tk=k2.after,xu={before:I0,on:Ek,after:Tk,cata:$1,getStart:VD},L0=yu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),A2=e=>L0.exact(e.start,e.soffset,e.finish,e.foffset),O2=e=>e.match({domRange:n=>Y.fromDom(n.startContainer),relative:(n,o)=>xu.getStart(n),exact:(n,o,r,c)=>n}),D2=L0.domRange,R2=L0.relative,_k=L0.exact,kk=e=>{const n=O2(e);return Gu(n)},H0=KS.create,Ag={domRange:D2,relative:R2,exact:_k,exactFromRange:A2,getWin:kk,range:H0},V0=(e,n)=>{const o=Io(e);return o==="input"?xu.after(e):Me(["br","img"],o)?n===0?xu.before(e):xu.after(e):xu.on(e,n)},to=(e,n)=>{const o=e.fold(xu.before,V0,xu.after),r=n.fold(xu.before,V0,xu.after);return Ag.relative(o,r)},XS=(e,n,o,r)=>{const c=V0(e,n),u=V0(o,r);return Ag.relative(c,u)},Td=e=>e.match({domRange:n=>{const o=Y.fromDom(n.startContainer),r=Y.fromDom(n.endContainer);return XS(o,n.startOffset,r,n.endOffset)},relative:to,exact:XS}),Ql=(e,n)=>{const r=(n||document).createDocumentFragment();return me(e,c=>{r.appendChild(c.dom)}),Y.fromDom(r)},z0=e=>{const n=Ag.getWin(e).dom,o=(c,u,f,b)=>B1(n,c,u,f,b),r=Td(e);return lF(n,r).match({ltr:o,rtl:o})},al=(e,n,o)=>HD(e,n,o),P1=(e,n,o)=>{const r=Gu(Y.fromDom(o));return al(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Og=(e,n)=>Oe(e)&&Oe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,U0=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Dg=(e,n,o)=>U0(e,n,o)!==null,zD=(e,n,o)=>Dg(e,n,r=>r.nodeName===o),Ak=(e,n)=>mo(e)&&!Dg(e,n,$i),Ok=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Ks(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(ds(u))return!0}return!1},UD=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},Xn=(e,n)=>{let o=n;for(;o&&o!==e;){if(co(o))return!0;o=o.parentNode}return!1},Tl=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,T;if(!b)return L.none();const N=e.getParent(b,e.isBlock)||u;if(r&&ds(c)&&n&&e.isEmpty(N))return L.some(we(b,e.nodeIndex(c)));const R=new Ks(c,N);for(;T=R[r?"prev":"next"]();){if(e.getContentEditableParent(T)==="false"||Ak(T,u))return L.none();if(je(T)&&T.data.length>0)return zD(T,u,"A")?L.none():L.some(we(T,r?T.data.length:0));if(e.isBlock(T)||f[T.nodeName.toLowerCase()])return L.none();y=T}return pc(y)?L.none():o&&y?L.some(we(y,0)):L.none()},Rg=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const T=dt(b)&&y===b.childNodes.length,N=e.schema.getNonEmptyElements();let R=o;if(mo(b))return L.none();if(dt(b)&&y>b.childNodes.length-1&&(R=!1),ef(b)&&(b=c,y=0),b===c){if(R&&(u=b.childNodes[y>0?y-1:0],u&&(mo(u)||N[u.nodeName]||hs(u))))return L.none();if(b.hasChildNodes()){if(y=Math.min(!R&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=je(b)&&T?b.data.length:0,!n&&b===c.lastChild&&hs(b)||Xn(c,b)||mo(b))return L.none();if(b.hasChildNodes()&&!hs(b)){u=b;const I=new Ks(b,c);do{if(co(u)||mo(u)){f=!1;break}if(je(u)&&u.data.length>0){y=R?0:u.data.length,b=u,f=!0;break}if(N[u.nodeName.toLowerCase()]&&!tf(u)){y=e.nodeIndex(u),b=u.parentNode,R||y++,f=!0;break}}while(u=R?I.next():I.prev())}}}return n&&(je(b)&&y===0&&Tl(e,T,n,!0,b).each(I=>{b=I.container(),y=I.offset(),f=!0}),dt(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&ds(u)&&!UD(u,"A")&&!Ok(e,u,!1)&&!Ok(e,u,!0)&&Tl(e,T,n,!0,u).each(I=>{b=I.container(),y=I.offset(),f=!0}))),R&&!n&&je(b)&&y===b.data.length&&Tl(e,T,n,!1,b).each(I=>{b=I.container(),y=I.offset(),f=!0}),f&&b?L.some(we(b,y)):L.none()},W0=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=we.fromRangeStart(n);return Rg(e,o,!0,r).each(u=>{(!o||!we.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Rg(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Og(n,r)?L.none():L.some(r)},xf=(e,n)=>e.splitText(n),Hn=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&je(n)){if(o>0&&o<n.data.length)if(r=xf(n,o),n=r.previousSibling,c>o){c=c-o;const u=xf(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(je(n)&&o>0&&o<n.data.length&&(n=xf(n,o),o=0),je(r)&&c>0&&c<r.data.length){const u=xf(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},vm=e=>({walk:(u,f)=>Qs(e,u,f),split:Hn,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=Ed(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>W0(e,u).fold(ke,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});vm.compareRanges=Og,vm.getCaretRangeFromPoint=P1,vm.getSelectedNode=ol,vm.getNode=Di;const M2=((e,n)=>{const o=(b,y)=>{if(!Os(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const T=b.dom;vr(T)&&(T.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const T=rr(b,e);return parseFloat(T)||0}return y},c=r,u=(b,y)=>Eo(y,(T,N)=>{const R=rr(b,N),I=R===void 0?0:parseInt(R,10);return isNaN(I)?T:T+I},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,T)=>{const N=u(b,T);return y>N?y-N:0}}})("height",e=>{const n=e.dom;return zl(e)?n.getBoundingClientRect().height:n.offsetHeight}),Rk=e=>M2.get(e),Mg=()=>Y.fromDom(document),Ef=(e,n)=>e.view(n).fold(Te([]),r=>{const c=e.owner(r),u=Ef(e,c);return[r].concat(u)}),YS=(e,n)=>{const o=n.owner(e);return Ef(n,o)};var h=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?L.none():L.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(Y.fromDom)},owner:e=>Vl(e)});const v=e=>{const n=Mg(),o=Ul(n),r=YS(e,h),c=Vp(e),u=fr(r,(f,b)=>{const y=Vp(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return Qd(u.left+c.left+o.left,u.top+c.top+o.top)},x=e=>Io(e)==="textarea",A=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),$=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},z=(e,n)=>{const o=br(e);if(o.length===0||x(e))return{element:e,offset:n};if(n<o.length&&!x(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return x(r)?{element:e,offset:n}:Io(r)==="img"?{element:r,offset:1}:sr(r)?{element:r,offset:fh(r).length}:{element:r,offset:br(r).length}}},j=(e,n)=>{const o=iu(e),r=Rk(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Q=(e,n)=>{const o=z(e,n),r=Y.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+U+"</span>");return Qa(o.element,r),j(r,()=>no(r))},de=e=>j(Y.fromDom(e),Ot),ze=(e,n,o,r)=>{st(e,(c,u)=>nt(e,n,o,r),o)},lt=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(A(e,u))return;const f=Ul(n).top;o(n,f,r,c),$(e,u)},nt=(e,n,o,r)=>{const c=Y.fromDom(e.getBody()),u=Y.fromDom(e.getDoc());gs(c);const f=Q(Y.fromDom(o.startContainer),o.startOffset);lt(e,u,n,f,r),f.cleanup()},Ne=(e,n,o,r)=>{const c=Y.fromDom(e.getDoc());lt(e,c,o,de(n),r)},st=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(Y.fromDom(r),Y.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},Ae=(e,n)=>e.element.dom.scrollIntoView({block:n?"start":"end"}),yt=(e,n,o,r)=>{const c=n+e,u=o.pos.top,f=o.bottom,b=f-u>=n;u<e?Ae(o,r!==!1):u>c?Ae(o,b?r!==!1:r===!0):f>c&&!b&&Ae(o,r===!0)},Yt=(e,n,o,r)=>{const c=Gu(e).dom.innerHeight;yt(n,c,o,r)},vn=(e,n,o,r)=>{const c=Gu(e).dom.innerHeight;yt(n,c,o,r);const u=v(o.element),f=zp(window);u.top<f.y?Qu(o.element,r!==!1):u.top>f.bottom&&Qu(o.element,r===!0)},Yo=(e,n,o)=>ze(e,Yt,n,o),ga=(e,n,o)=>Ne(e,n,Yt,o),zs=(e,n,o)=>ze(e,vn,n,o),cl=(e,n,o)=>Ne(e,n,vn,o),Ng=(e,n,o)=>{(e.inline?ga:cl)(e,n,o)},Tf=(e,n,o)=>{(e.inline?Yo:zs)(e,n,o)},Z0=e=>e.dom.focus(),F1=e=>{const n=vl(e).dom;return e.dom===n.activeElement},vo=(e=Mg())=>L.from(e.dom.activeElement).map(Y.fromDom),wc=e=>vo(vl(e)).filter(n=>e.dom.contains(n.dom)),cc=(e,n)=>{const o=sr(n)?fh(n).length:br(n).length+1;return e>o?o:e<0?0:e},Ii=e=>Ag.range(e.start,cc(e.soffset,e.start),e.finish,cc(e.foffset,e.finish)),_l=(e,n)=>!Bt(n.dom)&&(hc(e,n)||uo(e,n)),Bg=e=>n=>_l(e,n.start)&&_l(e,n.finish),Sc=e=>e.inline||Kn.browser.isFirefox(),N2=e=>Ag.range(Y.fromDom(e.startContainer),e.startOffset,Y.fromDom(e.endContainer),e.endOffset),I1=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?L.none():L.from(n.getRangeAt(0))).map(N2)},ei=e=>{const n=Gu(e);return I1(n.dom).filter(Bg(e))},Da=(e,n)=>L.from(n).filter(Bg(e)).map(Ii),Mk=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),L.some(n)}catch{return L.none()}},j0=e=>{const n=Sc(e)?ei(Y.fromDom(e.getBody())):L.none();e.bookmark=n.isSome()?n:e.bookmark},G0=e=>(e.bookmark?e.bookmark:L.none()).bind(o=>Da(Y.fromDom(e.getBody()),o)).bind(Mk),Nk=e=>{G0(e).each(n=>e.selection.setRng(n))},q0={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},Bk=(e,n)=>(Os(n)||(n=0),setTimeout(e,n)),L1=(e,n)=>(Os(n)||(n=0),setInterval(e,n)),Li={setEditorTimeout:(e,n,o)=>Bk(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=L1(()=>{e.removed?clearInterval(r):n()},o);return r}},ZD=e=>e.type==="nodechange"&&e.selectionChange,JS=(e,n)=>{const o=()=>{n.throttle()};Po.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Po.DOM.unbind(document,"mouseup",o)})},iF=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},uF=(e,n)=>{iF(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{ZD(o)||j0(e)})},$k=e=>{const n=Wb(()=>{j0(e)},0);e.on("init",()=>{e.inline&&JS(e,n),uF(e,n)}),e.on("remove",()=>{n.cancel()})};let K0;const QS=Po.DOM,jD=e=>dt(e)&&q0.isEditorUIElement(e),ex=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},tx=(e,n)=>{const o=nS(e);return QS.getParent(n,c=>jD(c)||(o?e.dom.is(c,o):!1))!==null},Pk=e=>{try{const n=vl(Y.fromDom(e.getElement()));return vo(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},dF=(e,n)=>{const o=n.editor;$k(o);const r=(c,u)=>{if(mS(c)&&c.inline!==!0){const f=Y.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;ex(Pk(o))&&r(o,bl),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Li.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!ex(Pk(o))||c!==o)&&r(o,Jc),!tx(o,Pk(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),K0||(K0=c=>{const u=e.activeEditor;u&&Xu(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!tx(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},QS.bind(document,"focusin",K0))},mF=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&K0&&(QS.unbind(document,"focusin",K0),K0=null)},nx=e=>{e.on("AddEditor",Be(dF,e)),e.on("RemoveEditor",Be(mF,e))},GD=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),qD=e=>e.collapsed?L.from(Di(e.startContainer,e.startOffset)).map(Y.fromDom):L.none(),KD=(e,n)=>qD(n).bind(o=>ca(o)?L.some(o):hc(e,o)?L.none():L.some(e)),Fk=(e,n)=>{KD(Y.fromDom(e.getBody()),n).bind(o=>Oa(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},Ik=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},fF=e=>F1(e)||wc(e).isSome(),gF=e=>Oe(e.iframeElement)&&F1(Y.fromDom(e.iframeElement)),hF=e=>{const n=e.getBody();return n&&fF(Y.fromDom(n))},pF=e=>{const n=vl(Y.fromDom(e.getElement()));return vo(n).filter(o=>!ex(o.dom)&&tx(e,o.dom)).isSome()},H1=e=>e.inline?hF(e):gF(e),bF=e=>H1(e)||pF(e),vF=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Oe(e.bookmark)&&!H1(e)&&G0(e).each(u=>{e.selection.setRng(u),r=u});const c=GD(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){Ik(c),Fk(e,r),Lk(e);return}e.inline||(Kn.browser.isOpera()||Ik(o),e.getWin().focus()),(Kn.browser.isFirefox()||e.inline)&&(Ik(o),Fk(e,r)),Lk(e)},Lk=e=>e.editorManager.setActive(e),yF=(e,n)=>{e.removed||(n?Lk(e):vF(e))},XD=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return L.from(u).map(Y.fromDom).map(b=>!r||!n.collapsed?xi(b,c(b,f)).getOr(b):b).bind(b=>$o(b)?L.some(b):Pa(b).filter($o)).map(b=>b.dom).getOr(e)},YD=(e,n,o=!1)=>XD(e,n,!0,o,(r,c)=>Math.min(_a(r),c)),B2=(e,n,o=!1)=>XD(e,n,!1,o,(r,c)=>c>0?c-1:c),Hk=(e,n)=>{const o=e;for(;e&&je(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},JD=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),je(o)&&je(r)&&(o.length===c?o=Hk(o.nextSibling,!0):o=o.parentNode,u===0?r=Hk(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=je(f)?f.parentNode:f;return dt(b)?b:e},CF=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||YD(u,n,n.collapsed),e.isBlock),b=e.getParent(r||B2(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y;const T=new Ks(f,u);for(;(y=T.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},wF=(e,n,o)=>L.from(n).bind(r=>L.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(np(e,f,r,!0),np(e,f,r,!1)),f})),Vk=(e,n)=>He(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),SF=e=>Io(e)==="img"?1:$c(e).fold(()=>br(e).length,n=>n.length),xF=e=>$c(e).filter(n=>n.trim().length!==0||n.indexOf(Ce)>-1).isSome(),EF=e=>Rc(e)&&pr(e,"contenteditable")==="false",QD=["img","br"],eR=e=>xF(e)||Me(QD,Io(e))||EF(e),tR=e=>Ze(e,eR),nR=e=>TF(e,eR),TF=(e,n)=>{const o=r=>{const c=br(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return L.some(f);const b=o(f);if(b.isSome())return b}return L.none()};return o(e)},oR="[data-mce-autocompleter]",_F=(e,n)=>{if(sR(Y.fromDom(e.getBody())).isNone()){const o=Y.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Rs(o,Y.fromDom(n.extractContents())),n.insertNode(o.dom),Pa(o).each(r=>r.dom.normalize()),nR(o).map(r=>{e.selection.setCursorLocation(r.dom,SF(r))})}},kF=e=>an(e,oR),sR=e=>rn(e,oR),AF=(e,n)=>sR(n).each(o=>{const r=e.selection.getBookmark();Fa(o),e.selection.moveToBookmark(r)}),OF={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ox=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},DF=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Zl(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},rR=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class kl{static create(n,o){const r=new kl(n,OF[n]||1);return o&&Qe(o,(c,u)=>{r.attr(u,c)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ee(n))return Oe(n)&&Qe(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new kl(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=ox(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=ox(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(rR(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||rR(f))return!1}if(f.type===8||f.type===3&&!DF(f)||f.type===3&&f.parent&&o[f.parent.name]&&Zl((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=ox(f,u));return!0}walk(n){return ox(this,null,n)}}const RF=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),aR=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&RF(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},MF=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const y=r.exec(n);if(y===null)return b;if(y[1]==="!"){jo(y[2],"--")?b=aR(n,!1,y.index+3):b=aR(n,!0,y.index+1);break}else{c.lastIndex=r.lastIndex;const T=c.exec(n);if(q(T)||T.index!==r.lastIndex)continue;y[1]==="/"?f-=1:tn(u,y[2])||(f+=1),b=r.lastIndex+T[0].length;break}}return b},NF=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},cR=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=NF(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,y=f[0].length;let T;u[f[1]]?T=b:T=MF(r,c,b),c=c.substring(0,b-y)+c.substring(T),o.lastIndex=b-y}return ye(c)},BF=cR,lR=e=>{const n=Wr(e,"[data-mce-bogus]");me(n,o=>{pr(o,"data-mce-bogus")==="all"?no(o):aa(o)?(Qa(o,Y.fromText(uu)),no(o)):Fa(o)})},iR=e=>{const n=Wr(e,"input");me(n,o=>{ao(o,"name")})},Pt=(e,n)=>{const o=Va(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},uR=(e,n)=>{const o=e.getDoc(),r=vl(Y.fromDom(e.getBody())),c=Y.fromTag("div",o);Ss(c,"data-mce-bogus","all"),ah(c,{position:"fixed",left:"-9999999px",top:"0"}),xn(c,n.innerHTML),lR(c),iR(c);const u=Wv(r);Rs(u,c);const f=ye(c.dom.innerText);return no(c),f},dR=(e,n,o)=>{let r;return n.format==="raw"?r=Ve.trim(BF(e.serializer,o.innerHTML)):n.format==="text"?r=uR(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=Pt(e,e.serializer.serialize(o,n)),n.format!=="text"&&!ph(Y.fromDom(o))&&ee(r)?Ve.trim(r):r},$F=(e,n)=>L.from(e.getBody()).fold(Te(n.format==="tree"?new kl("body",11):""),o=>dR(e,n,o)),sx=Ve.makeMap,mR=e=>{const n=[];e=e||{};const o=e.indent,r=sx(e.indent_before||""),c=sx(e.indent_after||""),u=lf.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,T)=>{if(o&&r[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let N=0,R=y.length;N<R;N++){const I=y[N];n.push(" ",I.name,'="',u(I.value,!0),'"')}if(!T||f?n[n.length]=">":n[n.length]=" />",T&&o&&c[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},ip=(e={},n=df())=>{const o=mR(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var T;o.text((T=y.value)!==null&&T!==void 0?T:"",y.raw)},8:y=>{var T;o.comment((T=y.value)!==null&&T!==void 0?T:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var T;o.doctype((T=y.value)!==null&&T!==void 0?T:"")},4:y=>{var T;o.cdata((T=y.value)!==null&&T!==void 0?T:"")},11:y=>{let T=y;if(T=T.firstChild)do b(T);while(T=T.next)}};o.reset();const b=y=>{var T;const N=f[y.type];if(N)N(y);else{const R=y.name,I=R in n.getVoidElements();let G=y.attributes;if(u&&G&&G.length>1){const X=[];X.map={};const W=n.getElementRule(y.name);if(W){for(let K=0,ae=W.attributesOrder.length;K<ae;K++){const le=W.attributesOrder[K];if(le in G.map){const ce=G.map[le];X.map[le]=ce,X.push({name:le,value:ce})}}for(let K=0,ae=G.length;K<ae;K++){const le=G[K].name;if(!(le in X.map)){const ce=G.map[le];X.map[le]=ce,X.push({name:le,value:ce})}}G=X}}if(o.start(R,G,I),!I){let X=y.firstChild;if(X){(R==="pre"||R==="textarea")&&X.type===3&&((T=X.value)===null||T===void 0?void 0:T[0])===`
`&&o.text(`
`,!0);do b(X);while(X=X.next)}o.end(R)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},fR=new Set;me(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{fR.add(n)});const gR=["font","text-decoration","text-emphasis"],zk=(e,n)=>bs(e.parseStyle(e.getAttrib(n,"style"))),rx=e=>fR.has(e),hR=(e,n)=>gr(zk(e,n),o=>!rx(o)),xZ=e=>Ct(e,n=>Ie(gR,o=>jo(n,o))),PF=(e,n,o)=>{const r=zk(e,n),c=zk(e,o),u=f=>{var b,y;const T=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",N=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return po(T)&&po(N)&&T!==N};return Ie(r,f=>{const b=y=>Ie(y,T=>T===f);if(!b(c)&&b(gR)){const y=xZ(c);return Ie(y,u)}else return u(f)})},nn=(e,n,o)=>L.from(o.container()).filter(je).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),Uk=Be(nn,!0,ep),hn=Be(nn,!1,ep),pR=e=>{const n=e.container();return je(n)&&(n.data.length===0||ne(n.data)&&M1.isBookmarkNode(n.parentNode))},V1=(e,n)=>o=>wS(e?0:-1,o).filter(n).isSome(),FF=e=>kb(e)&&rr(Y.fromDom(e),"display")==="block",bR=e=>co(e)&&!Jm(e),EZ=V1(!0,FF),TZ=V1(!1,FF),$2=V1(!0,Hs),P2=V1(!1,Hs),Zt=V1(!0,hs),vR=V1(!1,hs),up=V1(!0,bR),dp=V1(!1,bR),F2=e=>e.slice(0,-1),yR=(e,n,o)=>hc(n,e)?F2(Xd(e,r=>o(r)||uo(r,n))):[],CR=(e,n)=>yR(e,n,ke),$g=(e,n)=>[e].concat(CR(e,n)),Wk=(e,n,o)=>Ua(e,n,o,pR),Zk=(e,n)=>Jo($g(Y.fromDom(n.container()),e),Ms),wR=(e,n,o)=>Wk(e,n.dom,o).forall(r=>Zk(n,o).fold(()=>!Kl(r,o,n.dom),c=>!Kl(r,o,n.dom)&&hc(c,Y.fromDom(r.container())))),IF=(e,n,o)=>Zk(n,o).fold(()=>Wk(e,n.dom,o).forall(r=>!Kl(r,o,n.dom)),r=>Wk(e,r.dom,o).isNone()),SR=Be(IF,!1),xR=Be(IF,!0),LF=Be(wR,!1),HF=Be(wR,!0),VF=e=>Ni(e).exists(aa),I2=(e,n,o)=>{const r=Ct($g(Y.fromDom(o.container()),n),Ms),c=In(r).getOr(n);return wu(e,c.dom,o).filter(VF)},jk=(e,n)=>Ni(n).exists(aa)||I2(!0,e,n).isSome(),yn=(e,n)=>Yh(n).exists(aa)||I2(!1,e,n).isSome(),ER=Be(I2,!1),ax=Be(I2,!0),Gk=e=>we.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),qk=(e,n)=>{const o=Ct($g(Y.fromDom(n.container()),e),Ms);return In(o).getOr(e)},Kk=(e,n)=>Gk(n)?hn(n):hn(n)||Kr(qk(e,n).dom,n).exists(hn),Xk=(e,n)=>Gk(n)?Uk(n):Uk(n)||fa(qk(e,n).dom,n).exists(Uk),TR=e=>Me(["pre","pre-wrap"],e),Yk=e=>Ni(e).bind(n=>V(n,$o)).exists(n=>TR(rr(n,"white-space"))),_R=(e,n)=>Kr(e.dom,n).isNone(),zF=(e,n)=>fa(e.dom,n).isNone(),UF=(e,n)=>_R(e,n)||zF(e,n)||SR(e,n)||xR(e,n)||yn(e,n)||jk(e,n),WF=e=>Oe(e)&&co(e)&&CS(e),kR=(e,n)=>o=>WF(new Ks(o,e)[n]()),ZF=(e,n)=>{const o=fa(e.dom,n).getOr(n),r=kR(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},jF=(e,n)=>{const o=Kr(e.dom,n).getOr(n),r=kR(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},AR=(e,n)=>Yk(n)?!1:UF(e,n)||Kk(e,n)||Xk(e,n),L2=(e,n)=>Yk(n)?!1:SR(e,n)||LF(e,n)||yn(e,n)||Kk(e,n)||jF(e,n),Jk=e=>{const n=e.container(),o=e.offset();return je(n)&&o<n.data.length?we(n,o+1):e},z1=(e,n)=>Yk(n)?!1:xR(e,n)||HF(e,n)||jk(e,n)||Xk(e,n)||ZF(e,n),Qk=(e,n)=>L2(e,n)||z1(e,Jk(n)),OR=(e,n)=>x0(e.charAt(n)),DR=(e,n)=>ep(e.charAt(n)),GF=e=>{const n=e.container();return je(n)&&es(n.data,Ce)},qF=e=>{const n=e.split("");return He(n,(o,r)=>x0(o)&&r>0&&r<n.length-1&&E1(n[r-1])&&E1(n[r+1])?" ":o).join("")},RR=(e,n,o)=>{const r=n.data,c=we(n,0);return!o&&OR(r,0)&&!Qk(e,c)?(n.data=" "+r.slice(1),!0):o&&DR(r,0)&&L2(e,c)?(n.data=Ce+r.slice(1),!0):!1},KF=e=>{const n=e.data,o=qF(n);return o!==n?(e.data=o,!0):!1},MR=(e,n,o)=>{const r=n.data,c=we(n,r.length-1);return!o&&OR(r,r.length-1)&&!Qk(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&DR(r,r.length-1)&&z1(e,c)?(n.data=r.slice(0,-1)+Ce,!0):!1},NR=(e,n)=>{const o=n.container();if(!je(o))return L.none();if(GF(n)){const r=RR(e,o,!1)||KF(o)||MR(e,o,!1);return Ln(r,n)}else if(Qk(e,n)){const r=RR(e,o,!0)||MR(e,o,!0);return Ln(r,n)}else return L.none()},XF=e=>{const n=Y.fromDom(e.getBody());e.selection.isCollapsed()&&NR(n,we.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},BR=(e,n,o)=>{if(o===0)return;const r=Y.fromDom(e),c=M(r,Ms).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&z1(c,we(e,e.data.length)),b=n===0&&L2(c,we(e,0));e.replaceData(n,o,Ns(u,4,b,f))},_f=(e,n)=>{const o=e.data.slice(n),r=o.length-Uu(o).length;BR(e,n,r)},e4=(e,n)=>{const o=e.data.slice(0,n),r=o.length-pi(o).length;BR(e,n-r,r)},cx=(e,n,o,r=!0)=>{const c=pi(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),no(Y.fromDom(f)),o&&_f(u,c),u},YF=(e,n)=>{const o=e.container(),r=e.offset();return!we.isTextPosition(e)&&o===n.parentNode&&r>we.before(n).offset()},JF=(e,n)=>YF(n,e)?we(n.container(),n.offset()-1):n,$R=e=>je(e)?we(e,0):we.before(e),PR=e=>je(e)?we(e,e.data.length):we.after(e),t4=e=>Es(e.previousSibling)?L.some(PR(e.previousSibling)):e.previousSibling?xl(e.previousSibling):L.none(),n4=e=>Es(e.nextSibling)?L.some($R(e.nextSibling)):e.nextSibling?Oa(e.nextSibling):L.none(),ll=(e,n)=>L.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Kr(e,we.before(o))).orThunk(()=>fa(e,we.after(n))),QF=(e,n)=>fa(e,we.after(n)).orThunk(()=>Kr(e,we.before(n))),eI=(e,n)=>t4(n).orThunk(()=>n4(n)).orThunk(()=>ll(e,n)),tI=(e,n)=>n4(n).orThunk(()=>t4(n)).orThunk(()=>QF(e,n)),nI=(e,n,o)=>e?tI(n,o):eI(n,o),oI=(e,n,o)=>nI(e,n,o).map(Be(JF,o)),mp=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},sI=e=>n=>n.dom===e,rI=(e,n)=>n&&tn(e.schema.getBlockElements(),Io(n)),ur=e=>{if(Cr(e)){const n=Y.fromHtml('<br data-mce-bogus="1">');return Ei(e),Rs(e,n),L.some(we.before(n.dom))}else return L.none()},lx=(e,n,o)=>{const r=Qc(e).filter(sr),c=lu(e).filter(sr);return no(e),Lm(r,c,n,(u,f,b)=>{const y=u.dom,T=f.dom,N=y.data.length;return cx(y,T,o),b.container()===T?we(y,N):b}).orThunk(()=>(o&&(r.each(u=>e4(u.dom,u.dom.length)),c.each(u=>_f(u.dom,0))),n))},_Z=(e,n)=>tn(e.schema.getTextInlineElements(),Io(n)),dr=(e,n,o,r=!0)=>{const c=oI(n,e.getBody(),o.dom),u=M(o,Be(rI,e),sI(e.getBody())),f=lx(o,c,_Z(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(ur).fold(()=>{r&&mp(e,n,f)},b=>{r&&mp(e,n,L.some(b))})},yo=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Eu=e=>yo.test(e),U1=(e,n)=>Ta(Y.fromDom(n),__(e))&&!sf(e.schema,n)&&e.dom.isEditable(n),o4=e=>{var n;return Po.DOM.getStyle(e,"direction",!0)==="rtl"||Eu((n=e.textContent)!==null&&n!==void 0?n:"")},s4=(e,n,o)=>Ct(Po.DOM.getParents(o.container(),"*",n),e),kf=(e,n,o)=>{const r=s4(e,n,o);return L.from(r[r.length-1])},FR=(e,n,o)=>{const r=bg(n,e),c=bg(o,e);return Oe(r)&&r===c},IR=e=>la(e)||tl(e),Tu=(e,n)=>{const o=n.container(),r=n.offset();return e?jt(o)?je(o.nextSibling)?we(o.nextSibling,0):we.after(o):la(n)?we(o,r+1):n:jt(o)?je(o.previousSibling)?we(o.previousSibling,o.previousSibling.data.length):we.before(o):tl(n)?we(o,r-1):n},LR=Be(Tu,!0),ix=Be(Tu,!1),r4=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},_d=e=>{e.execCommand("delete")},a4=e=>r4(e,"Delete"),aI=e=>r4(e,"ForwardDelete"),kZ=e=>n=>qc(Pa(n),e,uo),c4=e=>sg(e)||Ha(e),ux=(e,n)=>hc(e,n)?V(n,c4,kZ(e)):L.none(),W1=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},HR=(e,n,o)=>ea(Oa(o),xl(o),(r,c)=>{const u=Tu(!0,r),f=Tu(!1,c),b=Tu(!1,n);return e?fa(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):Kr(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),Z1=e=>(Gd(e)?Qc(e):Ya(e)).bind(Z1).orThunk(()=>L.some(e)),Hi=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=Z1(o).getOr(o),f=Y.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?W1(e,r):Cr(f)&&(E(f),r&&e.selection.setCursorLocation(f.dom,0)),!uo(o,f)){const b=qc(Pa(f),o)?[]:Gm(f);me(b.concat(br(o)),y=>{!uo(y,f)&&!hc(y,f)&&Cr(y)&&no(y)})}},H2=e=>n=>uo(e,n),zo=e=>Wr(e,"td,th"),V2=(e,n)=>{const o=T=>k0(Y.fromDom(T),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=ea(r,c,uo).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},dx=(e,n)=>({start:e,end:n}),VR=(e,n,o)=>({rng:e,table:n,cells:o}),j1=yu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),X0=(e,n)=>an(Y.fromDom(e),"td,th",n),mx=e=>!uo(e.start,e.end),fx=(e,n)=>k0(e.start,n).bind(o=>k0(e.end,n).bind(r=>Ln(uo(o,r),o))),gx=(e,n)=>!mx(e)&&fx(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),l4=(e,n)=>{const o=X0(e.startContainer,n),r=X0(e.endContainer,n);return ea(o,r,dx)},zR=e=>n=>k0(n,e).bind(o=>Na(zo(o)).map(r=>dx(n,r))),UR=e=>n=>k0(n,e).bind(o=>In(zo(o)).map(r=>dx(r,n))),hx=e=>n=>fx(n,e).map(o=>VR(n,o,zo(o))),i4=(e,n,o,r)=>{if(o.collapsed||!e.forall(mx))return L.none();if(n.isSameTable){const c=e.bind(hx(r));return L.some({start:c,end:c})}else{const c=X0(o.startContainer,r),u=X0(o.endContainer,r),f=c.bind(zR(r)).bind(hx(r)),b=u.bind(UR(r)).bind(hx(r));return L.some({start:f,end:b})}},u4=(e,n)=>Hr(e,o=>uo(o,n)),fp=e=>ea(u4(e.cells,e.rng.start),u4(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),WR=(e,n,o)=>e.exists(r=>gx(r,o)&&A0(r.start,n)),px=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},cI=(e,n,o,r)=>i4(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=fp(c).getOr([]);if(u&&c.cells.length===f.length)return L.some(j1.fullTable(c.table));if(f.length>0){if(u)return L.some(j1.partialTable(f,L.none()));{const b=px(o,n);return L.some(j1.partialTable(f,L.some({...n,rng:b})))}}else return L.none()}),lI=(e,n,o,r)=>i4(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(fp).getOr([]),b=u.bind(fp).getOr([]);if(f.length>0&&b.length>0){const y=px(o,n);return L.some(j1.multiTable(f,b,y))}else return L.none()}),ZR=(e,n)=>{const o=H2(e),r=l4(n,o),c=V2(n,o);return WR(r,n,o)?r.map(u=>j1.singleCellTable(n,u.start)):c.isMultiTable?lI(r,c,n,o):cI(r,c,n,o)},d4=e=>me(e,n=>{ao(n,"contenteditable"),E(n)}),jR=(e,n)=>L.from(e.dom.getParent(n,e.dom.isBlock)).map(Y.fromDom),bx=(e,n,o)=>{o.each(r=>{n?no(r):(E(r),e.selection.setCursorLocation(r.dom,0))})},vx=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),yx(e,c,n,!1).each(u=>u())},m4=e=>{const n=wg(e),o=Y.fromDom(e.selection.getNode());sa(o.dom)&&Cr(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Ie(n,r=>uo(r,o))&&Ss(o,"data-mce-selected","1")},f4=(e,n,o)=>L.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=jR(e,f?u.endContainer:u.startContainer);u.deleteContents(),bx(e,f,b.filter(Cr));const y=f?n[0]:n[n.length-1];return vx(e,y,r,f),Cr(y)?L.none():L.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);d4(c),m4(e)}),GR=(e,n,o,r)=>L.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];vx(e,u,c,!0),vx(e,f,c,!1);const b=Cr(u)?n:n.slice(1),y=Cr(f)?o:o.slice(0,-1);d4(b.concat(y)),r.deleteContents(),m4(e)}),yx=(e,n,o,r=!0)=>L.some(()=>{Hi(e,n,o,r)}),qR=(e,n)=>L.some(()=>dr(e,!1,n)),KR=(e,n,o)=>ZR(n,o).bind(r=>r.fold(Be(yx,e),Be(qR,e),Be(f4,e),Be(GR,e))),XR=(e,n)=>z2(e,n),YR=(e,n,o,r)=>Cx(n,r).fold(()=>KR(e,n,o),c=>XR(e,c)),JR=(e,n,o)=>{const r=Y.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?f4(e,o,L.none()):YR(e,r,c,n)},g4=(e,n)=>Jo($g(n,e),xs),Cx=(e,n)=>Jo($g(n,e),Fl("caption")),QR=(e,n,o,r,c)=>yd(o,e.getBody(),c).bind(u=>g4(n,Y.fromDom(u.getNode())).bind(f=>uo(f,r)?L.none():L.some(Ot))),z2=(e,n)=>L.some(()=>{E(n),e.selection.setCursorLocation(n.dom,0)}),eM=(e,n,o,r)=>Oa(e.dom).bind(c=>xl(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),h4=(e,n)=>z2(e,n),wx=(e,n,o)=>Cx(e,Y.fromDom(o.getNode())).fold(()=>L.some(Ot),r=>Ln(!uo(r,n),Ot)),tM=(e,n,o,r,c)=>yd(o,e.getBody(),c).fold(()=>L.some(Ot),u=>eM(r,o,c,u)?h4(e,r):wx(n,r,u)),nM=(e,n,o,r)=>{const c=we.fromRangeStart(e.selection.getRng());return g4(o,r).bind(u=>Cr(u)?z2(e,u):QR(e,o,n,u,c))},Sx=(e,n,o,r)=>{const c=we.fromRangeStart(e.selection.getRng());return Cr(r)?z2(e,r):tM(e,o,n,r,c)},xx=(e,n)=>e?Zt(n):vR(n),U2=(e,n)=>{const o=we.fromRangeStart(e.selection.getRng());return xx(n,o)||wu(n,e.getBody(),o).exists(r=>xx(n,r))},p4=(e,n,o)=>{const r=Y.fromDom(e.getBody());return Cx(r,o).fold(()=>nM(e,n,r,o).orThunk(()=>Ln(U2(e,n),Ot)),c=>Sx(e,n,r,c))},Ex=(e,n)=>{const o=Y.fromDom(e.selection.getStart(!0)),r=wg(e);return e.selection.isCollapsed()&&r.length===0?p4(e,n,o):JR(e,o,r)},kd=(e,n)=>{let o=n;for(;o&&o!==e;){if(bo(o)||co(o))return o;o=o.parentNode}return null},b4=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],v4=Ve.each,G1=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=T=>{const N={};return v4(n.getAttribs(T),R=>{const I=R.nodeName.toLowerCase();I!=="style"&&!c(I)&&(N[I]=n.getAttrib(T,I))}),N},y=(T,N)=>{for(const R in T)if(tn(T,R)){const I=N[R];if(xo(I)||T[R]!==I)return!1;delete N[R]}for(const R in N)if(tn(N,R))return!1;return!0};return dt(u)&&dt(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Xl(u)&&!Xl(f)},c=u=>Ie(b4,f=>jo(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},gp=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},y4=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const T=r.attributes[y];T?T.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},iI=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&gp(o,c=>{y4(e,n,c,r)}),r},C4=(e,n)=>{const o=(r,c)=>{Qe(r,u=>{const f=hr(u.nodes);me(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const T=f[y];(!(c?T.attr(u.filter.name)!==void 0:T.name===u.filter.name)||It(T.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},w4=(e,n,o,r={})=>{const c=iI(e,n,o);C4(c,r)},S4=(e,n,o)=>{if(e.insert&&n(o)){const r=new kl("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new kl("#text",3)).value=Ce},AZ=e=>{var n;return oM(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Ce},oM=(e,n)=>{const o=e==null?void 0:e.firstChild;return Oe(o)&&o===e.lastChild&&o.name===n},x4=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},ti=(e,n,o,r)=>r.isEmpty(n,o,c=>x4(e,c)),E4=(e,n)=>Oe(e)&&(n(e)||e.name==="br"),Tx=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return L.from(n)},W2=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&W2(c,n,o);e.unwrap()}},T4=(e,n,o,r=Ot)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Ve.makeMap("tr,td,th,tbody,thead,tfoot,table"),y=new Set,T=N=>N!==o&&!b[N.name];for(let N=0;N<e.length;N++){const R=e[N];let I,G,X;if(!R.parent||y.has(R))continue;if(c[R.name]&&R.parent.name==="li"){let K=R.next;for(;K&&c[K.name];){K.name="li",y.add(K),R.parent.insert(K,R.parent);K=K.next}R.unwrap();continue}const W=[R];for(I=R.parent;I&&!n.isValidChild(I.name,R.name)&&T(I);I=I.parent)W.push(I);if(I&&W.length>1)if(n.isValidChild(I.name,R.name)){W.reverse(),G=W[0].clone(),r(G);let K=G;for(let ae=0;ae<W.length-1;ae++){n.isValidChild(K.name,W[ae].name)&&ae>0?(X=W[ae].clone(),r(X),K.append(X)):X=K;for(let le=W[ae].firstChild;le&&le!==W[ae+1];){const ce=le.next;X.append(le),le=ce}K=X}ti(n,u,f,G)?I.insert(R,W[0],!0):(I.insert(G,W[0],!0),I.insert(R,G)),I=W[0],(ti(n,u,f,I)||oM(I,"br"))&&I.empty().remove()}else W2(R,n);else if(R.parent){if(R.name==="li"){let K=R.prev;if(K&&(K.name==="ul"||K.name==="ol")){K.append(R);continue}if(K=R.next,K&&(K.name==="ul"||K.name==="ol")&&K.firstChild){K.insert(R,K.firstChild,!0);continue}const ae=new kl("ul",1);r(ae),R.wrap(ae);continue}if(n.isValidChild(R.parent.name,"div")&&n.isValidChild("div",R.name)){const K=new kl("div",1);r(K),R.wrap(K)}else W2(R,n)}}},sM=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},rM=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&sM(o,"a")),aM=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},_4=e=>{const n=we.fromRangeStart(e),o=we.fromRangeEnd(e),r=e.commonAncestorContainer;return wu(!1,r,o).map(c=>!Kl(n,o,r)&&Kl(n,c,r)?aM(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},k4=e=>e.collapsed?e:_4(e),cM=e=>Oe(e.firstChild)&&e.firstChild===e.lastChild,uI=e=>e.name==="br"||e.value===Ce,Z2=(e,n)=>e.getBlockElements()[n.name]&&cM(n)&&uI(n.firstChild),lM=(e,n)=>{const o=e.getNonEmptyElements();return Oe(n)&&(n.isEmpty(o)||Z2(e,n))},dI=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),lM(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},iM=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},mI=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return iM(c)},fI=e=>{var n;return Ct((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},gI=e=>e.data===Ce||ds(e),hI=e=>Oe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&gI(e.firstChild),pI=e=>!e.firstChild||hI(e),uM=e=>e.length>0&&pI(e[e.length-1])?e.slice(0,-1):e,A4=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},O4=(e,n)=>!!A4(e,n),q1=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},bI=(e,n)=>{const o=we.before(e),c=Cu(n).next(o);return c?c.toRange():null},dM=(e,n)=>{const o=we.after(e),c=Cu(n).prev(o);return c?c.toRange():null},_x=(e,n,o,r)=>{const c=q1(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Ve.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),dM(n[n.length-1],o)},mM=(e,n,o)=>{const r=e.parentNode;return r&&Ve.each(n,c=>{r.insertBefore(c,e)}),bI(e,o)},fM=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),dM(n[0],o)),vI=(e,n,o,r)=>{const c=mI(n,e,r),u=A4(n,o.startContainer),f=uM(fI(c.firstChild)),b=1,y=2,T=n.getRoot(),N=R=>{const I=we.fromRangeStart(o),G=Cu(n.getRoot()),X=R===b?G.prev(I):G.next(I),W=X==null?void 0:X.getNode();return W?A4(n,W)!==u:!0};return u?N(b)?mM(u,f,T):N(y)?fM(u,f,T,n):_x(u,f,T,o):null},gM=["pre"],yI=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,T=Me(gM,u.name);if(y&&T){const N=u.attr("contenteditable")!=="false",R=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,I=L.from(kd(r,o)).forall(bo);return N&&R&&I}else return!1},Pg=sa,hM=(e,n,o)=>{if(Oe(o)){const r=e.getParent(n.endContainer,Pg);return o===r&&A0(Y.fromDom(o),n)}else return!1},pM=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},bM=(e,n)=>{L.from(e.getParent(n,"td,th")).map(Y.fromDom).each(F)},kx=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=G1(e);Ve.each(r.select("*[data-mce-fragment]"),f=>{if(Oe(o[f.nodeName.toLowerCase()])&&hR(r,f)){for(let y=f.parentElement;Oe(y)&&y!==c&&!PF(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},vM=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},CI=e=>{Ve.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},yM=e=>!!e.getAttribute("data-mce-fragment"),wI=(e,n)=>Oe(n)&&!e.schema.getVoidElements()[n.nodeName],SI=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=kd(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let T=f.createRng();const N=n.previousSibling;if(je(N)){T.setStart(N,(r=(o=N.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const G=n.nextSibling;je(G)&&(N.appendData(G.data),(c=G.parentNode)===null||c===void 0||c.removeChild(G))}else T.setStartBefore(n),T.setEndBefore(n);const R=G=>{let X=we.fromRangeStart(G);return X=Cu(e.getBody()).next(X),X==null?void 0:X.toRange()},I=f.getParent(n,f.isBlock);f.remove(n),I&&f.isEmpty(I)&&(Ei(Y.fromDom(I)),T.setStart(I,0),T.setEnd(I,0),!Pg(I)&&!yM(I)&&(u=R(T))?(T=u,f.remove(I)):f.add(I,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(T)},Ax=e=>{const n=e.dom,o=k4(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,Pg);hM(n,o,r)?yx(e,o,Y.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&je(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},CM=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return L.some(n);return L.none()},D4=e=>{me(hr(e.getBody().querySelectorAll("details")),n=>{const o=Ct(hr(n.children),r=>r.nodeName==="SUMMARY");o.length>1&&me(o.slice(1),r=>{const c=Y.fromDom(r);Jc(c,"mce-accordion-summary"),Zb(c,"p")})})},xI=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,T=ip({validate:!0},e.schema),N='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,N);let R=u.getRng();const I=R.startContainer,G=e.getBody();I===G&&u.isCollapsed()&&f.isBlock(G.firstChild)&&wI(e,G.firstChild)&&f.isEmpty(G.firstChild)&&(R=f.createRng(),R.setStart(G.firstChild,0),R.setEnd(G.firstChild,0),u.setRng(R)),u.isCollapsed()||Ax(e);const X=u.getNode(),W={context:X.nodeName.toLowerCase(),data:o.data,insert:!0},K=b.parse(n,W);if(o.paste===!0&&dI(e.schema,K)&&O4(f,X))return R=vI(T,f,u.getRng(),K),R&&u.setRng(R),n;o.paste===!0&&yI(f,K,X,e.getBody())&&((r=K.firstChild)===null||r===void 0||r.unwrap()),vM(K);let ae=K.lastChild;if(ae&&ae.attr("id")==="mce_marker"){const le=ae;for(ae=ae.prev;ae;ae=ae.walk(!0))if(ae.type===3||!f.isBlock(ae.name)){ae.parent&&e.schema.isValidChild(ae.parent.name,"span")&&ae.parent.insert(le,ae,ae.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(X),!W.invalid)n=T.serialize(K),pM(e,n,X);else{e.selection.setContent(N);let le=u.getNode(),ce;const he=e.getBody();for(ef(le)?le=ce=he:ce=le;ce&&ce!==he;)le=ce,ce=ce.parentNode;n=le===he?he.innerHTML:f.getOuterHTML(le);const Fe=b.parse(n),Et=CM(Fe),Ue=Et.bind(Tx).getOr(Fe);Et.each(ot=>ot.replace(K));const ve=K.children(),_e=(c=K.parent)!==null&&c!==void 0?c:Fe;K.unwrap();const et=Ct(ve,ot=>rM(e.schema,ot,_e));T4(et,e.schema,Ue),w4(b.getNodeFilters(),b.getAttributeFilters(),Fe),n=T.serialize(Fe),le===he?f.setHTML(he,n):f.setOuterHTML(le,n)}return kx(e,y),SI(e,f.get("mce_marker")),CI(e.getBody()),bM(f,u.getStart()),D4(e),cw(e.schema,e.getBody(),u.getStart()),n},Ox=e=>e instanceof kl,wM=e=>{H1(e)&&Oa(e.getBody()).each(n=>{const o=n.getNode(),r=hs(o)?Oa(o).getOr(n):n;e.selection.setRng(r.toRange())})},j2=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&wM(e)},SM=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=Va(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,hd(e),o)):o||(o=c),j2(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=ip({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=ph(Y.fromDom(n))?o:Ve.trim(o);return j2(e,c,r.no_selection),{content:c,html:c}}},EI=(e,n,o,r)=>{w4(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=ip({validate:!1},e.schema).serialize(o),u=ph(Y.fromDom(n))?c:Ve.trim(c);return j2(e,u,r.no_selection),{content:o,html:u}},TI=(e,n,o)=>L.from(e.getBody()).map(r=>Ox(n)?EI(e,r,n,o):SM(e,r,n,o)).getOr({content:n,html:Ox(o.content)?"":o.content}),_I=(e,n,o)=>M(e,n,o).isSome(),Dx=(e,n)=>te(e,n).isSome(),Af=e=>oe(e)?e:ke,kI=(e,n,o)=>{let r=e.dom;const c=Af(o);for(;r.parentNode;){r=r.parentNode;const u=Y.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return L.none()},G2=(e,n,o)=>{const r=n(e),c=Af(o);return r.orThunk(()=>c(e)?L.none():kI(e,n,c))},Us=rp,Rx=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(El(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},q2=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>Rx(e,b,o)?!0:b.parentNode===u||!!ym(e,b,o,r,!0));return!!ym(e,f,o,r,c)},Ad=(e,n,o)=>Er(o)&&Us(n,o.inline)||Yl(o)&&Us(n,o.block)?!0:El(o)?dt(n)&&e.is(n,o.selector):!1,R4=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(oe(o.onmatch))return o.onmatch(n,o,r);if(f){if(Hu(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):rl(e,n,f[y]))return!0}else for(const y in f)if(tn(f,y)){const T=b?e.getAttrib(n,y):rl(e,n,y),N=Ts(f[y],u),R=It(T)||wa(T);if(R&&It(N))continue;if(c&&R&&!o.exact||(!c||o.exact)&&!Us(T,Js(N,y)))return!1}}return!0},ym=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&dt(n))for(let b=0;b<u.length;b++){const y=u[b];if(Ad(e.dom,n,y)&&R4(f,n,y,"attributes",c,r)&&R4(f,n,y,"styles",c,r)){const T=y.classes;if(T){for(let N=0;N<T.length;N++)if(!e.dom.hasClass(n,Ts(T[N],r)))return}return y}}},K1=(e,n,o,r,c)=>{if(r)return q2(e,r,n,o,c);if(r=e.selection.getNode(),q2(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&q2(e,u,n,o,c))},AI=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&ym(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},OI=(e,n)=>{const o=c=>uo(c,Y.fromDom(e.getBody())),r=(c,u)=>ym(e,c.dom,u)?L.some(u):L.none();return L.from(e.selection.getStart(!0)).bind(c=>G2(Y.fromDom(c),u=>mi(n,f=>r(u,f)),o)).getOrNull()},Y0=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=xg(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!El(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},DI=(e,n,o)=>Eo(o,(r,c)=>{const u=D0(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),Od=U,RI=(e,n)=>e.importNode(n,!0),hp=e=>{const n=[];let o=e;for(;o;){if(je(o)&&o.data!==Od||o.childNodes.length>1)return[];dt(o)&&n.push(o),o=o.firstChild}return n},Vi=e=>hp(e).length>0,K2=e=>{if(e){const n=new Ks(e,e);for(let o=n.current();o;o=n.next())if(je(o))return o}return null},X2=e=>{const n=Y.fromTag("span");return ta(n,{id:C0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Rs(n,Y.fromText(Od)),n},MI=e=>{const n=K2(e);return n&&n.data.charAt(0)===Od&&n.deleteData(0,1),n},M4=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(Vi(n))dr(e,!1,Y.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,T=u.endContainer,N=u.endOffset,R=MI(n);r.remove(n,!0),b===R&&y>0&&u.setStart(R,y-1),T===R&&N>0&&u.setEnd(R,N-1),f&&r.isEmpty(f)&&E(Y.fromDom(f)),c.setRng(u)}},J0=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)M4(e,n,o);else if(n=yg(e.getBody(),c.getStart()),!n)for(;n=r.get(C0);)M4(e,n,o)},NI=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Be(i2,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(ow(Y.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},_u=(e,n)=>(e.appendChild(n),n),Y2=(e,n)=>{var o;const r=fr(e,(u,f)=>_u(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return _u(r,c.createTextNode(Od))},xM=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=Ct(bs(f.get()),R=>R!==r&&!es(R,"removeformat")),T=DI(e,o,y);if(Ct(T,R=>!RS(e,R,r)).length>0){const R=o.cloneNode(!1);return b.add(n,R),f.remove(r,c,R,u),b.remove(R),L.some(R)}else return L.none()},N4=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const T=f.startContainer.nodeValue;r=yg(e.getBody(),c.getStart());const N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(T&&b>0&&b<T.length&&N.test(T.charAt(b))&&N.test(T.charAt(b-1))){const R=c.getBookmark();f.collapse(!0);let I=Ed(e.dom,f,u);I=Hn(I),e.formatter.apply(n,o,I),c.moveToBookmark(R)}else{let R=r?K2(r):null;(!r||(R==null?void 0:R.data)!==Od)&&(r=RI(e.getDoc(),X2(!0).dom),R=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(R,b)}},B4=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),T=y.startContainer,N=y.startOffset;let R=T;je(T)&&(N!==T.data.length&&(f=!0),R=R.parentNode);const I=[];let G;for(;R;){if(ym(e,R,n,o,r)){G=R;break}R.nextSibling&&(f=!0),I.push(R),R=R.parentNode}if(G)if(f){const X=u.getBookmark();y.collapse(!0);let W=Ed(c,y,b,!0);W=Hn(W),e.formatter.remove(n,o,W,r),u.moveToBookmark(X)}else{const X=yg(e.getBody(),G),W=X2(!1).dom;NI(e,W,X??G);const K=xM(e,W,G,n,o,r),ae=Y2(I.concat(K.toArray()),W);X&&M4(e,X,!1),u.setCursorLocation(ae,1),c.isEmpty(G)&&c.remove(G)}},X1=(e,n,o)=>{const r=e.selection,c=e.getBody();J0(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Od&&J0(e,yg(c,r.getStart())),(n===37||n===39)&&J0(e,yg(c,r.getStart()))},$4=e=>je(e)&&Bl(e.data,Ce),BI=e=>{e.on("mouseup keydown",n=>{X1(e,n.keyCode,$4(e.selection.getRng().endContainer))})},P4=e=>{const n=X2(!1),o=Y2(e,n.dom);return{caretContainer:n,caretPosition:we(o,0)}},EM=(e,n)=>{const{caretContainer:o,caretPosition:r}=P4(n);return Qa(Y.fromDom(e),o),no(Y.fromDom(e)),r},$I=(e,n)=>{const{caretContainer:o,caretPosition:r}=P4(n);return e.insertNode(o.dom),r},TM=(e,n)=>{const o=e.schema.getTextInlineElements();return tn(o,Io(n))&&!$i(n.dom)&&!Bc(n.dom)},_M=e=>$i(e.dom)&&Vi(e.dom),Fg={},kM=el(["pre"]),AM=(e,n)=>{Fg[e]||(Fg[e]=[]),Fg[e].push(n)},F4=(e,n)=>{tn(Fg,e)&&me(Fg[e],o=>{o(n)})};AM("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return kM(f)&&Me(c,f)},r=(c,u)=>{const f=Y.fromDom(u),b=Vl(f).dom;no(f),Lo(Y.fromDom(c),[Y.fromTag("br",b),Y.fromTag("br",b),...br(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Ct(Ct(c,kM),o(c));me(u,f=>{r(f.previousSibling,f)})}});const OM=["fontWeight","fontStyle","color","fontSize","fontFamily"],DM=e=>On(e.styles)&&Ie(bs(e.styles),n=>Me(OM,n)),RM=e=>Jo(e,n=>Er(n)&&n.inline==="span"&&DM(n)),MM=(e,n)=>{const o=e.get(n);return Bn(o)?RM(o):L.none()},NM=(e,n)=>Kr(n,we.fromRangeStart(e)).isNone(),BM=(e,n)=>fa(n,we.fromRangeEnd(e)).exists(o=>!ds(o.getNode())||fa(n,o).isSome())===!1,$M=e=>n=>em(n)&&e.isEditable(n),PI=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return NM(o,n[0])&&BM(o,n[0])?n:[];{const r=In(n).filter(f=>NM(o,f)).toArray(),c=Na(n).filter(f=>BM(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},FI=e=>Ct(PI(e),$M(e.dom)),PM=e=>Ct(e.getSelectedBlocks(),$M(e.dom)),I4=Ve.each,L4=e=>dt(e)&&!Xl(e)&&!$i(e)&&!Bc(e),FM=(e,n)=>{for(let o=e;o;o=o[n]){if(je(o)&&po(o.data))return e;if(dt(o)&&!Xl(o))return o}return e},IM=(e,n,o)=>{const r=G1(e),c=dt(n)&&Sg(n),u=dt(o)&&Sg(o);if(c&&u){const f=FM(n,"previousSibling"),b=FM(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const T=y;y=y.nextSibling,f.appendChild(T)}return e.dom.remove(b),Ve.each(Ve.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},LM=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=IM(e,DS(r),r))!==null&&c!==void 0?c:r;IM(e,u,DS(u,!0))}},II=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";I4(e.select(r,o),c=>{L4(c)&&Sg(c)&&I4(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},Mx=(e,n,o)=>{I4(e.childNodes,r=>{L4(r)&&(n(r)&&o(r),r.hasChildNodes()&&Mx(r,n,o))})},LI=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},Y1=(e,n)=>o=>!!(o&&rl(e,o,n)),HM=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),LI(e,r)},J1=yu.generate([{keep:[]},{rename:["name"]},{removed:[]}]),HI=/^(src|href|style)$/,H4=Ve.each,J2=rp,VI=e=>/^(TR|TH|TD)$/.test(e.nodeName),VM=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),zM=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(dt(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return je(r)&&o&&c>=r.data.length&&(r=new Ks(r,e.getBody()).next()||r),je(r)&&!o&&c===0&&(r=new Ks(r,e.getBody()).prev()||r),r},UM=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return VI(e)&&r?e.nodeName==="TR"&&r[o]||r:e},V4=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},WM=(e,n,o,r,c)=>{const u=Y.fromDom(n),f=Y.fromDom(e.create(r,c)),b=o?Xa(u):nh(u);return Lo(f,b),o?(Qa(u,f),Km(f,u)):(Mc(u,f),Rs(f,u)),f.dom},zI=(e,n)=>n.links&&e.nodeName==="A",ZM=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=Va(e);Yl(o)&&r===u.getRoot()&&(!o.list_block||!J2(n,o.list_block))&&me(hr(n.childNodes),b=>{op(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=V4(u,b,f),u.setAttribs(c,hd(e))):c=null}),!(NS(o)&&!J2(o.inline,n))&&u.remove(n,!0)},jM=(e,n,o)=>Os(e)?{name:n,value:null}:{name:e,value:Ts(n,o)},GM=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},Nx=(e,n,o,r,c)=>{let u=!1;H4(o.styles,(f,b)=>{const{name:y,value:T}=jM(b,f,r),N=Js(T,y);(o.remove_similar||q(T)||!dt(c)||J2(rl(e,c,y),N))&&e.setStyle(n,y,""),u=!0}),u&&GM(e,n)},qM=(e,n,o)=>{n==="removeformat"?me(PM(e.selection),r=>{me(OM,c=>e.dom.setStyle(r,c,"")),GM(e.dom,r)}):MM(e.formatter,n).each(r=>{me(PM(e.selection),c=>Nx(e.dom,c,r,o,null))})},UI=(e,n,o,r,c)=>{const u=e.dom,f=G1(e),b=e.schema;if(Er(n)&&Kp(b,n.inline)&&sf(b,r)&&r.parentElement===e.getBody())return ZM(e,r,n),J1.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Ad(u,r,n)&&!zI(r,n))return J1.keep();const y=r,T=n.preserve_attributes;if(Er(n)&&n.remove==="all"&&Bn(T)){const N=Ct(u.getAttribs(y),R=>Me(T,R.name.toLowerCase()));if(u.removeAllAttribs(y),me(N,R=>u.setAttrib(y,R.name,R.value)),N.length>0)return J1.rename("span")}if(n.remove!=="all"){Nx(u,y,n,o,c),H4(n.attributes,(R,I)=>{const{name:G,value:X}=jM(I,R,o);if(n.remove_similar||q(X)||!dt(c)||J2(u.getAttrib(c,G),X)){if(G==="class"){const W=u.getAttrib(y,G);if(W){let K="";if(me(W.split(/\s+/),ae=>{/mce\-\w+/.test(ae)&&(K+=(K?" ":"")+ae)}),K){u.setAttrib(y,G,K);return}}}if(HI.test(G)&&y.removeAttribute("data-mce-"+G),G==="style"&&el(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(G),u.setStyle(y,"list-style-type","none");return}G==="class"&&y.removeAttribute("className"),y.removeAttribute(G)}}),H4(n.classes,R=>{R=Ts(R,o),(!dt(c)||u.hasClass(c,R))&&u.removeClass(y,R)});const N=u.getAttribs(y);for(let R=0;R<N.length;R++){const I=N[R].nodeName;if(!f.isAttributeInternal(I))return J1.keep()}}return n.remove!=="none"?(ZM(e,y,n),J1.removed()):J1.keep()},Q2=(e,n,o,r,c)=>{let u;return n.parentNode&&me(xg(e.dom,n.parentNode).reverse(),f=>{if(!u&&dt(f)&&f.id!=="_start"&&f.id!=="_end"){const b=ym(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},KM=(e,n,o,r)=>UI(e,n,o,r,r).fold(Te(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Te(null)),eC=(e,n,o,r,c,u,f,b)=>{var y,T;let N,R;const I=e.dom;if(o){const G=o.parentNode;for(let X=r.parentNode;X&&X!==G;X=X.parentNode){let W=I.clone(X,!1);for(let K=0;K<n.length&&(W=KM(e,n[K],b,W),W!==null);K++);W&&(N&&W.appendChild(N),R||(R=W),N=W)}u&&(!f.mixed||!I.isBlock(o))&&(r=(y=I.split(o,r))!==null&&y!==void 0?y:r),N&&R&&((T=c.parentNode)===null||T===void 0||T.insertBefore(N,c),R.appendChild(c),Er(f)&&LM(e,f,b,N))}return r},tC=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,T=W=>{const K=Q2(e,W,n,o,c);return eC(e,u,K,W,W,!0,f,o)},N=W=>Xl(W)&&dt(W)&&(W.id==="_start"||W.id==="_end"),R=W=>Ie(u,K=>Bx(e,K,o,W,W)),I=W=>{const K=hr(W.childNodes),le=R(W)||Ie(u,Fe=>Ad(b,W,Fe)),ce=W.parentNode;if(!le&&Oe(ce)&&R0(f)&&R(ce),f.deep&&K.length)for(let Fe=0;Fe<K.length;Fe++)I(K[Fe]);me(["underline","line-through","overline"],Fe=>{dt(W)&&e.dom.getStyle(W,"text-decoration")===Fe&&W.parentNode&&d2(b,W.parentNode)===Fe&&Bx(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Fe}},void 0,W)})},G=W=>{const K=b.get(W?"_start":"_end");if(K){let ae=K[W?"firstChild":"lastChild"];return N(ae)&&(ae=ae[W?"firstChild":"lastChild"]),je(ae)&&ae.data.length===0&&(ae=W?K.previousSibling||K.nextSibling:K.nextSibling||K.previousSibling),b.remove(K,!0),ae}else return null},X=W=>{let K,ae,le=Ed(b,W,u,W.collapsed);if(f.split){if(le=Hn(le),K=zM(e,le,!0),ae=zM(e,le),K!==ae){if(K=UM(K,!0),ae=UM(ae,!1),VM(b,K,ae)){const he=L.from(K.firstChild).getOr(K);T(WM(b,he,!0,"span",{id:"_start","data-mce-type":"bookmark"})),G(!0);return}if(VM(b,ae,K)){const he=L.from(ae.lastChild).getOr(ae);T(WM(b,he,!1,"span",{id:"_end","data-mce-type":"bookmark"})),G(!1);return}K=V4(b,K,"span",{id:"_start","data-mce-type":"bookmark"}),ae=V4(b,ae,"span",{id:"_end","data-mce-type":"bookmark"});const ce=b.createRng();ce.setStartAfter(K),ce.setEndBefore(ae),Qs(b,ce,he=>{me(he,Fe=>{!Xl(Fe)&&!Xl(Fe.parentNode)&&T(Fe)})}),T(K),T(ae),K=G(!0),ae=G()}else K=ae=T(K);le.startContainer=K.parentNode?K.parentNode:K,le.startOffset=b.nodeIndex(K),le.endContainer=ae.parentNode?ae.parentNode:ae,le.endOffset=b.nodeIndex(ae)+1}Qs(b,le,ce=>{me(ce,I)})};if(r){if(A1(r)){const W=b.createRng();W.setStartBefore(r),W.setEndAfter(r),X(W)}else X(r);ZS(e,n,r,o);return}!y.isCollapsed()||!Er(f)||wg(e).length?(OS(e,()=>c2(e,X),W=>Er(f)&&K1(e,n,o,W)),e.nodeChanged()):B4(e,n,o,c),qM(e,n,o),ZS(e,n,r,o)},z4=(e,n,o,r,c)=>{(r||e.selection.isEditable())&&tC(e,n,o,r,c)},Bx=(e,n,o,r,c)=>UI(e,n,o,r,c).fold(ke,u=>(e.dom.rename(r,u),!0),De),XM=Ve.each,OZ=(e,n,o,r)=>{const c=u=>{if(dt(u)&&dt(u.parentNode)&&Sg(u)){const f=d2(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Ve.walk(r,c,"childNodes"),c(r))},WI=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=Y1(e,"fontSize");Mx(r,u=>c(u)&&Sg(u),HM(e,"backgroundColor",Ts(n.styles.backgroundColor,o)))}},ZI=(e,n,o,r)=>{if(Er(n)&&(n.inline==="sub"||n.inline==="sup")){const c=Y1(e,"fontSize");Mx(r,f=>c(f)&&Sg(f),HM(e,"fontSize",""));const u=Ct(e.select(n.inline==="sup"?"sub":"sup",r),Sg);e.remove(u,!0)}},DZ=(e,n,o,r)=>{XM(n,c=>{Er(c)&&XM(e.dom.select(c.inline,r),u=>{L4(u)&&Bx(e,c,o,u,c.exact?u:null)}),II(e.dom,c,r)})},jI=(e,n,o,r,c)=>{const u=c.parentNode;ym(e,u,o,r)&&Bx(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>ym(e,f,o,r)?(Bx(e,n,r,c),!0):!1)},nC=Ve.each,GI=(e,n,o,r)=>{if(tS(e)&&Er(n)&&o.parentNode){const c=cd(e.schema),u=Dx(Y.fromDom(o),f=>$i(f.dom));return Vr(c,r)&&Cr(Y.fromDom(o.parentNode),!1)&&!u}else return!1},U4=(e,n,o,r)=>{if(nC(o.styles,(c,u)=>{e.setStyle(n,u,Ts(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},qI=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,T=(X,W=u)=>{oe(W.onformat)&&W.onformat(X,W,o,r),U4(b,X,W,o),nC(W.attributes,(K,ae)=>{b.setAttrib(X,ae,Ts(K,o))}),nC(W.classes,K=>{const ae=Ts(K,o);b.hasClass(X,ae)||b.addClass(X,ae)})},N=(X,W)=>{let K=!1;return nC(X,ae=>El(ae)?b.getContentEditable(W)==="false"&&!ae.ceFalseOverride||Oe(ae.collapsed)&&ae.collapsed!==f?!0:b.is(W,ae.selector)&&!$i(W)?(T(W,ae),K=!0,!1):!0:!1),K},R=X=>{if(ee(X)){const W=b.create(X);return T(W),W}else return null},I=(X,W,K)=>{const ae=[];let le=!0;const ce=u.inline||u.block,he=R(ce),Fe=ve=>gk(u)&&ym(e,ve,n,o),Et=(ve,_e,et)=>{const ot=MS(u)&&i2(e.schema,ve)&&op(e,_e,ce);return et&&ot},Ue=(ve,_e,et,ot)=>{const bt=ve.nodeName.toLowerCase(),sn=op(e,ce,bt)&&op(e,_e,ce),Rt=!K&&je(ve)&&ne(ve.data),kn=$i(ve),go=!Er(u)||!X.isBlock(ve);return(et||ot)&&sn&&!Rt&&!kn&&go};Qs(X,W,ve=>{let _e;const et=ot=>{let bt=!1,sn=le,Rt=!1;const kn=ot.parentNode,go=kn.nodeName.toLowerCase(),Bs=X.getContentEditable(ot);Oe(Bs)&&(sn=le,le=Bs==="true",bt=!0,Rt=ut(e,ot));const ha=le&&!bt;if(ds(ot)&&!GI(e,u,ot,go)){_e=null,Yl(u)&&X.remove(ot);return}if(Fe(ot)){_e=null;return}if(Et(ot,go,ha)){const kr=X.rename(ot,ce);T(kr),ae.push(kr),_e=null;return}if(El(u)){let kr=N(c,ot);if(!kr&&Oe(kn)&&R0(u)&&(kr=N(c,kn)),!Er(u)||kr){_e=null;return}}Oe(he)&&Ue(ot,go,ha,Rt)?(_e||(_e=X.clone(he,!1),kn.insertBefore(_e,ot),ae.push(_e)),Rt&&bt&&(le=sn),_e.appendChild(ot)):(_e=null,me(hr(ot.childNodes),et),bt&&(le=sn),_e=null)};me(ve,et)}),u.links===!0&&me(ae,ve=>{const _e=et=>{et.nodeName==="A"&&T(et,u),me(hr(et.childNodes),_e)};_e(ve)}),me(ae,ve=>{const _e=bt=>{let sn=0;return me(bt.childNodes,Rt=>{!sp(Rt)&&!Xl(Rt)&&sn++}),sn},et=bt=>Jo(bt.childNodes,l2).filter(Rt=>X.getContentEditable(Rt)!=="false"&&Ad(X,Rt,u)).map(Rt=>{const kn=X.clone(Rt,!1);return T(kn),X.replace(kn,bt,!0),X.remove(Rt,!0),kn}).getOr(bt),ot=_e(ve);if((ae.length>1||!X.isBlock(ve))&&ot===0){X.remove(ve,!0);return}(Er(u)||Yl(u)&&u.wrapper)&&(!u.exact&&ot===1&&(ve=et(ve)),DZ(e,c,o,ve),jI(e,u,n,o,ve),WI(X,u,o,ve),OZ(X,u,o,ve),ZI(X,u,o,ve),LM(e,u,o,ve))})},G=A1(r)?r:y.getNode();if(b.getContentEditable(G)==="false"&&!ut(e,G)){r=G,N(c,r),w2(e,n,r,o);return}if(u){if(r)if(A1(r)){if(!N(c,r)){const X=b.createRng();X.setStartBefore(r),X.setEndAfter(r),I(b,Ed(b,X,c),!0)}}else I(b,r,!0);else!f||!Er(u)||wg(e).length?(y.setRng(k4(y.getRng())),OS(e,()=>{c2(e,(X,W)=>{const K=W?X:Ed(b,X,c);I(b,K,!1)})},De),e.nodeChanged()):N4(e,n,o),MM(e.formatter,n).each(X=>{me(FI(e.selection),W=>U4(b,W,X,o))});F4(n,e)}w2(e,n,r,o)},oC=(e,n,o,r)=>{(r||e.selection.isEditable())&&qI(e,n,o,r)},W4=e=>tn(e,"vars"),Xr=(e,n)=>{e.set({}),n.on("NodeChange",o=>{JI(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=L.from(o.node).map(c=>A1(c)?c:c.startContainer).bind(c=>dt(c)?L.some(c):L.from(c.parentElement)).getOrThunk(()=>KI(n));JI(n,r,e.get())})},KI=e=>e.selection.getStart(),XI=(e,n,o,r,c)=>mc(n,b=>{const y=e.formatter.matchNode(b,o,c??{},r);return!xo(y)},b=>Rx(e,b,o)?!0:r?!1:Oe(e.formatter.matchNode(b,o,c,!0))),YI=(e,n)=>{const o=n??KI(e);return Ct(xg(e.dom,o),r=>dt(r)&&!Bc(r))},JI=(e,n,o)=>{const r=YI(e,n);Qe(o,(c,u)=>{const f=b=>{const y=XI(e,r,u,b.similar,W4(b)?b.vars:void 0),T=y.isSome();if(b.state.get()!==T){b.state.set(T);const N=y.getOr(n);W4(b)?b.callback(T,{node:N,format:u,parents:r}):me(b.callbacks,R=>R(T,{node:N,format:u,parents:r}))}};me([c.withSimilar,c.withoutSimilar],f),me(c.withVars,f)})},Dd=(e,n,o,r,c,u)=>{const f=n.get();me(o.split(","),b=>{const y=No(f,b).getOrThunk(()=>{const N={withSimilar:{state:$r(!1),similar:!0,callbacks:[]},withoutSimilar:{state:$r(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=N,N}),T=()=>{const N=YI(e);return XI(e,N,b,c,u).isSome()};if(xo(u)){const N=c?y.withSimilar:y.withoutSimilar;N.callbacks.push(r),N.callbacks.length===1&&N.state.set(T())}else y.withVars.push({state:$r(T()),similar:c,vars:u,callback:r})}),n.set(f)},$x=(e,n,o)=>{const r=e.get();me(n.split(","),c=>No(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Ct(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Ct(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Ct(u.withVars,f=>f.callback!==o)}})),e.set(r)},pp=(e,n,o,r,c,u)=>(Dd(e,n,o,r,c,u),{unbind:()=>$x(n,o,r)}),bp=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(K1(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?z4(e,n,o,r):oC(e,n,o,r))},YM=Ve.explode,JM=()=>{const e={};return{addFilter:(c,u)=>{me(YM(c),f=>{tn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Tc(e),removeFilter:(c,u)=>{me(YM(c),f=>{if(tn(e,f))if(Oe(u)){const b=e[f],y=Ct(b.callbacks,T=>T!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},Q0=(e,n)=>{me(n,o=>{e.attr(o,null)})},ev=(e,n,o)=>{e.addNodeFilter("font",r=>{me(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&bi(y).each(T=>{u["font-size"]=o[T-1]}),c.name="span",c.attr("style",n.serialize(u)),Q0(c,["color","face","size"])})})},tv=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";me(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},QI=(e,n,o)=>{var r;const c=Pb();n.convert_fonts_to_spans&&ev(e,c,Ve.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),tv(e,o,c)},Z4=(e,n,o)=>{n.inline_styles&&QI(e,n,o)},j4=(e,n)=>{e.addNodeFilter("br",(o,r,c)=>{const u=Ve.extend({},n.getBlockElements()),f=n.getNonEmptyElements(),b=n.getWhitespaceElements();u.body=1;const y=T=>T.name in u&&lo(n,T);for(let T=0,N=o.length;T<N;T++){let R=o[T],I=R.parent;if(I&&u[I.name]&&R===I.lastChild){let G=R.prev;for(;G;){const X=G.name;if(X!=="span"||G.attr("data-mce-type")!=="bookmark"){X==="br"&&(R=null);break}G=G.prev}if(R&&(R.remove(),ti(n,f,b,I))){const X=n.getElementRule(I.name);X&&(X.removeEmpty?I.remove():X.paddEmpty&&S4(c,y,I))}}else{let G=R;for(;I&&I.firstChild===G&&I.lastChild===G&&(G=I,!u[I.name]);)I=I.parent;if(G===I){const X=new kl("#text",3);X.value=Ce,R.replace(X)}}}})},QM=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),e8=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},G4=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?e8(r):decodeURIComponent(r);return L.some({type:c[1],data:f,base64Encoded:u})}else return L.none()},q4=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return L.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return L.some(new Blob([c],{type:e}))},t8=e=>new Promise((n,o)=>{G4(e).bind(({type:r,data:c,base64Encoded:u})=>q4(r,c,u)).fold(()=>o("Invalid data URI"),n)}),n8=e=>jo(e,"blob:")?QM(e):jo(e,"data:")?t8(e):Promise.reject("Unknown URI format"),eN=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let o8=0;const s8=e=>(e||"blobid")+o8++,K4=(e,n,o)=>G4(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return L.none();{const f=u?r:btoa(r);return o(f,c)}}),tN=(e,n,o)=>{const r=e.create(s8(),n,o);return e.add(r),r},nv=(e,n,o=!1)=>K4(n,o,(r,c)=>L.from(e.getByData(r,c)).orThunk(()=>q4(c,r).map(u=>tN(e,u,r)))),nN=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(jo(n,"blob:")){const r=e.getByUri(n);return Oe(r)?Promise.resolve(r):n8(n).then(c=>eN(c).then(u=>K4(u,!1,f=>L.some(tN(e,c,f))).getOrThunk(o)))}else return jo(n,"data:")?nv(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},r8=e=>Oe(e.attr("data-mce-bogus")),oN=e=>e.attr("src")===Kn.transparentSrc||Oe(e.attr("data-mce-placeholder")),a8=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");oN(c)||r8(c)||It(u)||nv(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>me(c,r))}},sN=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&j4(e,o),e.addAttributeFilter("href",c=>{let u=c.length;const f=y=>y.split(" ").filter(N=>N.length>0).concat(["noopener"]).sort().join(" "),b=y=>{const T=y?Ve.trim(y):"";return/\b(noopener)\b/g.test(T)?T:f(T)};if(!n.allow_unsafe_link_target)for(;u--;){const y=c[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",b(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,y,T;for(;u--;)if(T=c[u],T.name==="a"&&T.firstChild&&!T.attr("href"))for(y=T.parent,f=T.lastChild;f&&y;)b=f.prev,y.insert(f,T),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new kl("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],y=(u=b.attr("class"))!==null&&u!==void 0?u:"",T=Ve.explode(y," ");let N="";for(let R=0;R<T.length;R++){const I=T[R];let G=!1,X=r["*"];X&&X[I]&&(G=!0),X=r[b.name],!G&&X&&X[I]&&(G=!0),G&&(N&&(N+=" "),N+=I)}N.length||(N=null),b.attr("class",N)}}),a8(e,n)};function Q1(e){"@babel/helpers - typeof";return Q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Q1(e)}function X4(e,n){return X4=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},X4(e,n)}function rN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sC(e,n,o){return rN()?sC=Reflect.construct:sC=function(c,u,f){var b=[null];b.push.apply(b,u);var y=Function.bind.apply(c,b),T=new y;return f&&X4(T,f.prototype),T},sC.apply(null,arguments)}function Rd(e){return aN(e)||cN(e)||lN(e)||c8()}function aN(e){if(Array.isArray(e))return Y4(e)}function cN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lN(e,n){if(e){if(typeof e=="string")return Y4(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Y4(e,n)}}function Y4(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function c8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l8=Object.hasOwnProperty,Px=Object.setPrototypeOf,rC=Object.isFrozen,iN=Object.getPrototypeOf,uN=Object.getOwnPropertyDescriptor,zc=Object.freeze,Of=Object.seal,i8=Object.create,Ig=typeof Reflect<"u"&&Reflect,ov=Ig.apply,Fx=Ig.construct;ov||(ov=function(n,o,r){return n.apply(o,r)}),zc||(zc=function(n){return n}),Of||(Of=function(n){return n}),Fx||(Fx=function(n,o){return sC(n,Rd(o))});var aC=Md(Array.prototype.forEach),dN=Md(Array.prototype.pop),eb=Md(Array.prototype.push),cC=Md(String.prototype.toLowerCase),mN=Md(String.prototype.match),vp=Md(String.prototype.replace),u8=Md(String.prototype.indexOf),d8=Md(String.prototype.trim),il=Md(RegExp.prototype.test),J4=m8(TypeError);function Md(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return ov(e,n,r)}}function m8(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Fx(e,o)}}function Uo(e,n){Px&&Px(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=cC(r);c!==r&&(rC(n)||(n[o]=c),r=c)}e[r]=!0}return e}function tb(e){var n=i8(null),o;for(o in e)ov(l8,e,[o])&&(n[o]=e[o]);return n}function sv(e,n){for(;e!==null;){var o=uN(e,n);if(o){if(o.get)return Md(o.get);if(typeof o.value=="function")return Md(o.value)}e=iN(e)}function r(c){return console.warn("fallback value for",c),null}return r}var xc=zc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Q4=zc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),rv=zc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nb=zc(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ix=zc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ni=zc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),yp=zc(["#text"]),e3=zc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),t3=zc(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),n3=zc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Lx=zc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fN=Of(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lC=Of(/<%[\w\W]*|[\w\W]*%>/gm),o3=Of(/^data-[\-\w.\u00B7-\uFFFF]/),f8=Of(/^aria-[\-\w]+$/),gN=Of(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),g8=Of(/^(?:\w+script|data):/i),s3=Of(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),r3=Of(/^html$/i),a3=function(){return typeof window>"u"?null:window},hN=function(n,o){if(Q1(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function c3(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a3(),n=function(Se){return c3(Se)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,y=e.NodeFilter,T=e.NamedNodeMap,N=T===void 0?e.NamedNodeMap||e.MozNamedAttrMap:T,R=e.HTMLFormElement,I=e.DOMParser,G=e.trustedTypes,X=b.prototype,W=sv(X,"cloneNode"),K=sv(X,"nextSibling"),ae=sv(X,"childNodes"),le=sv(X,"parentNode");if(typeof u=="function"){var ce=r.createElement("template");ce.content&&ce.content.ownerDocument&&(r=ce.content.ownerDocument)}var he=hN(G,o),Fe=he?he.createHTML(""):"",Et=r,Ue=Et.implementation,ve=Et.createNodeIterator,_e=Et.createDocumentFragment,et=Et.getElementsByTagName,ot=o.importNode,bt={};try{bt=tb(r).documentMode?r.documentMode:{}}catch{}var sn={};n.isSupported=typeof le=="function"&&Ue&&typeof Ue.createHTMLDocument<"u"&&bt!==9;var Rt=fN,kn=lC,go=o3,Bs=f8,ha=g8,kr=s3,Ye=gN,Tt=null,Zn=Uo({},[].concat(Rd(xc),Rd(Q4),Rd(rv),Rd(Ix),Rd(yp))),Vn=null,_t=Uo({},[].concat(Rd(e3),Rd(t3),Rd(n3),Rd(Lx))),vt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ke=null,Jt=null,ln=!0,Co=!0,ho=!1,un=!1,Nt=!1,ps=!1,Do=!1,ks=!1,$s=!1,cs=!1,Ar=!0,li=!0,uc=!1,Ld={},ii=null,qg=Uo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Dp=null,Ki=Uo({},["audio","video","img","source","image","track"]),Hd=null,Lr=Uo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ru="http://www.w3.org/1998/Math/MathML",Am="http://www.w3.org/2000/svg",Mu="http://www.w3.org/1999/xhtml",Nu=Mu,Lf=!1,Ec,Kg=["application/xhtml+xml","text/html"],Hf="text/html",Bu,Rp=null,LT=r.createElement("form"),wD=function(Se){return Se instanceof RegExp||Se instanceof Function},qC=function(Se){Rp&&Rp===Se||((!Se||Q1(Se)!=="object")&&(Se={}),Se=tb(Se),Tt="ALLOWED_TAGS"in Se?Uo({},Se.ALLOWED_TAGS):Zn,Vn="ALLOWED_ATTR"in Se?Uo({},Se.ALLOWED_ATTR):_t,Hd="ADD_URI_SAFE_ATTR"in Se?Uo(tb(Lr),Se.ADD_URI_SAFE_ATTR):Lr,Dp="ADD_DATA_URI_TAGS"in Se?Uo(tb(Ki),Se.ADD_DATA_URI_TAGS):Ki,ii="FORBID_CONTENTS"in Se?Uo({},Se.FORBID_CONTENTS):qg,Ke="FORBID_TAGS"in Se?Uo({},Se.FORBID_TAGS):{},Jt="FORBID_ATTR"in Se?Uo({},Se.FORBID_ATTR):{},Ld="USE_PROFILES"in Se?Se.USE_PROFILES:!1,ln=Se.ALLOW_ARIA_ATTR!==!1,Co=Se.ALLOW_DATA_ATTR!==!1,ho=Se.ALLOW_UNKNOWN_PROTOCOLS||!1,un=Se.SAFE_FOR_TEMPLATES||!1,Nt=Se.WHOLE_DOCUMENT||!1,ks=Se.RETURN_DOM||!1,$s=Se.RETURN_DOM_FRAGMENT||!1,cs=Se.RETURN_TRUSTED_TYPE||!1,Do=Se.FORCE_BODY||!1,Ar=Se.SANITIZE_DOM!==!1,li=Se.KEEP_CONTENT!==!1,uc=Se.IN_PLACE||!1,Ye=Se.ALLOWED_URI_REGEXP||Ye,Nu=Se.NAMESPACE||Mu,Se.CUSTOM_ELEMENT_HANDLING&&wD(Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(vt.tagNameCheck=Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&wD(Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(vt.attributeNameCheck=Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&typeof Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(vt.allowCustomizedBuiltInElements=Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ec=Kg.indexOf(Se.PARSER_MEDIA_TYPE)===-1?Ec=Hf:Ec=Se.PARSER_MEDIA_TYPE,Bu=Ec==="application/xhtml+xml"?function(wt){return wt}:cC,un&&(Co=!1),$s&&(ks=!0),Ld&&(Tt=Uo({},Rd(yp)),Vn=[],Ld.html===!0&&(Uo(Tt,xc),Uo(Vn,e3)),Ld.svg===!0&&(Uo(Tt,Q4),Uo(Vn,t3),Uo(Vn,Lx)),Ld.svgFilters===!0&&(Uo(Tt,rv),Uo(Vn,t3),Uo(Vn,Lx)),Ld.mathMl===!0&&(Uo(Tt,Ix),Uo(Vn,n3),Uo(Vn,Lx))),Se.ADD_TAGS&&(Tt===Zn&&(Tt=tb(Tt)),Uo(Tt,Se.ADD_TAGS)),Se.ADD_ATTR&&(Vn===_t&&(Vn=tb(Vn)),Uo(Vn,Se.ADD_ATTR)),Se.ADD_URI_SAFE_ATTR&&Uo(Hd,Se.ADD_URI_SAFE_ATTR),Se.FORBID_CONTENTS&&(ii===qg&&(ii=tb(ii)),Uo(ii,Se.FORBID_CONTENTS)),li&&(Tt["#text"]=!0),Nt&&Uo(Tt,["html","head","body"]),Tt.table&&(Uo(Tt,["tbody"]),delete Ke.tbody),zc&&zc(Se),Rp=Se)},HT=Uo({},["mi","mo","mn","ms","mtext"]),VT=Uo({},["foreignobject","desc","title","annotation-xml"]),SD=Uo({},["title","style","font","a","script"]),Vd=Uo({},Q4);Uo(Vd,rv),Uo(Vd,nb);var Cb=Uo({},Ix);Uo(Cb,ni);var pe=function(Se){var wt=le(Se);(!wt||!wt.tagName)&&(wt={namespaceURI:Mu,tagName:"template"});var dn=cC(Se.tagName),er=cC(wt.tagName);return Se.namespaceURI===Am?wt.namespaceURI===Mu?dn==="svg":wt.namespaceURI===Ru?dn==="svg"&&(er==="annotation-xml"||HT[er]):!!Vd[dn]:Se.namespaceURI===Ru?wt.namespaceURI===Mu?dn==="math":wt.namespaceURI===Am?dn==="math"&&VT[er]:!!Cb[dn]:Se.namespaceURI===Mu?wt.namespaceURI===Am&&!VT[er]||wt.namespaceURI===Ru&&!HT[er]?!1:!Cb[dn]&&(SD[dn]||!Vd[dn]):!1},be=function(Se){eb(n.removed,{element:Se});try{Se.parentNode.removeChild(Se)}catch{try{Se.outerHTML=Fe}catch{Se.remove()}}},Je=function(Se,wt){try{eb(n.removed,{attribute:wt.getAttributeNode(Se),from:wt})}catch{eb(n.removed,{attribute:null,from:wt})}if(wt.removeAttribute(Se),Se==="is"&&!Vn[Se])if(ks||$s)try{be(wt)}catch{}else try{wt.setAttribute(Se,"")}catch{}},Ge=function(Se){var wt,dn;if(Do)Se="<remove></remove>"+Se;else{var er=mN(Se,/^[\r\n\t ]+/);dn=er&&er[0]}Ec==="application/xhtml+xml"&&(Se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Se+"</body></html>");var Xi=he?he.createHTML(Se):Se;if(Nu===Mu)try{wt=new I().parseFromString(Xi,Ec)}catch{}if(!wt||!wt.documentElement){wt=Ue.createDocument(Nu,"template",null);try{wt.documentElement.innerHTML=Lf?"":Xi}catch{}}var dl=wt.body||wt.documentElement;return Se&&dn&&dl.insertBefore(r.createTextNode(dn),dl.childNodes[0]||null),Nu===Mu?et.call(wt,Nt?"html":"body")[0]:Nt?wt.documentElement:dl},Ft=function(Se){return ve.call(Se.ownerDocument||Se,Se,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},Yn=function(Se){return Se instanceof R&&(typeof Se.nodeName!="string"||typeof Se.textContent!="string"||typeof Se.removeChild!="function"||!(Se.attributes instanceof N)||typeof Se.removeAttribute!="function"||typeof Se.setAttribute!="function"||typeof Se.namespaceURI!="string"||typeof Se.insertBefore!="function")},ls=function(Se){return Q1(f)==="object"?Se instanceof f:Se&&Q1(Se)==="object"&&typeof Se.nodeType=="number"&&typeof Se.nodeName=="string"},pa=function(Se,wt,dn){sn[Se]&&aC(sn[Se],function(er){er.call(n,wt,dn,Rp)})},Ra=function(Se){var wt;if(pa("beforeSanitizeElements",Se,null),Yn(Se)||il(/[\u0080-\uFFFF]/,Se.nodeName))return be(Se),!0;var dn=Bu(Se.nodeName);if(pa("uponSanitizeElement",Se,{tagName:dn,allowedTags:Tt}),Se.hasChildNodes()&&!ls(Se.firstElementChild)&&(!ls(Se.content)||!ls(Se.content.firstElementChild))&&il(/<[/\w]/g,Se.innerHTML)&&il(/<[/\w]/g,Se.textContent)||dn==="select"&&il(/<template/i,Se.innerHTML))return be(Se),!0;if(!Tt[dn]||Ke[dn]){if(!Ke[dn]&&wb(dn)&&(vt.tagNameCheck instanceof RegExp&&il(vt.tagNameCheck,dn)||vt.tagNameCheck instanceof Function&&vt.tagNameCheck(dn)))return!1;if(li&&!ii[dn]){var er=le(Se)||Se.parentNode,Xi=ae(Se)||Se.childNodes;if(Xi&&er)for(var dl=Xi.length,ml=dl-1;ml>=0;--ml)er.insertBefore(W(Xi[ml],!0),K(Se))}return be(Se),!0}return Se instanceof b&&!pe(Se)||(dn==="noscript"||dn==="noembed")&&il(/<\/no(script|embed)/i,Se.innerHTML)?(be(Se),!0):(un&&Se.nodeType===3&&(wt=Se.textContent,wt=vp(wt,Rt," "),wt=vp(wt,kn," "),Se.textContent!==wt&&(eb(n.removed,{element:Se.cloneNode()}),Se.textContent=wt)),pa("afterSanitizeElements",Se,null),!1)},Hv=function(Se,wt,dn){if(Ar&&(wt==="id"||wt==="name")&&(dn in r||dn in LT))return!1;if(!(Co&&!Jt[wt]&&il(go,wt))){if(!(ln&&il(Bs,wt))){if(!Vn[wt]||Jt[wt]){if(!(wb(Se)&&(vt.tagNameCheck instanceof RegExp&&il(vt.tagNameCheck,Se)||vt.tagNameCheck instanceof Function&&vt.tagNameCheck(Se))&&(vt.attributeNameCheck instanceof RegExp&&il(vt.attributeNameCheck,wt)||vt.attributeNameCheck instanceof Function&&vt.attributeNameCheck(wt))||wt==="is"&&vt.allowCustomizedBuiltInElements&&(vt.tagNameCheck instanceof RegExp&&il(vt.tagNameCheck,dn)||vt.tagNameCheck instanceof Function&&vt.tagNameCheck(dn))))return!1}else if(!Hd[wt]){if(!il(Ye,vp(dn,kr,""))){if(!((wt==="src"||wt==="xlink:href"||wt==="href")&&Se!=="script"&&u8(dn,"data:")===0&&Dp[Se])){if(!(ho&&!il(ha,vp(dn,kr,"")))){if(dn)return!1}}}}}}return!0},wb=function(Se){return Se.indexOf("-")>0},xD=function(Se){var wt,dn,er,Xi;pa("beforeSanitizeAttributes",Se,null);var dl=Se.attributes;if(dl){var ml={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Vn};for(Xi=dl.length;Xi--;){wt=dl[Xi];var KC=wt,Uc=KC.name,J6=KC.namespaceURI;dn=Uc==="value"?wt.value:d8(wt.value),er=Bu(Uc);var Q6=dn;if(ml.attrName=er,ml.attrValue=dn,ml.keepAttr=!0,ml.forceKeepAttr=void 0,pa("uponSanitizeAttribute",Se,ml),dn=ml.attrValue,!ml.forceKeepAttr){if(!ml.keepAttr){Je(Uc,Se);continue}if(il(/\/>/i,dn)){Je(Uc,Se);continue}un&&(dn=vp(dn,Rt," "),dn=vp(dn,kn," "));var uZ=Bu(Se.nodeName);if(!Hv(uZ,er,dn)){Je(Uc,Se);continue}if(dn!==Q6)try{J6?Se.setAttributeNS(J6,Uc,dn):Se.setAttribute(Uc,dn)}catch{Je(Uc,Se)}}}pa("afterSanitizeAttributes",Se,null)}},Y6=function Mn(Se){var wt,dn=Ft(Se);for(pa("beforeSanitizeShadowDOM",Se,null);wt=dn.nextNode();)pa("uponSanitizeShadowNode",wt,null),!Ra(wt)&&(wt.content instanceof c&&Mn(wt.content),xD(wt));pa("afterSanitizeShadowDOM",Se,null)};return n.sanitize=function(Mn,Se){var wt,dn,er,Xi,dl;if(Lf=!Mn,Lf&&(Mn="<!-->"),typeof Mn!="string"&&!ls(Mn)){if(typeof Mn.toString!="function")throw J4("toString is not a function");if(Mn=Mn.toString(),typeof Mn!="string")throw J4("dirty is not a string, aborting")}if(!n.isSupported){if(Q1(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Mn=="string")return e.toStaticHTML(Mn);if(ls(Mn))return e.toStaticHTML(Mn.outerHTML)}return Mn}if(ps||qC(Se),n.removed=[],typeof Mn=="string"&&(uc=!1),uc){if(Mn.nodeName){var ml=Bu(Mn.nodeName);if(!Tt[ml]||Ke[ml])throw J4("root node is forbidden and cannot be sanitized in-place")}}else if(Mn instanceof f)wt=Ge("<!---->"),dn=wt.ownerDocument.importNode(Mn,!0),dn.nodeType===1&&dn.nodeName==="BODY"||dn.nodeName==="HTML"?wt=dn:wt.appendChild(dn);else{if(!ks&&!un&&!Nt&&Mn.indexOf("<")===-1)return he&&cs?he.createHTML(Mn):Mn;if(wt=Ge(Mn),!wt)return ks?null:cs?Fe:""}wt&&Do&&be(wt.firstChild);for(var KC=Ft(uc?Mn:wt);er=KC.nextNode();)er.nodeType===3&&er===Xi||Ra(er)||(er.content instanceof c&&Y6(er.content),xD(er),Xi=er);if(Xi=null,uc)return Mn;if(ks){if($s)for(dl=_e.call(wt.ownerDocument);wt.firstChild;)dl.appendChild(wt.firstChild);else dl=wt;return Vn.shadowroot&&(dl=ot.call(o,dl,!0)),dl}var Uc=Nt?wt.outerHTML:wt.innerHTML;return Nt&&Tt["!doctype"]&&wt.ownerDocument&&wt.ownerDocument.doctype&&wt.ownerDocument.doctype.name&&il(r3,wt.ownerDocument.doctype.name)&&(Uc="<!DOCTYPE "+wt.ownerDocument.doctype.name+`>
`+Uc),un&&(Uc=vp(Uc,Rt," "),Uc=vp(Uc,kn," ")),he&&cs?he.createHTML(Uc):Uc},n.setConfig=function(Mn){qC(Mn),ps=!0},n.clearConfig=function(){Rp=null,ps=!1},n.isValidAttribute=function(Mn,Se,wt){Rp||qC({});var dn=Bu(Mn),er=Bu(Se);return Hv(dn,er,wt)},n.addHook=function(Mn,Se){typeof Se=="function"&&(sn[Mn]=sn[Mn]||[],eb(sn[Mn],Se))},n.removeHook=function(Mn){if(sn[Mn])return dN(sn[Mn])},n.removeHooks=function(Mn){sn[Mn]&&(sn[Mn]=[])},n.removeAllHooks=function(){sn={}},n}var h8=c3();const Cm=Ve.each,l3=Ve.trim,p8=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],b8={ftp:21,http:80,https:443,mailto:25},pN=["img","video"],bN=(e,n)=>Oe(e)?!e:Oe(n)?!Me(pN,n):!0,iC=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},vN=(e,n,o)=>{const r=iC(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?bN(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class wm{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=lf.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!vN(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=l3(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new wm(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&Cm(p8,(b,y)=>{let T=f[y];T&&(T=T.replace(/\(mce_at\)/g,"@@")),c[b]=T}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new wm(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new wm(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?b8[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];Cm(u,R=>{R&&b.push(R)});const y=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}y.push(f[R])}const T=b.length-r;let N;return T<=0?N=Qo(y).join("/"):N=b.slice(0,T).join("/")+"/"+Qo(y).join("/"),N.indexOf("/")!==0&&(N="/"+N),c&&N.lastIndexOf("/")!==N.length-1&&(N+=c),N}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const v8=Ve.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),i3="data-mce-type";let yN=0;const u3=(e,n,o,r)=>{var c,u,f,b;const y=n.validate,T=o.getSpecialElements();e.nodeType===Ga&&!n.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const N=(u=r==null?void 0:r.tagName)!==null&&u!==void 0?u:e.nodeName.toLowerCase();if(e.nodeType!==$l||N==="body")return;const R=Y.fromDom(e),I=Ci(R,i3),G=pr(R,"data-mce-bogus");if(!I&&ee(G)){G==="all"?no(R):Fa(R);return}const X=o.getElementRule(N);if(y&&!X){tn(T,N)?no(R):Fa(R);return}else Oe(r)&&(r.allowedTags[N]=!0);if(y&&X&&!I){if(me((f=X.attributesForced)!==null&&f!==void 0?f:[],W=>{Ss(R,W.name,W.value==="{$uid}"?`mce_${yN++}`:W.value)}),me((b=X.attributesDefault)!==null&&b!==void 0?b:[],W=>{Ci(R,W.name)||Ss(R,W.name,W.value==="{$uid}"?`mce_${yN++}`:W.value)}),X.attributesRequired&&!Ie(X.attributesRequired,W=>Ci(R,W))){Fa(R);return}if(X.removeEmptyAttrs&&gc(R)){Fa(R);return}X.outputName&&X.outputName!==N&&Zb(R,X.outputName)}},CN=(e,n,o,r,c)=>!(r in v8&&vN(e,c,o))&&(!e.validate||n.isValid(o,r)||jo(r,"data-")||jo(r,"aria-")),wN=(e,n)=>e.hasAttribute(i3)&&(n==="id"||n==="class"||n==="style"),SN=(e,n)=>e in n.getBoolAttrs(),xN=(e,n,o)=>{const{attributes:r}=e;for(let c=r.length-1;c>=0;c--){const u=r[c],f=u.name,b=u.value;!CN(n,o,e.tagName.toLowerCase(),f,b)&&!wN(e,f)?e.removeAttribute(f):SN(f,o)&&e.setAttribute(f,f)}},d3=(e,n)=>{const o=h8();return o.addHook("uponSanitizeElement",(r,c)=>{u3(r,e,n,c)}),o.addHook("uponSanitizeAttribute",(r,c)=>{const u=r.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=CN(e,n,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,SN(f,n)&&(c.attrValue=f),e.allow_svg_data_urls&&jo(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):wN(r,f)&&(c.forceKeepAttr=!0)}),o},EN=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},TN=(e,n)=>{if(e.sanitize){const o=d3(e,n);return(r,c)=>{o.sanitize(r,EN(e,c)),o.removed=[]}}else return(o,r)=>{const c=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let u;for(;u=c.nextNode();)u3(u,e,n),dt(u)&&xN(u,e,n)}},Hx=Ve.makeMap,m3=Ve.extend,f3=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const y=u[f],T=new kl(y.nodeName.toLowerCase(),y.nodeType);if(dt(y)){const N=y.attributes;for(let R=0,I=N.length;R<I;R++){const G=N[R];T.attr(G.name,G.value)}}else je(y)?(T.value=y.data,c&&(T.raw=!0)):(pc(y)||Kv(y)||Xv(y))&&(T.value=y.data);f3(T,y,o),e.append(T)}},_N=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;me(n,b=>b(f)),It(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];me(o,f=>f(u))}},kN=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=m3(Hx("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=cd(n),T=/[ \t\r\n]+/g,N=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,I=le=>{let ce=le.parent;for(;Oe(ce);){if(ce.name in f)return!0;ce=ce.parent}return!1},G=le=>{let ce=le;for(;Oe(ce);){if(ce.name in y)return ti(n,u,f,ce);ce=ce.parent}return!1},X=le=>le.name in b||Db(n,le),W=(le,ce)=>{const he=ce?le.prev:le.next;return Oe(he)||It(le.parent)?!1:X(le.parent)&&(le.parent!==e||r.isRootContent===!0)};return[le=>{var ce;if(le.type===3&&!I(le)){let he=(ce=le.value)!==null&&ce!==void 0?ce:"";he=he.replace(T," "),(E4(le.prev,X)||W(le,!0))&&(he=he.replace(N,"")),he.length===0?le.remove():le.value=he}},le=>{var ce;if(le.type===1){const he=n.getElementRule(le.name);if(c&&he){const Fe=ti(n,u,f,le);he.paddInEmptyBlock&&Fe&&G(le)?S4(r,X,le):he.removeEmpty&&Fe?X(le)?le.remove():le.unwrap():he.paddEmpty&&(Fe||AZ(le))&&S4(r,X,le)}}else if(le.type===3&&!I(le)){let he=(ce=le.value)!==null&&ce!==void 0?ce:"";(le.next&&X(le.next)||W(le,!1))&&(he=he.replace(R,"")),he.length===0?le.remove():le.value=he}}]},y8=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Cp=(e={},n=df())=>{const o=JM(),r=JM(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=TN(c,n),b=(ce,he,Fe="html")=>{const Et=Fe==="xhtml"?"application/xhtml+xml":"text/html",Ue=tn(n.getSpecialElements(),he.toLowerCase()),ve=Ue?`<${he}>${ce}</${he}>`:ce,_e=Fe==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ve}</body></html>`:`<body>${ve}</body>`,et=u.parseFromString(_e,Et).body;return f(et,Et),Ue?et.firstChild:et},y=o.addFilter,T=o.getFilters,N=o.removeFilter,R=r.addFilter,I=r.getFilters,G=r.removeFilter,X=(ce,he)=>{rM(n,ce)&&he.push(ce)},W=(ce,he)=>{const Fe=ee(he.attr(i3)),Et=he.type===1&&!tn(ce,he.name)&&!Db(n,he);return he.type===3||Et&&!Fe},K=(ce,he)=>{const Fe=m3(Hx("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Et=/^[ \t\r\n]+/,Ue=/[ \t\r\n]+$/;let ve=ce.firstChild,_e=null;const et=ot=>{var bt,sn;ot&&(ve=ot.firstChild,ve&&ve.type===3&&(ve.value=(bt=ve.value)===null||bt===void 0?void 0:bt.replace(Et,"")),ve=ot.lastChild,ve&&ve.type===3&&(ve.value=(sn=ve.value)===null||sn===void 0?void 0:sn.replace(Ue,"")))};if(n.isValidChild(ce.name,he.toLowerCase())){for(;ve;){const ot=ve.next;W(Fe,ve)?(_e||(_e=new kl(he,1),_e.attr(c.forced_root_block_attrs),ce.insert(_e,ve)),_e.append(ve)):(et(_e),_e=null),ve=ot}et(_e)}},le={schema:n,addAttributeFilter:R,getAttributeFilters:I,removeAttributeFilter:G,addNodeFilter:y,getNodeFilters:T,removeNodeFilter:N,parse:(ce,he={})=>{var Fe;const Et=c.validate,Ue=(Fe=he.context)!==null&&Fe!==void 0?Fe:c.root_name,ve=b(ce,Ue,he.format);cm(n,ve);const _e=new kl(Ue,11);f3(_e,ve,n.getSpecialElements()),ve.innerHTML="";const[et,ot]=kN(_e,n,c,he),bt=[],sn=Et?Bs=>X(Bs,bt):Ot,Rt={nodes:{},attributes:{}},kn=Bs=>y4(T(),I(),Bs,Rt);if(_N(_e,[et,kn],[ot,sn]),bt.reverse(),Et&&bt.length>0)if(he.context){const{pass:Bs,fail:ha}=Zo(bt,kr=>kr.parent===_e);T4(ha,n,_e,kn),he.invalid=Bs.length>0}else T4(bt,n,_e,kn);const go=y8(c,he);return go&&(_e.name==="body"||he.isRootContent)&&K(_e,go),he.invalid||C4(Rt,he),_e}};return sN(le,c),Z4(le,c,n),le},C8=e=>Ox(e)?ip({validate:!1}).serialize(e):e,uC=(e,n,o)=>{const r=C8(e),c=n(r);if(c.isDefaultPrevented())return c;if(Ox(e))if(c.content!==r){const u=Cp({validate:!1,forced_root_block:!1,sanitize:o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},AN=(e,n)=>{if(n.no_events)return rc.value(n);{const o=_g(e,n);return o.isDefaultPrevented()?rc.error(ap(e,{content:"",...o}).content):rc.value(o)}},ON=(e,n,o)=>o.no_events?n:uC(n,c=>ap(e,{...o,content:c}),f1(e)).content,g3=(e,n)=>{if(n.no_events)return rc.value(n);{const o=uC(n.content,r=>S2(e,{...n,content:r}),f1(e));return o.isDefaultPrevented()?(jS(e,o),rc.error(void 0)):rc.value(o)}},Vx=(e,n,o)=>{o.no_events||jS(e,{...o,content:n})},zx=(e,n,o)=>({element:e,width:n,rows:o}),DN=(e,n)=>({element:e,cells:n}),w8=(e,n)=>({x:e,y:n}),RN=(e,n)=>Yc(e,n).bind(bi).getOr(1),S8=(e,n,o,r,c)=>{const u=RN(c,"rowspan"),f=RN(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=DN(o1(r),[]));for(let T=n;T<n+f;T++){const N=b[y].cells;N[T]=y===o&&T===n?c:Ph(c)}}},MN=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},RZ=(e,n,o)=>{for(;MN(e,n,o);)n++;return n},NN=e=>Eo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),BN=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(uo(c[u],n))return L.some(w8(u,r))}return L.none()},$N=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,T=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(DN(f[b].element,T))}return u},x8=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?$N(e,r,c,u,f):$N(e,r,f,u,c);return zx(e.element,NN(b),b)},E8=(e,n)=>{const o=Ph(e.element),r=Y.fromTag("tbody");return Lo(r,n),Rs(o,r),o},T8=e=>He(e.rows,n=>{const o=He(n.cells,c=>{const u=o1(c);return ao(u,"colspan"),ao(u,"rowspan"),u}),r=Ph(n.element);return Lo(r,o),r}),_8=e=>{const n=zx(Ph(e),0,[]);return me(Wr(e,"tr"),(o,r)=>{me(Wr(o,"td,th"),(c,u)=>{S8(n,RZ(n,u,r),r,o,c)})}),zx(n.element,NN(n.rows),n.rows)},PN=e=>E8(e,T8(e)),k8=(e,n,o)=>BN(e,n).bind(r=>BN(e,o).map(c=>x8(e,r,c))),A8=e=>Jo(e,n=>Io(n)==="ul"||Io(n)==="ol"),O8=(e,n)=>Jo(e,o=>Io(o)==="li"&&A0(o,n)).fold(Te([]),o=>A8(e).map(r=>{const c=Y.fromTag(Io(r)),u=Ko(na(r),(f,b)=>jo(b,"list-style"));return ah(c,u),[Y.fromTag("li"),c]}).getOr([])),D8=(e,n)=>{const o=Eo(n,(r,c)=>(Rs(c,r),c),e);return n.length>0?Ql([o]):o},R8=e=>Ha(e)?Pa(e).filter(La).fold(Te([]),n=>[e,n]):La(e)?[e]:[],MZ=(e,n)=>{const o=Y.fromDom(n.commonAncestorContainer),r=$g(o,e),c=Ct(r,od),u=O8(r,n),f=c.concat(u.length?u:R8(o));return He(f,Ph)},M8=()=>Ql([]),N8=(e,n)=>D8(Y.fromDom(n.cloneContents()),MZ(e,n)),B8=(e,n)=>Wt(n,"table",Be(uo,e)),NZ=(e,n)=>B8(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=_8(o);return k8(u,r,c).map(f=>Ql([PN(f)]))}).getOrThunk(M8),$8=(e,n)=>n.length>0&&n[0].collapsed?M8():N8(e,n[0]),Ws=(e,n)=>{const o=_0(n,e);return o.length>0?NZ(e,o):$8(e,n)},av=(e,n)=>n>=0&&n<e.length&&ep(e.charAt(n)),P8=e=>ye(e.innerText),F8=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),I8=e=>L.from(e.selection.getRng()).map(n=>{var o;const r=L.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=F8(r),f=Y.fromDom(n.cloneContents());lR(f),iR(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=P8(b),T=ye((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),av(T,0)||av(T,T.length-1)){const N=r.getOr(c),R=P8(N),I=R.indexOf(y);if(I===-1)return y;{const G=av(R,I-1),X=av(R,I+y.length);return(G?" ":"")+y+(X?" ":"")}}else return y}).getOr(""),cv=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=Vk(e,k1(c)),f=n.contextual?Ws(Y.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},BZ=(e,n)=>{if(n.format==="text")return I8(e);{const o=cv(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},$Z=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),lc=(e,n,o={})=>{const r=$Z(o,n);return AN(e,r).fold(ht,c=>{const u=BZ(e,c);return ON(e,u,c)})},Ux=0,h3=1,p3=2,L8=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(N,R,I)=>({start:N,end:R,diag:I}),f=(N,R,I,G,X)=>{const W=y(N,R,I,G);if(W===null||W.start===R&&W.diag===R-G||W.end===N&&W.diag===N-I){let K=N,ae=I;for(;K<R||ae<G;)K<R&&ae<G&&e[K]===n[ae]?(X.push([Ux,e[K]]),++K,++ae):R-N>G-I?(X.push([p3,e[K]]),++K):(X.push([h3,n[ae]]),++ae)}else{f(N,W.start,I,W.start-W.diag,X);for(let K=W.start;K<W.end;++K)X.push([Ux,e[K]]);f(W.end,R,W.end-W.diag,G,X)}},b=(N,R,I,G)=>{let X=N;for(;X-R<G&&X<I&&e[X]===n[X-R];)++X;return u(N,X,R)},y=(N,R,I,G)=>{const X=R-N,W=G-I;if(X===0||W===0)return null;const K=X-W,ae=W+X,le=(ae%2===0?ae:ae+1)/2;r[1+le]=N,c[1+le]=R+1;let ce,he,Fe,Et,Ue;for(ce=0;ce<=le;++ce){for(he=-ce;he<=ce;he+=2){for(Fe=he+le,he===-ce||he!==ce&&r[Fe-1]<r[Fe+1]?r[Fe]=r[Fe+1]:r[Fe]=r[Fe-1]+1,Et=r[Fe],Ue=Et-N+I-he;Et<R&&Ue<G&&e[Et]===n[Ue];)r[Fe]=++Et,++Ue;if(K%2!==0&&K-ce<=he&&he<=K+ce&&c[Fe-K]<=r[Fe])return b(c[Fe-K],he+N-I,R,G)}for(he=K-ce;he<=K+ce;he+=2){for(Fe=he+le-K,he===K-ce||he!==K+ce&&c[Fe+1]<=c[Fe-1]?c[Fe]=c[Fe+1]-1:c[Fe]=c[Fe-1],Et=c[Fe]-1,Ue=Et-N+I-he;Et>=N&&Ue>=I&&e[Et]===n[Ue];)c[Fe]=Et--,Ue--;if(K%2===0&&-ce<=he&&he<=ce&&c[Fe]<=r[Fe+K])return b(c[Fe],he+N-I,R,G)}}return null},T=[];return f(0,e.length,0,n.length,T),T},FN=e=>dt(e)?e.outerHTML:je(e)?lf.encodeRaw(e.data,!1):pc(e)?"<!--"+e.data+"-->":"",Wx=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},H8=(e,n,o)=>{const r=Wx(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},b3=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},V8=(e,n)=>{let o=0;me(e,r=>{r[0]===Ux?o++:r[0]===h3?(H8(n,r[1],o),o++):r[0]===p3&&b3(n,o)})},IN=e=>Ct(He(hr(e.childNodes),FN),n=>n.length>0),LN=(e,n)=>{const o=He(hr(n.childNodes),FN);return V8(L8(o,e),n),n},v3=fi(()=>document.implementation.createHTMLDocument("undo")),HN=e=>e.indexOf("</iframe>")!==-1,y3=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),z8=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Zx=e=>{const n=IN(e.getBody()),o=Ma(n,c=>{const u=cR(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return HN(r)?y3(o):z8(r)},C3=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?LN(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Oe(r)&&wd(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},oi=e=>e.type==="fragmented"?e.fragments.join(""):e.content,VN=e=>{const n=Y.fromTag("body",v3());return xn(n,oi(e)),me(Wr(n,"*[data-mce-bogus]"),Fa),Jd(n)},U8=(e,n)=>oi(e)===oi(n),W8=(e,n)=>VN(e)===VN(n),w3=(e,n)=>!e||!n?!1:U8(e,n)?!0:W8(e,n),S3=e=>e.get()===0,dC=(e,n,o)=>{S3(o)&&(e.typing=n)},zN=(e,n)=>{e.typing&&(dC(e,!1,n),e.add())},Z8=e=>{e.typing&&(e.typing=!1,e.add())},j8=(e,n,o)=>{S3(n)&&o.set(sc(e.selection))},jx=(e,n,o,r,c,u,f)=>{const b=Zx(e),y=Ve.extend(u||{},b);if(!S3(r)||e.removed)return null;const T=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:T,originalEvent:f}).isDefaultPrevented()||T&&w3(T,y))return null;n.data[o.get()]&&c.get().each(I=>{n.data[o.get()].beforeBookmark=I});const N=d1(e);if(N&&n.data.length>N){for(let I=0;I<n.data.length-1;I++)n.data[I]=n.data[I+1];n.data.length--,o.set(n.data.length)}y.bookmark=sc(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const R={level:y,lastLevel:T,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),y},G8=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},q8=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];C3(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},UN=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],C3(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},x3=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,dC(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],C3(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},K8=e=>{e.clear(),e.add()},X8=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!w3(Zx(e),n.data[0]),PZ=(e,n)=>n.get()<e.data.length-1&&!e.typing,Y8=(e,n,o)=>(zN(e,n),e.beforeChange(),e.ignore(o),e.add()),J8=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},WN=(e,n)=>{const o=e.dom,r=Oe(n)?n:e.getBody();me(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=s0(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=aS(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},ZN=e=>({init:{bindEvents:Ot},undoManager:{beforeChange:(n,o)=>j8(e,n,o),add:(n,o,r,c,u,f)=>jx(e,n,o,r,c,u,f),undo:(n,o,r)=>x3(e,n,o,r),redo:(n,o)=>UN(e,n,o),clear:(n,o)=>G8(e,n,o),reset:n=>K8(n),hasUndo:(n,o)=>X8(e,n,o),hasRedo:(n,o)=>PZ(n,o),transact:(n,o,r)=>Y8(n,o,r),ignore:(n,o)=>J8(n,o),extra:(n,o,r,c)=>q8(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>K1(e,n,o,r,c),matchAll:(n,o)=>AI(e,n,o),matchNode:(n,o,r,c)=>ym(e,n,o,r,c),canApply:n=>Y0(e,n),closest:n=>OI(e,n),apply:(n,o,r)=>oC(e,n,o,r),remove:(n,o,r,c)=>z4(e,n,o,r,c),toggle:(n,o,r)=>bp(e,n,o,r),formatChanged:(n,o,r,c,u)=>pp(e,n,o,r,c,u)},editor:{getContent:n=>$F(e,n),setContent:(n,o)=>TI(e,n,o),insertContent:(n,o)=>xI(e,n,o),addVisual:n=>WN(e,n)},selection:{getContent:(n,o)=>lc(e,n,o)},autocompleter:{addDecoration:n=>_F(e,n),removeDecoration:()=>AF(e,Y.fromDom(e.getBody()))},raw:{getModel:()=>L.none()}}),mC=e=>{const n=T=>On(T)?T:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(T,N,R)=>r.transact(R),ignore:(T,N)=>r.ignore(N),extra:(T,N,R,I)=>r.extra(R,I)},formatter:{match:(T,N,R,I)=>c.match(T,n(N),I),matchAll:c.matchAll,matchNode:c.matchNode,canApply:T=>c.canApply(T),closest:T=>c.closest(T),apply:(T,N,R)=>c.apply(T,n(N)),remove:(T,N,R,I)=>c.remove(T,n(N)),toggle:(T,N,R)=>c.toggle(T,n(N)),formatChanged:(T,N,R,I,G)=>c.formatChanged(N,R,I,G)},editor:{getContent:T=>u.getContent(T),setContent:(T,N)=>({content:u.setContent(T,N),html:""}),insertContent:(T,N)=>(u.insertContent(T),""),addVisual:u.addVisual},selection:{getContent:(T,N)=>f.getContent(N)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>L.some(y.getRawModel())}}},Gx=()=>{const e=Te(null),n=Te("");return{init:{bindEvents:Ot},undoManager:{beforeChange:Ot,add:e,undo:e,redo:e,clear:Ot,reset:Ot,hasUndo:ke,hasRedo:ke,transact:e,ignore:Ot,extra:Ot},formatter:{match:ke,matchAll:Te([]),matchNode:Te(void 0),canApply:ke,closest:n,apply:Ot,remove:Ot,toggle:Ot,formatChanged:Te({unbind:Ot})},editor:{getContent:n,setContent:Te({content:"",html:""}),insertContent:Te(""),addVisual:Ot},selection:{getContent:n},autocompleter:{addDecoration:Ot,removeDecoration:Ot},raw:{getModel:Te(L.none())}}},zi=e=>tn(e.plugins,"rtc"),jN=e=>No(e.plugins,"rtc").bind(n=>L.from(n.setup)),GN=e=>{const n=e;return jN(e).fold(()=>(n.rtcInstance=ZN(e),L.none()),o=>(n.rtcInstance=Gx(),L.some(()=>o().then(r=>(n.rtcInstance=mC(r),r.rtc.isRemote)))))},E3=e=>e.rtcInstance?e.rtcInstance:ZN(e),_r=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},Q8=(e,n,o)=>{_r(e).undoManager.beforeChange(n,o)},e7=(e,n,o,r,c,u,f)=>_r(e).undoManager.add(n,o,r,c,u,f),t7=(e,n,o,r)=>_r(e).undoManager.undo(n,o,r),n7=(e,n,o)=>_r(e).undoManager.redo(n,o),qN=(e,n,o)=>{_r(e).undoManager.clear(n,o)},o7=(e,n)=>{_r(e).undoManager.reset(n)},s7=(e,n,o)=>_r(e).undoManager.hasUndo(n,o),fC=(e,n,o)=>_r(e).undoManager.hasRedo(n,o),KN=(e,n,o,r)=>_r(e).undoManager.transact(n,o,r),XN=(e,n,o)=>{_r(e).undoManager.ignore(n,o)},r7=(e,n,o,r,c)=>{_r(e).undoManager.extra(n,o,r,c)},a7=(e,n,o,r,c)=>_r(e).formatter.match(n,o,r,c),c7=(e,n,o)=>_r(e).formatter.matchAll(n,o),YN=(e,n,o,r,c)=>_r(e).formatter.matchNode(n,o,r,c),l7=(e,n)=>_r(e).formatter.canApply(n),i7=(e,n)=>_r(e).formatter.closest(n),u7=(e,n,o,r)=>{_r(e).formatter.apply(n,o,r)},d7=(e,n,o,r,c)=>{_r(e).formatter.remove(n,o,r,c)},FZ=(e,n,o,r)=>{_r(e).formatter.toggle(n,o,r)},Sm=(e,n,o,r,c,u)=>_r(e).formatter.formatChanged(n,o,r,c,u),T3=(e,n)=>E3(e).editor.getContent(n),m7=(e,n,o)=>E3(e).editor.setContent(n,o),f7=(e,n,o)=>E3(e).editor.insertContent(n,o),g7=(e,n,o)=>_r(e).selection.getContent(n,o),h7=(e,n)=>_r(e).editor.addVisual(n),fo=e=>_r(e).init.bindEvents(),IZ=(e,n)=>_r(e).autocompleter.addDecoration(n),p7=e=>_r(e).autocompleter.removeDecoration(),b7=(e,n={})=>{const o=n.format?n.format:"html";return g7(e,o,n)},_s=e=>e.dom.length===0?(no(e),L.none()):L.some(e),v7=(e,n)=>e.filter(o=>M1.isBookmarkNode(o.dom)).bind(n?lu:Qc),gC=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(cx(c,u,!1,!r),o.setStart(u,f)):(cx(u,c,!1,!r),o.setEnd(u,f))},y7=(e,n)=>{Pa(e).each(o=>{const r=e.dom;n&&L2(o,we(r,0))?_f(r,0):!n&&z1(o,we(r,r.length))&&e4(r,r.length)})},JN=(e,n,o,r)=>{e.bind(c=>((r?e4:_f)(c.dom,r?c.dom.length:0),n.filter(sr).map(f=>gC(c,f,o,r)))).orThunk(()=>v7(n,r).or(n).filter(sr).map(u=>y7(u,r)))},C7=(e,n)=>{const o=L.from(n.firstChild).map(Y.fromDom),r=L.from(n.lastChild).map(Y.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(Qc).filter(sr).bind(_s),u=r.bind(lu).filter(sr).bind(_s);JN(c,o,e,!0),JN(u,r,e,!1),e.collapse(!1)},QN=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),wp=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return ip({validate:!1},e.schema).serialize(u)}else return n.content},si=(e,n,o={})=>{const r=QN(o,n);g3(e,r).each(c=>{const u=wp(e,c),f=e.selection.getRng();C7(f,f.createContextualFragment(u)),e.selection.setRng(f),Tf(e,f),Vx(e,u,c)})},lv=(e,n,o)=>{if(tn(e,n)){const r=Ct(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var ob=(e,n)=>{let o,r;const c=(b,y)=>Jo(y,T=>e.is(T,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,T=u(y),N={};Qe(o,(R,I)=>{c(I,T).each(G=>{r[I]||(me(R,X=>{X(!0,{node:G,selector:I,parents:T})}),r[I]=R),N[I]=R})}),Qe(r,(R,I)=>{N[I]||(delete r[I],me(R,G=>{G(!1,{node:y,selector:I,parents:T})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{lv(o,b,y),lv(r,b,y)}})}};const xm=e=>!!(e&&e.ownerDocument)&&hc(Y.fromDom(e.ownerDocument),Y.fromDom(e)),hC=e=>e?xm(e.startContainer)&&xm(e.endContainer):!1,qx=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=ob(e,r),b=(Ye,Tt)=>{const Zn=e.createRng();Oe(Ye)&&Oe(Tt)?(Zn.setStart(Ye,Tt),Zn.setEnd(Ye,Tt),he(Zn),ae(!1)):(np(e,Zn,r.getBody(),!0),he(Zn))},y=Ye=>b7(r,Ye),T=(Ye,Tt)=>si(r,Ye,Tt),N=Ye=>YD(r.getBody(),ce(),Ye),R=Ye=>B2(r.getBody(),ce(),Ye),I=(Ye,Tt)=>ha.getBookmark(Ye,Tt),G=Ye=>ha.moveToBookmark(Ye),X=(Ye,Tt)=>(wF(e,Ye,Tt).each(he),Ye),W=()=>{const Ye=ce(),Tt=le();return!Ye||Ye.item?!1:Ye.compareEndPoints?Ye.compareEndPoints("StartToEnd",Ye)===0:!Tt||Ye.collapsed},K=()=>{const Ye=ce(),Tt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Tt.length>0?gr(Tt,Zn=>e.isEditable(Zn.parentElement)):Ye.startContainer===Ye.endContainer?e.isEditable(Ye.startContainer):e.isEditable(Ye.startContainer)&&e.isEditable(Ye.endContainer)},ae=Ye=>{const Tt=ce();Tt.collapse(!!Ye),he(Tt)},le=()=>n.getSelection?n.getSelection():n.document.selection,ce=()=>{let Ye;const Tt=(Vn,_t,vt)=>{try{return _t.compareBoundaryPoints(Vn,vt)}catch{return-1}},Zn=n.document;if(Oe(r.bookmark)&&!H1(r)){const Vn=G0(r);if(Vn.isSome())return Vn.map(_t=>Vk(r,[_t])[0]).getOr(Zn.createRange())}try{const Vn=le();Vn&&!Bt(Vn.anchorNode)&&(Vn.rangeCount>0?Ye=Vn.getRangeAt(0):Ye=Zn.createRange(),Ye=Vk(r,[Ye])[0])}catch{}if(Ye||(Ye=Zn.createRange()),ef(Ye.startContainer)&&Ye.collapsed){const Vn=e.getRoot();Ye.setStart(Vn,0),Ye.setEnd(Vn,0)}return c&&u&&(Tt(Ye.START_TO_START,Ye,c)===0&&Tt(Ye.END_TO_END,Ye,c)===0?Ye=u:(c=null,u=null)),Ye},he=(Ye,Tt)=>{if(!hC(Ye))return;const Zn=le();if(Ye=r.dispatch("SetSelectionRange",{range:Ye,forward:Tt}).range,Zn){u=Ye;try{Zn.removeAllRanges(),Zn.addRange(Ye)}catch{}Tt===!1&&Zn.extend&&(Zn.collapse(Ye.endContainer,Ye.endOffset),Zn.extend(Ye.startContainer,Ye.startOffset)),c=Zn.rangeCount>0?Zn.getRangeAt(0):null}if(!Ye.collapsed&&Ye.startContainer===Ye.endContainer&&(Zn!=null&&Zn.setBaseAndExtent)&&Ye.endOffset-Ye.startOffset<2&&Ye.startContainer.hasChildNodes()){const _t=Ye.startContainer.childNodes[Ye.startOffset];_t&&_t.nodeName==="IMG"&&(Zn.setBaseAndExtent(Ye.startContainer,Ye.startOffset,Ye.endContainer,Ye.endOffset),(Zn.anchorNode!==Ye.startContainer||Zn.focusNode!==Ye.endContainer)&&Zn.setBaseAndExtent(_t,0,_t,1))}r.dispatch("AfterSetSelectionRange",{range:Ye,forward:Tt})},Fe=Ye=>(T(e.getOuterHTML(Ye)),Ye),Et=()=>JD(r.getBody(),ce()),Ue=(Ye,Tt)=>CF(e,ce(),Ye,Tt),ve=()=>{const Ye=le(),Tt=Ye==null?void 0:Ye.anchorNode,Zn=Ye==null?void 0:Ye.focusNode;if(!Ye||!Tt||!Zn||Bt(Tt)||Bt(Zn))return!0;const Vn=e.createRng(),_t=e.createRng();try{Vn.setStart(Tt,Ye.anchorOffset),Vn.collapse(!0),_t.setStart(Zn,Ye.focusOffset),_t.collapse(!0)}catch{return!0}return Vn.compareBoundaryPoints(Vn.START_TO_START,_t)<=0},Bs={dom:e,win:n,serializer:o,editor:r,expand:(Ye={type:"word"})=>he(vm(e).expand(ce(),Ye)),collapse:ae,setCursorLocation:b,getContent:y,setContent:T,getBookmark:I,moveToBookmark:G,select:X,isCollapsed:W,isEditable:K,isForward:ve,setNode:Fe,getNode:Et,getSel:le,setRng:he,getRng:ce,getStart:N,getEnd:R,getSelectedBlocks:Ue,normalize:()=>{const Ye=ce(),Tt=le();if(!s2(Tt)&&Sd(r)){const Zn=W0(e,Ye);return Zn.each(Vn=>{he(Vn,ve())}),Zn.getOr(Ye)}return Ye},selectorChanged:(Ye,Tt)=>(f(Ye,Tt),Bs),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Ye,Tt=e.getRoot();for(;Tt&&Tt.nodeName!=="BODY";){if(Tt.scrollHeight>Tt.clientHeight){Ye=Tt;break}Tt=Tt.parentNode}return Ye},scrollIntoView:(Ye,Tt)=>{Oe(Ye)?Ng(r,Ye,Tt):Tf(r,ce(),Tt)},placeCaretAt:(Ye,Tt)=>he(P1(Ye,Tt,r.getDoc())),getBoundingClientRect:()=>{const Ye=ce();return Ye.collapsed?we.fromRangeStart(Ye).getClientRects()[0]:Ye.getBoundingClientRect()},destroy:()=>{n=c=u=null,kr.destroy()}},ha=M1(Bs),kr=F0(Bs,r);return Bs.bookmarkManager=ha,Bs.controlSelection=kr,Bs},_3=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const T=r[y];let N=T.attr(u);N!==void 0?(T.attr(c,N.length>0?N:null),T.attr(u,null)):(N=T.attr(c),c==="style"?N=o.serializeStyle(o.parseStyle(N),T.name):f&&(N=f.call(b,N,c,T.name)),T.attr(c,N.length>0?N:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(L.from(b.firstChild).exists(T=>{var N;return!ne((N=T.value)!==null&&N!==void 0?N:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=lf.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],T=y.firstChild,N=(u=T==null?void 0:T.value)!==null&&u!==void 0?u:"";if(c==="script"){const R=y.attr("type");R&&y.attr("type",R==="mce-no/type"?null:R.replace(/^mce\-/,"")),n.element_format==="xhtml"&&T&&N.length>0&&(T.value=`// <![CDATA[
`+f(N)+`
// ]]>`)}else n.element_format==="xhtml"&&T&&N.length>0&&(T.value=`<!--
`+f(N)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{me(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.remove_trailing_brs&&j4(e,e.schema)},eB=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},tB=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Ve.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return b2(e,{...o,node:u}),r&&(c.doc=r),u},w7=(e,n)=>Oe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,S7=(e,n,o)=>w7(e,o)?tB(e,n,o):n,nB=(e,n,o)=>{Ve.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},oB=(e,n,o)=>!n.no_events&&e?v2(e,{...n,content:o}).content:o,sB=(e,n,o)=>{const r=ye(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||ph(Y.fromDom(n))?r:Ve.trim(r)},rB=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return eB(c),c},k3=(e,n,o)=>ip(e,n).serialize(o),LZ=(e,n,o,r,c)=>{const u=k3(n,o,r);return oB(e,c,u)},x7=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,...e},c=n&&n.dom?n.dom:Po.DOM,u=n&&n.schema?n.schema:df(r),f=Cp(r,u);_3(f,r,c);const b=(y,T={})=>{const N={format:"html",...T},R=S7(n,y,N),I=sB(c,R,N),G=rB(f,I,N);return N.format==="tree"?G:LZ(n,r,u,G,N)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Be(nB,f,o),getTempAttrs:Te(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},E7=(e,n)=>{const o=x7(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},T7="html",_7=(e,n)=>({...e,format:n,get:!0,getInner:!0}),Df=(e,n={})=>{const o=n.format?n.format:T7,r=_7(n,o);return AN(e,r).fold(ht,c=>{const u=T3(e,c);return ON(e,u,c)})},HZ="html",VZ=(e,n)=>({format:HZ,...e,set:!0,content:n}),A3=(e,n,o={})=>{const r=VZ(o,n);return g3(e,r).map(c=>{const u=m7(e,c.content,c);return Vx(e,u.html,c),u.content}).getOr(n)},pC="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),k7="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),aB="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),O3=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],D3=(e,n)=>{const o=Ct(n,r=>tn(e,r));return Mo(o)},A7=e=>{const n=D3(e,pC),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Mo(n)},O7=e=>D3(e,k7),Lg=(e,n)=>{const o=Ve.makeMap(e.plugins," "),c=Ct(n,u=>tn(o,u));return Mo(c)},D7=e=>Lg(e,aB),R7=e=>Lg(e,O3.map(n=>n.name)),M7=(e,n)=>{const o=A7(e),r=D7(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",T=c?`

Plugins:${b}${r.join(b)}`:"",N=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+T+N)}},N7=e=>Jo(O3,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),B7=(e,n)=>{const o=O7(e),r=R7(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(N7).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+y)}},$7=(e,n)=>{M7(e,n),B7(e,n)},Kx=Po.DOM,P7=e=>{Kx.setStyle(e.id,"display",e.orgDisplay)},Xx=e=>L.from(e).each(n=>n.destroy()),F7=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},I7=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Kx.unbind(n,"submit reset",e.formEventDelegate))},zZ=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Oe(c==null?void 0:c.nextSibling)&&Kx.remove(c.nextSibling),Vo(e),e.editorManager.remove(e),!e.inline&&r&&P7(e),bm(e),Kx.remove(e.getContainer()),Xx(n),Xx(o),e.destroy()}},bC=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Xx(o),Xx(r)),I7(e),F7(e),e.destroyed=!0}},iv=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>tn(e,c)}})(),uv=as.ModelManager,cB=(e,n)=>n.dom[e],lB=(e,n)=>parseInt(rr(n,e),10),L7=Be(cB,"clientWidth"),sb=Be(cB,"clientHeight"),rb=Be(lB,"margin-top"),Yx=Be(lB,"margin-left"),Jx=e=>e.dom.getBoundingClientRect(),ab=(e,n,o)=>{const r=L7(e),c=sb(e);return n>=0&&o>=0&&n<=r&&o<=c},cb=(e,n,o,r)=>{const c=Jx(n),u=e?c.left+n.dom.clientLeft+Yx(n):0,f=e?c.top+n.dom.clientTop+rb(n):0,b=o-u,y=r-f;return{x:b,y}},Qx=(e,n,o)=>{const r=Y.fromDom(e.getBody()),c=e.inline?r:Si(r),u=cb(e.inline,c,n,o);return ab(c,u.x,u.y)},eE=e=>L.from(e).map(Y.fromDom),iB=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return eE(n).map(zl).getOr(!1)};var R3=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const tE=e=>{const n=[],o=()=>{const I=e.theme;return I&&I.getNotificationManagerImpl?I.getNotificationManagerImpl():R3()},r=()=>L.from(n[0]),c=(I,G)=>I.type===G.type&&I.text===G.text&&!I.progressBar&&!I.timeout&&!G.progressBar&&!G.timeout,u=()=>{me(n,I=>{I.reposition()})},f=I=>{n.push(I)},b=I=>{Hr(n,G=>G===I).each(G=>{n.splice(G,1)})},y=(I,G=!0)=>e.removed||!iB(e)?{}:(G&&e.dispatch("BeforeOpenNotification",{notification:I}),Jo(n,X=>c(o().getArgs(X),I)).getOrThunk(()=>{e.editorManager.setActive(e);const X=o().open(I,()=>{b(X),u(),r().fold(()=>e.focus(),W=>Z0(Y.fromDom(W.getEl())))});return f(X),u(),e.dispatch("OpenNotification",{notification:{...X}}),X})),T=()=>{r().each(I=>{o().close(I),b(I),u()})},N=Te(n);return(I=>{I.on("SkinLoaded",()=>{const G=Mi(I);G&&y({text:G,type:"warning",timeout:0},!1),u()}),I.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),I.on("remove",()=>{me(n.slice(),G=>{o().close(G)})})})(e),{open:y,close:T,getNotifications:N}},lb=as.PluginManager,Sp=as.ThemeManager;var dv=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const M3=e=>{let n=[];const o=()=>{const W=e.theme;return W&&W.getWindowManagerImpl?W.getWindowManagerImpl():dv()},r=(W,K)=>(...ae)=>K?K.apply(W,ae):void 0,c=W=>{e.dispatch("OpenWindow",{dialog:W})},u=W=>{e.dispatch("CloseWindow",{dialog:W})},f=W=>{n.push(W),c(W)},b=W=>{u(W),n=Ct(n,K=>K!==W),n.length===0&&e.focus()},y=()=>L.from(n[n.length-1]),T=W=>{e.editorManager.setActive(e),j0(e),e.ui.show();const K=W();return f(K),K},N=(W,K)=>T(()=>o().open(W,K,b)),R=W=>T(()=>o().openUrl(W,b)),I=(W,K,ae)=>{const le=o();le.alert(W,r(ae||le,K))},G=(W,K,ae)=>{const le=o();le.confirm(W,r(ae||le,K))},X=()=>{y().each(W=>{o().close(W),b(W)})};return e.on("remove",()=>{me(n,W=>{o().close(W)})}),{open:N,openUrl:R,alert:I,confirm:G,close:X}},N3=(e,n)=>{e.notificationManager.open({type:"error",text:n})},vC=(e,n)=>{e._skinLoaded?N3(e,n):e.on("SkinLoaded",()=>{N3(e,n)})},nE=(e,n)=>{vC(e,Oo.translate(["Failed to upload image: {0}",n]))},mv=(e,n,o)=>{WS(e,n,{message:o}),console.error(o)},fv=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,uB=(e,n,o)=>{mv(e,"PluginLoadError",fv("plugin",n,o))},dB=(e,n,o)=>{mv(e,"IconsLoadError",fv("icons",n,o))},Hg=(e,n,o)=>{mv(e,"LanguageLoadError",fv("language",n,o))},xp=(e,n,o)=>{mv(e,"ThemeLoadError",fv("theme",n,o))},Nd=(e,n,o)=>{mv(e,"ModelLoadError",fv("model",n,o))},H7=(e,n,o)=>{const r=Oo.translate(["Failed to initialize plugin: {0}",n]);WS(e,"PluginLoadError",{message:r}),oE(r,o),vC(e,r)},oE=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},V7=e=>/^[a-z0-9\-]+$/i.test(e),z7=e=>mB(e,E_(e)),U7=e=>mB(e,Jw(e)),mB=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return He(n,u=>V7(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},W7=e=>{e.contentCSS=e.contentCSS.concat(z7(e),U7(e))},Z7=e=>e?hr(e.getElementsByTagName("img")):[],j7=(e,n)=>{const o={};return{findAll:(c,u=De)=>{const f=Ct(Z7(c),y=>{const T=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!T||T===Kn.transparentSrc?!1:jo(T,"blob:")?!e.isUploaded(T)&&u(y):jo(T,"data:")?u(y):!1}),b=He(f,y=>{const T=y.src;if(tn(o,T))return o[T].then(N=>ee(N)?N:{image:y,blobInfo:N.blobInfo});{const N=nN(n,T).then(R=>(delete o[T],{image:y,blobInfo:R})).catch(R=>(delete o[T],R));return o[T]=N,N}});return Promise.all(b)}}},fB=()=>{let o={};const r=(I,G)=>({status:I,resultUri:G}),c=I=>I in o;return{hasBlobUri:c,getResultUri:I=>{const G=o[I];return G?G.resultUri:null},isPending:I=>c(I)?o[I].status===1:!1,isUploaded:I=>c(I)?o[I].status===2:!1,markPending:I=>{o[I]=r(1,null)},markUploaded:(I,G)=>{o[I]=r(2,G)},removeFailed:I=>{delete o[I]},destroy:()=>{o={}}}};let G7=0;const q7=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},B3=e=>e+G7+++q7(),$3=()=>{let e=[];const n=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,I,G,X,W)=>{if(ee(R))return r({id:R,name:X,filename:W,blob:I,base64:G});if(On(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const I=R.id||B3("blobid"),G=R.name||I,X=R.blob;return{id:Te(I),name:Te(G),filename:Te(R.filename||G+"."+n(X.type)),blob:Te(X),base64:Te(R.base64),blobUri:Te(R.blobUri||URL.createObjectURL(X)),uri:Te(R.uri)}},c=R=>{f(R.id())||e.push(R)},u=R=>Jo(e,R).getOrUndefined(),f=R=>u(I=>I.id()===R);return{create:o,add:c,get:f,getByUri:R=>u(I=>I.blobUri()===R),getByData:(R,I)=>u(G=>G.base64()===R&&G.blob().type===I),findFirst:u,removeByUri:R=>{e=Ct(e,I=>I.blobUri()===R?(URL.revokeObjectURL(I.blobUri()),!1):!0)},destroy:()=>{me(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},gB=(e,n)=>{const o={},r=(W,K)=>W?W.replace(/\/$/,"")+"/"+K.replace(/^\//,""):K,c=(W,K)=>new Promise((ae,le)=>{const ce=new XMLHttpRequest;ce.open("POST",n.url),ce.withCredentials=n.credentials,ce.upload.onprogress=Fe=>{K(Fe.loaded/Fe.total*100)},ce.onerror=()=>{le("Image upload failed due to a XHR Transport error. Code: "+ce.status)},ce.onload=()=>{if(ce.status<200||ce.status>=300){le("HTTP Error: "+ce.status);return}const Fe=JSON.parse(ce.responseText);if(!Fe||!ee(Fe.location)){le("Invalid JSON: "+ce.responseText);return}ae(r(n.basePath,Fe.location))};const he=new FormData;he.append("file",W.blob(),W.filename()),ce.send(he)}),u=oe(n.handler)?n.handler:c,f=()=>new Promise(W=>{W([])}),b=(W,K)=>({url:K,blobInfo:W,status:!0}),y=(W,K)=>({url:"",blobInfo:W,status:!1,error:K}),T=(W,K)=>{Ve.each(o[W],ae=>{ae(K)}),delete o[W]},N=(W,K,ae)=>(e.markPending(W.blobUri()),new Promise(le=>{let ce,he;try{const Fe=()=>{ce&&(ce.close(),he=Ot)},Et=ve=>{Fe(),e.markUploaded(W.blobUri(),ve),T(W.blobUri(),b(W,ve)),le(b(W,ve))},Ue=ve=>{Fe(),e.removeFailed(W.blobUri()),T(W.blobUri(),y(W,ve)),le(y(W,ve))};he=ve=>{ve<0||ve>100||L.from(ce).orThunk(()=>L.from(ae).map(Gn)).each(_e=>{ce=_e,_e.progressBar.value(ve)})},K(W,he).then(Et,ve=>{Ue(ee(ve)?{message:ve}:ve)})}catch(Fe){le(y(W,Fe))}})),R=W=>W===c,I=W=>{const K=W.blobUri();return new Promise(ae=>{o[K]=o[K]||[],o[K].push(ae)})},G=(W,K)=>(W=Ve.grep(W,ae=>!e.isUploaded(ae.blobUri())),Promise.all(Ve.map(W,ae=>e.isPending(ae.blobUri())?I(ae):N(ae,u,K))));return{upload:(W,K)=>!n.url&&R(u)?f():G(W,K)}},hB=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),pB=(e,n)=>gB(n,{url:C_(e),basePath:qw(e),credentials:w_(e),handler:S_(e)}),bB=e=>{const n=fB(),o=pB(e,n);return{upload:(r,c=!0)=>o.upload(r,c?hB(e):void 0)}},vB=(e,n)=>e.dom.isEmpty(n.dom)&&Oe(e.schema.getTextBlockElements()[Io(n)]),P3=e=>n=>{vB(e,n)&&Rs(n,Y.fromHtml('<br data-mce-bogus="1" />'))},yB=e=>{const n=$3();let o,r;const c=fB(),u=[],f=ce=>he=>e.selection?ce(he):[],b=ce=>ce+(ce.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(ce,he,Fe)=>{let Et=0;do Et=ce.indexOf(he,Et),Et!==-1&&(ce=ce.substring(0,Et)+Fe+ce.substr(Et+he.length),Et+=Fe.length-he.length+1);while(Et!==-1);return ce},T=(ce,he,Fe)=>{const Et=`src="${Fe}"${Fe===Kn.transparentSrc?' data-mce-placeholder="1"':""}`;return ce=y(ce,`src="${he}"`,Et),ce=y(ce,'data-mce-src="'+he+'"','data-mce-src="'+Fe+'"'),ce},N=(ce,he)=>{me(e.undoManager.data,Fe=>{Fe.type==="fragmented"?Fe.fragments=He(Fe.fragments,Et=>T(Et,ce,he)):Fe.content=T(Fe.content,ce,he)})},R=(ce,he)=>{const Fe=e.convertURL(he,"src");N(ce.src,he),ta(Y.fromDom(ce),{src:Jb(e)?b(he):he,"data-mce-src":Fe})},I=()=>(o||(o=pB(e,c)),K().then(f(ce=>{const he=He(ce,Fe=>Fe.blobInfo);return o.upload(he,hB(e)).then(f(Fe=>{const Et=[];let Ue=!1;const ve=He(Fe,(_e,et)=>{const{blobInfo:ot,image:bt}=ce[et];let sn=!1;return _e.status&&Gw(e)?(_e.url&&!es(bt.src,_e.url)&&(Ue=!0),n.removeByUri(bt.src),zi(e)||R(bt,_e.url)):_e.error&&(_e.error.remove&&(N(bt.src,Kn.transparentSrc),Et.push(bt),sn=!0),nE(e,_e.error.message)),{element:bt,status:_e.status,uploadUri:_e.url,blobInfo:ot,removed:sn}});return Et.length>0&&!zi(e)?e.undoManager.transact(()=>{me(Ju(Et),_e=>{const et=Pa(_e);no(_e),et.each(P3(e)),n.removeByUri(_e.dom.src)})}):Ue&&e.undoManager.dispatchChange(),ve}))}))),G=()=>My(e)?I():Promise.resolve([]),X=ce=>gr(u,he=>he(ce)),W=ce=>{u.push(ce)},K=()=>(r||(r=j7(c,n)),r.findAll(e.getBody(),X).then(f(ce=>{const he=Ct(ce,Fe=>ee(Fe)?(vC(e,Fe),!1):Fe.uriType!=="blob");return zi(e)||me(he,Fe=>{N(Fe.image.src,Fe.blobInfo.blobUri()),Fe.image.src=Fe.blobInfo.blobUri(),Fe.image.removeAttribute("data-mce-src")}),he}))),ae=()=>{n.destroy(),c.destroy(),r=o=null},le=ce=>ce.replace(/src="(blob:[^"]+)"/g,(he,Fe)=>{const Et=c.getResultUri(Fe);if(Et)return'src="'+Et+'"';let Ue=n.getByUri(Fe);return Ue||(Ue=Eo(e.editorManager.get(),(ve,_e)=>ve||_e.editorUpload&&_e.editorUpload.blobCache.getByUri(Fe),void 0)),Ue?'src="data:'+Ue.blob().type+";base64,"+Ue.base64()+'"':he});return e.on("SetContent",()=>{My(e)?G():K()}),e.on("RawSaveContent",ce=>{ce.content=le(ce.content)}),e.on("GetContent",ce=>{ce.source_view||ce.format==="raw"||ce.format==="tree"||(ce.content=le(ce.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ce=>{me(ce,he=>{const Fe=he.attr("src");if(!Fe||n.getByUri(Fe))return;const Et=c.getResultUri(Fe);Et&&he.attr("src",Et)})})}),{blobCache:n,addFilter:W,uploadImages:I,uploadImagesAuto:G,scanForImages:K,destroy:ae}},CB=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>dt(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Ve.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ve.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},sE={remove_similar:!0,inherit:!1},gv={selector:"td,th",...sE},K7={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...gv},tablecellverticalalign:{styles:{"vertical-align":"%value"},...gv},tablecellbordercolor:{styles:{borderColor:"%value"},...gv},tablecellclass:{classes:["%value"],...gv},tableclass:{selector:"table",classes:["%value"],...sE},tablecellborderstyle:{styles:{borderStyle:"%value"},...gv},tablecellborderwidth:{styles:{borderWidth:"%value"},...gv}},Rf=Te(K7),Bd=e=>{const n={},o=f=>Oe(f)?n[f]:n,r=f=>tn(n,f),c=(f,b)=>{f&&(ee(f)?(Bn(b)||(b=[b]),me(b,y=>{xo(y.deep)&&(y.deep=!El(y)),xo(y.split)&&(y.split=!El(y)||Er(y)),xo(y.remove)&&El(y)&&!Er(y)&&(y.remove="none"),El(y)&&Er(y)&&(y.mixed=!0,y.block_expand=!0),ee(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):Qe(f,(y,T)=>{c(T,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(CB(e)),c(Rf()),c(qr(e)),{get:o,has:r,register:c,unregister:u}},ib=Ve.each,Ui=Po.DOM,hv=e=>Oe(e)&&On(e),F3=(e,n)=>{const o=n&&n.schema||df({}),r=(y,T)=>{T.classes.length>0&&Ui.addClass(y,T.classes.join(" ")),Ui.setAttribs(y,T.attrs)},c=y=>{const T=ee(y)?{name:y,classes:[],attrs:{}}:y,N=Ui.create(T.name);return r(N,T),N},u=(y,T)=>{const N=o.getElementRule(y.nodeName.toLowerCase()),R=N==null?void 0:N.parentsRequired;return R&&R.length?T&&Me(R,T)?T:R[0]:!1},f=(y,T,N)=>{let R;const I=T[0],G=hv(I)?I.name:void 0,X=u(y,G);if(X)G===X?(R=I,T=T.slice(1)):R=X;else if(I)R=I,T=T.slice(1);else if(!N)return y;const W=R?c(R):Ui.create("div");W.appendChild(y),N&&Ve.each(N,ae=>{const le=c(ae);W.insertBefore(le,y)});const K=hv(R)?R.siblings:void 0;return f(W,T,K)},b=Ui.create("div");if(e.length>0){const y=e[0],T=c(y),N=hv(y)?y.siblings:void 0;b.appendChild(f(T,e.slice(1),N))}return b},wB=e=>{e=Ve.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Ve.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},SB=e=>ee(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ve.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Ve.map(n.split(/(?:~\+|~|\+)/),wB),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],xB=(e,n)=>{let o="",r=t0(e);if(r==="")return"";const c=I=>ee(I)?I.replace(/%(\w+)/g,""):"",u=(I,G)=>Ui.getStyle(G??e.getBody(),I,!0);if(ee(n)){const I=e.formatter.get(n);if(!I)return"";n=I[0]}if("preview"in n){const I=n.preview;if(I===!1)return"";r=I||r}let f=n.block||n.inline||"span",b;const y=SB(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=F3(y,e)):b=F3([f],e);const T=Ui.select(f,b)[0]||b.firstChild;ib(n.styles,(I,G)=>{const X=c(I);X&&Ui.setStyle(T,G,X)}),ib(n.attributes,(I,G)=>{const X=c(I);X&&Ui.setAttrib(T,G,X)}),ib(n.classes,I=>{const G=c(I);Ui.hasClass(T,G)||Ui.addClass(T,G)}),e.dispatch("PreviewFormats"),Ui.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const N=u("fontSize"),R=/px$/.test(N)?parseInt(N,10):0;return ib(r.split(" "),I=>{let G=u(I,T);if(!(I==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(G)&&(G=u(I),_1(G).toLowerCase()==="#ffffff"))&&!(I==="color"&&_1(G).toLowerCase()==="#000000")){if(I==="font-size"&&/em|%$/.test(G)){if(R===0)return;G=parseFloat(G)/(/%$/.test(G)?100:1)*R+"px"}I==="border"&&G&&(o+="padding:0 2px;"),o+=I+":"+G+";"}}),e.dispatch("AfterPreviewFormats"),Ui.remove(b),o},EB=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},I3=e=>{const n=Bd(e),o=$r({});return EB(e),BI(e),zi(e)||Xr(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{u7(e,r,c,u)},remove:(r,c,u,f)=>{d7(e,r,c,u,f)},toggle:(r,c,u)=>{FZ(e,r,c,u)},match:(r,c,u,f)=>a7(e,r,c,u,f),closest:r=>i7(e,r),matchAll:(r,c)=>c7(e,r,c),matchNode:(r,c,u,f)=>YN(e,r,c,u,f),canApply:r=>l7(e,r),formatChanged:(r,c,u,f)=>Sm(e,o,r,c,u,f),getCssText:Be(xB,e)}},yC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},L3=(e,n,o)=>{const r=$r(!1),c=y=>{dC(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const T=y.command;yC(T)||(zN(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const T=y.command;yC(T)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const T=y.keyCode;if(y.isDefaultPrevented())return;const N=Kn.os.isMacOS()&&y.key==="Meta";(T>=33&&T<=36||T>=37&&T<=40||T===45||y.ctrlKey||N)&&(c(),e.nodeChanged()),(T===46||T===8)&&e.nodeChanged(),r.get()&&n.typing&&!w3(Zx(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",y=>{const T=y.keyCode;if(y.isDefaultPrevented())return;if(T>=33&&T<=36||T>=37&&T<=40||T===45){n.typing&&c(y);return}const N=y.ctrlKey&&!y.altKey||y.metaKey;if((T<16||T>20)&&T!==224&&T!==91&&!n.typing&&!N){n.beforeChange(),dC(n,!0,o),n.add({},y),r.set(!0);return}(Kn.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&n.beforeChange()}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},X7=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},TB=e=>{const n=jl(),o=$r(0),r=$r(0),c={data:[],typing:!1,beforeChange:()=>{Q8(e,o,n)},add:(u,f)=>e7(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=Zx(e);u.bookmark=sc(e.selection),e.dispatch("change",{level:u,lastLevel:Rm(c.data,r.get()).getOrUndefined()})},undo:()=>t7(e,c,o,r),redo:()=>n7(e,r,c.data),clear:()=>{qN(e,c,r)},reset:()=>{o7(e,c)},hasUndo:()=>s7(e,c,r),hasRedo:()=>fC(e,c,r),transact:u=>KN(e,c,o,u),ignore:u=>{XN(e,o,u)},extra:(u,f)=>{r7(e,c,r,u,f)}};return zi(e)||L3(e,c,o),X7(e),c},Y7=[9,27,gt.HOME,gt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,gt.DOWN,gt.UP,gt.LEFT,gt.RIGHT].concat(Kn.browser.isFirefox()?[224]:[]),_B="data-mce-placeholder",H3=e=>e.type==="keydown"||e.type==="keyup",kB=e=>{const n=e.keyCode;return n===gt.BACKSPACE||n===gt.DELETE},J7=e=>{if(H3(e)){const n=e.keyCode;return!kB(e)&&(gt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Me(Y7,n))}else return!1},V3=e=>H3(e)&&!(kB(e)||e.type==="keyup"&&e.keyCode===229),Q7=(e,n,o)=>{if(Cr(Y.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},eL=e=>{var n;const o=e.dom,r=Va(e),c=(n=e0(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(J7(f))return;const y=e.getBody(),T=V3(f)?!1:Q7(o,y,r);(o.getAttrib(y,_B)!==""!==T||b)&&(o.setAttrib(y,_B,T?c:null),o.setAttrib(y,"aria-placeholder",T?c:null),US(e,T),e.on(T?"keydown":"keyup",u),e.off(T?"keyup":"keydown",u))};po(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Li.setEditorTimeout(e,()=>u(b)))})},tL=(e,n)=>({block:e,position:n}),nL=(e,n)=>({from:e,to:n}),z3=(e,n)=>{const o=Y.fromDom(e),r=Y.fromDom(n.container());return ux(o,r).map(c=>tL(c,n))},oL=e=>!uo(e.from.block,e.to.block),AB=(e,n)=>V(n,c=>xs(c)||bo(c.dom),c=>uo(c,e)).filter($o).getOr(e),rE=(e,n)=>{const o=Y.fromDom(e);return uo(AB(o,n.from.block),AB(o,n.to.block))},U3=e=>co(e.from.block.dom)===!1&&co(e.to.block.dom)===!1,sL=e=>{const n=o=>sg(o)||qp(o.dom);return n(e.from.block)&&n(e.to.block)},rL=(e,n,o)=>ds(o.position.getNode())&&!Cr(o.block)?Sf(!1,o.block.dom).bind(r=>r.isEqual(o.position)?wu(n,e,r).bind(c=>z3(e,c)):L.some(o)).getOr(o):o,aL=(e,n,o)=>{const r=z3(e,we.fromRangeStart(o)),c=r.bind(u=>wu(n,e,u.position).bind(f=>z3(e,f).map(b=>rL(e,n,b))));return ea(r,c,nL).filter(u=>oL(u)&&rE(e,u)&&U3(u)&&sL(u))},cL=(e,n,o)=>o.collapsed?aL(e,n,o):L.none(),OB=e=>{const n=br(e);return Hr(n,Ms).fold(Te(n),o=>n.slice(0,o))},DB=e=>{const n=OB(e);return me(n,no),n},RB=(e,n)=>{const o=$g(n,e);return Jo(o.reverse(),r=>Cr(r)).each(no)},W3=e=>Ct(nh(e),n=>!Cr(n)).length===0,lL=(e,n,o,r)=>{if(Cr(o))return E(o),Oa(o.dom);W3(r)&&Cr(n)&&Qa(r,Y.fromTag("br"));const c=Kr(o.dom,we.before(r.dom));return me(DB(n),u=>{Qa(r,u)}),RB(e,n),c},iL=(e,n,o)=>{if(Cr(o)){if(Cr(n)){const u=fr((f=>{const b=(y,T)=>qu(y).fold(()=>T,N=>fe(N)?b(N,T.concat(Ph(N))):T);return b(f,[])})(o),(f,b)=>(_b(f,b),b),w());Ei(n),Rs(n,u)}return no(o),Oa(n.dom)}const r=xl(o.dom);return me(DB(n),c=>{Rs(o,c)}),RB(e,n),r},uL=(e,n)=>{const o=$g(n,e);return L.from(o[o.length-1])},dL=(e,n)=>hc(n,e)?uL(n,e):L.none(),MB=(e,n)=>{Sf(e,n.dom).bind(o=>L.from(o.getNode())).map(Y.fromDom).filter(aa).each(no)},NB=(e,n,o)=>(MB(!0,n),MB(!1,o),dL(n,o).fold(Be(iL,e,n,o),Be(lL,e,n,o))),BB=(e,n,o,r)=>n?NB(e,r,o):NB(e,o,r),pv=(e,n)=>{const o=Y.fromDom(e.getBody());return cL(o.dom,n,e.selection.getRng()).map(c=>()=>{BB(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},aE=(e,n)=>{const o=n.getRng();return ea(ux(e,Y.fromDom(o.startContainer)),ux(e,Y.fromDom(o.endContainer)),(r,c)=>uo(r,c)?L.none():L.some(()=>{o.deleteContents(),BB(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(L.none())},$B=(e,n)=>{const o=Y.fromDom(n),r=Be(uo,e);return M(o,xs,r).isSome()},mL=(e,n)=>$B(e,n.startContainer)||$B(e,n.endContainer),cE=(e,n)=>{const o=Kr(e.dom,we.fromRangeStart(n)).isNone(),r=fa(e.dom,we.fromRangeEnd(n)).isNone();return!mL(e,n)&&o&&r},fL=e=>L.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),gL=e=>{const n=Y.fromDom(e.getBody()),o=e.selection.getRng();return cE(n,o)?fL(e):aE(n,e.selection)},Z3=(e,n)=>e.selection.isCollapsed()?L.none():gL(e),Vg=(e,n,o,r,c)=>L.from(n._selectionOverrides.showCaret(e,o,r,c)),hL=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},CC=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?L.none():L.some(hL(n)),pL=(e,n,o)=>{const r=m0(1,e.getBody(),n),c=we.fromRangeStart(r),u=c.getNode();if(vd(u))return Vg(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(vd(f))return Vg(1,e,f,!1,!1);const b=kd(e.dom.getRoot(),c.getNode());return vd(b)?Vg(1,e,b,!1,o):L.none()},j3=(e,n,o)=>n.collapsed?pL(e,n,o).getOr(n):n,bL=e=>up(e)||$2(e),vL=e=>dp(e)||P2(e),yL=(e,n)=>{je(n)&&n.data.length===0&&e.remove(n)},CL=(e,n,o,r,c,u)=>{Vg(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),yL(e.dom,o)},$d=(e,n)=>{const o=e.selection.getRng();if(!je(o.commonAncestorContainer))return L.none();const r=n?ma.Forwards:ma.Backwards,c=Cu(e.getBody()),u=Be(g0,n?c.next:c.prev),f=n?bL:vL,b=Xh(r,e.getBody(),o),y=u(b),T=y&&Tu(n,y);if(!T||!Jh(b,T))return L.none();if(f(T))return L.some(()=>CL(e,o,b.getNode(),r,n,T));const N=u(T);return N&&f(N)&&Jh(T,N)?L.some(()=>CL(e,o,b.getNode(),r,n,N)):L.none()},wC=(e,n)=>$d(e,n),lE=(e,n)=>{const o=e.getBody();return n?Oa(o).filter(up):xl(o).filter(dp)},iE=e=>{const n=e.selection.getRng();return!n.collapsed&&(lE(e,!0).exists(o=>o.isEqual(we.fromRangeStart(n)))||lE(e,!1).exists(o=>o.isEqual(we.fromRangeEnd(n))))},wL=e=>Oe(e)&&(xs(Y.fromDom(e))||Ha(Y.fromDom(e))),ri=yu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),SL=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return dt(o)&&o.getAttribute("data-mce-caret")===r},PB=(e,n,o,r)=>{const c=u=>fe(Y.fromDom(u))&&!Kl(o,r,e);return f0(!n,o).fold(()=>f0(n,r).fold(ke,c),c)},FB=(e,n,o,r)=>{const c=r.getNode(!n);return ux(Y.fromDom(e),Y.fromDom(o.getNode())).map(u=>Cr(u)?ri.remove(u.dom):ri.moveToElement(c)).orThunk(()=>L.some(ri.moveToElement(c)))},IB=(e,n,o)=>wu(n,e,o).bind(r=>wL(r.getNode())||PB(e,n,o,r)?L.none():n&&co(r.getNode())||!n&&co(r.getNode(!0))?FB(e,n,o,r):n&&dp(o)||!n&&up(o)?L.some(ri.moveToPosition(r)):L.none()),xL=(e,n)=>It(n)?L.none():e&&co(n.nextSibling)?L.some(ri.moveToElement(n.nextSibling)):!e&&co(n.previousSibling)?L.some(ri.moveToElement(n.previousSibling)):L.none(),bv=(e,n,o)=>o.fold(r=>L.some(ri.remove(r)),r=>L.some(ri.moveToElement(r)),r=>Kl(n,r,e)?L.none():L.some(ri.moveToPosition(r))),LB=(e,n,o)=>SL(n,o)?xL(n,o.getNode(!n)).orThunk(()=>IB(e,n,o)):IB(e,n,o).bind(r=>bv(e,o,r)),HB=(e,n,o)=>{const r=m0(n?1:-1,e,o),c=we.fromRangeStart(r),u=Y.fromDom(e);return!n&&dp(c)?L.some(ri.remove(c.getNode(!0))):n&&up(c)?L.some(ri.remove(c.getNode())):!n&&up(c)&&yn(u,c)?ER(u,c).map(f=>ri.remove(f.getNode())):n&&dp(c)&&jk(u,c)?ax(u,c).map(f=>ri.remove(f.getNode())):LB(e,n,c)},VB=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),dr(e,n,Y.fromDom(o)),!0),G3=(e,n)=>o=>{const r=n?we.before(o):we.after(o);return e.selection.setRng(r.toRange()),!0},EL=e=>n=>(e.selection.setRng(n.toRange()),!0),zB=(e,n)=>L.from(kd(e.getBody(),n)),TL=(e,n)=>{const o=e.selection.getNode();return zB(e,o).filter(co).fold(()=>HB(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(VB(e,n),G3(e,n),EL(e))),()=>L.some(Ot))},WZ=e=>{me(Wr(e,".mce-offscreen-selection"),no)},ZZ=(e,n)=>{const o=e.selection.getNode();return co(o)&&!sa(o)?zB(e,o.parentNode).filter(co).fold(()=>L.some(()=>{WZ(Y.fromDom(e.getBody())),dr(e,n,Y.fromDom(e.selection.getNode())),W1(e)}),()=>L.some(Ot)):iE(e)?L.some(()=>{Hi(e,e.selection.getRng(),Y.fromDom(e.getBody()))}):L.none()},_L=e=>{const n=e.dom,o=e.selection,r=kd(e.getBody(),o.getNode());if(bo(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(we.before(c).toRange())}return!0},Wi=(e,n)=>e.selection.isCollapsed()?TL(e,n):ZZ(e,n),kL=(e,n)=>{const o=we.fromRangeStart(e.selection.getRng());return wu(n,e.getBody(),o).filter(r=>n?EZ(r):TZ(r)).bind(r=>wS(n?0:-1,r)).map(r=>()=>e.selection.select(r))},q3=(e,n)=>e.selection.isCollapsed()?kL(e,n):L.none(),ub=je,uE=e=>ub(e)&&e.data[0]===U,AL=e=>ub(e)&&e.data[e.data.length-1]===U,OL=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(U)},jZ=e=>{var n;if(ub(e.previousSibling))return AL(e.previousSibling)||e.previousSibling.appendData(U),e.previousSibling;if(ub(e))return uE(e)||e.insertData(0,U),e;{const o=OL(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},ku=e=>{var n,o;if(ub(e.nextSibling))return uE(e.nextSibling)||e.nextSibling.insertData(0,U),e.nextSibling;if(ub(e))return AL(e)||e.appendData(U),e;{const r=OL(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},dE=(e,n)=>e?jZ(n):ku(n),DL=Be(dE,!0),RL=Be(dE,!1),UB=(e,n)=>je(e.container())?dE(n,e.container()):dE(n,e.getNode()),WB=(e,n)=>{const o=n.get();return o&&e.container()===o&&jt(o)},K3=(e,n)=>n.fold(o=>{hg(e.get());const r=DL(o);return e.set(r),L.some(we(r,r.length-1))},o=>Oa(o).map(r=>{if(WB(r,e)){const c=e.get();return we(c,1)}else{hg(e.get());const c=UB(r,!0);return e.set(c),we(c,1)}}),o=>xl(o).map(r=>{if(WB(r,e)){const c=e.get();return we(c,c.length-1)}else{hg(e.get());const c=UB(r,!1);return e.set(c),we(c,c.length-1)}}),o=>{hg(e.get());const r=RL(o);return e.set(r),L.some(we(r,1))}),Mf=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return L.none()},ul=yu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),ZB=(e,n)=>{const o=bg(n,e);return o||e},ML=(e,n,o)=>{const r=LR(o),c=ZB(n,r.container());return kf(e,c,r).fold(()=>fa(c,r).bind(Be(kf,e,c)).map(u=>ul.before(u)),L.none)},X3=(e,n)=>yg(e,n)===null,mE=(e,n,o)=>kf(e,n,o).filter(Be(X3,n)),jB=(e,n,o)=>{const r=ix(o);return mE(e,n,r).bind(c=>Kr(c,r).isNone()?L.some(ul.start(c)):L.none())},GB=(e,n,o)=>{const r=LR(o);return mE(e,n,r).bind(c=>fa(c,r).isNone()?L.some(ul.end(c)):L.none())},qB=(e,n,o)=>{const r=ix(o),c=ZB(n,r.container());return kf(e,c,r).fold(()=>Kr(c,r).bind(Be(kf,e,c)).map(u=>ul.after(u)),L.none)},KB=e=>!o4(Y3(e)),Zi=(e,n,o)=>Mf([ML,jB,GB,qB],[e,n,o]).filter(KB),Y3=e=>e.fold(ht,ht,ht,ht),XB=e=>e.fold(Te("before"),Te("start"),Te("end"),Te("after")),fE=e=>e.fold(ul.before,ul.before,ul.after,ul.after),J3=e=>e.fold(ul.start,ul.start,ul.end,ul.end),NL=(e,n)=>XB(e)===XB(n)&&Y3(e)===Y3(n),BL=(e,n,o,r,c,u)=>ea(kf(n,o,r),kf(n,o,c),(f,b)=>f!==b&&FR(o,f,b)?ul.after(e?f:b):u).getOr(u),$L=(e,n)=>e.fold(De,o=>!NL(o,n)),YB=(e,n,o,r,c)=>{const u=Tu(e,c);return wu(e,o,u).map(Be(Tu,e)).fold(()=>r.map(fE),y=>Zi(n,o,y).map(Be(BL,e,n,o,u,y)).filter(Be($L,r))).filter(KB)},PL=(e,n)=>e?n.fold(O(L.some,ul.start),L.none,O(L.some,ul.after),L.none):n.fold(L.none,O(L.some,ul.before),L.none,O(L.some,ul.end)),db=(e,n,o,r)=>{const c=Tu(e,r),u=Zi(n,o,c);return Zi(n,o,c).bind(Be(PL,e)).orThunk(()=>YB(e,n,o,u,r))},JB=e=>oe(e.selection.getSel().modify),gE=(e,n,o)=>{const r=e?1:-1;return n.setRng(we(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},QB=(e,n)=>{const o=n.selection.getRng(),r=e?we.fromRangeEnd(o):we.fromRangeStart(o);return JB(n)?e&&la(r)?gE(!0,n.selection,r):!e&&tl(r)?gE(!1,n.selection,r):!1:!1};var Pd;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Pd||(Pd={}));const Em=(e,n)=>e===ma.Backwards?Qo(n):n,e5=(e,n,o)=>e===ma.Forwards?n.next(o):n.prev(o),Au=(e,n,o,r)=>ds(r.getNode(n===ma.Forwards))?Pd.Br:Kl(o,r)===!1?Pd.Block:Pd.Wrap,Ep=(e,n,o,r)=>{const c=Cu(o);let u=r;const f=[];for(;u;){const b=e5(n,c,u);if(!b)break;if(ds(b.getNode(!1)))return n===ma.Forwards?{positions:Em(n,f).concat([b]),breakType:Pd.Br,breakAt:L.some(b)}:{positions:Em(n,f),breakType:Pd.Br,breakAt:L.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=Au(o,n,u,b);return{positions:Em(n,f),breakType:y,breakAt:L.some(b)}}f.push(b),u=b}return{positions:Em(n,f),breakType:Pd.Eol,breakAt:L.none()}},hE=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===ma.Backwards?u.concat(c):[c].concat(u)}).getOr([]),Q3=(e,n)=>Eo(e,(o,r)=>o.fold(()=>L.some(r),c=>ea(In(c.getClientRects()),In(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),L.none()),SC=(e,n)=>In(n.getClientRects()).bind(o=>Q3(e,o.left)),xC=Be(Ep,we.isAbove,-1),EC=Be(Ep,we.isBelow,1),t5=Be(hE,-1,xC),n5=Be(hE,1,EC),FL=(e,n)=>xC(e,n).breakAt.isNone(),o5=(e,n)=>EC(e,n).breakAt.isNone(),IL=e=>Oa(e).map(n=>[n].concat(EC(e,n).positions)).getOr([]),LL=e=>xl(e).map(n=>xC(e,n).positions.concat(n)).getOr([]),vv=(e,n)=>SC(t5(e,n),n),eA=(e,n)=>SC(n5(e,n),n),s5=co,tA=(e,n)=>Math.abs(e.left-n),pE=(e,n)=>Math.abs(e.right-n),HL=e=>Vr(e,"node"),r5=(e,n)=>fc(e,(o,r)=>{const c=Math.min(tA(o,n),pE(o,n)),u=Math.min(tA(r,n),pE(r,n));return u===c&&HL(r)&&s5(r.node)||u<c?r:o}),VL=e=>{const n=o=>He(o,r=>{const c=Sr(r);return c.node=e,c});if(dt(e))return n(e.getClientRects());if(je(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},a5=e=>Ma(e,VL);var TC;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(TC||(TC={}));const zL=(e,n,o,r)=>{let c=r;for(;c=qh(c,e,nf,n);)if(o(c))return},c5=(e,n,o,r,c,u)=>{let f=0;const b=[],y=R=>{let I=a5([R]);e===-1&&(I=I.reverse());for(let G=0;G<I.length;G++){const X=I[G];if(!o(X,T)){if(b.length>0&&n(X,ya(b))&&f++,X.line=f,c(X))return!0;b.push(X)}}return!1},T=ya(u.getClientRects());if(!T)return b;const N=u.getNode();return N&&(y(N),zL(e,r,y,N)),b},l5=(e,n)=>n.line>e,UL=(e,n)=>n.line===e,WL=Be(c5,TC.Up,Ih,s1),ji=Be(c5,TC.Down,s1,Ih),i5=e=>ya(e.getClientRects()),nA=(e,n,o,r)=>{const c=Cu(n);let u,f,b,y;const T=[];let N=0;e===1?(u=c.next,f=s1,b=Ih,y=we.after(r)):(u=c.prev,f=Ih,b=s1,y=we.before(r));const R=i5(y);do{if(!y.isVisible())continue;const I=i5(y);if(b(I,R))continue;T.length>0&&f(I,ya(T))&&N++;const G=Sr(I);if(G.position=y,G.line=N,o(G))return T;T.push(G)}while(y=u(y));return T},oA=e=>n=>l5(e,n),_C=e=>n=>UL(e,n),zg=(e,n)=>{e.selection.setRng(n),Tf(e,e.selection.getRng())},sA=(e,n,o)=>L.some(j3(e,n,o)),u5=(e,n,o,r,c,u)=>{const f=n===ma.Forwards,b=Cu(e.getBody()),y=Be(g0,f?b.next:b.prev),T=f?r:c;if(!o.collapsed){const X=ol(o);if(u(X))return Vg(n,e,X,n===ma.Backwards,!1);if(iE(e)){const W=o.cloneRange();return W.collapse(n===ma.Backwards),L.from(W)}}const N=Xh(n,e.getBody(),o);if(T(N))return CC(e,N.getNode(!f));let R=y(N);const I=sd(o);if(R)R=Tu(f,R);else return I?L.some(o):L.none();if(T(R))return Vg(n,e,R.getNode(!f),f,!1);const G=y(R);return G&&T(G)&&Jh(R,G)?Vg(n,e,G.getNode(!f),f,!1):I?sA(e,R.toRange(),!1):L.none()},d5=(e,n,o,r,c,u)=>{const f=Xh(n,e.getBody(),o),b=ya(f.getClientRects()),y=n===TC.Down,T=e.getBody();if(!b)return L.none();if(iE(e)){const K=y?we.fromRangeEnd(o):we.fromRangeStart(o);return(y?eA:vv)(T,K).orThunk(()=>L.from(K)).map(le=>le.toRange())}const R=(y?ji:WL)(T,oA(1),f),I=Ct(R,_C(1)),G=b.left,X=r5(I,G);if(X&&u(X.node)){const K=Math.abs(G-X.left),ae=Math.abs(G-X.right);return Vg(n,e,X.node,K<ae,!1)}let W;if(r(f)?W=f.getNode():c(f)?W=f.getNode(!0):W=ol(o),W){const K=nA(n,T,oA(1),W);let ae=r5(Ct(K,_C(1)),G);if(ae||(ae=ya(Ct(K,_C(0))),ae))return sA(e,ae.position.toRange(),!1)}return I.length===0?rA(e,y).filter(y?c:r).map(K=>j3(e,K.toRange(),!1)):L.none()},rA=(e,n)=>{const o=e.selection.getRng(),r=n?we.fromRangeEnd(o):we.fromRangeStart(o),c=d0(r.container(),e.getBody());if(n){const u=EC(c,r);return Na(u.positions)}else{const u=xC(c,r);return In(u.positions)}},aA=(e,n,o)=>rA(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),bE=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},m5=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},yv=(e,n,o)=>K3(n,o).map(r=>(bE(e,r),o)),Ug=(e,n,o)=>{const r=we.fromRangeStart(e);if(e.collapsed)return r;{const c=we.fromRangeEnd(e);return o?Kr(n,c).getOr(c):fa(n,r).getOr(r)}},mb=(e,n,o)=>{const r=e.getBody(),c=Ug(e.selection.getRng(),r,o),u=Be(U1,e);return db(o,u,r,c).bind(b=>yv(e,n,b))},vE=(e,n,o)=>{const r=He(Wr(Y.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=Ct(r,e),u=Ct(o,e);me(Dm(c,u),Be(m5,!1)),me(Dm(u,c),Be(m5,!0))},cA=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=we.fromRangeStart(e.selection.getRng());we.isTextPosition(r)&&!IR(r)&&(bE(e,K_(o,r)),n.set(null))}},lA=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Ct(r,e);me(c,u=>{const f=we.fromRangeStart(n.selection.getRng());Zi(e,n.getBody(),f).bind(b=>yv(n,o,b))})}},iA=(e,n,o)=>um(e)?mb(e,n,o).isSome():!1,f5=(e,n,o)=>um(n)?QB(e,n):!1,g5=e=>{const n=$r(null),o=Be(U1,e);return e.on("NodeChange",r=>{um(e)&&(vE(o,e.dom,r.parents),cA(e,n),lA(o,e,n,r.parents))}),n},h5=Be(f5,!0),ZL=Be(f5,!1),yE=(e,n,o)=>{if(um(e)){const r=rA(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?we.fromRangeEnd(c):we.fromRangeStart(c)});return Zi(Be(U1,e),e.getBody(),r).exists(c=>{const u=fE(c);return K3(o,u).exists(f=>(bE(e,f),!0))})}else return!1},jL=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},GL=e=>ea(Oa(e),xl(e),(n,o)=>{const r=Tu(!0,n),c=Tu(!1,o);return fa(e,r).forall(u=>u.isEqual(c))}).getOr(!0),p5=(e,n)=>o=>K3(n,o).map(r=>()=>bE(e,r)),b5=(e,n,o,r)=>{const c=e.getBody(),u=Be(U1,e);e.undoManager.ignore(()=>{e.selection.setRng(jL(o,r)),a4(e),Zi(u,c,we.fromRangeStart(e.selection.getRng())).map(J3).bind(p5(e,n)).each(Dn)}),e.nodeChanged()},v5=(e,n)=>{const o=bg(n,e);return o||e},y5=(e,n,o,r)=>{const c=v5(e.getBody(),r.container()),u=Be(U1,e),f=Zi(u,c,r);return f.bind(y=>o?y.fold(Te(L.some(J3(y))),L.none,Te(L.some(fE(y))),L.none):y.fold(L.none,Te(L.some(fE(y))),L.none,Te(L.some(J3(y))))).map(p5(e,n)).getOrThunk(()=>{const y=yd(o,c,r),T=y.bind(N=>Zi(u,c,N));return ea(f,T,()=>kf(u,c,r).bind(N=>GL(N)?L.some(()=>{dr(e,o,Y.fromDom(N))}):L.none())).getOrThunk(()=>T.bind(()=>y.map(N=>()=>{o?b5(e,n,r,N):b5(e,n,N,r)})))})},C5=(e,n,o)=>{if(e.selection.isCollapsed()&&um(e)){const r=we.fromRangeStart(e.selection.getRng());return y5(e,n,o,r)}return L.none()},GZ=e=>_a(e)>1,qL=(e,n)=>{const o=Y.fromDom(e.getBody()),r=Y.fromDom(e.selection.getStart()),c=$g(r,o);return Hr(c,n).fold(Te(c),u=>c.slice(0,u))},KL=e=>_a(e)===1,qZ=e=>qL(e,n=>Ms(n)||GZ(n)),KZ=e=>qL(e,Ms),w5=(e,n)=>{const o=Be(TM,e);return Ma(n,r=>o(r)?[r.dom]:[])},S5=e=>{const n=KZ(e);return w5(e,n)},XZ=(e,n,o,r)=>{const c=w5(n,r);if(c.length===0)dr(n,e,o);else{const u=EM(o.dom,c);n.selection.setRng(u.toRange())}},XL=(e,n)=>{const o=Ct(qZ(e),KL);return Na(o).bind(r=>{const c=we.fromRangeStart(e.selection.getRng());return HR(n,c,r.dom)&&!_M(r)?L.some(()=>XZ(n,e,r,o)):L.none()})},ai=(e,n)=>{const o=n.parentElement;return ds(n)&&!q(o)&&e.dom.isEmpty(o)},x5=e=>_M(Y.fromDom(e)),Cv=(e,n)=>{const o=e.selection.getStart(),r=ai(e,o)||x5(o)?EM(o,n):$I(e.selection.getRng(),n);e.selection.setRng(r.toRange())},YL=(e,n)=>{const o=Dm(n,S5(e));o.length>0&&Cv(e,o)},uA=e=>je(e.startContainer),E5=e=>e.startOffset===0&&uA(e),dA=(e,n)=>{const o=n.startContainer.parentElement;return!q(o)&&TM(e,Y.fromDom(o))},JL=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!q(n)&&!q(o)&&n.isEqualNode(o)},QL=e=>{const n=e.endContainer;return e.endOffset===(je(n)?n.length:n.childNodes.length)},T5=e=>JL(e)&&QL(e),eH=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),tH=e=>T5(e)||eH(e),nH=e=>{const n=e.selection.getRng();return E5(n)&&dA(e,n)&&tH(n)},mA=e=>{if(nH(e)){const n=S5(e);return L.some(()=>{a4(e),YL(e,n)})}else return L.none()},fA=(e,n)=>e.selection.isCollapsed()?XL(e,n):mA(e),oH=e=>_I(e,n=>$i(n.dom),Ms),YZ=e=>oH(Y.fromDom(e.selection.getStart())),sH=e=>{const n=e.selection.getRng();return n.collapsed&&(uA(n)||e.dom.isEmpty(n.startContainer))&&!YZ(e)},kC=e=>(sH(e)&&Cv(e,[]),!0),AC=(e,n,o)=>Oe(o)?L.some(()=>{e._selectionOverrides.hideFakeCaret(),dr(e,n,Y.fromDom(o))}):L.none(),_5=(e,n)=>{const o=n?$2:P2,r=n?ma.Forwards:ma.Backwards,c=Xh(r,e.getBody(),e.selection.getRng());return o(c)?AC(e,n,c.getNode(!n)):L.from(Tu(n,c)).filter(u=>o(u)&&Jh(c,u)).bind(u=>AC(e,n,u.getNode(!n)))},JZ=(e,n)=>{const o=e.selection.getNode();return Hs(o)?AC(e,n,o):L.none()},gA=(e,n)=>e.selection.isCollapsed()?_5(e,n):JZ(e,n),rH=e=>V(e,n=>bo(n.dom)||co(n.dom)).exists(n=>bo(n.dom)),hA=e=>bi(e??"").getOr(0),CE=(e,n)=>{const o=e||hh(n)?"margin":"padding",r=rr(n,"direction")==="rtl"?"-right":"-left";return o+r},wE=(e,n,o,r,c,u)=>{const f=CE(o,Y.fromDom(u)),b=hA(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},k5=(e,n)=>gr(n,o=>{const r=CE(Xw(e),o),c=Ja(o,r).map(hA).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),pA=e=>{const n=SE(e);return!e.mode.isReadOnly()&&(n.length>1||k5(e,n))},A5=e=>La(e)||Ha(e),aH=e=>Pa(e).exists(A5),SE=e=>Ct(Ju(e.selection.getSelectedBlocks()),n=>!A5(n)&&!aH(n)&&rH(n)),O5=(e,n)=>{var o,r;const{dom:c}=e,u=Yw(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=hA(u),y=Xw(e);me(SE(e),T=>{wE(c,n,y,b,f,T.dom)})},cH=e=>O5(e,"indent"),D5=e=>O5(e,"outdent"),R5=e=>{if(e.selection.isCollapsed()&&pA(e)){const n=e.dom,o=e.selection.getRng(),r=we.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&SR(Y.fromDom(c),r))return L.some(()=>D5(e))}return L.none()},Ou=(e,n,o)=>mi([R5,Wi,wC,(r,c)=>C5(r,n,c),pv,Ex,q3,gA,Z3,fA],r=>r(e,o)).filter(r=>e.selection.isEditable()),M5=(e,n)=>{Ou(e,n,!1).fold(()=>{a4(e),W1(e)},Dn)},N5=(e,n)=>{Ou(e,n,!0).fold(()=>aI(e),Dn)},QZ=(e,n)=>{e.addCommand("delete",()=>{M5(e,n)}),e.addCommand("forwardDelete",()=>{N5(e,n)})},lH=5,ej=400,iH=e=>e.touches===void 0||e.touches.length!==1?L.none():L.some(e.touches[0]),uH=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>lH||r>lH},xE=e=>{const n=jl(),o=$r(!1),r=Nh(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},ej);e.on("touchstart",c=>{iH(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),iH(c).each(u=>{n.on(f=>{uH(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},bA=(e,n)=>tn(e,n.nodeName),vA=(e,n)=>je(n)?!0:dt(n)?!bA(e.getBlockElements(),n)&&!Xl(n)&&!sf(e,n):!1,B5=(e,n,o)=>Ie(CR(Y.fromDom(o),Y.fromDom(n)),r=>bA(e,r.dom)),$5=(e,n)=>{if(je(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||bA(e,n.nextSibling)))return!0}return!1},yA=e=>e.dom.create(Va(e),hd(e)),dH=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,T=!1;const N=Va(e);if(!u||!dt(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,N.toLowerCase())||B5(c,f,u))return;const I=o.getRng(),{startContainer:G,startOffset:X,endContainer:W,endOffset:K}=I,ae=H1(e);let le=f.firstChild;for(;le;)if(dt(le)&&ny(r,le),vA(r,le)){if($5(c,le)){y=le,le=le.nextSibling,n.remove(y);continue}b||(b=yA(e),f.insertBefore(b,le),T=!0),y=le,le=le.nextSibling,b.appendChild(y)}else b=null,le=le.nextSibling;T&&ae&&(I.setStart(G,X),I.setEnd(W,K),o.setRng(I),e.nodeChanged())},P5=(e,n,o)=>{const r=Y.fromDom(yA(e)),c=w();Rs(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},mH=e=>{e.on("NodeChange",Be(dH,e))},F5=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,EE=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},fH=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],EE(e,c,c0(e)));o.content=c}},gH=e=>{const n="contenteditable",o=" "+Ve.trim(V_(e))+" ",r=" "+Ve.trim(c0(e))+" ",c=F5(o),u=F5(r),f=z_(e);f.length>0&&e.on("BeforeSetContent",b=>{fH(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const T=b[y];c(T)?T.attr(n,"true"):u(T)&&T.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const T=b[y];!c(T)&&!u(T)||(f.length>0&&T.attr("data-mce-content")?(T.name="#text",T.type=3,T.raw=!0,T.value=T.attr("data-mce-content")):T.attr(n,null))}})},hH=e=>rn(Y.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),TE=(e,n)=>{n.hasAttribute("data-mce-caret")&&(om(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},pH=(e,n)=>{const o=hH(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),TE(e,o);return}eo(o)&&(TE(e,o),e.undoManager.add())}},bH=e=>{e.on("keyup compositionstart",Be(pH,e))},CA=co,vH=(e,n,o)=>u5(n,e,o,up,dp,CA),yH=(e,n,o)=>d5(n,e,o,u=>up(u)||Zt(u),u=>dp(u)||vR(u),CA),CH=e=>{const n=e.dom.create(Va(e));return n.innerHTML='<br data-mce-bogus="1">',n},I5=(e,n,o)=>{const r=Cu(e.getBody()),c=Be(g0,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(we.fromRangeStart(o))){const b=Y.fromDom(CH(e));n===1?Mc(Y.fromDom(u),b):Qa(Y.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},wH=(e,n)=>{const o=n?ma.Forwards:ma.Backwards,r=e.selection.getRng();return vH(o,e,r).orThunk(()=>(I5(e,o,r),L.none()))},SH=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return yH(o,e,r).orThunk(()=>(I5(e,o,r),L.none()))},wA=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return o4(o)?!n:n},L5=(e,n)=>wH(e,wA(e.selection,n)).exists(o=>(zg(e,o),!0)),SA=(e,n)=>SH(e,n).exists(o=>(zg(e,o),!0)),H5=(e,n)=>aA(e,n,n?dp:up),_E=(e,n)=>lE(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(zg(e,o),!0)),xH=e=>Me(["figcaption"],Io(e)),EH=(e,n)=>{const o=Be(uo,n);return V(Y.fromDom(e.container()),Ms,o).filter(xH)},TH=(e,n,o)=>n?o5(e.dom,o):FL(e.dom,o),_H=(e,n)=>{const o=Y.fromDom(e.getBody()),r=we.fromRangeStart(e.selection.getRng());return EH(r,o).exists(()=>{if(TH(o,n,r)){const u=P5(e,o,n?Rs:Km);return e.selection.setRng(u),!0}else return!1})},Pr=(e,n)=>e.selection.isCollapsed()?_H(e,n):!1,V5={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},kH=e=>He(e,n=>({...V5,...n})),AH=e=>He(e,n=>({...V5,...n})),xA=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,EA=(e,n)=>Ma(kH(e),o=>xA(o,n)?[o]:[]),z5=(e,n)=>Ma(AH(e),o=>xA(o,n)?[o]:[]),cn=(e,...n)=>()=>e.apply(null,n),fb=(e,n)=>Jo(EA(e,n),o=>o.action()),TA=(e,n)=>mi(z5(e,n),o=>o.action()),kE=(e,n)=>{const o=n?ma.Forwards:ma.Backwards,r=e.selection.getRng();return u5(e,o,r,$2,P2,Hs).exists(c=>(zg(e,c),!0))},AE=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return d5(e,o,r,$2,P2,Hs).exists(c=>(zg(e,c),!0))},OE=(e,n)=>aA(e,n,n?P2:$2),_A=yu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Tp={..._A,none:e=>_A.none(e)},OC=(e,n)=>wv(e,n,De),wv=(e,n,o)=>Ma(br(e),r=>Ta(r,n)?o(r)?[r]:[]:wv(r,n,o)),Nf=(e,n,o=ke)=>{if(o(n))return L.none();if(Me(e,Io(n)))return L.some(n);const r=c=>Ta(c,"table")||o(c);return Wt(n,e.join(","),r)},DC=(e,n)=>Nf(["td","th"],e,n),U5=e=>OC(e,"th,td"),AA=(e,n)=>an(e,"table",n),OA=(e,n,o,r,c=De)=>{const u=r===1;if(!u&&o<=0)return Tp.first(e[0]);if(u&&o>=e.length-1)return Tp.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?Tp.middle(n,b):OA(e,n,f,r,c)}},DA=(e,n)=>AA(e,n).bind(o=>{const r=U5(o);return Hr(r,u=>uo(e,u)).map(u=>({index:u,all:r}))}),OH=(e,n,o)=>DA(e,o).fold(()=>Tp.none(e),c=>OA(c.all,e,c.index,1,n)),DH=(e,n,o)=>DA(e,o).fold(()=>Tp.none(),c=>OA(c.all,e,c.index,-1,n)),W5=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),RH=(e,n)=>Ma(n,o=>{const r=W5(Sr(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),MH=(e,n,o)=>Eo(e,(r,c)=>r.fold(()=>L.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return L.some(b<f?c:u)}),L.none()),Z5=(e,n,o,r,c)=>{const u=Wr(Y.fromDom(o),"td,th,caption").map(b=>b.dom),f=Ct(RH(e,u),b=>n(b,c));return MH(f,r,c).map(b=>b.cell)},NH=e=>e.bottom,BH=e=>e.top,$H=(e,n)=>e.y<n,PH=(e,n)=>e.y>n,FH=Be(Z5,NH,$H),IH=Be(Z5,BH,PH),LH=(e,n)=>In(n.getClientRects()).bind(o=>FH(e,o.left,o.top)).bind(o=>SC(LL(o),n)),HH=(e,n)=>Na(n.getClientRects()).bind(o=>IH(e,o.left,o.top)).bind(o=>SC(IL(o),n)),VH=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),zH=e=>e.breakType===Pd.Wrap&&e.positions.length===0,j5=e=>e.breakType===Pd.Br&&e.positions.length===1,RA=(e,n,o)=>{const r=e(n,o);return zH(r)||!ds(o.getNode())&&j5(r)?!VH(e,n,r):r.breakAt.isNone()},G5=Be(RA,xC),UH=Be(RA,EC),WH=(e,n,o)=>{const r=we.fromRangeStart(n);return Sf(!e,o).exists(c=>c.isEqual(r))},ZH=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return J_()&&WH(n,c,o)?(Vg(u,e,o,!n,!1).each(f=>{zg(e,f)}),!0):!1},jH=(e,n,o)=>LH(n,o).orThunk(()=>In(o.getClientRects()).bind(r=>Q3(t5(e,we.before(n)),r.left))).getOr(we.before(n)),q5=(e,n,o)=>HH(n,o).orThunk(()=>In(o.getClientRects()).bind(r=>Q3(n5(e,we.after(n)),r.left))).getOr(we.after(n)),K5=(e,n)=>{const o=n.getNode(e);return hs(o)?L.some(o):L.none()},X5=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Mc:Qa,c=P5(n,Y.fromDom(o),r);zg(n,c)})},Y5=(e,n,o)=>{const r=K5(!!n,o),c=n===!1;r.fold(()=>zg(e,o.toRange()),u=>Sf(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>zg(e,o.toRange()),f=>X5(n,e,u)))},J5=(e,n,o,r)=>{const c=e.selection.getRng(),u=we.fromRangeStart(c),f=e.getBody();if(!n&&G5(r,u)){const b=jH(f,o,u);return Y5(e,n,b),!0}else if(n&&UH(r,u)){const b=q5(f,o,u);return Y5(e,n,b),!0}else return!1},MA=(e,n,o)=>L.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>L.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),Q5=(e,n)=>MA(e,n,ZH),e$=(e,n)=>MA(e,n,J5),GH=e=>{const n=Ag.exact(e,0,e,0);return z0(n)},NA=(e,n,o)=>o.fold(L.none,L.none,(r,c)=>tR(c).map(u=>GH(u)),r=>(e.execCommand("mceTableInsertRowAfter"),t$(e,n,r))),t$=(e,n,o)=>NA(e,n,OH(o,St)),qH=(e,n,o)=>NA(e,n,DH(o,St)),BA=(e,n)=>{const o=["table","li","dl"],r=Y.fromDom(e.getBody()),c=b=>{const y=Io(b);return uo(b,r)||Me(o,y)},u=e.selection.getRng(),f=Y.fromDom(n?u.endContainer:u.startContainer);return DC(f,c).map(b=>(AA(b,c).each(N=>{e.model.table.clearSelectedCells(N.dom)}),e.selection.collapse(!n),(n?t$:qH)(e,c,b).each(N=>{e.selection.setRng(N)}),!0)).getOr(!1)},KH=(e,n,o)=>{const r=Kn.os.isMacOS()||Kn.os.isiOS();fb([{keyCode:gt.RIGHT,action:cn(L5,e,!0)},{keyCode:gt.LEFT,action:cn(L5,e,!1)},{keyCode:gt.UP,action:cn(SA,e,!1)},{keyCode:gt.DOWN,action:cn(SA,e,!0)},...r?[{keyCode:gt.UP,action:cn(_E,e,!1),metaKey:!0,shiftKey:!0},{keyCode:gt.DOWN,action:cn(_E,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:gt.RIGHT,action:cn(Q5,e,!0)},{keyCode:gt.LEFT,action:cn(Q5,e,!1)},{keyCode:gt.UP,action:cn(e$,e,!1)},{keyCode:gt.DOWN,action:cn(e$,e,!0)},{keyCode:gt.RIGHT,action:cn(kE,e,!0)},{keyCode:gt.LEFT,action:cn(kE,e,!1)},{keyCode:gt.UP,action:cn(AE,e,!1)},{keyCode:gt.DOWN,action:cn(AE,e,!0)},{keyCode:gt.RIGHT,action:cn(iA,e,n,!0)},{keyCode:gt.LEFT,action:cn(iA,e,n,!1)},{keyCode:gt.RIGHT,ctrlKey:!r,altKey:r,action:cn(h5,e,n)},{keyCode:gt.LEFT,ctrlKey:!r,altKey:r,action:cn(ZL,e,n)},{keyCode:gt.UP,action:cn(Pr,e,!1)},{keyCode:gt.DOWN,action:cn(Pr,e,!0)}],o).each(c=>{o.preventDefault()})},XH=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||KH(e,n,o)})},Fd=(e,n)=>({container:e,offset:n}),DE=Po.DOM,RE=e=>n=>e===n?-1:0,YH=e=>n=>e.isBlock(n)||Me(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",ME=(e,n,o)=>{if(je(e)&&n>=0)return L.some(Fd(e,n));{const r=lm(DE);return L.from(r.backwards(e,n,RE(e),o)).map(c=>Fd(c.container,c.container.data.length))}},n$=(e,n,o)=>{if(je(e)&&n>=e.length)return L.some(Fd(e,n));{const r=lm(DE);return L.from(r.forwards(e,n,RE(e),o)).map(c=>Fd(c.container,0))}},$A=(e,n,o)=>{if(!je(e))return L.none();const r=e.data;if(n>=0&&n<=r.length)return L.some(Fd(e,n));{const c=lm(DE);return L.from(c.backwards(e,n,RE(e),o)).bind(u=>{const f=u.container.data;return $A(u.container,n+f.length,o)})}},o$=(e,n,o)=>{if(!je(e))return L.none();const r=e.data;if(n<=r.length)return L.some(Fd(e,n));{const c=lm(DE);return L.from(c.forwards(e,n,RE(e),o)).bind(u=>o$(u.container,n-r.length,o))}},PA=(e,n,o,r,c)=>{const u=lm(e,YH(e));return L.from(u.backwards(n,o,r,c))},JH=e=>e.collapsed&&je(e.startContainer),s$=e=>ye(e.toString().replace(/\u00A0/g," ")),r$=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,FA=(e,n)=>e.substring(n.length),QH=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(r$(u))return L.none();if(c===u&&es(e,o,r,n))break}return L.some(r)},tj=(e,n,o,r=0)=>{if(!JH(n))return L.none();const c={text:"",offset:0},u=(b,y,T)=>(c.text=T+c.text,c.offset+=y,QH(c.text,c.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return PA(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return L.none();const T=s$(y);return T.lastIndexOf(o)!==0||FA(T,o).length<r?L.none():L.some({text:FA(T,o),range:y,trigger:o})})},a$=(e,n,o,r=0)=>kF(Y.fromDom(n.startContainer)).fold(()=>tj(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=s$(u);return L.some({range:u,text:FA(f,o),trigger:o})}),NE=e=>e.nodeType===Pl,c$=e=>e.nodeType===$l,IA=e=>{if(NE(e))return Fd(e,e.data.length);{const n=e.childNodes;return n.length>0?IA(n[n.length-1]):Fd(e,n.length)}},l$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?l$(o[n],0):o.length>0&&c$(e)&&o.length===n?IA(o[o.length-1]):Fd(e,n)},i$=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return PA(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!r$(u)}).isSome()},u$=e=>n=>{const o=l$(n.startContainer,n.startOffset);return!i$(e,o)},e9=(e,n,o)=>mi(o.triggers,r=>a$(e,n,r)),t9=(e,n)=>{const o=n(),r=e.selection.getRng();return e9(e.dom,r,o).bind(c=>d$(e,n,c))},d$=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=Ct(u.lookupByTrigger(o.trigger),N=>o.text.length>=N.minChars&&N.matches.getOrThunk(()=>u$(e.dom))(o.range,b,o.text));if(y.length===0)return L.none();const T=Promise.all(He(y,N=>N.fetch(o.text,N.maxResults,r).then(I=>({matchText:o.text,items:I,columns:N.columns,onAction:N.onAction,highlightOn:N.highlightOn}))));return L.some({lookupData:T,context:o})};var Id;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Id||(Id={}));const LA=(e,n,o)=>e.stype===Id.Error?n(e.serror):o(e.svalue),HA=e=>{const n=[],o=[];return me(e,r=>{LA(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},n9=(e,n)=>e.stype===Id.Error?{stype:Id.Error,serror:n(e.serror)}:e,o9=(e,n)=>e.stype===Id.Value?{stype:Id.Value,svalue:n(e.svalue)}:e,s9=(e,n)=>e.stype===Id.Value?n(e.svalue):e,m$=(e,n)=>e.stype===Id.Error?n(e.serror):e,f$=e=>({stype:Id.Value,svalue:e}),g$=e=>({stype:Id.Error,serror:e}),ic={fromResult:e=>e.fold(g$,f$),toResult:e=>LA(e,rc.error,rc.value),svalue:f$,partition:HA,serror:g$,bind:s9,bindError:m$,map:o9,mapError:n9,fold:LA},Fr=e=>On(e)&&bs(e).length>100?" removed due to size":JSON.stringify(e,null,2),Bf=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Te("... (only showing first ten failures)")}]):e;return He(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},BE=(e,n)=>ic.serror([{path:e,getErrorInfo:n}]),sj=(e,n,o)=>BE(e,()=>'Could not find valid *required* value for "'+n+'" in '+Fr(o)),r9=(e,n)=>BE(e,()=>'Choice schema did not contain choice key: "'+n+'"'),a9=(e,n,o)=>BE(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+Fr(n)),c9=(e,n)=>BE(e,Te(n)),l9=(e,n,o,r)=>No(o,r).fold(()=>a9(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),h$=(e,n)=>({extract:(c,u)=>No(u,e).fold(()=>r9(c,e),b=>l9(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+bs(n)}),Sv=(e,n)=>n,rj=(e,n)=>Za(e)&&Za(n)?$E(e,n):n,p$=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)tn(c,u)&&(o[u]=e(o[u],c[u]))}return o},$E=p$(rj),Tm=p$(Sv),b$=()=>({tag:"required",process:{}}),i9=e=>({tag:"defaultedThunk",process:e}),VA=e=>i9(Te(e)),u9=()=>({tag:"option",process:{}}),zA=(e,n)=>e.length>0?ic.svalue($E(n,Tm.apply(void 0,e))):ic.svalue(n),UA=e=>O(ic.serror,Zc)(e),d9={consolidateObj:(e,n)=>{const o=ic.partition(e);return o.errors.length>0?UA(o.errors):zA(o.values,n)},consolidateArr:e=>{const n=ic.partition(e);return n.errors.length>0?UA(n.errors):ic.svalue(n.values)}},v$=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),y$=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),PE=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},RC=e=>{const n=(r,c)=>ic.bindError(e(c),u=>c9(r,u)),o=Te("val");return{extract:n,toString:o}},WA=RC(ic.svalue),m9=(e,n,o,r)=>No(n,o).fold(()=>sj(e,o,n),r),C$=(e,n,o,r)=>{const c=No(e,n).getOrThunk(()=>o(e));return r(c)},f9=(e,n,o)=>o(No(e,n)),g9=(e,n,o,r)=>{const c=No(e,n).map(u=>u===!0?o(e):u);return r(c)},ZA=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>ic.svalue(L.none()),y=>{const T=c.extract(n.concat([r]),y);return ic.map(T,L.some)});switch(e.tag){case"required":return m9(n,o,r,u);case"defaultedThunk":return C$(o,r,e.process,u);case"option":return f9(o,r,f);case"defaultedOptionThunk":return g9(o,r,e.process,f);case"mergeWithThunk":return C$(o,r,Te({}),b=>{const y=$E(e.process(o),b);return u(y)})}},w$=(e,n,o)=>{const r={},c=[];for(const u of o)PE(u,(f,b,y,T)=>{const N=ZA(y,e,n,f,T);ic.fold(N,R=>{c.push(...R)},R=>{r[b]=R})},(f,b)=>{r[f]=b(n)});return c.length>0?ic.serror(c):ic.svalue(r)},jA=e=>({extract:(r,c)=>w$(r,c,e),toString:()=>`obj{
`+He(e,c=>PE(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),GA=e=>({extract:(r,c)=>{const u=He(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return d9.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),h9=e=>RC(n=>e(n).fold(ic.serror,ic.svalue)),qA=(e,n,o)=>{const r=n.extract([e],o);return ic.mapError(r,c=>({input:o,errors:c}))},p9=(e,n,o)=>ic.toResult(qA(e,n,o)),b9=e=>`Errors: 
`+Bf(e.errors).join(`
`)+`

Input object: `+Fr(e.input),S$=(e,n)=>h$(e,Qn(n,jA)),v9=Te(WA),FE=(e,n)=>RC(o=>{const r=typeof o;return e(o)?ic.svalue(o):ic.serror(`Expected type: ${n} but got: ${r}`)}),x$=FE(Os,"number"),xv=FE(ee,"string"),E$=FE(mn,"boolean"),IE=FE(oe,"function"),MC=v$,T$=y$,y9=e=>h9(n=>Me(e,n)?rc.value(n):rc.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),NC=(e,n)=>MC(e,e,b$(),n),KA=e=>NC(e,xv),XA=e=>NC(e,IE),C9=(e,n)=>MC(e,e,b$(),GA(n)),YA=(e,n)=>MC(e,e,u9(),n),JA=e=>YA(e,xv),lj=e=>YA(e,IE),ij=(e,n)=>MC(e,e,VA(n),v9()),Ev=(e,n,o)=>MC(e,e,VA(n),o),w9=(e,n)=>Ev(e,n,x$),S9=(e,n)=>Ev(e,n,xv),_$=(e,n,o)=>Ev(e,n,y9(o)),k$=(e,n)=>Ev(e,n,E$),QA=(e,n)=>Ev(e,n,IE),Ir=(e,n,o)=>Ev(e,n,GA(o)),eO=KA("type"),$f=XA("fetch"),LE=XA("onAction"),A$=QA("onSetup",()=>Ot),x9=JA("text"),HE=JA("icon"),tO=JA("tooltip"),O$=JA("label"),D$=k$("active",!1),E9=k$("enabled",!0),R$=k$("primary",!1),T9=e=>ij("columns",e),BC=e=>S9("type",e),_9=jA([eO,KA("trigger"),w9("minChars",1),T9(1),w9("maxResults",10),lj("matches"),$f,LE,Ir("highlightOn",[],xv)]),M$=e=>p9("Autocompleter",_9,{trigger:e.ch,...e}),nO=[E9,tO,HE,x9,A$],N$=[D$].concat(nO),k9=[QA("predicate",ke),_$("scope","node",["node","editor"]),_$("position","selection",["node","selection","line"])],A9=nO.concat([BC("contextformbutton"),R$,LE,T$("original",ht)]),O9=N$.concat([BC("contextformbutton"),R$,LE,T$("original",ht)]),B$=nO.concat([BC("contextformbutton")]),$$=N$.concat([BC("contextformtogglebutton")]),D9=S$("type",{contextformbutton:A9,contextformtogglebutton:O9});jA([BC("contextform"),QA("initValue",Te("")),O$,C9("commands",D9),YA("launch",S$("type",{contextformbutton:B$,contextformtogglebutton:$$}))].concat(k9));const R9=e=>{const n=e.ui.registry.getAll().popups,o=Qn(n,f=>M$(f).fold(b=>{throw new Error(b9(b))},ht)),r=Lu(Ji(o,f=>f.trigger)),c=Tc(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Ct(c,b=>b.trigger===f)}},uj=(e,n)=>{const o=Nh(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},oO=e=>{const n=jl(),o=$r(!1),r=n.isSet,c=()=>{r()&&(p7(e),ir(e),o.set(!1),n.clear())},u=T=>{r()||(IZ(e,T.range),n.set({trigger:T.trigger,matchLength:T.text.length}))},f=fi(()=>R9(e)),b=T=>n.get().map(N=>a$(e.dom,e.selection.getRng(),N.trigger).bind(R=>d$(e,f,R,T))).getOrThunk(()=>t9(e,f)),y=T=>{b(T).fold(c,N=>{u(N.context),N.lookupData.then(R=>{n.get().map(I=>{const G=N.context;I.trigger===G.trigger&&(G.text.length-I.matchLength>=10?c():(n.set({...I,matchLength:G.text.length}),o.get()?bk(e,{lookupData:R}):(o.set(!0),x2(e,{lookupData:R}))))})})})};e.addCommand("mceAutocompleterReload",(T,N)=>{const R=On(N)?N.fetchOptions:{};y(R)}),e.addCommand("mceAutocompleterClose",c),uj(e,{cancelIfNecessary:c,load:y})},P$=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Ot,inputType:o},f=iy(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},VE=P$("input"),zE=P$("beforeinput"),F$=(e,n,o)=>{const r=o.keyCode===gt.BACKSPACE?"deleteContentBackward":"deleteContentForward";TA([{keyCode:gt.BACKSPACE,action:cn(R5,e)},{keyCode:gt.BACKSPACE,action:cn(Wi,e,!1)},{keyCode:gt.DELETE,action:cn(Wi,e,!0)},{keyCode:gt.BACKSPACE,action:cn(wC,e,!1)},{keyCode:gt.DELETE,action:cn(wC,e,!0)},{keyCode:gt.BACKSPACE,action:cn(C5,e,n,!1)},{keyCode:gt.DELETE,action:cn(C5,e,n,!0)},{keyCode:gt.BACKSPACE,action:cn(Ex,e,!1)},{keyCode:gt.DELETE,action:cn(Ex,e,!0)},{keyCode:gt.BACKSPACE,action:cn(q3,e,!1)},{keyCode:gt.DELETE,action:cn(q3,e,!0)},{keyCode:gt.BACKSPACE,action:cn(gA,e,!1)},{keyCode:gt.DELETE,action:cn(gA,e,!0)},{keyCode:gt.BACKSPACE,action:cn(Z3,e,!1)},{keyCode:gt.DELETE,action:cn(Z3,e,!0)},{keyCode:gt.BACKSPACE,action:cn(pv,e,!1)},{keyCode:gt.DELETE,action:cn(pv,e,!0)},{keyCode:gt.BACKSPACE,action:cn(fA,e,!1)},{keyCode:gt.DELETE,action:cn(fA,e,!0)}],o).filter(c=>e.selection.isEditable()).each(c=>{o.preventDefault(),zE(e,r).isDefaultPrevented()||(c(),VE(e,r))})},M9=(e,n,o)=>{const r=jc(),c=r.os,u=r.browser,f=c.isMacOS()?[{keyCode:gt.BACKSPACE,altKey:!0,action:cn(kC,e)},{keyCode:gt.DELETE,altKey:!0,action:cn(kC,e)}]:[{keyCode:gt.BACKSPACE,ctrlKey:!0,action:cn(kC,e)},{keyCode:gt.DELETE,ctrlKey:!0,action:cn(kC,e)}];c.isMacOS()&&o&&f.push({keyCode:u.isFirefox()?224:91,action:cn(kC,e)}),fb([{keyCode:gt.BACKSPACE,action:cn(_L,e)},{keyCode:gt.DELETE,action:cn(_L,e)},...f],n)},I$=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===gt.BACKSPACE,r.isDefaultPrevented()||F$(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||M9(e,r,o),o=!1})},N9=e=>{for(;e;){if(dt(e)||je(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Tv=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=N9(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Ce),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Ks(n,n);let f=n,b;for(;b=u.current();){if(je(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else ds(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Tf(e,c)},sO=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},Wa=e=>L.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),B9=e=>Wa(e).fold(Te(""),n=>n.nodeName.toUpperCase()),$9=e=>Wa(e).filter(n=>Ha(Y.fromDom(n))).isSome(),P9=(e,n)=>e.dom.getParent(n,yr),F9=(e,n,o)=>{let r=n;for(;r&&r!==e&&q(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return yr(c);r=c}return!1},I9=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Va(e)&&e.dom.isEmpty(o)&&F9(e.getBody(),o,r=>tn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),L9=(e,n,o)=>{var r,c,u;const f=n(Va(e)),b=P9(e,o);b&&(e.dom.insertAfter(f,b),Tv(e,f),((u=(c=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||c===void 0?void 0:c.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},H9=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,UE=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},L$=(e,n)=>{const o=e==null?void 0:e.parentNode;return Oe(o)&&o.nodeName===n},H$=e=>Oe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),rO=e=>Oe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),aO=e=>H$(e)&&H$(e.parentNode),WE=e=>{const n=e.parentNode;return rO(n)?n:e},cO=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!dt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},dj=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;aO(o)&&(c="LI");let y=n(c);if(cO(o,r,!0)&&cO(o,r,!1))if(L$(o,"LI")){const T=WE(o);u.insertAfter(y,T),UE(o)?u.remove(T):u.remove(o)}else u.replace(y,o);else if(cO(o,r,!0))L$(o,"LI")?(u.insertAfter(y,WE(o)),y.appendChild(u.doc.createTextNode(" ")),y.appendChild(o)):b.insertBefore(y,o),u.remove(r);else if(cO(o,r,!1))u.insertAfter(y,WE(o)),u.remove(r);else{o=WE(o);const T=f.cloneRange();T.setStartAfter(r),T.setEndAfter(o);const N=T.extractContents();c==="LI"&&H9(N,"LI")?(y=N.firstChild,u.insertAfter(N,o)):(u.insertAfter(N,o),u.insertAfter(y,o)),u.remove(r)}Tv(e,y)},V9=e=>{me(Wp(Y.fromDom(e),sr),n=>{const o=n.dom;o.nodeValue=ye(o.data)})},z9=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},mj=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),lO=e=>{e.innerHTML='<br data-mce-bogus="1">'},_m=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,iO=(e,n)=>Oe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",U9=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;dt(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||mj(e,u))&&e.remove(u)},Pf=(e,n,o)=>je(n)?e?o===1&&n.data.charAt(o-1)===U?0:o:o===n.data.length-1&&n.data.charAt(o)===U?n.data.length:o:o,W9=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,Pf(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Pf(!1,e.endContainer,e.endOffset)),n},V$=e=>{let n=e;do je(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},Z9=(e,n,o)=>{const r=e.dom;L.from(o.style).map(r.parseStyle).each(y=>{const N={...na(Y.fromDom(n)),...y};r.setStyles(n,N)});const c=L.from(o.class).map(y=>y.split(/\s+/)),u=L.from(n.className).map(y=>Ct(y.split(/\s+/),T=>T!==""));ea(c,u,(y,T)=>{const N=Ct(T,I=>!Me(y,I)),R=[...y,...N];r.setAttrib(n,"class",R.join(" "))});const f=["style","class"],b=Ko(o,(y,T)=>!Me(f,T));r.setAttribs(n,b)},$C=(e,n)=>{if(Va(e).toLowerCase()===n.tagName.toLowerCase()){const r=hd(e);Z9(e,n,r)}},j9=(e,n,o,r,c)=>{var u,f;const b=e.dom,y=(u=sO(b,r))!==null&&u!==void 0?u:b.getRoot();let T=b.getParent(r,b.isBlock);if(!T||!iO(b,T)){if(T=T||y,!T.hasChildNodes()){const G=b.create(n);return $C(e,G),T.appendChild(G),o.setStart(G,0),o.setEnd(G,0),G}let N=r;for(;N&&N.parentNode!==T;)N=N.parentNode;let R;for(;N&&!b.isBlock(N);)R=N,N=N.previousSibling;const I=(f=R==null?void 0:R.parentElement)===null||f===void 0?void 0:f.nodeName;if(R&&I&&e.schema.isValidChild(I,n.toLowerCase())){const G=R.parentNode,X=b.create(n);for($C(e,X),G.insertBefore(X,R),N=R;N&&!b.isBlock(N);){const W=N.nextSibling;X.appendChild(N),N=W}o.setStart(r,c),o.setEnd(r,c)}}return r},G9=(e,n)=>{n.normalize();const o=n.lastChild;(!o||dt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},q9=(e,n)=>{const o=y_(e);return It(n)?!1:ee(o)?Me(Ve.explode(o),n.nodeName.toLowerCase()):o},ZE={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,T=y.getNonEmptyElements(),N=e.selection.getRng(),R=Va(e),I=N.collapsed&&N.startContainer===e.dom.getRoot(),G=Y.fromDom(N.startContainer),X=xi(G,N.startOffset),W=X.exists(ot=>Rc(ot)&&!St(ot)),K=I&&W,ae=ot=>{let bt=o;const sn=y.getTextInlineElements();let Rt;ot||c==="TABLE"||c==="HR"?Rt=b.create(ot||R):Rt=Ue.cloneNode(!1);let kn=Rt;if(sl(e)===!1)b.setAttrib(Rt,"style",null),b.setAttrib(Rt,"class",null);else do if(sn[bt.nodeName]){if($i(bt)||Xl(bt))continue;const go=bt.cloneNode(!1);b.setAttrib(go,"id",""),Rt.hasChildNodes()?(go.appendChild(Rt.firstChild),Rt.appendChild(go)):(kn=go,Rt.appendChild(go))}while((bt=bt.parentNode)&&bt!==Et);return $C(e,Rt),lO(kn),Rt},le=ot=>{const bt=Pf(ot,o,r);if(je(o)&&(ot?bt>0:bt<o.data.length))return!1;if(o.parentNode===Ue&&f&&!ot||ot&&dt(o)&&o===Ue.firstChild)return!0;if(_m(o,"TABLE")||_m(o,"HR"))return f&&!ot||!f&&ot;const sn=new Ks(o,Ue);je(o)&&(ot&&bt===0?sn.prev():!ot&&bt===o.data.length&&sn.next());let Rt;for(;Rt=sn.current();){if(dt(Rt)){if(!Rt.getAttribute("data-mce-bogus")){const kn=Rt.nodeName.toLowerCase();if(T[kn]&&kn!=="br")return!1}}else if(je(Rt)&&!Zl(Rt.data))return!1;ot?sn.prev():sn.next()}return!0},ce=()=>{let ot;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&ve!=="HGROUP"?ot=ae(R):ot=ae(),q9(e,u)&&iO(b,u)&&b.isEmpty(Ue,void 0,{includeZwsp:!0})?ot=b.split(u,Ue):b.insertAfter(ot,Ue),Tv(e,ot),ot};W0(b,N).each(ot=>{N.setStart(ot.startContainer,ot.startOffset),N.setEnd(ot.endContainer,ot.endOffset)}),o=N.startContainer,r=N.startOffset;const he=!!(n&&n.shiftKey),Fe=!!(n&&n.ctrlKey);dt(o)&&o.hasChildNodes()&&!K&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&je(o)?r=o.data.length:r=0);const Et=sO(b,o);if(!Et||z9(e,o))return;he||(o=j9(e,R,N,o,r));let Ue=b.getParent(o,b.isBlock)||b.getRoot();u=Oe(Ue==null?void 0:Ue.parentNode)?b.getParent(Ue.parentNode,b.isBlock):null,c=Ue?Ue.nodeName.toUpperCase():"";const ve=u?u.nodeName.toUpperCase():"";if(ve==="LI"&&!Fe){const ot=u;Ue=ot,u=ot.parentNode,c=ve}if(dt(u)&&I9(e,he,Ue))return L9(e,ae,Ue);if(/^(LI|DT|DD)$/.test(c)&&dt(u)&&b.isEmpty(Ue)){dj(e,ae,u,Ue,R);return}if(!K&&(Ue===e.getBody()||!iO(b,Ue)))return;const _e=Ue.parentNode;let et;if(K)et=ae(R),X.fold(()=>{Rs(G,Y.fromDom(et))},ot=>{Qa(ot,Y.fromDom(et))}),e.selection.setCursorLocation(et,0);else if(Vt(Ue))et=om(Ue),b.isEmpty(Ue)&&lO(Ue),$C(e,et),Tv(e,et);else if(le(!1))et=ce();else if(le(!0)&&_e){et=_e.insertBefore(ae(),Ue);const ot=Kf(Y.fromDom(N.startContainer))&&N.collapsed;Tv(e,_m(Ue,"HR")||ot?et:Ue)}else{const ot=W9(N).cloneRange();ot.setEndAfter(Ue);const bt=ot.extractContents();V9(bt),V$(bt),et=bt.firstChild,b.insertAfter(bt,Ue),U9(b,T,et),G9(b,Ue),b.isEmpty(Ue)&&lO(Ue),et.normalize(),b.isEmpty(et)?(b.remove(et),ce()):($C(e,et),Tv(e,et))}b.setAttrib(et,"id",""),e.dispatch("NewBlock",{newBlock:et})},fakeEventName:"insertParagraph"},z$=(e,n,o)=>{const r=new Ks(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||je(c)&&c.length>0)return!0;return!1},PC=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Tf(e,r)},K9=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;W0(r,c).each(G=>{c.setStart(G.startContainer,G.startOffset),c.setEnd(G.endContainer,G.endOffset)});let b=c.startOffset,y=c.startContainer;if(dt(y)&&y.hasChildNodes()){const G=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,G&&je(y)?b=y.data.length:b=0}let T=r.getParent(y,r.isBlock);const N=T&&T.parentNode?r.getParent(T.parentNode,r.isBlock):null,R=N?N.nodeName.toUpperCase():"",I=!!(n&&n.ctrlKey);R==="LI"&&!I&&(T=N),je(y)&&b>=y.data.length&&(z$(e.schema,y,T||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),jr(r,c,u),PC(e,u,f),e.undoManager.add()},X9=(e,n)=>{const o=Y.fromTag("br");Qa(Y.fromDom(n),o),e.undoManager.add()},Y9=(e,n)=>{Q9(e.getBody(),n)||Mc(Y.fromDom(n),Y.fromTag("br"));const o=Y.fromTag("br");Mc(Y.fromDom(n),o),PC(e,o.dom,!1),e.undoManager.add()},J9=e=>ds(e.getNode()),Q9=(e,n)=>J9(we.after(n))?!0:fa(e,we.after(n)).map(o=>ds(o.getNode())).getOr(!1),uO=e=>e&&e.nodeName==="A"&&"href"in e,eV=e=>e.fold(ke,uO,uO,ke),U$=e=>{const n=Be(U1,e),o=we.fromRangeStart(e.selection.getRng());return Zi(n,e.getBody(),o).filter(eV)},W$=(e,n)=>{n.fold(Ot,Be(X9,e),Be(Y9,e),Ot)},jE={insert:(e,n)=>{const o=U$(e);o.isSome()?o.each(Be(W$,e)):K9(e,n)},fakeEventName:"insertLineBreak"},Z$=(e,n)=>Wa(e).filter(o=>n.length>0&&Ta(Y.fromDom(o),n)).isSome(),tV=e=>Z$(e,Ri(e)),GE=e=>Z$(e,u1(e)),Gi=yu.generate([{br:[]},{block:[]},{none:[]}]),dO=(e,n)=>GE(e),qE=e=>(n,o)=>$9(n)===e,mO=(e,n)=>(o,r)=>B9(o)===e.toUpperCase()===n,nV=e=>{const n=sO(e.dom,e.selection.getStart());return It(n)},KE=e=>mO("pre",e),_p=()=>mO("summary",!0),XE=e=>(n,o)=>ql(n)===e,oV=(e,n)=>tV(e),YE=(e,n)=>n,JE=e=>{const n=Va(e),o=sO(e.dom,e.selection.getStart());return Oe(o)&&e.schema.isValidChild(o.nodeName,n)},j$=e=>{const n=e.selection.getRng(),o=n.collapsed&&n.startContainer===e.dom.getRoot(),r=Y.fromDom(n.startContainer),u=xi(r,n.startOffset).map(f=>Rc(f)&&!St(f));return o&&u.getOr(!0)},qi=(e,n)=>(o,r)=>Eo(e,(u,f)=>u&&f(o,r),!0)?L.some(n):L.none(),sV=(e,n)=>Mf([qi([dO],Gi.none()),qi([KE(!0),nV],Gi.none()),qi([_p()],Gi.br()),qi([KE(!0),XE(!1),YE],Gi.br()),qi([KE(!0),XE(!1)],Gi.block()),qi([KE(!0),XE(!0),YE],Gi.block()),qi([KE(!0),XE(!0)],Gi.br()),qi([qE(!0),YE],Gi.br()),qi([qE(!0)],Gi.block()),qi([oV],Gi.br()),qi([YE],Gi.br()),qi([JE],Gi.block()),qi([j$],Gi.block())],[e,!!(n&&n.shiftKey)]).getOr(Gi.none()),FC=(e,n,o)=>{n.selection.isCollapsed()||_d(n),!(Oe(o)&&zE(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Oe(o)&&VE(n,e.fakeEventName))},G$=(e,n)=>{const o=()=>FC(jE,e,n),r=()=>FC(ZE,e,n),c=sV(e,n);switch(pd(e)){case"linebreak":c.fold(o,o,Ot);break;case"block":c.fold(r,r,Ot);break;case"invert":c.fold(r,o,Ot);break;default:c.fold(o,r,Ot);break}},q$=jc(),rV=q$.os.isiOS()&&q$.browser.isSafari(),fO=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),Z8(e.undoManager),e.undoManager.transact(()=>{G$(e,n)}))},gO=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(je(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},aV=e=>{let n=L.none();const o=c=>{n=L.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),n.fold(Ot,f=>c.selection.moveToBookmark(f)),fO(c,u),n=L.none()};e.on("keydown",c=>{c.keyCode===gt.ENTER&&(rV&&gO(e.selection.getRng())?o(e):fO(e,c))}),e.on("keyup",c=>{c.keyCode===gt.ENTER&&n.each(()=>r(e,c))})},hO=(e,n,o)=>{const r=Kn.os.isMacOS()||Kn.os.isiOS();fb([{keyCode:gt.END,action:cn(H5,e,!0)},{keyCode:gt.HOME,action:cn(H5,e,!1)},...r?[]:[{keyCode:gt.HOME,action:cn(_E,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:gt.END,action:cn(_E,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:gt.END,action:cn(OE,e,!0)},{keyCode:gt.HOME,action:cn(OE,e,!1)},{keyCode:gt.END,action:cn(yE,e,!0,n)},{keyCode:gt.HOME,action:cn(yE,e,!1,n)}],o).each(c=>{o.preventDefault()})},K$=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||hO(e,n,o)})},QE=e=>{e.on("input",n=>{n.isComposing||XF(e)})},X$=jc(),Y$=(e,n,o)=>{fb([{keyCode:gt.PAGE_UP,action:cn(yE,e,!1,n)},{keyCode:gt.PAGE_DOWN,action:cn(yE,e,!0,n)}],o)},J$=e=>e.stopImmediatePropagation(),Q$=e=>e.keyCode===gt.PAGE_UP||e.keyCode===gt.PAGE_DOWN,IC=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",J$,!0):!o&&e.get()&&n.off("NodeChange",J$),e.set(o)},eP=(e,n)=>{if(X$.os.isMacOS())return;const o=$r(!1);e.on("keydown",r=>{Q$(r)&&IC(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||Y$(e,n,r),Q$(r)&&o.get()&&(IC(o,e,!1),e.nodeChanged())})},tP=(e,n)=>{const o=n.container(),r=n.offset();return je(o)?(o.insertData(r,e),L.some(we(o,r+e.length))):Ni(n).map(c=>{const u=Y.fromText(e);return n.isAtEnd()?Mc(c,u):Qa(c,u),we(u.dom,e.length)})},nP=Be(tP,Ce),pO=Be(tP," "),cV=(e,n)=>AR(e,n)?nP(n):pO(n),lV=e=>n=>n.fold(o=>Kr(e.dom,we.before(o)),o=>Oa(o),o=>xl(o),o=>fa(e.dom,we.after(o))),iV=(e,n)=>o=>AR(e,o)?nP(n):pO(n),oP=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},uV=(e,n)=>e.isEditable(e.getParent(n,"summary")),sP=e=>{const n=we.fromRangeStart(e.selection.getRng()),o=Y.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Be(U1,e),c=we.fromRangeStart(e.selection.getRng());return Zi(r,e.getBody(),c).bind(lV(o)).map(u=>()=>iV(o,n)(u).each(oP(e)))}else return L.none()},dV=e=>{const n=()=>{const o=Y.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=we.fromRangeStart(e.selection.getRng());cV(o,r).each(oP(e))};return Ln(Kn.browser.isFirefox()&&e.selection.isEditable()&&uV(e.dom,e.selection.getRng().startContainer),n)},rP=(e,n)=>{TA([{keyCode:gt.SPACEBAR,action:cn(sP,e)},{keyCode:gt.SPACEBAR,action:cn(dV,e)}],n).each(o=>{n.preventDefault(),zE(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),VE(e,"insertText",{data:" "}))})},mV=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||rP(e,n)})},fV=e=>g1(e)?[{keyCode:gt.TAB,action:cn(BA,e,!0)},{keyCode:gt.TAB,shiftKey:!0,action:cn(BA,e,!1)}]:[],gV=(e,n)=>{fb([...fV(e)],n).each(o=>{n.preventDefault()})},hV=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||gV(e,n)})},pV=e=>{if(e.addShortcut("Meta+P","","mcePrint"),oO(e),zi(e))return $r(null);{const n=g5(e);return bH(e),XH(e,n),I$(e,n),aV(e),mV(e),QE(e),hV(e),K$(e,n),eP(e,n),n}};class _v{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Og(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&Sd(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&Sd(n)&&(n.selection.getNode().nodeName==="IMG"?Li.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!oS(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=Qo(r.dom.getParents(n,De,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const aP=n1("image"),bV=e=>{const n=e;return L.from(n[aP])},cP=(e,n)=>{const o=e;o[aP]=n},bO=n1("event"),vV=e=>{const n=e;return L.from(n[bO])},eT=e=>n=>{const o=n;o[bO]=e},lP=(e,n)=>eT(n)(e),iP=eT(0),yV=eT(2),bj=eT(1),CV=(e=>n=>{const o=n;return L.from(o[bO]).exists(r=>r===e)})(0),wV=()=>Object.freeze({length:0,item:e=>null}),yO=n1("mode"),SV=e=>{const n=e;return L.from(n[yO])},tT=e=>n=>{const o=n;o[yO]=e},uP=(e,n)=>tT(n)(e),dP=tT(0),CO=tT(2),xV=tT(1),mP=e=>n=>{const o=n;return L.from(o[yO]).exists(r=>r===e)},kv=mP(0),fP=mP(1),EV=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(kv(e))if(ee(o)){if(!xo(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{kv(e)&&n.remove(o)},clear:()=>{kv(e)&&n.clear()}}),Go=["none","copy","link","move"],TV=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],nT=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(c){Me(Go,c)&&(n=c)},get effectAllowed(){return o},set effectAllowed(c){CV(r)&&Me(TV,c)&&(o=c)},get items(){return EV(r,e.items)},get files(){return fP(r)?wV():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{kv(r)&&(cP(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>fP(r)?"":e.getData(c),setData:(c,u)=>{kv(r)&&e.setData(c,u)},clearData:c=>{kv(r)&&e.clearData(c)}};return dP(r),r},_V=e=>{const n=nT(),o=SV(e);return CO(e),iP(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,bV(e).each(r=>n.setDragImage(r.image,r.x,r.y)),me(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),me(e.files,r=>n.items.add(r)),vV(e).each(r=>{lP(n,r)}),o.each(r=>{uP(e,r),uP(n,r)}),n},wO=e=>{const n=e.getData("text/html");return n===""?L.none():L.some(n)},SO=(e,n)=>e.setData("text/html",n),xO="x-tinymce/html",oT=Te(xO),sT="<!-- "+xO+" -->",kV=e=>sT+e,AV=e=>e.replace(sT,""),EO=e=>e.indexOf(sT)!==-1,OV=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),DV=(e,n)=>{let o="<"+e;const r=Ji(n,(c,u)=>u+'="'+lf.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},RV=(e,n,o)=>{const r=e.split(/\n\n/),c=DV(n,o),u="</"+n+">",f=He(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:He(f,b).join("")},gb="%MCEPASTEBIN%",LC=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},gb);Kn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},MV=(e,n)=>{const o=e.dom;if(TO(e)){let r;const c=n.get();for(;r=TO(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},TO=e=>e.dom.get("mcepastebin"),Av=e=>Oe(e)&&e.id==="mcepastebin",NV=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=Ct(e.getBody().childNodes,Av);me(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},rT=e=>e===gb,_O=e=>{const n=$r(null);return{create:()=>LC(e,n),remove:()=>MV(e,n),getEl:()=>TO(e),getHtml:()=>NV(e),getLastRng:n.get}},kO=(e,n)=>(Ve.each(n,o=>{Ut(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),BV=e=>{const n=df(),o=Cp({},n);let r="";const c=n.getVoidElements(),u=Ve.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const T=y.name,N=y;if(T==="br"){r+=`
`;return}if(T!=="wbr"){if(c[T]&&(r+=" "),u[T]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let R=y.firstChild;if(R)do b(R);while(R=R.next)}f[T]&&N.next&&(r+=`
`,T==="p"&&(r+=`
`))}};return e=kO(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},gP=e=>(e=kO(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Ce],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),hP=e=>{let n=0;return()=>e+n++},pP=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ve.hasOwn(o,n)?"image/"+o[n]:"image/"+n},$V=(e,n)=>{const o=Cp({sanitize:f1(e)},e.schema);o.addNodeFilter("meta",c=>{Ve.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return ip({validate:!0},e.schema).serialize(r)},bP=(e,n)=>({content:e,cancelled:n}),PV=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=cp(e,r,o);return bP(c.node.innerHTML,c.isDefaultPrevented())},vP=(e,n,o)=>{const r=Tr(e,n,o),c=$V(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?PV(e,c,o):bP(c,r.isDefaultPrevented())},FV=(e,n,o)=>vP(e,n,o),aT=(e,n)=>(e.insertContent(n,{merge:iS(e),paste:!0}),!0),AO=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),IV=(e,n)=>AO(n)&&Ie(gS(e),o=>Bl(n.toLowerCase(),`.${o.toLowerCase()}`)),LV=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),HV=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),VV=(e,n,o)=>!e.selection.isCollapsed()&&AO(n)?HV(e,n,o):!1,cT=(e,n,o)=>IV(e,n)?LV(e,n,o):!1,zV=(e,n)=>{Ve.each([VV,cT,aT],o=>!o(e,n,aT))},yP=(e,n,o)=>{o||!F_(e)?aT(e,n):zV(e,n)},UV=hP("mceclip"),WV=e=>{const n=nT();return SO(n,e),CO(n),n},CP=(e,n,o,r,c)=>{const u=FV(e,n,o);if(!u.cancelled){const f=u.content,b=()=>yP(e,f,r);c?zE(e,"insertFromPaste",{dataTransfer:WV(f)}).isDefaultPrevented()||(b(),VE(e,"insertFromPaste")):b()}},lT=(e,n,o,r)=>{const c=o||EO(n);CP(e,AV(n),c,!1,r)},OO=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),c=Ns(r,I_(e)),u=RV(c,Va(e),hd(e));CP(e,u,!1,!0,o)},wP=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Wg=(e,n)=>n in e&&e[n].length>0,SP=e=>Wg(e,"text/html")||Wg(e,"text/plain"),ZV=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Oe(o)?e.dom.encode(o[1]):void 0},jV=(e,n,o,r)=>{const c=UV(),u=Jb(e)&&Oe(o.name),f=u?ZV(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},GV=(e,n)=>{G4(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),T=y??jV(e,b,f,u);lT(e,`<img src="${T.blobUri()}">`,!1,!0)})},qV=e=>e.type==="paste",KV=e=>Promise.all(He(e,n=>eN(n).then(o=>({file:n,uri:o})))),XV=e=>{const n=gS(e);return o=>jo(o.type,"image/")&&Ie(n,r=>pP(r)===o.type)},xP=(e,n)=>{const o=n.items?Ma(hr(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?hr(n.files):[];return Ct(o.length>0?o:r,XV(e))},EP=(e,n,o)=>{const r=qV(n)?n.clipboardData:n.dataTransfer;if(fg(e)&&r){const c=xP(e,r);if(c.length>0)return n.preventDefault(),KV(c).then(u=>{o&&e.selection.setRng(o),me(u,f=>{GV(e,f)})}),!0}return!1},YV=e=>{var n,o;return Kn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},JV=e=>gt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,DO=(e,n,o,r,c)=>{let u=gP(o);const f=Wg(n,oT())||EO(o),b=!f&&OV(u),y=AO(u);(rT(u)||!u.length||b&&!y)&&(r=!0),(r||y)&&(Wg(n,"text/plain")&&b?u=n["text/plain"]:u=BV(u)),!rT(u)&&(r?OO(e,u,c):lT(e,u,f,c))},QV=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{JV(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||YV(u))return;const f=o.get()==="text"||r;r=!1;const b=wP(u.clipboardData);!SP(b)&&EP(e,u,c())||(Wg(b,"text/html")?(u.preventDefault(),DO(e,b,b["text/html"],f,!0)):Wg(b,"text/plain")&&Wg(b,"text/uri-list")?(u.preventDefault(),DO(e,b,b["text/plain"],f,!0)):(n.create(),Li.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),DO(e,b,y,f,!1)},0)))})},ez=e=>{const n=c=>jo(c,"webkit-fake-url"),o=c=>jo(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!fg(e)&&r(f))for(const b of c){const y=b.attr("src");ee(y)&&!b.attr("data-mce-object")&&y!==Kn.transparentSrc&&(n(y)||!L_(e)&&o(y))&&b.remove()}})},tz=(e,n,o)=>{QV(e,n,o),ez(e)},iT=(e,n)=>{n.get()==="text"?(n.set("html"),N1(e,!1)):(n.set("text"),N1(e,!0)),e.focus()},TP=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{iT(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&lT(e,r.html,r.internal,!1),r.text&&OO(e,r.text,!1)})},nz=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(oT(),n),!0}catch{return!1}else return!1},RO=(e,n,o,r)=>{nz(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},MO=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),Li.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},uT=e=>({html:kV(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),oz=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),NO=e=>!e.selection.isCollapsed()||oz(e),sz=e=>n=>{!n.isDefaultPrevented()&&NO(e)&&RO(n,uT(e),MO(e),()=>{if(Kn.browser.isChromium()||Kn.browser.isFirefox()){const o=e.selection.getRng();Li.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},_P=e=>n=>{!n.isDefaultPrevented()&&NO(e)&&RO(n,uT(e),MO(e),Ot)},rz=e=>{e.on("cut",sz(e)),e.on("copy",_P(e))},BO=(e,n)=>{var o,r;return vm.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},az=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},kP=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},cz=e=>Ie(e.files,n=>/^image\//.test(n.type)),HC=(e,n,o,r)=>{const c=e.getParent(o,u=>sf(n,u));if(c&&tn(r,"text/html")){const u=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!q(u.querySelector(c.nodeName.toLowerCase()))}else return!1},lz=(e,n)=>{bd(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),fg(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&cz(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=BO(e,o);if(It(r))return;const c=wP(o.dataTransfer),u=Wg(c,oT());if((!SP(c)||az(c))&&EP(e,o,r))return;const f=c[oT()],b=f||c["text/html"]||c["text/plain"],y=HC(e.dom,e.schema,r.startContainer,c);n.get()&&!y||b&&(o.preventDefault(),Li.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),kP(e,r);const T=gP(b);c["text/html"]?lT(e,T,u,!0):OO(e,T,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{fg(e)&&!n.get()&&(o.preventDefault(),kP(e,BO(e,o))),o.type==="dragend"&&n.set(!1)})},iz=e=>{const n=c=>u=>{c(e,u)},o=lS(e);oe(o)&&e.on("PastePreProcess",n(o));const r=dm(e);oe(r)&&e.on("PastePostProcess",n(r))},AP=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},uz=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,OP=e=>Ve.trim(e).replace(uz,_1).toLowerCase(),dz=(e,n,o)=>{const r=m1(e);if(o||r==="all"||!Hy(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,T,N)=>{const R=u.parseStyle(u.decode(T)),I={};for(let X=0;X<c.length;X++){const W=R[c[X]];let K=W,ae=u.getStyle(f,c[X],!0);/color/.test(c[X])&&(K=OP(K),ae=OP(ae)),ae!==K&&(I[c[X]]=W)}const G=u.serializeStyle(I,"span");return G?y+' style="'+G+'"'+N:y+N})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},mz=e=>{(Kn.browser.isChromium()||Kn.browser.isSafari())&&AP(e,dz)},fz=e=>{const n=$r(!1),o=$r(uS(e)?"text":"html"),r=_O(e);mz(e),TP(e,o),iz(e),e.on("PreInit",()=>{rz(e),lz(e,n),tz(e,r,o)})},dT=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},DP=e=>{e.parser.addNodeFilter("details",n=>{const o=h1(e);me(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=hS(e);me(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},$O=e=>E(Y.fromDom(e)),RP=(e,n)=>{const o=n.getNode();xo(o)||e.selection.setCursorLocation(o,n.offset())},MP=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},NP=jc(),vj=NP.browser,BP=NP.os,PO=vj.isSafari(),mT=BP.isMacOS()||BP.isiOS(),fT=(e,n)=>Oa(n).exists(o=>o.isEqual(e)),gz=(e,n)=>xl(n).exists(o=>ds(o.getNode())&&Kr(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),hz=(e,n)=>{const o=L.from(e.getParent(n.startContainer,"details")),r=L.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>L.from(e.select("summary",u)[0]));return L.some({startSummary:c,startDetails:o,endDetails:r})}else return L.none()},$P=(e,n)=>{const o=y=>y.contains(e.startContainer),r=y=>y.contains(e.endContainer),c=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(y=>n.endDetails.forall(T=>y!==T));return(c||u)&&!(c&&u)||f},pz=(e,n)=>n.startSummary.exists(o=>fT(e,o)),FO=(e,n)=>n.startSummary.exists(o=>gz(e,o)),PP=(e,n)=>n.startDetails.exists(o=>Kr(o,e).forall(r=>n.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),bz=(e,n,o)=>o.startDetails.exists(r=>fa(e,n).forall(c=>!r.contains(c.container()))),IO=(e,n)=>Oe(e.getParent(n.container(),"details")),LO=(e,n)=>{const o=e.dom.getParent(n.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&xl(r).each(c=>RP(e,c))}else RP(e,n)},vz=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();if(e.selection.isCollapsed()){const u=we.fromRangeStart(r.getRng()),f=o.getParent(u.container(),o.isBlock);if(f&&o.isEmpty(f)){if(q(f.nextSibling)){const b=Kr(c,u).filter(y=>IO(o,y));if(b.isSome())return b.each(y=>{n||LO(e,y)}),!0}else if(q(f.previousSibling)&&fa(c,u).filter(y=>IO(o,y)))return!0}return yd(n,c,u).fold(ke,b=>IO(o,b)?(f&&o.isEmpty(f)&&e.dom.remove(f),n||LO(e,b),!0):!1)}else return!1},yj=(e,n,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=o.keyCode===gt.BACKSPACE,b=o.keyCode===gt.DELETE,y=e.selection.isCollapsed(),T=we.fromRangeStart(u),N=e.getBody();return!y&&$P(u,n)||y&&f&&pz(T,n)||y&&b&&FO(T,n)||y&&f&&PP(T,n)||y&&b&&bz(N,T,n)?!0:PO&&Ia(c)?(!y&&MP(u,c)||HR(b,T,c)?$O(c):e.undoManager.transact(()=>{const R=r.getSel();let{anchorNode:I,anchorOffset:G,focusNode:X,focusOffset:W}=R??{};const K=()=>{Oe(I)&&Oe(G)&&Oe(X)&&Oe(W)&&(R==null||R.setBaseAndExtent(I,G,X,W))},ae=()=>{I=R==null?void 0:R.anchorNode,G=R==null?void 0:R.anchorOffset,X=R==null?void 0:R.focusNode,W=R==null?void 0:R.focusOffset},le=(he,Fe)=>{me(he.childNodes,Et=>{A1(Et)&&Fe.appendChild(Et)})},ce=e.dom.create("span",{"data-mce-bogus":"all"});le(c,ce),c.appendChild(ce),K(),y&&(mT&&(o.altKey||f&&o.metaKey)||!mT&&o.ctrlKey)&&(R==null||R.modify("extend",f?"left":"right",o.metaKey?"line":"word")),!r.isCollapsed()&&MP(r.getRng(),ce)?$O(c):(e.execCommand(f?"Delete":"ForwardDelete"),ae(),le(ce,c),K()),e.dom.remove(ce)}),!0):!1},yz=e=>{e.on("keydown",n=>{(n.keyCode===gt.BACKSPACE||n.keyCode===gt.DELETE)&&hz(e.dom,e.selection.getRng()).fold(()=>{vz(e,n.keyCode===gt.DELETE)&&n.preventDefault()},o=>{yj(e,o,n)&&n.preventDefault()})})},Cz=e=>{dT(e),DP(e),yz(e)},wz=ds,HO=je,Sz=e=>co(e.dom),FP=e=>bo(e.dom),IP=e=>n=>uo(Y.fromDom(e),n),xz=(e,n)=>V(Y.fromDom(e),o=>FP(o)||Ms(o),IP(n)).getOr(Y.fromDom(n)).dom,LP=(e,n)=>V(Y.fromDom(e),Sz,IP(n)),HP=(e,n,o)=>{const r=new Ks(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!wz(f);f=c())Es(f)&&(u=f);return u},Ez=(e,n)=>{const r=we.fromRangeStart(e).getNode(),c=xz(r,n),u=HP(r,c,!1),f=HP(r,c,!0),b=document.createRange();return LP(u,c).fold(()=>{HO(u)?b.setStart(u,0):b.setStartBefore(u)},y=>b.setStartBefore(y.dom)),LP(f,c).fold(()=>{HO(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},y=>b.setEndAfter(y.dom)),b},VP=e=>{const n=Ez(e.selection.getRng(),e.getBody());e.selection.setRng(k4(n))},Cj=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),VP(e))})};var Ov;(function(e){e.Before="before",e.After="after"})(Ov||(Ov={}));const zP=(e,n)=>Math.abs(e.left-n),Tz=(e,n)=>Math.abs(e.right-n),VO=(e,n)=>e>=n.top&&e<=n.bottom,_z=(e,n)=>e.top<n.bottom&&e.bottom>n.top,kz=(e,n)=>{const o=jb(e,n)/Math.min(e.height,n.height);return _z(e,n)&&o>.5},Az=(e,n)=>{const o=Ct(e,r=>VO(n,r));return Tw(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=Zo(e,f=>kz(f,r));return[c,u]})},UP=(e,n)=>({node:e.node,position:zP(e,n)<Tz(e,n)?Ov.Before:Ov.After}),gT=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),hT=(e,n,o)=>{const r=N=>Es(N.node)?L.some(N):dt(N.node)?hT(hr(N.node.childNodes),n,o):L.none(),c=(N,R)=>{if(N.length>=2){const I=r(N[0]).getOr(N[0]),G=r(N[1]).getOr(N[1]);if(Math.abs(R(I,n,o)-R(G,n,o))<2){if(je(I.node))return L.some(I);if(je(G.node))return L.some(G)}}return L.none()},u=(N,R)=>{const I=Mo(N,(G,X)=>R(G,n,o)-R(X,n,o));return c(I,R).orThunk(()=>mi(I,r))},[f,b]=Az(a5(e),o),{pass:y,fail:T}=Zo(b,N=>N.top<o);return u(f,gT).orThunk(()=>u(T,md)).orThunk(()=>u(y,md))},WP=(e,n,o,r)=>{const c=(u,f)=>{const b=T=>dt(T)&&T.classList.contains("mce-drag-container"),y=Ct(u.dom.childNodes,Tn(b));return f.fold(()=>hT(y,o,r),T=>{const N=Ct(y,R=>R!==T.dom);return hT(N,o,r)}).orThunk(()=>(uo(u,e)?L.none():jm(u)).bind(N=>c(N,L.some(u))))};return c(n,L.none())},Oz=(e,n,o)=>{const r=Y.fromDom(e),c=Vl(r),f=Y.fromPoint(c,n,o).filter(b=>hc(r,b)).getOr(r);return WP(r,f,n,o)},ZP=(e,n,o)=>Oz(e,n,o).filter(r=>mm(r.node)).map(r=>UP(r,n)),zO=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},Dz=e=>e.inline?zO(e.getBody()):{left:0,top:0},Rz=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},Mz=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},UO=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=zO(e.getContentAreaContainer()),r=Mz(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},Nz=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),Bz=(e,n)=>Nz(Dz(e),Rz(e),UO(e,n)),jP=e=>({target:e,srcElement:e}),$z=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...jP(o)}),Pz=(e,n,o)=>{const r=ko("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Ot,stopImmediatePropagation:Ot,stopPropagation:Ot,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...jP(n)}},Fz=(e,n)=>{const o=_V(e);return n==="dragstart"?(iP(o),dP(o)):n==="drop"?(yV(o),CO(o)):(bj(o),xV(o)),o},GP=(e,n,o,r)=>{const c=Fz(o,e);return xo(r)?Pz(e,n,c):$z(e,r,n,c)},VC=32,WO=100,Dv=8,pT=16,bT=co,Iz=ug(bT,bo),Lz=(e,n,o)=>bT(o)&&o!==n&&e.isEditable(o.parentElement),qP=(e,n,o)=>It(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),Hz=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},Vz=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},vT=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},KP=vT("left",-VC),XP=vT("left",VC),YP=vT("top",-VC),JP=vT("top",VC),QP=(e,n,o,r,c,u,f,b,y,T,N,R)=>{let I=0,G=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(I=n.pageX+o-c),n.pageY+r>u&&(G=n.pageY+r-u),e.style.width=o-I+"px",e.style.height=r-G+"px";const X=y.clientHeight,W=y.clientWidth,K=f+y.getBoundingClientRect().top,ae=b+y.getBoundingClientRect().left;N.on(le=>{le.intervalId.clear(),le.dragging&&R&&(f+Dv>=X?le.intervalId.set(JP(T)):f-Dv<=0?le.intervalId.set(YP(T)):b+Dv>=W?le.intervalId.set(XP(T)):b-Dv<=0?le.intervalId.set(KP(T)):K+pT>=window.innerHeight?le.intervalId.set(JP(window)):K-pT<=0?le.intervalId.set(YP(window)):ae+pT>=window.innerWidth?le.intervalId.set(XP(window)):ae-pT<=0&&le.intervalId.set(KP(window)))})},e6=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},ZO=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);e6(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&E(Y.fromDom(o))},zz=e=>e.button===0,Uz=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),Wz=(e,n)=>o=>{if(zz(o)){const r=Jo(n.dom.getParents(o.target),Iz).getOr(null);if(Oe(r)&&Lz(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:nT(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:Hz(n,r,r.offsetWidth,r.offsetHeight),intervalId:Sl(WO)})}}},Zz=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),ZP(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===Ov.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},zC=(e,n,o,r,c)=>{n==="dragstart"&&SO(r,e.dom.getOuterHTML(o));const u=GP(n,o,r,c);return e.dispatch(n,u)},jz=(e,n)=>{const o=Wb((c,u)=>Zz(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=zC(n,"dragstart",u.element,u.dataTransfer,c);if(Oe(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=Uz(u,Bz(n,c));Vz(u.ghost,n.getBody()),QP(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},yT=e=>{const n=e.getSel();if(Oe(n)){const r=n.getRangeAt(0).startContainer;return je(r)?r.parentNode:r}else return null},Gz=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(qP(n,yT(n.selection),r.element)){const u=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();zC(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{ZO(n.dom,r.element),wO(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}zC(n,"dragend",n.getBody(),r.dataTransfer,o)}}),n6(e)},t6=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>zC(n,"dragend",r.element,r.dataTransfer),c=>zC(n,"dragend",r.element,r.dataTransfer,c))}),n6(e)},qz=(e,n)=>o=>t6(e,n,L.some(o)),n6=e=>{e.on(n=>{n.intervalId.clear(),e6(n.ghost)}),e.clear()},Kz=e=>{const n=jl(),o=Po.DOM,r=document,c=Wz(n,e),u=jz(n,e),f=Gz(n,e),b=qz(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===gt.ESC&&t6(n,e,L.none())})},Xz=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Me(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&vC(e,"Dropped file type is not supported"))}},o=c=>{tx(e,c.target)&&n(c)},r=()=>{const c=Po.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];me(y,T=>{c.bind(f,T,o),u.bind(b,T,n)}),e.on("remove",()=>{me(y,T=>{c.unbind(f,T,o),u.unbind(b,T,n)})})};e.on("init",()=>{Li.setEditorTimeout(e,r,0)})},Yz=e=>{Kz(e),B_(e)&&Xz(e)},Jz=e=>{const n=Wb(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=j3(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},Qz=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Hs(o)){const r=kd(e.getBody(),o),c=co(r)?r:o;e.selection.getNode()!==c&&CC(e,c).each(u=>e.selection.setRng(u))}})})},Rv=co,o6=(e,n)=>kd(e.getBody(),n),s6=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=ac(e,r,o.isBlock,()=>H1(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=Ue=>Oe(Ue)&&o.hasClass(Ue,"mce-offscreen-selection"),T=Ue=>Ue!==r&&(Rv(Ue)||Hs(Ue))&&o.isChildOf(Ue,r)&&o.isEditable(Ue.parentNode),N=Ue=>{Ue&&n.setRng(Ue)},R=(Ue,ve,_e,et=!0)=>e.dispatch("ShowCaret",{target:ve,direction:Ue,before:_e}).isDefaultPrevented()?null:(et&&n.scrollIntoView(ve,Ue===-1),c.show(_e,ve)),I=Ue=>{Ue.hasAttribute("data-mce-caret")&&(om(Ue),n.scrollIntoView(Ue))},G=()=>{e.on("click",ve=>{o.isEditable(ve.target)||(ve.preventDefault(),e.focus())}),e.on("blur NewBlock",he),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",ve=>{const _e=ve.target,et=o6(e,_e);Rv(et)?(ve.preventDefault(),CC(e,et).each(ce)):T(_e)&&CC(e,_e).each(ce)},!0),e.on("mousedown",ve=>{const _e=ve.target;if(_e!==r&&_e.nodeName!=="HTML"&&!o.isChildOf(_e,r)||!Qx(e,ve.clientX,ve.clientY))return;he(),Et();const et=o6(e,_e);Rv(et)?(ve.preventDefault(),CC(e,et).each(ce)):ZP(r,ve.clientX,ve.clientY).each(ot=>{ve.preventDefault();const bt=R(1,ot.node,ot.position===Ov.Before,!1);N(bt),dt(et)?et.focus():e.getBody().focus()})}),e.on("keypress",ve=>{gt.modifierPressed(ve)||Rv(n.getNode())&&ve.preventDefault()}),e.on("GetSelectionRange",ve=>{let _e=ve.range;if(b){if(!b.parentNode){b=null;return}_e=_e.cloneRange(),_e.selectNode(b),ve.range=_e}}),e.on("SetSelectionRange",ve=>{ve.range=K(ve.range);const _e=ce(ve.range,ve.forward);_e&&(ve.range=_e)});const Ue=ve=>dt(ve)&&ve.id==="mcepastebin";e.on("AfterSetSelectionRange",ve=>{const _e=ve.range,et=_e.startContainer.parentElement;!W(_e)&&!Ue(et)&&Et(),y(et)||he()}),Yz(e),Jz(e),Qz(e)},X=Ue=>mo(Ue)||tc(Ue)||nm(Ue),W=Ue=>X(Ue.startContainer)||X(Ue.endContainer),K=Ue=>{const ve=e.schema.getVoidElements(),_e=o.createRng(),et=Ue.startContainer,ot=Ue.startOffset,bt=Ue.endContainer,sn=Ue.endOffset;return tn(ve,et.nodeName.toLowerCase())?ot===0?_e.setStartBefore(et):_e.setStartAfter(et):_e.setStart(et,ot),tn(ve,bt.nodeName.toLowerCase())?sn===0?_e.setEndBefore(bt):_e.setEndAfter(bt):_e.setEnd(bt,sn),_e},ae=(Ue,ve)=>{const _e=Y.fromDom(e.getBody()),et=e.getDoc(),ot=rn(_e,"#"+u).getOrThunk(()=>{const Rt=Y.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',et);return Ss(Rt,"id",u),Rs(_e,Rt),Rt}),bt=o.createRng();Ei(ot),Lo(ot,[Y.fromText(Ce,et),Y.fromDom(ve),Y.fromText(Ce,et)]),bt.setStart(ot.dom.firstChild,1),bt.setEnd(ot.dom.lastChild,0),ah(ot,{top:o.getPos(Ue,e.getBody()).y+"px"}),Z0(ot);const sn=n.getSel();return sn&&(sn.removeAllRanges(),sn.addRange(bt)),bt},le=Ue=>{const ve=Ue.cloneNode(!0),_e=e.dispatch("ObjectSelected",{target:Ue,targetClone:ve});if(_e.isDefaultPrevented())return null;const et=ae(Ue,_e.targetClone),ot=Y.fromDom(Ue);return me(Wr(Y.fromDom(e.getBody()),`*[${f}]`),bt=>{uo(ot,bt)||ao(bt,f)}),o.getAttrib(Ue,f)||Ue.setAttribute(f,"1"),b=Ue,Et(),et},ce=(Ue,ve)=>{if(!Ue)return null;if(Ue.collapsed){if(!W(Ue)){const bt=ve?1:-1,sn=Xh(bt,r,Ue),Rt=sn.getNode(!ve);if(Oe(Rt)){if(mm(Rt))return R(bt,Rt,ve?!sn.isAtEnd():!1,!1);if(jt(Rt)&&co(Rt.nextSibling)){const go=o.createRng();return go.setStart(Rt,0),go.setEnd(Rt,0),go}}const kn=sn.getNode(ve);if(Oe(kn)){if(mm(kn))return R(bt,kn,ve?!1:!sn.isAtEnd(),!1);if(jt(kn)&&co(kn.previousSibling)){const go=o.createRng();return go.setStart(kn,1),go.setEnd(kn,1),go}}}return null}let _e=Ue.startContainer,et=Ue.startOffset;const ot=Ue.endOffset;if(je(_e)&&et===0&&Rv(_e.parentNode)&&(_e=_e.parentNode,et=o.nodeIndex(_e),_e=_e.parentNode),!dt(_e))return null;if(ot===et+1&&_e===Ue.endContainer){const bt=_e.childNodes[et];if(T(bt))return le(bt)}return null},he=()=>{b&&b.removeAttribute(f),rn(Y.fromDom(e.getBody()),"#"+u).each(no),b=null},Fe=()=>{c.destroy(),b=null},Et=()=>{c.hide()};return zi(e)||G(),{showCaret:R,showBlockCaretContainer:I,hideFakeCaret:Et,destroy:Fe}},eU=(e,n)=>{let o=n;for(let r=e.previousSibling;je(r);r=r.previousSibling)o+=r.data.length;return o},r6=(e,n,o,r,c)=>{if(je(o)&&(r<0||r>o.data.length))return[];const u=c&&je(o)?[eU(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},CT=(e,n,o,r,c,u,f=!1)=>{const b=r6(e,n,o,r,f),y=r6(e,n,c,u,f);return{start:b,end:y}},Mv=(e,n)=>{const o=n.slice(),r=o.pop();return Os(r)?Eo(o,(u,f)=>u.bind(b=>L.from(b.childNodes[f])),L.some(e)).bind(u=>je(u)&&(r<0||r>u.data.length)?L.none():L.some({node:u,offset:r})):L.none()},a6=(e,n)=>Mv(e,n.start).bind(({node:o,offset:r})=>Mv(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),c6=(e,n,o,r=!1)=>CT(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Nv=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),Nv(e,r,o)}},wT=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(je(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),je(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Nv(e,c,o),c!==u&&Nv(e,u,o))},jO=(e,n)=>L.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),l6=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Yb(r).concat(e.blockPatterns),inlinePatterns:m_(r).concat(e.inlinePatterns)}},GO=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},tU=e=>/^\s[^\s]/.test(e),qO=(e,n,o)=>{n$(n,0,n).each(c=>{const u=c.container;o$(u,o.start.length,n).each(y=>{const T=e.createRng();T.setStart(u,0),T.setEnd(y.container,y.offset),wT(e,T,N=>N===n)});const f=Y.fromDom(u),b=fh(f);tU(b)&&Yv(f,b.slice(1))})},nU=(e,n)=>{const o=e.dom,r=n.pattern,c=a6(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const y=b.get(f);return Bn(y)&&In(y).exists(T=>tn(T,"block"))};return jO(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{qO(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{qO(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},oU=e=>Mo(e,(n,o)=>o.start.length-n.start.length),sU=(e,n)=>{const o=oU(e),r=n.replace(Ce," ");return Jo(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},rU=(e,n,o,r)=>{var c;const u=e.dom,f=Va(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return sU(o.blockPatterns,b).map(y=>Ve.trim(b).length===y.start.length?[]:[{pattern:y,range:CT(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},aU=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();me(n,r=>nU(e,r)),e.selection.moveToBookmark(o)},i6=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),ST=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},u6=(e,n,o)=>{const r=a6(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,T=f.parentNode;return{prefix:n,end:T.insertBefore(i6(e,n+"-end"),f),start:y.insertBefore(i6(e,n+"-start"),b)}},d6=(e,n,o)=>{Nv(e,e.get(n.prefix+"-end"),o),Nv(e,e.get(n.prefix+"-start"),o)},xT=e=>e.start.length===0,KO=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},XO=(e,n,o,r)=>{const c=n.start;return PA(e,r.container,r.offset,KO(c),o).bind(f=>{var b,y;const T=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(T!==-1&&f.offset>=T+c.length){const R=e.createRng();return R.setStart(f.container,f.offset-c.length),R.setEnd(f.container,f.offset),L.some(R)}else{const R=f.offset-c.length;return $A(f.container,R,o).map(I=>{const G=e.createRng();return G.setStart(I.container,I.offset),G.setEnd(f.container,f.offset),G}).filter(I=>I.toString()===c).orThunk(()=>XO(e,n,o,Fd(f.container,0)))}})},m6=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),L.some(f)}return ME(o,r,c).bind(f=>XO(e,n,c,f).bind(y=>{var T;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return L.none();if(f.offset===0&&((T=y.endContainer.textContent)===null||T===void 0?void 0:T.length)===y.endOffset)return L.none()}return L.some(y)}))},cU=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return $A(b,y-o.pattern.end.length,n).bind(T=>{const N=CT(c,u,T.container,T.offset,b,y,r);if(xT(f))return L.some({matches:[{pattern:f,startRng:N,endRng:N}],position:T});{const R=ET(e,o.remainingPatterns,T.container,T.offset,n,r),I=R.getOr({matches:[],position:T}),G=I.position;return m6(c,f,G.container,G.offset,n,R.isNone()).map(W=>{const K=c6(c,u,W,r);return{matches:I.matches.concat([{pattern:f,startRng:K,endRng:N}]),position:Fd(W.startContainer,W.startOffset)}})}})},ET=(e,n,o,r,c,u)=>{const f=e.dom;return ME(o,r,f.getRoot()).bind(b=>{const y=GO(f,c,o,r);for(let T=0;T<n.length;T++){const N=n[T];if(!Bl(y,N.end))continue;const R=n.slice();R.splice(T,1);const I=cU(e,c,{pattern:N,remainingPatterns:R,position:b},u);if(I.isNone()&&r>0)return ET(e,n,o,r-1,c,u);if(I.isSome())return I}return L.none()})},f6=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?me(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},g6=(e,n,o,r)=>{const c=ST(e.dom,o);wT(e.dom,c,r),f6(e,n,c)},h6=(e,n,o,r,c)=>{const u=e.dom,f=ST(u,r),b=ST(u,o);wT(u,b,c),wT(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},T=ST(u,y);f6(e,n,T)},lU=(e,n)=>{const o=n1("mce_textpattern"),r=fr(n,(c,u)=>{const f=u6(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return fr(r,(c,u)=>{const f=r.length-c.length-1,b=xT(u.pattern)?u.endMarker:u6(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},iU=e=>Mo(e,(n,o)=>o.end.length-n.end.length),YO=(e,n)=>{const o=gr(e,r=>Ie(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},UC=(e,n,o,r,c,u)=>{const f=ET(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=ET(e,iU(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return YO(f,b)},WC=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=lU(o,n);me(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;xT(u.pattern)?g6(e,u.pattern,u.endMarker,b):h6(e,u.pattern,u.startMarker,u.endMarker,b),d6(o,u.endMarker,b),d6(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},Zg=(e,n)=>{const o=e.selection.getRng();return jO(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=l6(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=UC(e,r,o.startContainer,u,f,!0),y=rU(e,r,f,!0);return y.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(uu),WC(e,b),aU(e,y);const T=e.selection.getRng(),N=ME(T.startContainer,T.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),N.each(R=>{const I=R.container;I.data.charAt(R.offset-1)===uu&&(I.deleteData(R.offset-1,1),Nv(e.dom,I.parentNode,G=>G===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},TT=(e,n)=>{const o=e.selection.getRng();jO(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=GO(e.dom,r,o.startContainer,c),f=l6(n,r,u),b=UC(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{WC(e,b)})})},hb=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},p6=(e,n)=>hb(e,n,(o,r)=>o===r.keyCode&&!gt.modifierPressed(r)),uU=(e,n)=>hb(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),dU=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>f_(dS(e),H_(e)),c=()=>W_(e);e.on("keydown",f=>{if(f.keyCode===13&&!gt.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&Zg(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&TT(e,f)}};e.on("keyup",f=>{p6(o,f)&&u()}),e.on("keypress",f=>{uU(n,f)&&Li.setEditorTimeout(e,u)})},b6=e=>{dU(e)},mU=e=>{const n=Ve.each,o=gt.BACKSPACE,r=gt.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Kn.browser,y=b.isFirefox(),T=b.isChromium()||b.isSafari(),N=Kn.deviceType.isiPhone()||Kn.deviceType.isiPad(),R=Kn.os.isMacOS()||Kn.os.isiOS(),I=(_t,vt)=>{try{e.getDoc().execCommand(_t,!1,String(vt))}catch{}},G=_t=>_t.isDefaultPrevented(),X=()=>{const _t=Ke=>{const Jt=c.create("body"),ln=Ke.cloneContents();return Jt.appendChild(ln),u.serializer.serialize(Jt,{format:"html"})},vt=Ke=>{const Jt=_t(Ke),ln=c.createRng();ln.selectNode(e.getBody());const Co=_t(ln);return Jt===Co};e.on("keydown",Ke=>{const Jt=Ke.keyCode;if(!G(Ke)&&(Jt===r||Jt===o)&&e.selection.isEditable()){const ln=e.selection.isCollapsed(),Co=e.getBody();if(ln&&!c.isEmpty(Co)||!ln&&!vt(e.selection.getRng()))return;Ke.preventDefault(),e.setContent(""),Co.firstChild&&c.isBlock(Co.firstChild)?e.selection.setCursorLocation(Co.firstChild,0):e.selection.setCursorLocation(Co,0),e.nodeChanged()}})},W=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},K=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",_t=>{let vt;if(_t.target===e.getDoc().documentElement)if(vt=u.getRng(),e.getBody().focus(),_t.type==="mousedown"){if(mo(vt.startContainer))return;u.placeCaretAt(_t.clientX,_t.clientY)}else u.setRng(vt)})},ae=()=>{e.on("keydown",_t=>{if(!G(_t)&&_t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const vt=u.getNode(),Ke=vt.previousSibling;if(vt.nodeName==="HR"){c.remove(vt),_t.preventDefault();return}Ke&&Ke.nodeName&&Ke.nodeName.toLowerCase()==="hr"&&(c.remove(Ke),_t.preventDefault())}}})},le=()=>{Range.prototype.getClientRects||e.on("mousedown",_t=>{if(!G(_t)&&_t.target.nodeName==="HTML"){const vt=e.getBody();vt.blur(),Li.setEditorTimeout(e,()=>{vt.focus()})}})},ce=()=>{const _t=aS(e);e.on("click",vt=>{const Ke=vt.target;/^(IMG|HR)$/.test(Ke.nodeName)&&c.isEditable(Ke.parentNode)&&(vt.preventDefault(),e.selection.select(Ke),e.nodeChanged()),Ke.nodeName==="A"&&c.hasClass(Ke,_t)&&Ke.childNodes.length===0&&c.isEditable(Ke.parentNode)&&(vt.preventDefault(),u.select(Ke))})},he=()=>{const _t=()=>{const Ke=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const Jt=u.getStart();Jt!==e.getBody()&&(c.setAttrib(Jt,"style",null),n(Ke,ln=>{Jt.setAttributeNode(ln.cloneNode(!0))}))}},vt=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",Ke=>{let Jt;return!G(Ke)&&(Ke.keyCode===8||Ke.keyCode===46)&&vt()?(Jt=_t(),e.getDoc().execCommand("delete",!1),Jt(),Ke.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",Ke=>{if(!G(Ke)&&vt()){const Jt=_t();Li.setEditorTimeout(e,()=>{Jt()})}})},Fe=()=>{e.on("keydown",_t=>{if(!G(_t)&&_t.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const vt=u.getNode().previousSibling;if(vt&&vt.nodeName&&vt.nodeName.toLowerCase()==="table")return _t.preventDefault(),!1}return!0})},Et=()=>{e.on("keydown",_t=>{if(G(_t)||_t.keyCode!==gt.BACKSPACE)return;let vt=u.getRng();const Ke=vt.startContainer,Jt=vt.startOffset,ln=c.getRoot();let Co=Ke;if(!(!vt.collapsed||Jt!==0)){for(;Co.parentNode&&Co.parentNode.firstChild===Co&&Co.parentNode!==ln;)Co=Co.parentNode;Co.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Co),vt=c.createRng(),vt.setStart(Ke,0),vt.setEnd(Ke,0),u.setRng(vt))}})},Ue=()=>{const _t=()=>{I("StyleWithCSS",!1),I("enableInlineTableEditing",!1),Qw(e)||I("enableObjectResizing",!1)};N_(e)||e.on("BeforeExecCommand mousedown",_t)},ve=()=>{const _t=()=>{n(c.select("a:not([data-mce-block])"),vt=>{var Ke;let Jt=vt.parentNode;const ln=c.getRoot();if((Jt==null?void 0:Jt.lastChild)===vt){for(;Jt&&!c.isBlock(Jt);){if(((Ke=Jt.parentNode)===null||Ke===void 0?void 0:Ke.lastChild)!==Jt||Jt===ln)return;Jt=Jt.parentNode}c.add(Jt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",vt=>{(vt.type==="setcontent"||vt.command==="mceInsertLink")&&_t()})},_e=()=>{e.on("init",()=>{I("DefaultParagraphSeparator",Va(e))})},et=_t=>{const vt=_t.getBody(),Ke=_t.selection.getRng();return Ke.startContainer===Ke.endContainer&&Ke.startContainer===vt&&Ke.startOffset===0&&Ke.endOffset===vt.childNodes.length},ot=()=>{e.on("keyup focusin mouseup",_t=>{!gt.modifierPressed(_t)&&!et(e)&&u.normalize()},!0)},bt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},sn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Rt=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",_t=>{let vt;_t.target.nodeName==="HTML"&&(vt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(vt),e.selection.normalize(),e.nodeChanged())}))},kn=()=>{R&&e.on("keydown",_t=>{gt.metaKeyPressed(_t)&&!_t.shiftKey&&(_t.keyCode===37||_t.keyCode===39)&&(_t.preventDefault(),e.selection.getSel().modify("move",_t.keyCode===37?"backward":"forward","lineboundary"))})},go=()=>{e.on("click",_t=>{let vt=_t.target;do if(vt.tagName==="A"){_t.preventDefault();return}while(vt=vt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Bs=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",_t=>{_t.preventDefault()})})},ha=()=>{f.addNodeFilter("br",_t=>{let vt=_t.length;for(;vt--;)_t[vt].attr("class")==="Apple-interchange-newline"&&_t[vt].remove()})},kr=Ot,Ye=()=>{if(!y||e.removed)return!1;const _t=e.selection.getSel();return!_t||!_t.rangeCount||_t.rangeCount===0},Tt=()=>{T&&(K(),ce(),Bs(),W(),N&&(sn(),Rt(),go())),y&&(le(),Ue(),bt(),kn())},Zn=()=>{e.on("drop",_t=>{var vt;const Ke=(vt=_t.dataTransfer)===null||vt===void 0?void 0:vt.getData("text/html");ee(Ke)&&/^<img[^>]*>$/.test(Ke)&&e.dispatch("dragend",new window.DragEvent("dragend",_t))})},Vn=()=>{Et(),X(),Kn.windowsPhone||ot(),T&&(K(),ce(),_e(),Bs(),Fe(),ha(),N?(sn(),Rt(),go()):W()),y&&(ae(),le(),he(),Ue(),ve(),bt(),kn(),Fe(),Zn())};return zi(e)?Tt():Vn(),{refreshContentEditable:kr,isHidden:Ye}},ZC=Po.DOM,_T=(e,n)=>{const o=Y.fromDom(e.getBody()),r=qm(vl(o)),c=Y.fromTag("style");Ss(c,"type","text/css"),Rs(c,Y.fromText(n)),Rs(r,c),e.on("remove",()=>{no(c)})},kp=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,jg=e=>Ko(e,n=>xo(n)===!1),JO=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return jg({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:kp(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},v6=e=>{const n=e.options.get;return jg({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},fU=e=>{const n=e.options.get;return{...JO(e),...v6(e),...jg({remove_trailing_brs:n("remove_trailing_brs"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},gU=e=>{const n=Cp(JO(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),U_(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new kl("br",1))}}),n},hU=e=>{const n=a0(e);n&&Li.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},pU=e=>{const n=e.dom.getRoot();!e.inline&&(!Sd(e)||e.selection.getStart(!0)===n)&&Oa(n).each(o=>{const r=o.getNode(),c=hs(r)?Oa(r).getOr(o):o;e.selection.setRng(c.toRange())})},bU=e=>{e.bindPendingEventDelegates(),e.initialized=!0,C2(e),e.focus(!0),pU(e),e.nodeChanged({initial:!0});const n=jh(e);oe(n)&&n.call(e,e),hU(e)},QO=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,vU=(e,n,o)=>{const r=[QO(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},y6=e=>{const n=QO(e),o=Jw(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";Ve.each(e.contentStyles,T=>{y+=T+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(vU(e,r,o)).then(u).catch(u),b=Qb(e);return b&&_T(e,b),f},yU=e=>{const n=e.getDoc(),o=e.getBody();y2(e),Ly(e)||(n.body.spellcheck=!1,ZC.setAttrib(o,"spellcheck","false")),e.quirks=mU(e),zS(e);const r=T_(e);r!==void 0&&(o.dir=r);const c=cS(e);c&&e.on("BeforeSetContent",u=>{Ve.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},wj=e=>{zi(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},eD=e=>{e.removed!==!0&&(wj(e),bU(e))},kT=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(ZC.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=N_(e),e._editableRoot=mg(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&ZC.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=yB(e),e.schema=df(v6(e)),e.dom=Po(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:x_(e),referrerPolicy:$y(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=gU(e),e.serializer=E7(fU(e),e),e.selection=qx(e.dom,e.getWin(),e.serializer,e),e.annotator=P0(e),e.formatter=I3(e),e.undoManager=TB(e),e._nodeChangeDispatcher=new _v(e),e._selectionOverrides=s6(e),xE(e),Cz(e),gH(e),zi(e)||(Cj(e),b6(e));const c=pV(e);QZ(e,c),mH(e),eL(e),fz(e);const u=GN(e);yU(e),u.fold(()=>{y6(e).then(()=>eD(e))},f=>{e.setProgressState(!0),y6(e).then(()=>{f().then(b=>{e.setProgressState(!1),eD(e),fo(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),eD(e),fo(e)})})})},CU=De,wU=(e,n,o)=>Qf(e,n,CU,o),AT=Po.DOM,SU=(e,n,o,r)=>{const c=Y.fromTag("iframe");return r.each(u=>Ss(c,"tabindex",u)),ta(c,o),ta(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),bl(c,"tox-edit-area__iframe"),c},C6=e=>{let n=Ww(e)+"<html><head>";Zw(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Vc(e),r=jw(e),c=e.translate($_(e));return Ry(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Ry(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},xU=(e,n)=>{const o=e.translate("Rich Text Area"),r=Yc(Y.fromDom(e.getElement()),"tabindex").bind(bi),c=SU(e.id,o,v_(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=C6(e),AT.add(n.iframeContainer,c)},tD=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,kT(e)};if(fS(e)||Kn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=wU(Y.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},EU=(e,n)=>{xU(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=AT.isHidden(n.editorContainer)),e.getElement().style.display="none",AT.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,tD(e)},w6=Po.DOM,TU=(e,n,o)=>{const r=lb.get(o),c=lb.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Ve.trim(o),r&&Ve.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,oe(u.init)&&(u.init(e,c),n.push(o))}catch(u){H7(e,o,u)}}},_U=e=>e.replace(/^\-/,""),S6=e=>{const n=[];me(o0(e),o=>{TU(e,n,_U(o))})},nD=e=>{const n=Ve.trim(Ny(e)),o=e.ui.registry.getAll().icons,r={...iv.get("default").icons,...iv.get(n).icons};Qe(r,(c,u)=>{tn(o,u)||e.ui.registry.addIcon(u,c)})},x6=e=>{const n=Fo(e);if(ee(n)){const o=Sp.get(n);e.theme=o(e,Sp.urls[n])||{},oe(e.theme.init)&&e.theme.init(e,Sp.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},oD=e=>{const n=za(e),o=uv.get(n);e.model=o(e,uv.urls[n])},kU=e=>{const n=e.theme.renderUI;return n?n():sD(e)},Sj=e=>{const n=e.getElement(),r=Fo(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},AU=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),OU=e=>{const n=w6.create("div");return w6.insertAfter(n,e),AU(n,n)},sD=e=>{const n=e.getElement();return e.inline?AU(null):OU(n)},DU=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ee(Fo(e))?kU(e):oe(Fo(e))?Sj(e):sD(e)},RU=(e,n)=>{const o={show:L.from(n.show).getOr(Ot),hide:L.from(n.hide).getOr(Ot),isEnabled:L.from(n.isEnabled).getOr(De),setEnabled:r=>{e.mode.isReadOnly()||L.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},MU=async e=>{e.dispatch("ScriptsLoaded"),nD(e),x6(e),oD(e),S6(e);const n=await DU(e);RU(e,L.from(n.api).getOr({})),e.editorContainer=n.editorContainer,W7(e),e.inline?kT(e):EU(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Bv=Po.DOM,NU=e=>e.charAt(0)==="-",E6=(e,n)=>{const o=Kw(n),r=Py(n);if(!Oo.hasCode(o)&&o!=="en"){const c=po(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{Hg(n,c,o)})}},T6=(e,n)=>{const o=Fo(e);if(ee(o)&&!NU(o)&&!tn(Sp.urls,o)){const r=eS(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Sp.load(o,c).catch(()=>{xp(e,c,o)})}},BU=(e,n)=>{const o=za(e);if(o!=="plugin"&&!tn(uv.urls,o)){const r=Iy(e),c=ee(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;uv.load(o,c).catch(()=>{Nd(e,c,o)})}},$U=e=>L.from(By(e)).filter(po).map(n=>({url:n,name:L.none()})),_6=(e,n,o)=>L.from(n).filter(r=>po(r)&&!iv.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:L.some(r)})),xj=(e,n,o)=>{const r=_6(n,"default",o),c=$U(n).orThunk(()=>_6(n,Ny(n),""));me(Gs([r,c]),u=>{e.add(u.url).catch(()=>{dB(n,u.url,u.name.getOrUndefined())})})},Ej=(e,n)=>{const o=(r,c)=>{lb.load(r,c).catch(()=>{uB(e,c,r)})};Qe(rS(e),(r,c)=>{o(c,r),e.options.set("plugins",o0(e).concat(c))}),me(o0(e),r=>{r=Ve.trim(r),r&&!lb.urls[r]&&!NU(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},Tj=e=>{const n=Fo(e);return!ee(n)||Oe(Sp.get(n))},PU=e=>{const n=za(e);return Oe(uv.get(n))},_j=(e,n)=>{const o=vu.ScriptLoader,r=()=>{!e.removed&&Tj(e)&&PU(e)&&MU(e)};T6(e,n),BU(e,n),E6(o,e),xj(o,e,n),Ej(e,n),o.loadQueue().then(r,r)},FU=(e,n)=>Yp.forElement(e,{contentCssCors:sS(n),referrerPolicy:$y(n)}),pb=e=>{const n=e.id;Oo.setCode(Kw(e));const o=()=>{Bv.unbind(window,"ready",o),e.render()};if(!mf.Event.domLoaded){Bv.bind(window,"ready",o);return}if(!e.getElement())return;const r=Y.fromDom(e.getElement()),c=qd(r);e.on("remove",()=>{ro(r.dom.attributes,f=>ao(r,f.name)),ta(r,c)}),e.ui.styleSheetLoader=FU(r,e),n0(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Bv.getParent(n,"form");u&&(e.formElement=u,O_(e)&&!ng(e.getElement())&&(Bv.insertAfter(Bv.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Bv.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),D_(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=M3(e),e.notificationManager=tE(e),l0(e)&&e.on("GetContent",f=>{f.save&&(f.content=Bv.encode(f.content))}),R_(e)&&e.on("submit",()=>{e.initialized&&e.save()}),M_(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),_j(e,e.suffix)},rD=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),vk(e,n))},OT=e=>e._editableRoot,k6=(e,n)=>({sections:Te(e),options:Te(n)}),aD=jc().deviceType,cD=aD.isPhone(),IU=aD.isTablet(),jC=e=>{if(It(e))return[];{const n=Bn(e)?e:e.split(/[ ,]/),o=He(n,hi);return Ct(o,po)}},LU=(e,n)=>{const o=Dl(n,(r,c)=>Me(e,c));return k6(o.t,o.f)},HU=(e,n,o={})=>{const r=e.sections(),c=No(r,n).getOr({});return Ve.extend({},o,c)},Ff=(e,n)=>tn(e.sections(),n),VU=(e,n)=>Ff(e,n)?e.sections()[n]:{},A6=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:No(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),zU=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Ve.extend({},e.external_plugins,r):r},DT=(e,n)=>[...jC(e),...jC(n)],UU=(e,n,o,r)=>e&&Ff(n,"mobile")?r:o,WU=(e,n,o,r)=>{const c=jC(o.forced_plugins),u=jC(r.plugins),f=VU(n,"mobile"),b=f.plugins?jC(f.plugins):u,y=UU(e,n,u,b),T=DT(c,y);return Ve.extend(r,{forced_plugins:c,plugins:T})},ZU=(e,n)=>e&&Ff(n,"mobile"),O6=(e,n,o,r,c)=>{var u;const f=e?{mobile:A6((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=LU(["mobile"],$E(f,c)),y=Ve.extend(o,r,b.options(),ZU(e,b)?HU(b,"mobile"):{},{external_plugins:zU(r,b.options())});return WU(e,b,r,y)},jU=(e,n)=>O6(cD||IU,cD,n,e,n),GU=(e,n)=>h7(e,n),qU=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{me("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},lD=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Ie(c,u=>Oe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},KU=e=>{qU(e),lD(e)},XU=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Kn.os.isMacOS()||Kn.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},Yr=(e,n,o)=>{const r=Y.fromDom(e.getRoot());return L2(r,we.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),z1(r,we.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},YU=e=>{if(typeof e!="string"){const n=Ve.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},JU=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?Yr(r,o.getRng(),n):n},$v=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=YU(n);g3(e,{...r,content:JU(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=f7(e,c.content,r);Vx(e,u,c),e.addVisual()})}},D6=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{$v(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{$v(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{$v(e,r)},mceInsertContent:(n,o,r)=>{$v(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(gg(e))}})},iD={"font-size":"size","font-family":"face"},QU=Fl("font"),eW=(e,n,o)=>{const r=u=>Ja(u,e).orThunk(()=>QU(u)?No(iD,e).bind(f=>Yc(u,f)):L.none()),c=u=>uo(Y.fromDom(n),u);return G2(Y.fromDom(o),u=>r(u),c)},tW=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),nW=(e,n)=>L.from(Po.DOM.getStyle(n,e,!0)),R6=e=>(n,o)=>L.from(o).map(Y.fromDom).filter($o).bind(r=>eW(e,n,r.dom).or(nW(e,r.dom))).getOr(""),oW=R6("font-size"),sW=O(tW,R6("font-family")),rW=e=>Oa(e.getBody()).bind(n=>{const o=n.container();return L.from(je(o)?o.parentNode:o)}),Pv=e=>L.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?L.none():L.from(e.selection.getStart(!0))}),km=(e,n)=>Pv(e).orThunk(Be(rW,e)).map(Y.fromDom).filter($o).bind(n),uD=(e,n)=>km(e,io(L.some,n)),M6=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Z_(e),c=j_(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},aW=e=>{const n=e.split(/\s*,\s*/);return He(n,o=>o.indexOf(" ")!==-1&&!(jo(o,'"')||jo(o,"'"))?`'${o}'`:o).join(",")},cW=(e,n)=>{const o=M6(e,n);e.formatter.toggle("fontname",{value:aW(o)}),e.nodeChanged()},lW=e=>uD(e,n=>sW(e.getBody(),n.dom)).getOr(""),iW=(e,n)=>{e.formatter.toggle("fontsize",{value:M6(e,n)}),e.nodeChanged()},uW=e=>uD(e,n=>oW(e.getBody(),n.dom)).getOr(""),dW=e=>uD(e,n=>{const o=Y.fromDom(e.getBody()),r=G2(n,u=>Ja(u,"line-height"),Be(uo,o)),c=()=>{const u=parseFloat(rr(n,"line-height")),f=parseFloat(rr(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),mW=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},kj=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{cW(e,c)},FontSize:(o,r,c)=>{iW(e,c)},LineHeight:(o,r,c)=>{mW(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(ee(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},fW=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>lW(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>uW(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>dW(e))},gW=e=>{kj(e),fW(e)},hW=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},pW=e=>{e.editorCommands.addCommands({Indent:()=>{cH(e)},Outdent:()=>{D5(e)}}),e.editorCommands.addCommands({Outdent:()=>pA(e)},"state")},bW=e=>{const n=(o,r,c)=>{const u=ee(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");On(u)&&ee(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},vW=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},Aj=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},yW=e=>{vW(e),Aj(e)},CW=e=>{e.editorCommands.addCommands({insertParagraph:()=>{FC(ZE,e)},mceInsertNewLine:(n,o,r)=>{G$(e,r)},InsertLineBreak:(n,o,r)=>{FC(jE,e)}})},wW=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>dt(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),bo);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},SW=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{yF(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},xW=e=>{KU(e),XU(e),hW(e),wW(e),D6(e),bW(e),pW(e),CW(e),yW(e),gW(e),SW(e)},EW=["toggleview"],N6=e=>Me(EW,e.toLowerCase());class B6{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():Nk(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const T=this.commands.exec[f];return oe(T)?(T(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!N6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return oe(r)?r(o):!1}queryCommandValue(n){if(!N6(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return oe(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Qe(n,(c,u)=>{me(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const bb="data-mce-contenteditable",TW=(e,n,o)=>{Kd(e,n)&&!o?Jc(e,n):o&&bl(e,n)},dD=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},RT=(e,n)=>{e.dom.contentEditable=n?"true":"false"},_W=e=>{me(Wr(e,'*[contenteditable="true"]'),n=>{Ss(n,bb,"true"),RT(n,!1)})},kW=e=>{me(Wr(e,`*[${bb}="true"]`),n=>{ao(n,bb),RT(n,!0)})},AW=e=>{L.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},OW=e=>{e.selection.setRng(e.selection.getRng())},$6=(e,n)=>{const o=Y.fromDom(e.getBody());TW(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),AW(e),e.readonly=!0,RT(o,!1),_W(o)):(e.readonly=!1,e.hasEditableRoot()&&RT(o,!0),kW(o),dD(e,"StyleWithCSS",!1),dD(e,"enableInlineTableEditing",!1),dD(e,"enableObjectResizing",!1),bF(e)&&e.focus(),OW(e),e.nodeChanged())},vb=e=>e.readonly,P6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{vb(e)&&me(n,o=>{o.attr(bb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(bb,n=>{vb(e)&&me(n,o=>{o.attr("contenteditable",o.attr(bb))})}),e.serializer.addTempAttr(bb)},DW=e=>{e.serializer?P6(e):e.on("PreInit",()=>{P6(e)})},RW=e=>e.type==="click",MW=["copy"],NW=e=>Me(MW,e.type),BW=(e,n)=>an(n,"a",r=>uo(r,Y.fromDom(e.getBody()))).bind(r=>Yc(r,"href")),$W=(e,n)=>{if(RW(n)&&!gt.metaKeyPressed(n)){const o=Y.fromDom(n.target);BW(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${zu(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else NW(n)&&e.dispatch(n.type,n)},F6=e=>{e.on("ShowCaret",n=>{vb(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{vb(e)&&n.preventDefault()})},PW=Ve.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class mD{static isNative(n){return!!PW[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ke}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=uy(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=ke),o){const u={func:o,removed:!1};c&&Ve.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let T=this.bindings[y];T||(T=[],this.toggleEvent(y,!0)),r?T=[u,...T]:T=[...T,u],this.bindings[y]=T}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return Qe(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=Zo(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,me(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else Qe(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const GC=e=>(e._eventDispatcher||(e._eventDispatcher=new mD({scope:e,toggleEvent:(n,o)=>{mD.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),fD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return uy(e.toLowerCase(),n??{},r);const c=GC(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return GC(this).on(e,n,o)},off(e,n){return GC(this).off(e,n)},once(e,n){return GC(this).once(e,n)},hasEventListeners(e){return GC(this).has(e)}},MT=Po.DOM;let yb;const NT=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Fy(e);return o?(e.eventRoot||(e.eventRoot=MT.select(o)[0]),e.eventRoot):e.getBody()},FW=e=>!e.hidden&&!vb(e),gD=(e,n,o)=>{FW(e)?e.dispatch(n,o):vb(e)&&$W(e,o)},IW=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=NT(e,n);if(Fy(e)){if(yb||(yb={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||yb&&(Qe(yb,(c,u)=>{e.dom.unbind(NT(e,u))}),yb=null)})),yb[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||MT.isChildOf(u,y))&&gD(f[b],n,c)}};yb[n]=r,MT.bind(o,n,r)}else{const r=c=>{gD(e,n,c)};MT.bind(o,n,r),e.delegates[n]=r}},hD={...fD,bindPendingEventDelegates(){const e=this;Ve.each(e._pendingNativeEvents,n=>{IW(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?IW(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(NT(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Qe(e.delegates,(r,c)=>{e.dom.unbind(NT(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},LW=e=>ee(e)?{value:e.split(/[ ,]/),valid:!0}:jn(e,ee)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},I6=e=>{const n=(()=>{switch(e){case"array":return Bn;case"boolean":return mn;case"function":return oe;case"number":return Os;case"object":return On;case"string":return ee;case"string[]":return LW;case"object[]":return o=>jn(o,On);case"regexp":return o=>Ut(o,RegExp);default:return De}})();return o=>pD(o,n,`The value must be a ${e}.`)},HW=e=>ee(e.processor),L6=(e,n)=>{const o=wa(n.message)?"":`. ${n.message}`;return e+o},H6=e=>e.valid,pD=(e,n,o="")=>{const r=n(e);return mn(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},VW=(e,n,o)=>{if(!xo(n)){const r=pD(n,o);if(H6(r))return r.value;console.error(L6(`Invalid default value passed for the "${e}" option`,r))}},zW=(e,n)=>{const o={},r={},c=(R,I,G)=>{const X=pD(I,G);return H6(X)?(r[R]=X.value,!0):(console.warn(L6(`Invalid value passed for the ${R} option`,X)),!1)},u=(R,I)=>{const G=HW(I)?I6(I.processor):I.processor,X=VW(R,I.default,G);o[R]={...I,default:X,processor:G},No(r,R).orThunk(()=>No(n,R)).each(K=>c(R,K,G))},f=R=>tn(o,R);return{register:u,isRegistered:f,get:R=>No(r,R).orThunk(()=>No(o,R).map(I=>I.default)).getOrUndefined(),set:(R,I)=>{if(f(R)){const G=o[R];return G.immutable?(console.error(`"${R}" is an immutable option and cannot be updated`),!1):c(R,I,G.processor)}else return console.warn(`"${R}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:R=>{const I=f(R);return I&&delete r[R],I},isSet:R=>tn(r,R)}},bD=["design","readonly"],BT=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&$6(e,u.editorReadOnly),n.set(r),LS(e,r)},UW=(e,n,o,r)=>{if(r!==o.get()){if(!tn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?BT(e,o,n,r):e.on("init",()=>BT(e,o,n,r))}},V6=(e,n,o)=>{if(Me(bD,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},WW=e=>{const n=$r("design"),o=$r({design:{activate:Ot,deactivate:Ot,editorReadOnly:!1},readonly:{activate:Ot,deactivate:Ot,editorReadOnly:!0}});return DW(e),F6(e),{isReadOnly:()=>vb(e),set:r=>UW(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(V6(o.get(),r,c))}}},vD=Ve.each,yD=Ve.explode,ZW={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},z6=Ve.makeMap("alt,ctrl,shift,meta,access"),jW=e=>e in z6,GW=e=>{const n={},o=Kn.os.isMacOS()||Kn.os.isiOS();vD(yD(e.toLowerCase(),"+"),u=>{jW(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=ZW[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in z6)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class U6{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(vD(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return vD(yD(Ve.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Ve.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Ve.map(yD(n,">"),GW);return u[u.length-1]=Ve.extend(u[u.length-1],{func:r,scope:c||this.editor}),Ve.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const qW=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(N,R)=>(I,G)=>{N[I.toLowerCase()]={...G,type:R}},T=(N,R)=>r[N.toLowerCase()]=R;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:T,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},KW=()=>{const e=qW();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Gg=Po.DOM,W6=Ve.extend,XW=Ve.each;class $T{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,W6(this,hD);const c=this;this.id=n,this.hidden=!1;const u=jU(r.defaultOptions,o);this.options=zW(c,u),da(c);const f=this.options.get;f("deprecation_warnings")&&$7(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const T=$y(c);T&&(vu.ScriptLoader._setReferrerPolicy(T),Po.DOM.styleSheetLoader._setReferrerPolicy(T));const N=sS(c);Oe(N)&&Po.DOM.styleSheetLoader._setContentCssCors(N),as.languageLoad=f("language_load"),as.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new wm(Zw(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=n0(c),this.hasVisual=Zh(c),this.shortcuts=new U6(this),this.editorCommands=new B6(this),xW(this);const R=f("cache_suffix");R&&(Kn.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:KW(),styleSheetLoader:void 0,show:Ot,hide:Ot,setEnabled:Ot,isEnabled:De},this.mode=WW(c),r.dispatch("SetupEditor",{editor:this});const I=P_(c);oe(I)&&I.call(c,c)}render(){pb(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return H1(this)}translate(n){return Oo.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Oe(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:De,default:o})),!c.isSet(n)&&!xo(o)?o:c.get(n)}hasPlugin(n,o){return Me(o0(this),n)?o?lb.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Gg.show(n.getContainer()),Gg.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Gg.hide(n.getContainer()),Gg.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=ng(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,ng(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=Gg.getParent(o.id,"form");b&&XW(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return A3(this,n,o)}getContent(n){return Df(this,n)}insertContent(n,o){o&&(n=W6({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?A3(this,this.startContent,{format:"raw"}):A3(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Gg.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Gg.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=r0(c);return oe(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||On(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){GU(this,n)}setEditableRoot(n){rD(this,n)}hasEditableRoot(){return OT(this)}remove(){zZ(this)}destroy(n){bC(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Fv=Po.DOM,PT=Ve.each;let CD=!1,Ap,ci=[];const FT=e=>{const n=e.type;PT(Op.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},YW=e=>{if(e!==CD){const n=Po.DOM;e?(n.bind(window,"resize",FT),n.bind(window,"scroll",FT)):(n.unbind(window,"resize",FT),n.unbind(window,"scroll",FT)),CD=e}},Z6=e=>{const n=ci;return ci=Ct(ci,o=>e!==o),Op.activeEditor===e&&(Op.activeEditor=ci.length>0?ci[0]:null),Op.focusedEditor===e&&(Op.focusedEditor=null),n.length!==ci.length},JW=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Z6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Oj=document.compatMode!=="CSS1Compat",Op={...fD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"5.1",releaseDate:"2023-06-19",i18n:Oo,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=wm.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new wm(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new wm(e.baseURL),e.suffix=o,nx(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Qe(r,(c,u)=>{as.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Ve.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(N,R)=>N.inline&&R.tagName.toLowerCase()in r,u=N=>{let R=N.id;return R||(R=No(N,"name").filter(I=>!Fv.get(I)).getOrThunk(Fv.uniqueId),N.setAttribute("id",R)),R},f=N=>{const R=e[N];if(R)return R.apply(n,[])},b=N=>Kn.browser.isIE()||Kn.browser.isEdge()?(oE("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Oj?(oE("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ee(N.selector)?Fv.select(N.selector):Oe(N.target)?[N.target]:[];let y=N=>{o=N};const T=()=>{let N=0;const R=[];let I;const G=(X,W,K)=>{const ae=new $T(X,W,n);R.push(ae),ae.on("init",()=>{++N===I.length&&y(R)}),ae.targetElm=ae.targetElm||K,ae.render()};Fv.unbind(window,"ready",T),f("onpageload"),I=Iu(b(e)),Ve.each(I,X=>{JW(n.get(X.id))}),I=Ve.grep(I,X=>!n.get(X.id)),I.length===0?y([]):PT(I,X=>{c(e,X)?oE("Could not initialize inline editor on invalid inline target element",X):G(u(X),e,X)})};return Fv.bind(window,"ready",T),new Promise(N=>{o?N(o):y=R=>{N(R)}})},get(e){return arguments.length===0?ci.slice(0):ee(e)?Jo(ci,n=>n.id===e).getOr(null):Os(e)&&ci[e]?ci[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&ci.push(e),YW(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Ap||(Ap=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",Ap))),e},createEditor(e,n){return this.add(new $T(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=ci.length-1;r>=0;r--)n.remove(ci[r]);return}if(ee(e)){PT(Fv.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,q(n.get(o.id))?null:(Z6(o)&&n.dispatch("RemoveEditor",{editor:o}),ci.length===0&&window.removeEventListener("beforeunload",Ap),o.remove(),YW(ci.length>0),o)},execCommand(e,n,o){var r;const c=this,u=On(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new $T(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{PT(ci,e=>{e.save()})},addI18n:(e,n)=>{Oo.add(e,n)},translate:e=>Oo.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new wm(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new wm(this.baseURL)}};Op.setup();const j6=(()=>{const e=jl(),n=u=>({items:u,types:bs(u),getType:f=>No(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),G6=Math.min,Iv=Math.max,IT=Math.round,q6=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,T=(o||"").split("");return T[0]==="b"&&(c+=y),T[1]==="r"&&(r+=b),T[0]==="c"&&(c+=IT(y/2)),T[1]==="c"&&(r+=IT(b/2)),T[3]==="b"&&(c-=f),T[4]==="r"&&(r-=u),T[3]==="c"&&(c-=IT(f/2)),T[4]==="c"&&(r-=IT(u/2)),Lv(r,c,u,f)},QW=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=q6(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},eZ=(e,n,o)=>Lv(e.x-n,e.y-o,e.w+n*2,e.h+o*2),tZ=(e,n)=>{const o=Iv(e.x,n.x),r=Iv(e.y,n.y),c=G6(e.x+e.w,n.x+n.w),u=G6(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:Lv(o,r,c-o,u-r)},K6=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,T=Iv(0,n.x-r),N=Iv(0,n.y-c),R=Iv(0,u-b),I=Iv(0,f-y);return r+=T,c+=N,o&&(u+=T,f+=N,r-=R,c-=I),u-=R,f-=I,Lv(r,c,u-r,f-c)},Lv=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),nZ={inflate:eZ,relativePosition:q6,findBestRelativePosition:QW,intersect:tZ,clamp:K6,create:Lv,fromClientRect:e=>Lv(e.left,e.top,e.width,e.height)},oZ=(e,n,o=1e3)=>{let r=!1,c=null;const u=T=>(...N)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),T.apply(null,N))},f=u(e),b=u(n);return{start:(...T)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,T),o))},resolve:f,reject:b}},sZ=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,y=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const T=new Promise((N,R)=>{const I=oZ(N,R);n[u]=I.resolve,vu.ScriptLoader.loadScript(f).then(()=>I.start(y),()=>I.reject(b))});return e[u]=T,T}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),rZ=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let If;try{const e="__storage_test__";If=window.localStorage,If.setItem(e,e),If.removeItem(e)}catch{If=rZ()}var aZ=If;const cZ={geom:{Rect:nZ},util:{Delay:Li,Tools:Ve,VK:gt,URI:wm,EventDispatcher:mD,Observable:fD,I18n:Oo,LocalStorage:aZ,ImageUploader:bB},dom:{EventUtils:mf,TreeWalker:Ks,TextSeeker:lm,DOMUtils:Po,ScriptLoader:vu,RangeUtils:vm,Serializer:E7,StyleSheetLoader:sy,ControlSelection:F0,BookmarkManager:M1,Selection:qx,Event:mf.Event},html:{Styles:Pb,Entities:lf,Node:kl,Schema:df,DomParser:Cp,Writer:mR,Serializer:ip},Env:Kn,AddOnManager:as,Annotator:P0,Formatter:I3,UndoManager:TB,EditorCommands:B6,WindowManager:M3,NotificationManager:tE,EditorObservable:hD,Shortcuts:U6,Editor:$T,FocusManager:q0,EditorManager:Op,DOM:Po.DOM,ScriptLoader:vu.ScriptLoader,PluginManager:lb,ThemeManager:Sp,ModelManager:uv,IconManager:iv,Resource:sZ,FakeClipboard:j6,trim:Ve.trim,isArray:Ve.isArray,is:Ve.is,toArray:Ve.toArray,makeMap:Ve.makeMap,each:Ve.each,map:Ve.map,grep:Ve.grep,inArray:Ve.inArray,extend:Ve.extend,walk:Ve.walk,resolve:Ve.resolve,explode:Ve.explode,_addCacheSuffix:Ve._addCacheSuffix},X6=Ve.extend(Op,cZ),lZ=e=>{try{qe.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(X6),lZ(X6)})()})(cG);var yq=cG.exports;const Cq=$G(yq);var wq=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Sq=function(qe){return wq.map(function(on){return on.toLowerCase()}).indexOf(qe.toLowerCase())!==-1},xq=function(qe,on,qt){Object.keys(on).filter(Sq).forEach(function(Rn){var Un=on[Rn];typeof Un=="function"&&(Rn==="onInit"?Un(qe,qt):qt.on(Rn.substring(2),function(Fn){return Un(Fn,qt)}))})},Eq=function(qe,on,qt,Rn){var Un=qe.modelEvents?qe.modelEvents:null,Fn=Array.isArray(Un)?Un.join(" "):Un;AD(Rn,function(Kt,$e){qt&&typeof Kt=="string"&&Kt!==$e&&Kt!==qt.getContent({format:qe.outputFormat})&&qt.setContent(Kt)}),qt.on(Fn||"change input undo redo",function(){on.emit("update:modelValue",qt.getContent({format:qe.outputFormat}))})},Tq=function(qe,on,qt,Rn,Un,Fn){Rn.setContent(Fn()),qt.attrs["onUpdate:modelValue"]&&Eq(on,qt,Rn,Un),xq(qe,qt.attrs,Rn)},Jj=0,lG=function(qe){var on=Date.now(),qt=Math.floor(Math.random()*1e9);return Jj++,qe+"_"+qt+Jj+String(on)},_q=function(qe){return qe!==null&&qe.tagName.toLowerCase()==="textarea"},Qj=function(qe){return typeof qe>"u"||qe===""?[]:Array.isArray(qe)?qe:qe.split(" ")},kq=function(qe,on){return Qj(qe).concat(Qj(on))},Aq=function(qe){return qe==null},eG=function(){return{listeners:[],scriptId:lG("tiny-script"),scriptLoaded:!1}},Oq=function(){var qe=eG(),on=function(Un,Fn,Kt,$e){var Ht=Fn.createElement("script");Ht.referrerPolicy="origin",Ht.type="application/javascript",Ht.id=Un,Ht.src=Kt;var Zs=function(){Ht.removeEventListener("load",Zs),$e()};Ht.addEventListener("load",Zs),Fn.head&&Fn.head.appendChild(Ht)},qt=function(Un,Fn,Kt){qe.scriptLoaded?Kt():(qe.listeners.push(Kt),Un.getElementById(qe.scriptId)||on(qe.scriptId,Un,Fn,function(){qe.listeners.forEach(function($e){return $e()}),qe.scriptLoaded=!0}))},Rn=function(){qe=eG()};return{load:qt,reinitialize:Rn}},Dq=Oq(),Rq=function(){return typeof window<"u"?window:global},QC=function(){var qe=Rq();return qe&&qe.tinymce?qe.tinymce:null},Mq={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(qe){return qe==="html"||qe==="text"}}},ew=globalThis&&globalThis.__assign||function(){return ew=Object.assign||function(qe){for(var on,qt=1,Rn=arguments.length;qt<Rn;qt++){on=arguments[qt];for(var Un in on)Object.prototype.hasOwnProperty.call(on,Un)&&(qe[Un]=on[Un])}return qe},ew.apply(this,arguments)},Nq=function(qe,on,qt,Rn){return qe(Rn||"div",{id:on,ref:qt})},Bq=function(qe,on,qt){return qe("textarea",{id:on,visibility:"hidden",ref:qt})},$q=cF({props:Mq,setup:function(qe,on){var qt=qe.init?ew({},qe.init):{},Rn=PG(qe),Un=Rn.disabled,Fn=Rn.modelValue,Kt=Rn.tagName,$e=Pu(null),Ht=null,Zs=qe.id||lG("tiny-vue"),To=qe.init&&qe.init.inline||qe.inline,As=!!on.attrs["onUpdate:modelValue"],_o=!0,Wo=qe.initialValue?qe.initialValue:"",qo="",Fs=function(Ut){return As?function(){return Fn!=null&&Fn.value?Fn.value:""}:function(){return Ut?Wo:qo}},at=function(){var Ut=Fs(_o),ee=ew(ew({},qt),{readonly:qe.disabled,target:$e.value,plugins:kq(qt.plugins,qe.plugins),toolbar:qe.toolbar||qt.toolbar,inline:To,setup:function(On){Ht=On,On.on("init",function(Za){return Tq(Za,qe,on,On,Fn,Ut)}),typeof qt.setup=="function"&&qt.setup(On)}});_q($e.value)&&($e.value.style.visibility=""),QC().init(ee),_o=!1};AD(Un,function(Ut){var ee;Ht!==null&&(typeof((ee=Ht.mode)===null||ee===void 0?void 0:ee.set)=="function"?Ht.mode.set(Ut?"readonly":"design"):Ht.setMode(Ut?"readonly":"design"))}),AD(Kt,function(Ut){var ee;As||(qo=Ht.getContent()),(ee=QC())===null||ee===void 0||ee.remove(Ht),Kj(function(){return at()})}),aG(function(){if(QC()!==null)at();else if($e.value&&$e.value.ownerDocument){var Ut=qe.cloudChannel?qe.cloudChannel:"6",ee=qe.apiKey?qe.apiKey:"no-api-key",On=Aq(qe.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(ee,"/tinymce/").concat(Ut,"/tinymce.min.js"):qe.tinymceScriptSrc;Dq.load($e.value.ownerDocument,On,at)}}),FG(function(){QC()!==null&&QC().remove(Ht)}),To||(IG(function(){_o||at()}),LG(function(){var Ut;As||(qo=Ht.getContent()),(Ut=QC())===null||Ut===void 0||Ut.remove(Ht)}));var tr=function(Ut){var ee;qo=Ht.getContent(),(ee=QC())===null||ee===void 0||ee.remove(Ht),qt=ew(ew({},qt),Ut),Kj(function(){return at()})};return on.expose({rerender:tr,getEditor:function(){return Ht}}),function(){return To?Nq(Xj,Zs,$e,qe.tagName):Bq(Xj,Zs,$e)}}});(function(){const qe=Object.getPrototypeOf,on=(t,s,a)=>{var l;return a(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},qt=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&on(t,String,(a,l)=>l.isPrototypeOf(a))?"string":s},Rn=t=>s=>qt(s)===t,Un=t=>s=>typeof s===t,Fn=t=>s=>t===s,Kt=(t,s)=>Ht(t)&&on(t,s,(a,l)=>qe(a)===l),$e=Rn("string"),Ht=Rn("object"),Zs=t=>Kt(t,Object),To=Rn("array"),As=Fn(null),_o=Un("boolean"),Wo=Fn(void 0),qo=t=>t==null,Fs=t=>!qo(t),at=Un("function"),tr=Un("number"),Ut=(t,s)=>{if(To(t)){for(let a=0,l=t.length;a<l;++a)if(!s(t[a]))return!1;return!0}return!1},ee=()=>{},On=t=>()=>t(),Za=(t,s)=>(...a)=>t(s.apply(null,a)),Bn=(t,s)=>a=>t(s(a)),q=t=>()=>t,mn=t=>t,xo=(t,s)=>t===s;function It(t,...s){return(...a)=>{const l=s.concat(a);return t.apply(null,l)}}const Oe=t=>s=>!t(s),oe=t=>()=>{throw new Error(t)},Os=t=>t(),jn=q(!1),Ot=q(!0);class O{constructor(s,a){this.tag=s,this.value=a}static some(s){return new O(!0,s)}static none(){return O.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?O.some(s(this.value)):O.none()}bind(s){return this.tag?s(this.value):O.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:O.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Fs(s)?O.some(s):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const io=Array.prototype.slice,Te=Array.prototype.indexOf,ht=Array.prototype.push,$t=(t,s)=>Te.call(t,s),Be=(t,s)=>{const a=$t(t,s);return a===-1?O.none():O.some(a)},Tn=(t,s)=>$t(t,s)>-1,ko=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return!0}return!1},Gn=(t,s)=>{const a=[];for(let l=0;l<t;l++)a.push(s(l));return a},Dn=(t,s)=>{const a=[];for(let l=0;l<t.length;l+=s){const d=io.call(t,l,l+s);a.push(d)}return a},ke=(t,s)=>{const a=t.length,l=new Array(a);for(let d=0;d<a;d++){const g=t[d];l[d]=s(g,d)}return l},De=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];s(d,a)}},L=(t,s)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];s(l,a)}},dc=(t,s)=>{const a=[],l=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:l).push(p)}return{pass:a,fail:l}},qn=(t,s)=>{const a=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&a.push(g)}return a},Ro=(t,s,a)=>(L(t,(l,d)=>{a=s(a,l,d)}),a),fn=(t,s,a)=>(De(t,(l,d)=>{a=s(a,l,d)}),a),Fu=(t,s,a)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return O.some(g);if(a(g,l))break}return O.none()},Me=(t,s)=>Fu(t,s,jn),Ie=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return O.some(a)}return O.none()},He=t=>{const s=[];for(let a=0,l=t.length;a<l;++a){if(!To(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);ht.apply(s,t[a])}return s},me=(t,s)=>He(ke(t,s)),ro=(t,s)=>{for(let a=0,l=t.length;a<l;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Zo=t=>{const s=io.call(t,0);return s.reverse(),s},Ct=(t,s)=>qn(t,a=>!Tn(s,a)),fr=(t,s)=>{const a={};for(let l=0,d=t.length;l<d;l++){const g=t[l];a[String(g)]=s(g,l)}return a},Eo=t=>[t],mc=(t,s)=>{const a=io.call(t,0);return a.sort(s),a},Jo=(t,s)=>s>=0&&s<t.length?O.some(t[s]):O.none(),Hr=t=>Jo(t,0),Zc=t=>Jo(t,t.length-1),Ma=at(Array.from)?Array.from:t=>io.call(t),gr=(t,s)=>{for(let a=0;a<t.length;a++){const l=s(t[a],a);if(l.isSome())return l}return O.none()},Qo=Object.keys,Dm=Object.hasOwnProperty,Is=(t,s)=>{const a=Qo(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];s(p,g)}},Mo=(t,s)=>Rm(t,(a,l)=>({k:l,v:s(a,l)})),Rm=(t,s)=>{const a={};return Is(t,(l,d)=>{const g=s(l,d);a[g.k]=g.v}),a},In=t=>(s,a)=>{t[a]=s},Na=(t,s,a,l)=>{Is(t,(d,g)=>{(s(d,g)?a:l)(d,g)})},hr=(t,s)=>{const a={},l={};return Na(t,s,In(a),In(l)),{t:a,f:l}},mi=(t,s)=>{const a={};return Na(t,s,In(a),ee),a},Iu=(t,s)=>{const a=[];return Is(t,(l,d)=>{a.push(s(l,d))}),a},bs=(t,s)=>{const a=Qo(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];if(s(p,g,t))return O.some(p)}return O.none()},Mm=t=>Iu(t,mn),Qe=(t,s)=>Qn(t,s)?O.from(t[s]):O.none(),Qn=(t,s)=>Dm.call(t,s),ba=(t,s)=>Qn(t,s)&&t[s]!==void 0&&t[s]!==null,va=(t,s,a=xo)=>t.exists(l=>a(l,s)),Ol=(t,s,a=xo)=>Ji(t,s,a).getOr(t.isNone()&&s.isNone()),Dl=t=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return s},Ko=t=>{const s=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())s.push(l.getOrDie());else return O.none()}return O.some(s)},Ji=(t,s,a)=>t.isSome()&&s.isSome()?O.some(a(t.getOrDie(),s.getOrDie())):O.none(),Tc=(t,s,a,l)=>t.isSome()&&s.isSome()&&a.isSome()?O.some(l(t.getOrDie(),s.getOrDie(),a.getOrDie())):O.none(),No=(t,s)=>t!=null?O.some(s(t)):O.none(),tn=(t,s)=>t?O.some(s):O.none(),Vr=(t,s)=>t+s,Qi=(t,s)=>t.substring(s),Lu=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Hu=(t,s)=>ms(t,s)?Qi(t,s.length):t,is=(t,s)=>Rr(t,s)?t:Vr(t,s),Dr=(t,s,a=0,l)=>{const d=t.indexOf(s,a);return d!==-1?Wo(l)?!0:d+s.length<=l:!1},ms=(t,s)=>Lu(t,s,0),Rr=(t,s)=>Lu(t,s,t.length-s.length),Mr=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),fc=t=>t.length>0,vs=t=>!fc(t),ya=t=>t.style!==void 0&&at(t.style.getPropertyValue),fi=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Rl(l.childNodes[0])},Vf=(t,s)=>{const l=(s||document).createElement(t);return Rl(l)},tu=(t,s)=>{const l=(s||document).createTextNode(t);return Rl(l)},Rl=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ue={fromHtml:fi,fromTag:Vf,fromText:tu,fromDom:Rl,fromPoint:(t,s,a)=>O.from(t.dom.elementFromPoint(s,a)).map(Rl)},Ca=typeof window<"u"?window:Function("return this;")(),Ml=(t,s)=>{let a=s??Ca;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},gi=(t,s)=>{const a=t.split(".");return Ml(a,s)},Nm=(t,s)=>gi(t,s),Bo=(t,s)=>{const a=Nm(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},zf=Object.getPrototypeOf,Np=t=>Bo("HTMLElement",t),Nl=t=>{const s=gi("ownerDocument.defaultView",t);return Ht(t)&&(Np(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(zf(t).constructor.name))},zu=9,es=11,jo=1,Bl=3,_c=t=>t.dom.nodeName.toLowerCase(),hi=t=>t.dom.nodeType,Uu=t=>s=>hi(s)===t,pi=t=>po(t)&&Nl(t.dom),po=Uu(jo),wa=Uu(Bl),Bm=Uu(zu),bi=Uu(es),kc=t=>s=>po(s)&&_c(s)===t,Ls=(t,s)=>{const a=t.dom;if(a.nodeType!==jo)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},fs=t=>t.nodeType!==jo&&t.nodeType!==zu&&t.nodeType!==es||t.childElementCount===0,Bp=(t,s)=>{const a=s===void 0?document:s.dom;return fs(a)?[]:ke(a.querySelectorAll(t),ue.fromDom)},Uf=(t,s)=>{const a=s===void 0?document:s.dom;return fs(a)?O.none():O.from(a.querySelector(t)).map(ue.fromDom)},Ao=(t,s)=>t.dom===s.dom,Sa=(t,s)=>{const a=t.dom,l=s.dom;return a===l?!1:a.contains(l)},ja=t=>ue.fromDom(t.dom.ownerDocument),nr=t=>Bm(t)?t:ja(t),$m=t=>ue.fromDom(nr(t).dom.documentElement),fl=t=>ue.fromDom(nr(t).dom.defaultView),Ac=t=>O.from(t.dom.parentNode).map(ue.fromDom),Ba=t=>O.from(t.dom.parentElement).map(ue.fromDom),Jg=(t,s)=>{const a=at(s)?s:jn;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,p=ue.fromDom(g);if(d.push(p),a(p)===!0)break;l=g}return d},Wf=t=>O.from(t.dom.offsetParent).map(ue.fromDom),Pm=t=>O.from(t.dom.nextSibling).map(ue.fromDom),Oc=t=>ke(t.dom.childNodes,ue.fromDom),gl=(t,s)=>{const a=t.dom.childNodes;return O.from(a[s]).map(ue.fromDom)},Zf=t=>gl(t,0),hl=(t,s)=>({element:t,offset:s}),Zd=(t,s)=>{const a=Oc(t);return a.length>0&&s<a.length?hl(a[s],0):hl(t,s)},Fm=t=>bi(t)&&Fs(t.dom.host),Wu=at(Element.prototype.attachShadow)&&at(Node.prototype.getRootNode),Im=q(Wu),Jr=Wu?t=>ue.fromDom(t.dom.getRootNode()):nr,js=t=>Fm(t)?t:ue.fromDom(nr(t).dom.body),nu=t=>jd(t).isSome(),jd=t=>{const s=Jr(t);return Fm(s)?O.some(s):O.none()},jf=t=>ue.fromDom(t.dom.host),jc=t=>{if(Im()&&Fs(t.target)){const s=ue.fromDom(t.target);if(po(s)&&Qg(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Hr(a)}}return O.from(t.target)},Qg=t=>Fs(t.dom.shadowRoot),$a=t=>{const s=wa(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return jd(ue.fromDom(s)).fold(()=>a.body.contains(s),Bn($a,jf))},Nr=()=>Gc(ue.fromDom(document)),Gc=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ue.fromDom(s)},vi=(t,s,a)=>{if($e(a)||_o(a)||tr(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},gn=(t,s,a)=>{vi(t.dom,s,a)},Kn=(t,s)=>{const a=t.dom;Is(s,(l,d)=>{vi(a,d,l)})},zr=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Ds=(t,s)=>O.from(zr(t,s)),eh=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ws=(t,s)=>{t.dom.removeAttribute(s)},$p=t=>fn(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),ou=(t,s,a)=>{if(!$e(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);ya(t)&&t.style.setProperty(s,a)},Qr=(t,s)=>{ya(t)&&t.style.removeProperty(s)},Xt=(t,s,a)=>{const l=t.dom;ou(l,s,a)},pl=(t,s)=>{const a=t.dom;Is(s,(l,d)=>{ou(a,d,l)})},Dc=(t,s)=>{const a=t.dom;Is(s,(l,d)=>{l.fold(()=>{Qr(a,d)},g=>{ou(a,d,g)})})},Ve=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!$a(t)?qc(a,s):d},qc=(t,s)=>ya(t)?t.style.getPropertyValue(s):"",Gs=(t,s)=>{const a=t.dom,l=qc(a,s);return O.from(l).filter(d=>d.length>0)},ea=t=>{const s={},a=t.dom;if(ya(a))for(let l=0;l<a.style.length;l++){const d=a.style.item(l);s[d]=a.style[d]}return s},Lm=(t,s,a)=>{const l=ue.fromTag(t);return Xt(l,s,a),Gs(l,s).isSome()},Ln=(t,s)=>{const a=t.dom;Qr(a,s),va(Ds(t,"style").map(Mr),"")&&ws(t,"style")},yi=t=>t.dom.offsetWidth,su=(t,s)=>{const a=(C,S)=>{if(!tr(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);const k=C.dom;ya(k)&&(k.style[t]=S+"px")},l=C=>{const S=s(C);if(S<=0||S===null){const k=Ve(C,t);return parseFloat(k)||0}return S},d=l,g=(C,S)=>fn(S,(k,D)=>{const B=Ve(C,D),P=B===void 0?0:parseInt(B,10);return isNaN(P)?k:k+P},0);return{set:a,get:l,getOuter:d,aggregate:g,max:(C,S,k)=>{const D=g(C,k);return S>D?S-D:0}}},qs=su("height",t=>{const s=t.dom;return $a(t)?s.getBoundingClientRect().height:s.offsetHeight}),ys=t=>qs.get(t),ru=t=>qs.getOuter(t),Tb=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=qs.max(t,s,a);Xt(t,"max-height",l+"px")},Gf=(t,s)=>({left:t,top:s,translate:(l,d)=>Gf(t+l,s+d)}),ts=Gf,Ga=t=>{const s=t.getBoundingClientRect();return ts(s.left,s.top)},qa=(t,s)=>t!==void 0?t:s!==void 0?s:0,xa=t=>{const s=t.dom.ownerDocument,a=s.body,l=s.defaultView,d=s.documentElement;if(a===t.dom)return ts(a.offsetLeft,a.offsetTop);const g=qa(l==null?void 0:l.pageYOffset,d.scrollTop),p=qa(l==null?void 0:l.pageXOffset,d.scrollLeft),C=qa(d.clientTop,a.clientTop),S=qa(d.clientLeft,a.clientLeft);return $l(t).translate(p-S,g-C)},$l=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?ts(l.offsetLeft,l.offsetTop):$a(t)?Ga(s):ts(0,0)},Pl=su("width",t=>t.dom.offsetWidth),Io=(t,s)=>Pl.set(t,s),or=t=>Pl.get(t),Ur=t=>Pl.getOuter(t),Gd=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=Pl.max(t,s,a);Xt(t,"max-width",l+"px")},Rc=t=>{let s=!1,a;return(...l)=>(s||(s=!0,a=t.apply(null,l)),a)},$o=(t,s,a,l)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),C=p||l("(pointer:coarse)"),S=d||!g&&p&&l("(min-device-width:768px)"),k=g||p&&!S,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,B=!k&&!S&&!D;return{isiPad:q(d),isiPhone:q(g),isTablet:q(S),isPhone:q(k),isTouch:q(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:q(D),isDesktop:q(B)}},sr=(t,s)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(s))return l}},Kc=(t,s)=>{const a=sr(t,s);if(!a)return{major:0,minor:0};const l=d=>Number(s.replace(a,"$"+d));return Xc(l(1),l(2))},Zu=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Fl():Kc(t,a)},Fl=()=>Xc(0,0),Xc=(t,s)=>({major:t,minor:s}),Ss={nu:Xc,detect:Zu,unknown:Fl},ta=(t,s)=>gr(s.brands,a=>{const l=a.brand.toLowerCase();return Me(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Ss.nu(parseInt(a.version,10),0)}))}),pr=(t,s)=>{const a=String(s).toLowerCase();return Me(t,l=>l.search(a))},Yc=(t,s)=>pr(t,s).map(a=>{const l=Ss.detect(a.versionRegexes,s);return{current:a.name,version:l}}),Ci=(t,s)=>pr(t,s).map(a=>{const l=Ss.detect(a.versionRegexes,s);return{current:a.name,version:l}}),ao=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,gc=t=>s=>Dr(s,t),qd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Dr(t,"edge/")&&Dr(t,"chrome")&&Dr(t,"safari")&&Dr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ao],search:t=>Dr(t,"chrome")&&!Dr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Dr(t,"msie")||Dr(t,"trident")},{name:"Opera",versionRegexes:[ao,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:gc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:gc("firefox")},{name:"Safari",versionRegexes:[ao,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Dr(t,"safari")||Dr(t,"mobile/"))&&Dr(t,"applewebkit")}],Il=[{name:"Windows",search:gc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Dr(t,"iphone")||Dr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:gc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:gc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:gc("linux"),versionRegexes:[]},{name:"Solaris",search:gc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:gc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:gc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ju={browsers:q(qd),oses:q(Il)},Hm="Edge",Ll="Chromium",Ka="IE",au="Opera",Ea="Firefox",Hl="Safari",bl=()=>Vm({current:void 0,version:Ss.unknown()}),Vm=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isEdge:l(Hm),isChromium:l(Ll),isIE:l(Ka),isOpera:l(au),isFirefox:l(Ea),isSafari:l(Hl)}},Jc={unknown:bl,nu:Vm,edge:q(Hm),chromium:q(Ll),ie:q(Ka),opera:q(au),firefox:q(Ea),safari:q(Hl)},zm="Windows",Kd="iOS",wi="Android",Um="Linux",Wm="macOS",cu="Solaris",th="FreeBSD",Y="ChromeOS",Zm=()=>Ta({current:void 0,version:Ss.unknown()}),Ta=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isWindows:l(zm),isiOS:l(Kd),isAndroid:l(wi),isMacOS:l(Wm),isLinux:l(Um),isSolaris:l(cu),isFreeBSD:l(th),isChromeOS:l(Y)}},qf={unknown:Zm,nu:Ta,windows:q(zm),ios:q(Kd),android:q(wi),linux:q(Um),macos:q(Wm),solaris:q(cu),freebsd:q(th),chromeos:q(Y)},Fp={detect:(t,s,a)=>{const l=ju.browsers(),d=ju.oses(),g=s.bind(S=>ta(l,S)).orThunk(()=>Yc(l,t)).fold(Jc.unknown,Jc.nu),p=Ci(d,t).fold(qf.unknown,qf.nu),C=$o(p,g,t,a);return{browser:g,os:p,deviceType:C}}},uo=t=>window.matchMedia(t).matches;let hc=Rc(()=>Fp.detect(navigator.userAgent,O.from(navigator.userAgentData),uo));const Br=()=>hc(),Vl=(t,s,a,l,d,g,p)=>({target:t,x:s,y:a,stop:l,prevent:d,kill:g,raw:p}),Si=t=>{const s=ue.fromDom(jc(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=Za(l,a);return Vl(s,t.clientX,t.clientY,a,l,d,t)},Gu=(t,s)=>a=>{t(a)&&s(Si(a))},Pa=(t,s,a,l,d)=>{const g=Gu(a,l);return t.dom.addEventListener(s,g,d),{unbind:It(Gm,t,s,g,d)}},jm=(t,s,a,l)=>Pa(t,s,a,l,!1),Xd=(t,s,a,l)=>Pa(t,s,a,l,!0),Gm=(t,s,a,l)=>{t.dom.removeEventListener(s,a,l)},Qc=(t,s)=>{Ac(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},lu=(t,s)=>{Pm(t).fold(()=>{Ac(t).each(d=>{Xa(d,s)})},l=>{Qc(l,s)})},nh=(t,s)=>{Zf(t).fold(()=>{Xa(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},Xa=(t,s)=>{t.dom.appendChild(s.dom)},br=(t,s,a)=>{gl(t,a).fold(()=>{Xa(t,s)},l=>{Qc(l,s)})},xi=(t,s)=>{De(s,a=>{Xa(t,a)})},qu=t=>{t.dom.textContent="",De(Oc(t),s=>{Ya(s)})},Ya=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},_a=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return ts(a,l)},Kf=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},oh=t=>{const s=t===void 0?window:t;return Br().browser.isFirefox()?O.none():O.from(s.visualViewport)},Ku=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),Yd=t=>{const s=t===void 0?window:t,a=s.document,l=_a(ue.fromDom(a));return oh(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return Ku(l.left,l.top,g,p)},d=>Ku(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},Xf=()=>ue.fromDom(document),vl=(t,s)=>t.view(s).fold(q([]),l=>{const d=t.owner(l),g=vl(t,d);return[l].concat(g)}),qm=(t,s)=>{const a=s.owner(t),l=vl(s,a);return O.some(l)};var Yf=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?O.none():O.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ue.fromDom)},owner:t=>ja(t)});const Xu=t=>{const s=Xf(),a=_a(s);return qm(t,Yf).fold(It(xa,t),d=>{const g=$l(t),p=Ro(d,(C,S)=>{const k=$l(S);return{left:C.left+k.left,top:C.top+k.top}},{left:0,top:0});return ts(p.left+g.left+a.left,p.top+g.top+a.top)})},sh=(t,s,a)=>({point:t,width:s,height:a}),zl=(t,s,a,l)=>({x:t,y:s,width:a,height:l}),_=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),M=t=>{const s=xa(t),a=Ur(t),l=ru(t);return _(s.left,s.top,a,l)},V=t=>{const s=Xu(t),a=Ur(t),l=ru(t);return _(s.left,s.top,a,l)},te=(t,s)=>{const a=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-a,C=g-l;return _(a,l,p,C)},se=(t,s)=>fn(s,(a,l)=>te(a,l),t),Ze=()=>Yd(window);var Wt=tinymce.util.Tools.resolve("tinymce.ThemeManager");const rn=t=>{const s=g=>g(t),a=q(t),l=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:Ot,isError:jn,map:g=>St.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(t)},toOptional:()=>O.some(t)};return d},an=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:jn,isError:Ot,map:s,mapError:l=>St.error(l(t)),bind:s,exists:jn,forall:Ot,getOr:mn,or:mn,getOrThunk:Os,orThunk:Os,getOrDie:oe(String(t)),each:ee,toOptional:O.none};return a},St={value:rn,error:an,fromOption:(t,s)=>t.fold(()=>an(s),rn)};var us;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(us||(us={}));const vr=(t,s,a)=>t.stype===us.Error?s(t.serror):a(t.svalue),Lp=t=>{const s=[],a=[];return De(t,l=>{vr(l,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Jf=(t,s)=>t.stype===us.Error?{stype:us.Error,serror:s(t.serror)}:t,rh=(t,s)=>t.stype===us.Value?{stype:us.Value,svalue:s(t.svalue)}:t,ah=(t,s)=>t.stype===us.Value?s(t.svalue):t,rr=(t,s)=>t.stype===us.Error?s(t.serror):t,ka=t=>({stype:us.Value,svalue:t}),Ja=t=>({stype:us.Error,serror:t}),gs={fromResult:t=>t.fold(Ja,ka),toResult:t=>vr(t,St.error,St.value),svalue:ka,partition:Lp,serror:Ja,bind:ah,bindError:rr,map:rh,mapError:Jf,fold:vr},Qa=(t,s,a,l)=>({tag:"field",key:t,newKey:s,presence:a,prop:l}),Mc=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Km=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Rs=(t,s)=>s,_b=(t,s)=>Zs(t)&&Zs(s)?Lo(t,s):s,Hp=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)Qn(d,g)&&(a[g]=t(a[g],d[g]))}return a},Lo=Hp(_b),Ei=Hp(Rs),no=()=>({tag:"required",process:{}}),Fa=t=>({tag:"defaultedThunk",process:t}),Yu=t=>Fa(q(t)),Ju=()=>({tag:"option",process:{}}),Jd=t=>({tag:"mergeWithThunk",process:t}),xn=t=>Jd(q(t)),lh=(t,s)=>t.length>0?gs.svalue(Lo(s,Ei.apply(void 0,t))):gs.svalue(s),ih=t=>Za(gs.serror,He)(t),uh={consolidateObj:(t,s)=>{const a=gs.partition(t);return a.errors.length>0?ih(a.errors):lh(a.values,s)},consolidateArr:t=>{const s=gs.partition(t);return s.errors.length>0?ih(s.errors):gs.svalue(s.values)}},Qf=t=>Ht(t)&&Qo(t).length>100?" removed due to size":JSON.stringify(t,null,2),jv=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):t;return ke(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Ti=(t,s)=>gs.serror([{path:t,getErrorInfo:s}]),Qd=(t,s,a)=>Ti(t,()=>'Could not find valid *required* value for "'+s+'" in '+Qf(a)),Gv=(t,s)=>Ti(t,()=>'Choice schema did not contain choice key: "'+s+'"'),eg=(t,s,a)=>Ti(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Qf(s)),iu=(t,s)=>Ti(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Vp=(t,s)=>Ti(t,q(s)),Ul=t=>{const s=(l,d)=>gs.bindError(t(d),g=>Vp(l,g)),a=q("val");return{extract:s,toString:a}},Qu=Ul(gs.svalue),qv=(t,s,a,l)=>Qe(s,a).fold(()=>Qd(t,a,s),l),dh=(t,s,a,l)=>{const d=Qe(t,s).getOrThunk(()=>a(t));return l(d)},zp=(t,s,a)=>a(Qe(t,s)),Up=(t,s,a,l)=>{const d=Qe(t,s).map(g=>g===!0?a(t):g);return l(d)},Wp=(t,s,a,l,d)=>{const g=C=>d.extract(s.concat([l]),C),p=C=>C.fold(()=>gs.svalue(O.none()),S=>{const k=d.extract(s.concat([l]),S);return gs.map(k,O.some)});switch(t.tag){case"required":return qv(s,a,l,g);case"defaultedThunk":return dh(a,l,t.process,g);case"option":return zp(a,l,p);case"defaultedOptionThunk":return Up(a,l,t.process,p);case"mergeWithThunk":return dh(a,l,q({}),C=>{const S=Lo(t.process(a),C);return g(S)})}},Wr=(t,s,a)=>{const l={},d=[];for(const g of a)Km(g,(p,C,S,k)=>{const D=Wp(S,t,s,p,k);gs.fold(D,B=>{d.push(...B)},B=>{l[C]=B})},(p,C)=>{l[p]=C(s)});return d.length>0?gs.serror(d):gs.svalue(l)},mh=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),Ks=t=>Qo(mi(t,Fs)),oa=t=>{const s=Bt(t),a=Ro(t,(d,g)=>Km(g,p=>Lo(d,{[p]:!0}),q(d)),{});return{extract:(d,g)=>{const p=_o(g)?[]:Ks(g),C=qn(p,S=>!ba(a,S));return C.length===0?s.extract(d,g):iu(d,C)},toString:s.toString}},Bt=t=>({extract:(l,d)=>Wr(l,d,t),toString:()=>`obj{
`+ke(t,d=>Km(d,(g,p,C,S)=>g+" -> "+S.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),dt=t=>({extract:(l,d)=>{const g=ke(d,(p,C)=>t.extract(l.concat(["["+C+"]"]),p));return uh.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Xm=(t,s)=>{const a=s!==void 0?s:mn;return{extract:(g,p)=>{const C=[];for(const S of t){const k=S.extract(g,p);if(k.stype===us.Value)return{stype:us.Value,svalue:a(k.svalue)};C.push(k)}return uh.consolidateArr(C)},toString:()=>"oneOf("+ke(t,g=>g.toString()).join(", ")+")"}},el=(t,s)=>{const a=(g,p)=>dt(Ul(t)).extract(g,p);return{extract:(g,p)=>{const C=Qo(p),S=a(g,C);return gs.bind(S,k=>{const D=ke(k,B=>Qa(B,B,no(),s));return Bt(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},Ym=(t,s)=>{const a=Rc(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},tg=Za(dt,Bt),Nc=q(Qu),Bc=(t,s)=>Ul(a=>{const l=typeof a;return t(a)?gs.svalue(a):gs.serror(`Expected type: ${s} but got: ${l}`)}),Jm=Bc(tr,"number"),hs=Bc($e,"string"),Qm=Bc(_o,"boolean"),ng=Bc(at,"function"),je=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>je(t[s]));default:return!1}},Kv=Ul(t=>je(t)?gs.svalue(t):gs.serror("Expected value to be acceptable for sending via postMessage")),Xv=(t,s,a,l)=>Qe(a,l).fold(()=>eg(t,a,l),g=>g.extract(t.concat(["branch: "+l]),s)),pc=(t,s)=>({extract:(d,g)=>Qe(g,t).fold(()=>Gv(d,t),C=>Xv(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+Qo(s)}),ef=()=>dt(Qu),ed=t=>Ul(s=>t(s).fold(gs.serror,gs.svalue)),ds=(t,s)=>el(a=>gs.fromResult(t(a)),s),kb=(t,s,a)=>{const l=s.extract([t],a);return gs.mapError(l,d=>({input:a,errors:d}))},bo=(t,s,a)=>gs.toResult(kb(t,s,a)),co=t=>t.fold(s=>{throw new Error(tf(s))},mn),sa=(t,s,a)=>co(bo(t,s,a)),tf=t=>`Errors: 
`+jv(t.errors).join(`
`)+`

Input object: `+Qf(t.input),Hs=(t,s)=>pc(t,Mo(s,Bt)),em=(t,s)=>Ym(t,s),yr=Qa,Ia=Mc,uu=t=>ed(s=>Tn(t,s)?St.value(s):St.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Ce=t=>yr(t,t,no(),Nc()),ec=(t,s)=>yr(t,t,no(),s),Ab=t=>ec(t,Jm),ar=t=>ec(t,hs),yl=(t,s)=>yr(t,t,no(),uu(s)),fh=t=>ec(t,Qm),$c=t=>ec(t,ng),Yv=(t,s)=>yr(t,t,Ju(),Ul(a=>gs.serror("The field: "+t+" is forbidden. "+s))),td=(t,s)=>yr(t,t,no(),Bt(s)),Zp=(t,s)=>yr(t,t,no(),tg(s)),bc=(t,s)=>yr(t,t,no(),dt(s)),oo=t=>yr(t,t,Ju(),Nc()),_i=(t,s)=>yr(t,t,Ju(),s),og=t=>_i(t,Jm),ra=t=>_i(t,hs),gh=(t,s)=>_i(t,uu(s)),nd=t=>_i(t,ng),du=(t,s)=>_i(t,dt(s)),Ms=(t,s)=>_i(t,Bt(s)),hh=(t,s)=>_i(t,oa(s)),fe=(t,s)=>yr(t,t,Yu(s),Nc()),aa=(t,s,a)=>yr(t,t,Yu(s),a),sg=(t,s)=>aa(t,s,Jm),La=(t,s)=>aa(t,s,hs),Ha=(t,s,a)=>aa(t,s,uu(a)),ca=(t,s)=>aa(t,s,Qm),xs=(t,s)=>aa(t,s,ng),ph=(t,s)=>aa(t,s,Kv),tm=(t,s,a)=>aa(t,s,dt(a)),od=(t,s,a)=>aa(t,s,Bt(a)),Lt=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},w={generate:t=>{if(!To(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return De(t,(l,d)=>{const g=Qo(l);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],C=l[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!To(C))throw new Error("case arguments must be an array");s.push(p),a[p]=(...S)=>{const k=S.length;if(k!==C.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+C.length+" ("+C+"), got "+k);return{fold:(...B)=>{if(B.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+B.length);return B[d].apply(null,S)},match:B=>{const P=Qo(B);if(s.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+P.join(","));if(!ro(s,Z=>Tn(P,Z)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+s.join(", "));return B[p].apply(null,S)},log:B=>{console.log(B,{constructors:s,constructor:p,params:S})}}}}),a}};w.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const E=t=>{const s=[],a=[];return De(t,l=>{l.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},F=(t,s)=>{const a={};return Is(t,(l,d)=>{Tn(s,d)||(a[d]=l)}),a},U=(t,s)=>({[t]:s}),ne=t=>{const s={};return De(t,a=>{s[a.key]=a.value}),s},ye=(t,s)=>F(t,s),We=(t,s)=>U(t,s),ct=t=>ne(t),Vt=(t,s)=>t.length===0?St.value(s):St.value(Lo(s,Ei.apply(void 0,t))),jt=t=>St.error(He(t)),mo=(t,s)=>{const a=E(t);return a.errors.length>0?jt(a.errors):Vt(a.values,s)},eo=t=>at(t)?t:jn,ns=(t,s,a)=>{let l=t.dom;const d=eo(a);for(;l.parentNode;){l=l.parentNode;const g=ue.fromDom(l),p=s(g);if(p.isSome())return p;if(d(g))break}return O.none()},la=(t,s,a)=>{const l=s(t),d=eo(a);return l.orThunk(()=>d(t)?O.none():ns(t,s,d))},tl=(t,s)=>Ao(t.element,s.event.target),mu={can:Ot,abort:jn,run:ee},tc=t=>{if(!ba(t,"can")&&!ba(t,"abort")&&!ba(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...mu,...t}},nm=(t,s)=>(...a)=>fn(t,(l,d)=>l&&s(d).apply(void 0,a),!0),bh=(t,s)=>(...a)=>fn(t,(l,d)=>l||s(d).apply(void 0,a),!1),om=t=>at(t)?{can:Ot,abort:jn,run:t}:t,sd=t=>{const s=nm(t,d=>d.can),a=bh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{De(t,g=>{g.run.apply(void 0,d)})}}},Vs=q,nl=Vs("touchstart"),fu=Vs("touchmove"),sm=Vs("touchend"),Ob=Vs("touchcancel"),Sn=Vs("mousedown"),os=Vs("mousemove"),Zr=Vs("mouseout"),Es=Vs("mouseup"),gu=Vs("mouseover"),ki=Vs("focusin"),Wl=Vs("focusout"),vc=Vs("keydown"),sw=Vs("keyup"),nf=Vs("input"),vh=Vs("change"),Zl=Vs("click"),rw=Vs("transitioncancel"),jp=Vs("transitionend"),Jv=Vs("transitionstart"),Qv=Vs("selectstart"),Ns=t=>q("alloy."+t),aw={tap:Ns("tap")},rd=Ns("focus"),yh=Ns("blur.post"),hu=Ns("paste.post"),pu=Ns("receive"),Cl=Ns("execute"),Ch=Ns("focus.item"),Gp=aw.tap,Cr=Ns("longpress"),of=Ns("sandbox.close"),ey=Ns("typeahead.cancel"),rg=Ns("system.init"),wh=Ns("system.touchmove"),ty=Ns("system.touchend"),ag=Ns("system.scroll"),rm=Ns("system.resize"),Pc=Ns("system.attached"),am=Ns("system.detached"),cm=Ns("system.dismissRequested"),ny=Ns("system.repositionRequested"),cw=Ns("focusmanager.shifted"),qp=Ns("slotcontainer.visibility"),Kp=Ns("system.external.element.scroll"),Sh=Ns("change.tab"),sf=Ns("dismiss.tab"),lw=Ns("highlight"),Db=Ns("dehighlight"),lo=(t,s)=>{Xp(t,t.element,s,{})},Mt=(t,s,a)=>{Xp(t,t.element,s,a)},rf=t=>{lo(t,Cl())},oy=(t,s,a)=>{Xp(t,s,a,{})},Xp=(t,s,a,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(a,s,d)},iw=(t,s,a,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(a,s,d)},sy=(t,s,a,l)=>{t.getSystem().triggerEvent(a,s,l.event)},ss=t=>ct(t),Yp=(t,s)=>({key:t,value:tc({abort:s})}),KT=(t,s)=>({key:t,value:tc({can:s})}),xh=t=>({key:t,value:tc({run:(s,a)=>{a.event.prevent()}})}),Pe=(t,s)=>({key:t,value:tc({run:s})}),cg=(t,s,a)=>({key:t,value:tc({run:(l,d)=>{s.apply(void 0,[l,d].concat(a))}})}),XT=t=>s=>Pe(t,s),Rb=t=>s=>({key:t,value:tc({run:(a,l)=>{tl(a,l)&&s(a,l)}})}),YT=(t,s)=>Pe(t,(a,l)=>{a.getSystem().getByUid(s).each(d=>{sy(d,d.element,t,l)})}),af=(t,s,a)=>{const l=s.partUids[a];return YT(t,l)},ry=(t,s)=>Pe(t,(a,l)=>{const d=l.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>la(d.target,C=>a.getSystem().getByDom(C).toOptional(),jn).getOr(a));s(a,g,l)}),ad=t=>Pe(t,(s,a)=>{a.cut()}),Mb=t=>Pe(t,(s,a)=>{a.stop()}),Eh=(t,s)=>Rb(t)(s),rs=Rb(Pc()),Ai=Rb(am()),lg=Rb(rg()),bu=XT(Cl()),Nb=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,Oc(ue.fromDom(l))},Th=t=>t.dom.innerHTML,cf=(t,s)=>{const l=ja(t).dom,d=ue.fromDom(l.createDocumentFragment()),g=Nb(s,l);xi(d,g),qu(t),Xa(t,d)},ay=t=>{const s=ue.fromTag("div"),a=ue.fromDom(t.dom.cloneNode(!0));return Xa(s,a),Th(s)},JT=(t,s)=>ue.fromDom(t.dom.cloneNode(s)),uw=t=>JT(t,!1),Bb=t=>{if(Fm(t))return"#shadow-root";{const s=uw(t);return ay(s)}},ig=t=>Bb(t),QT=(t,s,a)=>Ao(s,t.element)&&!Ao(s,a),lf=ss([KT(rd(),(t,s)=>{const a=s.event,l=a.originator,d=a.target;return QT(t,l,d)?(console.warn(rd()+` did not get interpreted by the desired target. 
Originator: `+ig(l)+`
Target: `+ig(d)+`
Check the `+rd()+" event handlers"),!1):!0})]);var $b=Object.freeze({__proto__:null,events:lf});let uf=0;const pt=t=>{const a=new Date().getTime(),l=Math.floor(Math.random()*1e9);return uf++,t+"_"+l+uf+String(a)},_h=q("alloy-id-"),Aa=q("data-alloy-id"),cy=_h(),Jp=Aa(),e_=(t,s)=>{const a=pt(cy+t);return ia(s,a),a},ia=(t,s)=>{Object.defineProperty(t.dom,Jp,{value:s,writable:!0})},Oi=t=>{const s=po(t)?t.dom[Jp]:null;return O.from(s)},cd=t=>pt(t),t_=mn,kh=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+ig(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:q("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:jn}},df=kh(),Pb=(t,s,a)=>{const l=a.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),p=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:ly(p.slice(0,1).concat(p.slice(3)))}),t},ly=t=>ke(t,s=>Rr(s,"/*")?s.substring(0,s.length-2):s),Qp=(t,s)=>{const a=t.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:ly(g)}),t},ld=(t,s)=>{const a=s.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:ly(g.slice(1))}),t},Fb=pt("alloy-premade"),iy=t=>(Object.defineProperty(t.element.dom,Fb,{value:t.uid,writable:!0}),We(Fb,t)),uy=t=>Qn(t.dom,Fb),dw=t=>Qe(t,Fb),Ib=t=>ld((s,...a)=>t(s.getApis(),s,...a),t),yc={init:()=>nc({readState:q("No State required")})},nc=t=>t,mw=(t,s)=>{const a=ke(s,d=>Ms(d.name(),[Ce("config"),fe("state",yc)])),l=bo("component.behaviours",Bt(a),t.behaviours).fold(d=>{throw new Error(tf(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},mn);return{list:s,data:Mo(l,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return q(g)})}},Ah=t=>t.list,n_=t=>t.data,mf=(t,s)=>{const a={};return Is(t,(l,d)=>{Is(l,(g,p)=>{const C=Qe(a,p).getOr([]);a[p]=C.concat([s(d,g)])})}),a},wl=t=>({classes:Wo(t.classes)?[]:t.classes,attributes:Wo(t.attributes)?{}:t.attributes,styles:Wo(t.styles)?{}:t.styles}),o_=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Oh=(t,s,a,l)=>{const d={...s};De(a,D=>{d[D.name()]=D.exhibit(t,l)});const g=mf(d,(D,B)=>({name:D,modification:B})),p=D=>Ro(D,(B,P)=>({...P.modification,...B}),{}),C=Ro(g.classes,(D,B)=>B.modification.concat(D),[]),S=p(g.attributes),k=p(g.styles);return wl({classes:C,attributes:S,styles:k})},fw=(t,s,a,l)=>{try{const d=mc(a,(g,p)=>{const C=g[s],S=p[s],k=l.indexOf(C),D=l.indexOf(S);if(k===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(l,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(l,null,2));return k<D?-1:D<k?1:0});return St.value(d)}catch(d){return St.error([d])}},Dh=(t,s)=>({handler:t,purpose:s}),e1=(t,s)=>({cHandler:t,purpose:s}),Rh=(t,s)=>e1(It.apply(void 0,[t.handler].concat(s)),t.purpose),t1=t=>t.cHandler,dy=(t,s)=>({name:t,handler:s}),Lb=(t,s)=>{const a={};return De(t,l=>{a[l.name()]=l.handlers(s)}),a},Hb=(t,s,a)=>{const l={...a,...Lb(s,t)};return mf(l,dy)},Po=(t,s,a,l)=>{const d=Hb(t,a,l);return Vb(d,s)},s_=t=>{const s=om(t);return(a,l,...d)=>{const g=[a,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},gw=(t,s)=>St.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(ke(s,a=>a.name),null,2)]),my=(t,s,a)=>{const l=s[a];return l?fw("Event: "+a,"name",t,l).map(d=>{const g=ke(d,p=>p.handler);return sd(g)}):gw(a,t)},Vb=(t,s)=>{const a=Iu(t,(l,d)=>(l.length===1?St.value(l[0].handler):my(l,s,d)).map(p=>{const C=s_(p),S=l.length>1?qn(s[d],k=>ko(l,D=>D.name===k)).join(" > "):l[0].name;return We(d,Dh(C,S))}));return mo(a,{})},ff="alloy.base.behaviour",vu=Bt([yr("dom","dom",no(),Bt([Ce("tag"),fe("styles",{}),fe("classes",[]),fe("attributes",{}),oo("value"),oo("innerHtml")])),Ce("components"),Ce("uid"),fe("events",{}),fe("apis",{}),yr("eventOrder","eventOrder",xn({[Cl()]:["disabling",ff,"toggling","typeaheadevents"],[rd()]:[ff,"focusing","keying"],[rg()]:[ff,"disabling","toggling","representing"],[nf()]:[ff,"representing","streaming","invalidating"],[am()]:[ff,"representing","item-events","tooltipping"],[Sn()]:["focusing",ff,"item-type-events"],[nl()]:["focusing",ff,"item-type-events"],[gu()]:["item-type-events","tooltipping"],[pu()]:["receiving","reflecting","tooltipping"]}),Nc()),oo("domModification")]),$r=t=>bo("custom.definition",vu,t),hw=t=>({...t.dom,uid:t.uid,domChildren:ke(t.components,s=>s.element)}),pw=t=>t.domModification.fold(()=>wl({}),wl),Mh=t=>t.events,zb=(t,s)=>{const a=zr(t,s);return a===void 0||a===""?[]:a.split(" ")},r_=(t,s,a)=>{const d=zb(t,s).concat([a]);return gn(t,s,d.join(" ")),!0},Ub=(t,s,a)=>{const l=qn(zb(t,s),d=>d!==a);return l.length>0?gn(t,s,l.join(" ")):ws(t,s),!1},gf=t=>t.dom.classList!==void 0,bw=t=>zb(t,"class"),OD=(t,s)=>r_(t,"class",s),DD=(t,s)=>Ub(t,"class",s),wr=(t,s)=>{gf(t)?t.dom.classList.add(s):OD(t,s)},RD=t=>{(gf(t)?t.dom.classList:bw(t)).length===0&&ws(t,"class")},Oo=(t,s)=>{gf(t)?t.dom.classList.remove(s):DD(t,s),RD(t)},as=(t,s)=>gf(t)&&t.dom.classList.contains(s),id=(t,s)=>{De(s,a=>{wr(t,a)})},Sl=(t,s)=>{De(s,a=>{Oo(t,a)})},jl=(t,s)=>ro(s,a=>as(t,a)),Wb=t=>{const s=t.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(a[l]=d)}return a},Nh=t=>gf(t)?Wb(t):bw(t),Fc=t=>t.dom.value,Ic=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},cr=(t,s,a)=>gl(t,s).map(d=>{if(a.exists(p=>!Ao(p,d))){const p=a.map(_c).getOr("span"),C=ue.fromTag(p);return Qc(d,C),C}else return d}),Bh=(t,s,a)=>{a.fold(()=>Xa(t,s),l=>{Ao(l,s)||(Qc(l,s),Ya(l))})},hf=(t,s,a)=>{const l=ke(s,a),d=Oc(t);return De(d.slice(l.length),Ya),l},$h=(t,s,a,l)=>{const d=gl(t,s),g=l(a,d),p=cr(t,s,d);return Bh(t,g.element,p),g},vw=(t,s,a)=>hf(t,s,(l,d)=>$h(t,d,l,a)),ud=(t,s)=>hf(t,s,(a,l)=>{const d=gl(t,l);return Bh(t,a,d),a}),dd=(t,s)=>{const a=Qo(t),l=Qo(s),d=Ct(l,a),g=hr(t,(p,C)=>!Qn(s,C)||p!==s[C]).t;return{toRemove:d,toSet:g}},yw=(t,s)=>{const{class:a,style:l,...d}=$p(s),{toSet:g,toRemove:p}=dd(t.attributes,d),C=()=>{De(p,Ee=>ws(s,Ee)),Kn(s,g)},S=ea(s),{toSet:k,toRemove:D}=dd(t.styles,S),B=()=>{De(D,Ee=>Ln(s,Ee)),pl(s,k)},P=Nh(s),H=Ct(P,t.classes),Z=Ct(t.classes,P),J=()=>{id(s,Z),Sl(s,H)},ge=Ee=>{cf(s,Ee)},ie=()=>{const Ee=t.domChildren;ud(s,Ee)},re=()=>{const Ee=s,Re=t.value.getOrUndefined();Re!==Fc(Ee)&&Ic(Ee,Re??"")};return C(),J(),B(),t.innerHtml.fold(ie,ge),re(),s},fy=t=>{const s=ue.fromTag(t.tag);Kn(s,t.attributes),id(s,t.classes),pl(s,t.styles),t.innerHtml.each(l=>cf(s,l));const a=t.domChildren;return xi(s,a),t.value.each(l=>{Ic(s,l)}),s},Cw=(t,s)=>{try{const a=yw(t,s);return O.some(a)}catch{return O.none()}},a_=t=>t.innerHtml.isSome()&&t.domChildren.length>0,c_=(t,s)=>{const a=d=>_c(d)===t.tag&&!a_(t)&&!uy(d),l=s.filter(a).bind(d=>Cw(t,d)).getOrThunk(()=>fy(t));return ia(l,t.uid),l},ww=t=>{const s=Qe(t,"behaviours").getOr({});return me(Qo(s),a=>{const l=s[a];return Fs(l)?[l.me]:[]})},Sw=(t,s)=>mw(t,s),n1=t=>{const s=ww(t);return Sw(t,s)},l_=(t,s,a)=>{const l=hw(t),d=pw(t),g={"alloy.base.modification":d},p=s.length>0?Oh(a,g,s,l):d;return o_(l,p)},xw=(t,s,a)=>{const l={"alloy.base.behaviour":Mh(t)};return Po(a,t.eventOrder,s,l).getOrDie()},gy=(t,s)=>{const a=()=>Ee,l=Lt(df),d=co($r(t)),g=n1(t),p=Ah(g),C=n_(g),S=l_(d,p,C),k=c_(S,s),D=xw(d,p,C),B=Lt(d.components),P=Re=>{l.set(Re)},H=()=>{l.set(kh(a))},Z=()=>{const Re=Oc(k),tt=me(Re,Le=>l.get().getByDom(Le).fold(()=>[],Eo));B.set(tt)},J=Re=>{const tt=C;return(at(tt[Re.name()])?tt[Re.name()]:()=>{throw new Error("Could not find "+Re.name()+" in "+JSON.stringify(t,null,2))})()},ge=Re=>at(C[Re.name()]),ie=()=>d.apis,re=Re=>C[Re]().map(tt=>tt.state.readState()).getOr("not enabled"),Ee={uid:t.uid,getSystem:l.get,config:J,hasConfigured:ge,spec:t,readState:re,getApis:ie,connect:P,disconnect:H,element:k,syncComponents:Z,components:B.get,events:D};return Ee},Ph=(t,s)=>{const a=Qe(t,"components").getOr([]);return s.fold(()=>ke(a,Sr),l=>ke(a,(d,g)=>pf(d,gl(l,g))))},o1=(t,s)=>{const{events:a,...l}=t_(t),d=Ph(l,s),g={...l,events:{...$b,...a},components:d};return St.value(gy(g,s))},Xs=t=>{const s=ue.fromText(t);return Zb({element:s})},Zb=t=>{const s=sa("external.component",oa([Ce("element"),oo("uid")]),t),a=Lt(kh()),l=C=>{a.set(C)},d=()=>{a.set(kh(()=>p))},g=s.uid.getOrThunk(()=>cd("external"));ia(s.element,g);const p={uid:g,getSystem:a.get,config:O.none,hasConfigured:jn,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:q("No state"),syncComponents:ee,components:q([]),events:{}};return iy(p)},hy=cd,lm=t=>Qn(t,"uid"),pf=(t,s)=>dw(t).getOrThunk(()=>{const a=lm(t)?t:{uid:hy(""),...t};return o1(a,s).getOrDie()}),Sr=t=>pf(t,O.none()),Gl=iy;var Fh=(t,s,a,l,d)=>t(a,l)?O.some(a):at(d)&&d(a)?O.none():s(a,l,d);const py=(t,s,a)=>{let l=t.dom;const d=at(a)?a:jn;for(;l.parentNode;){l=l.parentNode;const g=ue.fromDom(l);if(s(g))return O.some(g);if(d(g))break}return O.none()},Ih=(t,s,a)=>Fh((d,g)=>g(d),py,t,s,a),s1=(t,s)=>{const a=d=>s(ue.fromDom(d));return Me(t.dom.childNodes,a).map(ue.fromDom)},Ew=(t,s)=>{const a=l=>{for(let d=0;d<l.childNodes.length;d++){const g=ue.fromDom(l.childNodes[d]);if(s(g))return O.some(g);const p=a(l.childNodes[d]);if(p.isSome())return p}return O.none()};return a(t.dom)},Tw=(t,s,a)=>Ih(t,s,a).isSome(),md=(t,s,a)=>py(t,l=>Ls(l,s),a),jb=(t,s)=>s1(t,a=>Ls(a,s)),lr=(t,s)=>Uf(s,t),ol=(t,s,a)=>Fh((d,g)=>Ls(d,g),md,t,s,a),Di="aria-controls",_w=t=>Ih(t,a=>{if(!po(a))return!1;const l=zr(a,"id");return l!==void 0&&l.indexOf(Di)>-1}).bind(a=>{const l=zr(a,"id"),d=Jr(a);return lr(d,`[${Di}="${l}"]`)}),kw=()=>{const t=pt(Di);return{id:t,link:l=>{gn(l,Di,t)},unlink:l=>{ws(l,Di)}}},Aw=(t,s)=>_w(s).exists(a=>ug(t,a)),ug=(t,s)=>Tw(s,a=>Ao(a,t.element),jn)||Aw(t,s),Ow="unknown";var bf;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(bf||(bf={}));const by=Lt({}),Dw=(t,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();Tn(["mousemove","mouseover","mouseout",rg()],t)||console.log(t,{event:t,time:d-l,target:s.dom,sequence:ke(a,g=>Tn(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+ig(g.target)+")":g.outcome)})}}},Rw=(t,s,a)=>{switch(Qe(by.get(),t).orThunk(()=>{const d=Qo(by.get());return gr(d,g=>t.indexOf(g)>-1?O.some(by.get()[g]):O.none())}).getOr(bf.NORMAL)){case bf.NORMAL:return a(vy());case bf.LOGGING:{const d=Dw(t,s),g=a(d);return d.write(),g}case bf.STOP:return!0}},r1=["alloy/data/Fields","alloy/debugging/Debugging"],i_=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Me(s,a=>a.indexOf("alloy")>0&&!ko(r1,l=>a.indexOf(l)>-1)).getOr(Ow)}else return Ow},Lh={logEventCut:ee,logEventStopped:ee,logNoParent:ee,logEventNoHandlers:ee,logEventResponse:ee,write:ee},dg=(t,s,a)=>Rw(t,s,a),vy=q(Lh),a1=q([Ce("menu"),Ce("selectedMenu")]),Hh=q([Ce("item"),Ce("selectedItem")]);q(Bt(Hh().concat(a1())));const yy=q(Bt(Hh())),Cy=td("initSize",[Ce("numColumns"),Ce("numRows")]),Mw=()=>ec("markers",yy()),fd=()=>td("markers",[Ce("backgroundMenu")].concat(a1()).concat(Hh())),Vh=t=>td("markers",ke(t,Ce)),gd=(t,s,a)=>(i_(),yr(s,s,a,ed(l=>St.value((...d)=>l.apply(void 0,d))))),_n=t=>gd("onHandler",t,Yu(ee)),ua=t=>gd("onKeyboardHandler",t,Yu(O.none)),vf=t=>gd("onHandler",t,no()),we=t=>gd("onKeyboardHandler",t,no()),Ho=(t,s)=>Ia(t,q(s)),Nw=t=>Ia(t,mn),Bw=q(Cy),jr=(t,s,a,l,d,g,p,C=!1)=>({x:t,y:s,bubble:a,direction:l,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:C}),oc=w.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Gb=(t,s,a,l,d,g,p,C,S)=>t.fold(s,a,l,d,g,p,C,S),wy=(t,s,a,l)=>t.fold(s,s,l,l,s,l,a,a),$w=(t,s,a,l)=>t.fold(s,l,s,l,a,a,s,l),zh=oc.southeast,Sy=oc.southwest,im=oc.northeast,qb=oc.northwest,Kb=oc.south,xy=oc.north,Ey=oc.east,Pw=oc.west,Uh=(t,s,a,l)=>{const d=t+s;return d>l?a:d<a?l:d},Lc=(t,s,a)=>Math.min(Math.max(t,s),a),Ty=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Xo=(t,s)=>fr(["left","right","top","bottom"],a=>Qe(s,a).map(l=>Ty(t,l))),Fw=(t,s,a)=>{const l=(S,k)=>s[S].map(D=>{const B=S==="top"||S==="bottom",P=B?a.top:a.left,Z=(S==="left"||S==="top"?Math.max:Math.min)(D,k)+P;return B?Lc(Z,t.y,t.bottom):Lc(Z,t.x,t.right)}).getOr(k),d=l("left",t.x),g=l("top",t.y),p=l("right",t.right),C=l("bottom",t.bottom);return _(d,g,p-d,C-g)},yf="layout",Xb=t=>t.x,_y=(t,s)=>t.x+t.width/2-s.width/2,c1=(t,s)=>t.x+t.width-s.width,Wh=(t,s)=>t.y-s.height,ky=t=>t.y+t.height,Ay=(t,s)=>t.y+t.height/2-s.height/2,u_=t=>t.x+t.width,Iw=(t,s)=>t.x-s.width,Gr=(t,s,a)=>jr(Xb(t),ky(t),a.southeast(),zh(),"southeast",Xo(t,{left:1,top:3}),yf),xr=(t,s,a)=>jr(c1(t,s),ky(t),a.southwest(),Sy(),"southwest",Xo(t,{right:0,top:3}),yf),Hc=(t,s,a)=>jr(Xb(t),Wh(t,s),a.northeast(),im(),"northeast",Xo(t,{left:1,bottom:2}),yf),sc=(t,s,a)=>jr(c1(t,s),Wh(t,s),a.northwest(),qb(),"northwest",Xo(t,{right:0,bottom:2}),yf),Cs=(t,s,a)=>jr(_y(t,s),Wh(t,s),a.north(),xy(),"north",Xo(t,{bottom:2}),yf),Ys=(t,s,a)=>jr(_y(t,s),ky(t),a.south(),Kb(),"south",Xo(t,{top:3}),yf),Lw=(t,s,a)=>jr(u_(t),Ay(t,s),a.east(),Ey(),"east",Xo(t,{left:0}),yf),rc=(t,s,a)=>jr(Iw(t,s),Ay(t,s),a.west(),Pw(),"west",Xo(t,{right:1}),yf),d_=()=>[Gr,xr,Hc,sc,Ys,Cs,Lw,rc],yu=()=>[xr,Gr,sc,Hc,Ys,Cs,Lw,rc],Hw=()=>[Hc,sc,Gr,xr,Cs,Ys],Vw=()=>[sc,Hc,xr,Gr,Cs,Ys],Oy=()=>[Gr,xr,Hc,sc,Ys,Cs],Dy=()=>[xr,Gr,sc,Hc,Ys,Cs],Yb=(t,s)=>s.universal?t:qn(t,a=>Tn(s.channels,a));var f_=Object.freeze({__proto__:null,events:t=>ss([Pe(pu(),(s,a)=>{const l=t.channels,d=Qo(l),g=a,p=Yb(d,g);De(p,C=>{const S=l[C],k=S.schema,D=sa("channel["+C+`] data
Receiver: `+ig(s.element),k,g.data);S.onReceive(s,D)})})])}),zw=[ec("channels",ds(St.value,oa([vf("onReceive"),fe("schema",Nc())])))];const g_=(t,s,a)=>bu(l=>{a(l,t,s)}),l1=(t,s,a)=>lg((l,d)=>{a(l,t,s)}),h_=(t,s,a,l,d,g)=>{const p=oa(t),C=Ms(s,[hh("config",t)]);return ft(p,C,s,a,l,d,g)},p_=(t,s,a,l,d,g)=>{const p=t,C=Ms(s,[_i("config",t)]);return ft(p,C,s,a,l,d,g)},b_=(t,s,a)=>Pb((d,...g)=>{const p=[d].concat(g);return d.config({name:q(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},C=>{const S=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},a,s),i1=t=>({key:t,value:void 0}),ft=(t,s,a,l,d,g,p)=>{const C=B=>ba(B,a)?B[a]():O.none(),S=Mo(d,(B,P)=>b_(a,B,P)),D={...Mo(g,(B,P)=>Qp(B,P)),...S,revoke:It(i1,a),config:B=>{const P=sa(a+"-config",t,B);return{key:a,value:{config:P,me:D,configAsRaw:Rc(()=>sa(a+"-config",t,B)),initialConfig:B,state:p}}},schema:q(s),exhibit:(B,P)=>Ji(C(B),Qe(l,"exhibit"),(H,Z)=>Z(P,H.config,H.state)).getOrThunk(()=>wl({})),name:q(a),handlers:B=>C(B).map(P=>Qe(l,"events").getOr(()=>({}))(P.config,P.state)).getOr({})};return D},Xe=t=>ct(t),Uw=oa([Ce("fields"),Ce("name"),fe("active",{}),fe("apis",{}),fe("state",yc),fe("extra",{})]),da=t=>{const s=sa("Creating behaviour: "+t.name,Uw,t);return h_(s.fields,s.name,s.active,s.apis,s.extra,s.state)},v_=oa([Ce("branchKey"),Ce("branches"),Ce("name"),fe("active",{}),fe("apis",{}),fe("state",yc),fe("extra",{})]),Ww=t=>{const s=sa("Creating behaviour: "+t.name,v_,t);return p_(Hs(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Zw=q(void 0),Vc=da({fields:zw,name:"receiving",active:f_});var Ry=Object.freeze({__proto__:null,exhibit:(t,s)=>wl({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const ql=t=>t.dom.focus(),Va=t=>t.dom.blur(),hd=t=>{const s=Jr(t).dom;return t.dom===s.activeElement},pd=(t=Xf())=>O.from(t.dom.activeElement).map(ue.fromDom),Ri=t=>pd(Jr(t)).filter(s=>t.dom.contains(s.dom)),u1=(t,s)=>{const a=Jr(s),l=pd(a).bind(g=>{const p=C=>Ao(g,C);return p(s)?O.some(s):Ew(s,p)}),d=t(s);return l.each(g=>{pd(a).filter(p=>Ao(p,g)).fold(()=>{ql(g)},ee)}),d},sl=(t,s,a,l,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:l.map(g),bottom:d.map(g)}},y_=t=>({...t,position:O.some(t.position)}),My=(t,s)=>{Dc(t,y_(s))},Jb=w.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Gw=(t,s,a,l,d,g)=>{const p=s.rect,C=p.x-a,S=p.y-l,k=p.width,D=p.height,B=d-(C+k),P=g-(S+D),H=O.some(C),Z=O.some(S),J=O.some(B),ge=O.some(P),ie=O.none();return Gb(s.direction,()=>sl(t,H,Z,ie,ie),()=>sl(t,ie,Z,J,ie),()=>sl(t,H,ie,ie,ge),()=>sl(t,ie,ie,J,ge),()=>sl(t,H,Z,ie,ie),()=>sl(t,H,ie,ie,ge),()=>sl(t,H,Z,ie,ie),()=>sl(t,ie,Z,J,ie))},Ny=(t,s)=>t.fold(()=>{const a=s.rect;return sl("absolute",O.some(a.x),O.some(a.y),O.none(),O.none())},(a,l,d,g)=>Gw("absolute",s,a,l,d,g),(a,l,d,g)=>Gw("fixed",s,a,l,d,g)),By=(t,s)=>{const a=It(Xu,s),l=t.fold(a,a,()=>{const p=_a();return Xu(s).translate(-p.left,-p.top)}),d=Ur(s),g=ru(s);return _(l.left,l.top,d,g)},C_=(t,s)=>s.fold(()=>t.fold(Ze,Ze,_),a=>t.fold(q(a),q(a),()=>{const l=qw(t,a.x,a.y);return _(l.left,l.top,a.width,a.height)})),qw=(t,s,a)=>{const l=ts(s,a),d=()=>{const g=_a();return l.translate(-g.left,-g.top)};return t.fold(q(l),q(l),d)},w_=(t,s,a,l)=>t.fold(s,a,l);Jb.none;const S_=Jb.relative,x_=Jb.fixed,$y=(t,s)=>({anchorBox:t,origin:s}),Kw=(t,s)=>$y(t,s),Py="data-alloy-placement",Xw=(t,s)=>{gn(t,Py,s)},Yw=t=>Ds(t,Py),E_=t=>ws(t,Py),Qb=w.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Jw=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y:C,right:S,bottom:k,width:D,height:B}=t,P=p>=a&&p<=d,H=C>=l&&C<=g,Z=P&&H,J=S<=d&&S>=a,ge=k<=g&&k>=l,ie=J&&ge,re=Math.min(D,p>=a?d-p:S-a),Ee=Math.min(B,C>=l?g-C:k-l);return{originInBounds:Z,sizeInBounds:ie,visibleW:re,visibleH:Ee}},T_=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y:C,width:S,height:k}=t,D=Math.max(a,d-S),B=Math.max(l,g-k),P=Lc(p,a,D),H=Lc(C,l,B),Z=Math.min(P+S,d)-P,J=Math.min(H+k,g)-H;return _(P,H,Z,J)},__=(t,s,a)=>{const l=q(s.bottom-a.y),d=q(a.bottom-s.y),g=wy(t,d,d,l),p=q(s.right-a.x),C=q(a.right-s.x);return{maxWidth:$w(t,C,C,p),maxHeight:g}},Qw=(t,s,a,l)=>{const d=t.bubble,g=d.offset,p=Fw(l,t.restriction,g),C=t.x+g.left,S=t.y+g.top,k=_(C,S,s,a),{originInBounds:D,sizeInBounds:B,visibleW:P,visibleH:H}=Jw(k,p),Z=D&&B,J=Z?k:T_(k,p),ge=J.width>0&&J.height>0,{maxWidth:ie,maxHeight:re}=__(t.direction,J,l),Ee={rect:J,maxHeight:re,maxWidth:ie,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return Z||t.alwaysFit?Qb.fit(Ee):Qb.nofit(Ee,P,H,ge)},k_=(t,s,a,l,d,g)=>{const p=l.width,C=l.height,S=(D,B,P,H,Z)=>{const J=D(a,l,d,t,g),ge=Qw(J,p,C,g);return ge.fold(q(ge),(ie,re,Ee,Re)=>(Z===Re?Ee>H||re>P:!Z&&Re)?ge:Qb.nofit(B,P,H,Z))};return fn(s,(D,B)=>{const P=It(S,B);return D.fold(q(D),P)},Qb.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:zh(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(mn,mn)},e0=t=>{const s=Lt(O.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(O.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(O.some(C))}}},Fy=()=>e0(t=>t.destroy()),Mi=()=>e0(t=>t.unbind()),Fo=()=>{const t=e0(ee);return{...t,on:a=>t.get().each(a)}},eS=Ot,za=(t,s,a)=>jm(t,s,eS,a),Iy=(t,s,a)=>Xd(t,s,eS,a),um=Si,qr=["top","bottom","right","left"],t0="data-alloy-transition-timer",tS=(t,s)=>jl(t,s.classes),A_=(t,s,a)=>a.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),nS=(t,s)=>{const a=l=>parseFloat(l).toFixed(3);return bs(s,(l,d)=>{const g=t[d].map(a),p=l.map(a);return!Ol(g,p)}).isSome()},n0=t=>{const s=g=>{const C=Ve(t,g).split(/\s*,\s*/);return qn(C,fc)},a=g=>{if($e(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return Rr(g,"ms")?p:p*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return fn(d,(g,p,C)=>{const S=a(l[C])+a(p);return Math.max(g,S)},0)},O_=(t,s)=>{const a=Mi(),l=Mi();let d;const g=k=>{var D;const B=(D=k.raw.pseudoElement)!==null&&D!==void 0?D:"";return Ao(k.target,t)&&vs(B)&&Tn(qr,k.raw.propertyName)},p=k=>{if(qo(k)||g(k)){a.clear(),l.clear();const D=k==null?void 0:k.raw.type;(qo(D)||D===jp())&&(clearTimeout(d),ws(t,t0),Sl(t,s.classes))}},C=za(t,Jv(),k=>{g(k)&&(C.unbind(),a.set(za(t,jp(),p)),l.set(za(t,rw(),p)))}),S=n0(t);requestAnimationFrame(()=>{d=setTimeout(p,S+17),gn(t,t0,d)})},D_=(t,s)=>{id(t,s.classes),Ds(t,t0).each(a=>{clearTimeout(parseInt(a,10)),ws(t,t0)}),O_(t,s)},R_=(t,s,a,l,d,g)=>{const p=A_(l,d,g);if(p||tS(t,l)){Xt(t,"position",a.position);const C=By(s,t),S=Ny(s,{...d,rect:C}),k=fr(qr,D=>S[D]);nS(a,k)&&(Dc(t,k),p&&D_(t,l),yi(t))}else Sl(t,l.classes)},M_=t=>({width:Ur(t),height:ru(t)}),d1=(t,s,a,l)=>{Ln(s,"max-height"),Ln(s,"max-width");const d=M_(s);return k_(s,l.preference,t,d,a,l.bounds)},oS=(t,s)=>{const a=s.classes;Sl(t,a.off),id(t,a.on)},N_=(t,s,a)=>{const l=a.maxHeightFunction;l(t,s.maxHeight)},mg=(t,s,a)=>{const l=a.maxWidthFunction;l(t,s.maxWidth)},sS=(t,s,a)=>{const l=Ny(a.origin,s);a.transition.each(d=>{R_(t,a.origin,l,d,s,a.lastPlacement)}),My(t,l)},o0=(t,s)=>{Xw(t,s.placement)},rS=(t,s)=>{Tb(t,Math.floor(s))},B_=q((t,s)=>{rS(t,s),pl(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Zh=q((t,s)=>{rS(t,s)}),s0=(t,s,a)=>t[s]===void 0?a:t[s],aS=(t,s,a,l,d,g,p,C)=>{const S=s0(p,"maxHeightFunction",B_()),k=s0(p,"maxWidthFunction",ee),D=t.anchorBox,B=t.origin,P={bounds:C_(B,g),origin:B,preference:l,maxHeightFunction:S,maxWidthFunction:k,lastPlacement:d,transition:C};return $_(D,s,a,P)},$_=(t,s,a,l)=>{const d=d1(t,s,a,l);return sS(s,d,l),o0(s,d),oS(s,d),N_(s,d,l),mg(s,d,l),{layout:d.layout,placement:d.placement}},P_=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],jh=(t,s,a,l=1)=>{const d=t*l,g=s*l,p=S=>Qe(a,S).getOr([]),C=(S,k,D)=>{const B=Ct(P_,D);return{offset:ts(S,k),classesOn:me(D,p),classesOff:me(B,p)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},r0=()=>jh(0,0,{}),a0=mn,Ly=(t,s)=>a=>cS(a)==="rtl"?s:t,cS=t=>Ve(t,"direction")==="rtl"?"rtl":"ltr";var bd;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(bd||(bd={}));const fg="data-alloy-vertical-dir",lS=t=>Tw(t,s=>po(s)&&zr(s,"data-alloy-vertical-dir")===bd.BottomToTop),dm=()=>Ms("layouts",[Ce("onLtr"),Ce("onRtl"),oo("onBottomLtr"),oo("onBottomRtl")]),gg=(t,s,a,l,d,g,p)=>{const C=p.map(lS).getOr(!1),S=s.layouts.map(H=>H.onLtr(t)),k=s.layouts.map(H=>H.onRtl(t)),D=C?s.layouts.bind(H=>H.onBottomLtr.map(Z=>Z(t))).or(S).getOr(d):S.getOr(a),B=C?s.layouts.bind(H=>H.onBottomRtl.map(Z=>Z(t))).or(k).getOr(g):k.getOr(l);return Ly(D,B)(t)},m1=(t,s,a)=>{const l=s.hotspot,d=By(a,l.element),g=gg(t.element,s,Oy(),Dy(),Hw(),Vw(),O.some(s.hotspot.element));return O.some(a0({anchorBox:d,bubble:s.bubble.getOr(r0()),overrides:s.overrides,layouts:g}))};var Hy=[Ce("hotspot"),oo("bubble"),fe("overrides",{}),dm(),Ho("placement",m1)];const iS=(t,s,a)=>{const l=qw(a,s.x,s.y),d=_(l.left,l.top,s.width,s.height),g=gg(t.element,s,d_(),yu(),d_(),yu(),O.none());return O.some(a0({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var F_=[Ce("x"),Ce("y"),fe("height",0),fe("width",0),fe("bubble",r0()),fe("overrides",{}),dm(),Ho("placement",iS)];const uS=w.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),I_=t=>t.fold(mn,(s,a,l)=>s.translate(-a,-l)),L_=t=>t.fold(mn,mn),dS=t=>fn(t,(s,a)=>s.translate(a.left,a.top),ts(0,0)),H_=t=>{const s=ke(t,I_);return dS(s)},c0=t=>{const s=ke(t,L_);return dS(s)},V_=uS.screen,z_=uS.absolute,U_=(t,s,a)=>{const l=fl(a.root).dom,d=g=>{const p=ja(g),C=ja(t.element);return Ao(p,C)};return O.from(l.frameElement).map(ue.fromDom).filter(d).map(xa)},mS=(t,s,a)=>{const l=ja(t.element),d=_a(l),g=U_(t,s,a).getOr(d);return z_(g,d.left,d.top)},f1=(t,s,a,l)=>{const d=V_(ts(t,s));return O.some(sh(d,a,l))},fS=(t,s,a,l,d)=>t.map(g=>{const p=[s,g.point],C=w_(l,()=>c0(p),()=>c0(p),()=>H_(p)),S=zl(C.left,C.top,g.width,g.height),k=a.showAbove?Hw():Oy(),D=a.showAbove?Vw():Dy(),B=gg(d,a,k,D,k,D,O.none());return a0({anchorBox:S,bubble:a.bubble.getOr(r0()),overrides:a.overrides,layouts:B})}),W_=(t,s,a)=>{const l=mS(t,a,s);return s.node.filter($a).bind(d=>{const g=d.dom.getBoundingClientRect(),p=f1(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return fS(p,l,s,a,C)})};var Z_=[Ce("node"),Ce("root"),oo("bubble"),dm(),fe("overrides",{}),fe("showAbove",!1),Ho("placement",W_)];const j_="\uFEFF",l0=" ",g1={create:(t,s,a,l)=>({start:t,soffset:s,finish:a,foffset:l})},h1=w.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),hS=(t,s,a,l)=>t.fold(s,a,l),Vy=t=>t.fold(mn,mn,mn),zy=h1.before,Uy=h1.on,Wy=h1.after,pS={before:zy,on:Uy,after:Wy,cata:hS,getStart:Vy},Gh=w.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bS=t=>Gh.exact(t.start,t.soffset,t.finish,t.foffset),G_=t=>t.match({domRange:s=>ue.fromDom(s.startContainer),relative:(s,a)=>pS.getStart(s),exact:(s,a,l,d)=>s}),Zy=Gh.domRange,q_=Gh.relative,K_=Gh.exact,hg=t=>{const s=G_(t);return fl(s)},jy=g1.create,p1={domRange:Zy,relative:q_,exact:K_,exactFromRange:bS,getWin:hg,range:jy},X_=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},Y_=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},Gy=(t,s,a)=>{const l=t.document.createRange();return X_(l,s),Y_(l,a),l},vS=(t,s,a,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(l.dom,d),g},ac=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),J_=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?O.some(a).map(ac):O.none()},vd=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?O.some(s).map(ac):O.none()},mm=w.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),yS=(t,s,a)=>s(ue.fromDom(a.startContainer),a.startOffset,ue.fromDom(a.endContainer),a.endOffset),qy=(t,s)=>s.match({domRange:a=>({ltr:q(a),rtl:O.none}),relative:(a,l)=>({ltr:Rc(()=>Gy(t,a,l)),rtl:Rc(()=>O.some(Gy(t,l,a)))}),exact:(a,l,d,g)=>({ltr:Rc(()=>vS(t,a,l,d,g)),rtl:Rc(()=>O.some(vS(t,d,g,a,l)))})}),Q_=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>mm.rtl(ue.fromDom(d.endContainer),d.endOffset,ue.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>yS(t,mm.ltr,a)):yS(t,mm.ltr,a)},CS=(t,s)=>{const a=qy(t,s);return Q_(t,a)},i0=(t,s)=>CS(t,s).match({ltr:(l,d,g,p)=>{const C=t.document.createRange();return C.setStart(l.dom,d),C.setEnd(g.dom,p),C},rtl:(l,d,g,p)=>{const C=t.document.createRange();return C.setStart(g.dom,p),C.setEnd(l.dom,d),C}});mm.ltr,mm.rtl;const b1=(t,s,a)=>qn(Jg(t,a),s),Cc=(t,s)=>Bp(s,t),ek=(t,s,a,l)=>{const g=ja(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,l),g},v1=(t,s,a,l)=>{const d=ek(t,s,a,l),g=Ao(t,a)&&s===l;return d.collapsed&&!g},pg=t=>O.from(t.getSelection()),Cf=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return O.some(g1.create(ue.fromDom(s.startContainer),s.startOffset,ue.fromDom(a.endContainer),a.endOffset))}else return O.none()},u0=t=>{if(t.anchorNode===null||t.focusNode===null)return Cf(t);{const s=ue.fromDom(t.anchorNode),a=ue.fromDom(t.focusNode);return v1(s,t.anchorOffset,a,t.focusOffset)?O.some(g1.create(s,t.anchorOffset,a,t.focusOffset)):Cf(t)}},qh=t=>pg(t).filter(s=>s.rangeCount>0).bind(u0),d0=(t,s)=>{const a=i0(t,s);return J_(a)},bg=(t,s)=>{const a=i0(t,s);return vd(a)},wS=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?O.from(g.dom.nodeValue):O.none();return{get:a,getOption:l,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(wa,"text"),Ky=t=>wS.get(t),y1=(t,s)=>({element:t,offset:s}),C1=(t,s)=>{const a=Oc(t);if(a.length===0)return y1(t,s);if(s<a.length)return y1(a[s],0);{const l=a[a.length-1],d=wa(l)?Ky(l).length:Oc(l).length;return y1(l,d)}},Kh=(t,s)=>wa(t)?y1(t,s):C1(t,s),wf=t=>t.foffset!==void 0,m0=(t,s)=>s.getSelection.getOrThunk(()=>()=>qh(t))().map(l=>{if(wf(l)){const d=Kh(l.start,l.soffset),g=Kh(l.finish,l.foffset);return p1.range(d.element,d.offset,g.element,g.offset)}else return l}),f0=(t,s,a)=>{const l=fl(s.root).dom,d=mS(t,a,s),g=m0(l,s).bind(S=>{if(wf(S))return bg(l,p1.exactFromRange(S)).orThunk(()=>{const D=ue.fromText(j_);Qc(S.start,D);const B=d0(l,p1.exact(D,0,D,1));return Ya(D),B}).bind(D=>f1(D.left,D.top,D.width,D.height));{const k=Mo(S,B=>B.dom.getBoundingClientRect()),D={left:Math.min(k.firstCell.left,k.lastCell.left),right:Math.max(k.firstCell.right,k.lastCell.right),top:Math.min(k.firstCell.top,k.lastCell.top),bottom:Math.max(k.firstCell.bottom,k.lastCell.bottom)};return f1(D.left,D.top,D.right-D.left,D.bottom-D.top)}}),C=m0(l,s).bind(S=>wf(S)?po(S.start)?O.some(S.start):Ba(S.start):O.some(S.firstCell)).getOr(t.element);return fS(g,d,s,a,C)};var Xh=[oo("getSelection"),Ce("root"),oo("bubble"),dm(),fe("overrides",{}),fe("showAbove",!1),Ho("placement",f0)];const Ni="link-layout",Yh=t=>t.x+t.width,g0=(t,s)=>t.x-s.width,Jh=(t,s)=>t.y-s.height+t.height,ma=t=>t.y,tk=(t,s,a)=>jr(Yh(t),ma(t),a.southeast(),zh(),"southeast",Xo(t,{left:0,top:2}),Ni),Bi=(t,s,a)=>jr(g0(t,s),ma(t),a.southwest(),Sy(),"southwest",Xo(t,{right:1,top:2}),Ni),w1=(t,s,a)=>jr(Yh(t),Jh(t,s),a.northeast(),im(),"northeast",Xo(t,{left:0,bottom:3}),Ni),h0=(t,s,a)=>jr(g0(t,s),Jh(t,s),a.northwest(),qb(),"northwest",Xo(t,{right:1,bottom:3}),Ni),vg=()=>[tk,Bi,w1,h0],p0=()=>[Bi,tk,h0,w1],b0=(t,s,a)=>{const l=By(a,s.item.element),d=gg(t.element,s,vg(),p0(),vg(),p0(),O.none());return O.some(a0({anchorBox:l,bubble:r0(),overrides:s.overrides,layouts:d}))};var nk=[Ce("item"),dm(),fe("overrides",{}),Ho("placement",b0)],Xy=Hs("type",{selection:Xh,node:Z_,hotspot:Hy,submenu:nk,makeshift:F_});const Yy=[bc("classes",hs),Ha("mode","all",["all","layout","placement"])],v0=[fe("useFixed",jn),oo("getBounds")],y0=[ec("anchor",Xy),Ms("transition",Yy)],Cu=()=>{const t=document.documentElement;return x_(0,0,t.clientWidth,t.clientHeight)},ok=t=>{const s=xa(t.element),a=t.element.dom.getBoundingClientRect();return S_(s.left,s.top,a.width,a.height)},sk=(t,s,a,l,d,g)=>{const p=Kw(s.anchorBox,t);return aS(p,l.element,s.bubble,s.layouts,d,a,s.overrides,g)},SS=(t,s,a,l,d)=>{const g=O.none();Qh(t,s,a,l,d,g)},Qh=(t,s,a,l,d,g)=>{const p=sa("placement.info",Bt(y0),d),C=p.anchor,S=l.element,k=a.get(l.uid);u1(()=>{Xt(S,"position","fixed");const D=Gs(S,"visibility");Xt(S,"visibility","hidden");const B=s.useFixed()?Cu():ok(t);C.placement(t,C,B).each(P=>{const H=g.orThunk(()=>s.getBounds.map(Os)),Z=sk(B,P,H,l,k,p.transition);a.set(l.uid,Z)}),D.fold(()=>{Ln(S,"visibility")},P=>{Xt(S,"visibility",P)}),Gs(S,"left").isNone()&&Gs(S,"top").isNone()&&Gs(S,"right").isNone()&&Gs(S,"bottom").isNone()&&va(Gs(S,"position"),"fixed")&&Ln(S,"position")},S)};var ND=Object.freeze({__proto__:null,position:SS,positionWithinBounds:Qh,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,l)=>{const d=l.element;De(["position","left","right","top","bottom"],g=>Ln(d,g)),E_(d),a.clear(l.uid)}}),yd=Object.freeze({__proto__:null,init:()=>{let t={};return nc({readState:()=>t,clear:d=>{Fs(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>Qe(t,d)})}});const Ua=da({fields:v0,name:"positioning",active:Ry,apis:ND,state:yd}),Sf=t=>t.getSystem().isConnected(),fa=t=>{lo(t,am());const s=t.components();De(s,fa)},Kr=t=>{const s=t.components();De(s,Kr),lo(t,Pc())},Oa=(t,s)=>{t.getSystem().addToWorld(s),$a(t.element)&&Kr(s)},xl=t=>{fa(t),t.getSystem().removeFromWorld(t)},C0=(t,s)=>{Xa(t.element,s.element)},$i=t=>{De(t.components(),s=>Ya(s.element)),qu(t.element),t.syncComponents()},yg=(t,s,a)=>{const l=t.components();$i(t);const d=a(s),g=Ct(l,d);De(g,p=>{fa(p),t.getSystem().removeFromWorld(p)}),De(d,p=>{Sf(p)?C0(t,p):(t.getSystem().addToWorld(p),C0(t,p),$a(t.element)&&Kr(p))}),t.syncComponents()},ak=(t,s,a)=>{const l=t.components(),d=me(s,C=>dw(C).toArray());De(l,C=>{Tn(d,C)||xl(C)});const g=a(s),p=Ct(l,g);De(p,C=>{Sf(C)&&xl(C)}),De(g,C=>{Sf(C)||Oa(t,C)}),t.syncComponents()},Cd=(t,s)=>{S1(t,s,Xa)},S1=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),$a(t.element)&&Kr(s),t.syncComponents()},w0=t=>{fa(t),Ya(t.element),t.getSystem().removeFromWorld(t)},wd=t=>{const s=Ac(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());w0(t),s.each(a=>{a.syncComponents()})},x1=t=>{const s=t.components();De(s,w0),qu(t.element),t.syncComponents()},S0=(t,s)=>{Jy(t,s,Xa)},Cg=(t,s)=>{Jy(t,s,lu)},Jy=(t,s,a)=>{a(t,s.element);const l=Oc(s.element);De(l,d=>{s.getByDom(d).each(Kr)})},xS=t=>{const s=Oc(t.element);De(s,a=>{t.getByDom(a).each(fa)}),Ya(t.element)},Qy=(t,s,a,l)=>{a.get().each(p=>{x1(t)});const d=s.getAttachPoint(t);Cd(d,t);const g=t.getSystem().build(l);return Cd(t,g),a.set(g),g},fm=(t,s,a,l)=>{const d=Qy(t,s,a,l);return s.onOpen(t,d),d},ES=(t,s,a,l)=>a.get().map(()=>Qy(t,s,a,l)),Pi=(t,s,a,l,d)=>{TS(t,s),fm(t,s,a,l),d(),n2(t,s)},e2=(t,s,a)=>{a.get().each(l=>{x1(t),wd(t),s.onClose(t,l),a.clear()})},t2=(t,s,a)=>a.isOpen(),ck=(t,s,a,l)=>t2(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,l)),BD=(t,s,a)=>a.get(),lk=(t,s,a,l)=>{Gs(t.element,s).fold(()=>{ws(t.element,a)},d=>{gn(t.element,a,d)}),Xt(t.element,s,l)},ik=(t,s,a)=>{Ds(t.element,a).fold(()=>Ln(t.element,s),l=>Xt(t.element,s,l))},TS=(t,s,a)=>{const l=s.getAttachPoint(t);Xt(t.element,"position",Ua.getMode(l)),lk(t,"visibility",s.cloakVisibilityAttr,"hidden")},Xl=t=>ko(["top","left","right","bottom"],s=>Gs(t,s).isSome()),n2=(t,s,a)=>{Xl(t.element)||Ln(t.element,"position"),ik(t,"visibility",s.cloakVisibilityAttr)};var x0=Object.freeze({__proto__:null,cloak:TS,decloak:n2,open:fm,openWhileCloaked:Pi,close:e2,isOpen:t2,isPartOf:ck,getState:BD,setContent:ES}),E1=Object.freeze({__proto__:null,events:(t,s)=>ss([Pe(of(),(a,l)=>{e2(a,t,s)})])}),uk=[_n("onOpen"),_n("onClose"),Ce("isPartOf"),Ce("getAttachPoint"),fe("cloakVisibilityAttr","data-precloak-visibility")],T1=Object.freeze({__proto__:null,init:()=>{const t=Fo(),s=q("not-implemented");return nc({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Wn=da({fields:uk,name:"sandboxing",active:E1,apis:x0,state:T1}),gm=q("dismiss.popups"),tp=q("reposition.popups"),E0=q("mouse.released"),_S=oa([fe("isExtraPart",jn),Ms("fireEventInstead",[fe("event",cm())])]),T0=t=>{const s=sa("Dismissal",_S,t);return{[gm()]:{schema:oa([Ce("target")]),onReceive:(a,l)=>{Wn.isOpen(a)&&(Wn.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>Wn.close(a),g=>lo(a,g.event)))}}}},_1=oa([Ms("fireEventInstead",[fe("event",ny())]),$c("doReposition")]),k1=t=>{const s=sa("Reposition",_1,t);return{[tp()]:{onReceive:a=>{Wn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>lo(a,l.event))}}}},o2=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},s2=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var wg=Object.freeze({__proto__:null,onLoad:o2,onUnload:s2,setValue:(t,s,a,l)=>{s.store.manager.setValue(t,s,a,l)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),dk=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[rs((l,d)=>{o2(l,t,s)}),Ai((l,d)=>{s2(l,t,s)})]:[l1(t,s,o2)];return ss(a)}});const r2=()=>{const t=Lt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return nc({set:t.set,get:t.get,isNotSet:a,clear:l,readState:s})},a2=()=>nc({readState:ee}),hm=()=>{const t=Lt({}),s=Lt({});return nc({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>Qe(t.get(),p).orThunk(()=>Qe(s.get(),p)),update:p=>{const C=t.get(),S=s.get(),k={},D={};De(p,B=>{k[B.value]=B,Qe(B,"meta").each(P=>{Qe(P,"text").each(H=>{D[H]=B})})}),t.set({...C,...k}),s.set({...S,...D})},clear:()=>{t.set({}),s.set({})}})};var np=Object.freeze({__proto__:null,memory:r2,dataset:hm,manual:a2,init:t=>t.store.manager.state(t)});const Sd=(t,s,a,l)=>{const d=s.store;a.update([l]),d.setValue(t,l),s.onSetValue(t,l)},c2=(t,s,a)=>{const l=s.store,d=l.getDataKey(t);return a.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},AS=(t,s,a)=>{s.store.initialValue.each(d=>{Sd(t,s,a,d)})},A1=(t,s,a)=>{a.clear()};var l2=[oo("initialValue"),Ce("getFallbackEntry"),Ce("getDataKey"),Ce("setValue"),Ho("manager",{setValue:Sd,getValue:c2,onLoad:AS,onUnload:A1,state:hm})];const O0=(t,s,a)=>s.store.getValue(t),Sg=(t,s,a,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},OS=(t,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var mk=[Ce("getValue"),fe("setValue",ee),oo("initialValue"),Ho("manager",{setValue:Sg,getValue:O0,onLoad:OS,onUnload:ee,state:yc.init})];const DS=(t,s,a,l)=>{a.set(l),s.onSetValue(t,l)},i2=(t,s,a)=>a.get(),op=(t,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},u2=(t,s,a)=>{a.clear()};var sp=[oo("initialValue"),Ho("manager",{setValue:DS,getValue:i2,onLoad:op,onUnload:u2,state:r2})],fk=[aa("store",{mode:"memory"},Hs("mode",{memory:sp,manual:mk,dataset:l2})),_n("onSetValue"),fe("resetOnDom",!1)];const ut=da({fields:fk,name:"representing",active:dk,apis:wg,extra:{setValueFrom:(t,s)=>{const a=ut.getValue(s);ut.setValue(t,a)}},state:np}),Ts=(t,s)=>od(t,{},ke(s,a=>Yv(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Ia("dump",mn)])),rp=t=>t.dump,Js=(t,s)=>({...Xe(s),...t.dump}),rl={field:Ts,augment:Js,get:rp},d2="placeholder",xg=w.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),O1=t=>Qn(t,"uiType"),D0=(t,s,a,l)=>t.exists(d=>d!==a.owner)?xg.single(!0,q(a)):Qe(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Qo(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),RS=(t,s,a,l)=>O1(a)&&a.uiType===d2?D0(t,s,a,l):xg.single(!1,q(a)),Yl=(t,s,a,l)=>RS(t,s,a,l).fold((g,p)=>{const C=O1(a)?p(s,a.config,a.validated):p(s),S=Qe(C,"components").getOr([]),k=me(S,D=>Yl(t,s,D,l));return[{...C,components:k}]},(g,p)=>{if(O1(a)){const C=p(s,a.config,a.validated);return a.validated.preprocess.getOr(mn)(C)}else return p(s)}),gk=(t,s,a,l)=>me(a,d=>Yl(t,s,d,l)),MS=(t,s)=>{let a=!1;const l=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,C)=>p,(p,C)=>p);return{name:q(t),required:g,used:l,replace:d}},El=(t,s,a,l)=>{const d=Mo(l,(p,C)=>MS(C,p)),g=gk(t,s,a,d);return Is(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Er=xg.single,NS=xg.multiple,R0=q(d2),xd=w.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),D1=fe("factory",{sketch:mn}),R1=fe("schema",[]),M0=Ce("name"),m2=yr("pname","pname",Fa(t=>"<alloy."+pt(t.name)+">"),Nc()),BS=Ia("schema",()=>[oo("preprocess")]),Eg=fe("defaults",q({})),pm=fe("overrides",q({})),hk=Bt([D1,R1,M0,m2,Eg,pm]),f2=Bt([D1,R1,M0,Eg,pm]),N0=Bt([D1,R1,M0,m2,Eg,pm]),$S=Bt([D1,BS,M0,Ce("unit"),m2,Eg,pm]),g2=t=>t.fold(O.some,O.none,O.some,O.some),Tg=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},PS=t=>t.fold(mn,mn,mn,mn),Ed=(t,s)=>a=>{const l=sa("Converting part type",s,a);return t(l)},Qs=Ed(xd.required,hk),Fi=Ed(xd.external,f2),Jl=Ed(xd.optional,N0),B0=Ed(xd.group,$S),Su=q("entirety");var FS=Object.freeze({__proto__:null,required:Qs,external:Fi,optional:Jl,group:B0,asNamedPart:g2,name:Tg,asCommon:PS,original:Su});const h2=(t,s,a,l)=>Lo(s.defaults(t,a,l),a,{uid:t.partUids[s.name]},s.overrides(t,a,l)),$0=(t,s,a)=>{const l={},d={};return De(a,g=>{g.fold(p=>{l[p.pname]=Er(!0,(C,S,k)=>p.factory.sketch(h2(C,p,S,k)))},p=>{const C=s.parts[p.name];d[p.name]=q(p.factory.sketch(h2(s,p,C[Su()]),C))},p=>{l[p.pname]=Er(!1,(C,S,k)=>p.factory.sketch(h2(C,p,S,k)))},p=>{l[p.pname]=NS(!0,(C,S,k)=>{const D=C[p.name];return ke(D,B=>p.factory.sketch(Lo(p.defaults(C,B,k),B,p.overrides(C,B))))})})}),{internals:q(l),externals:q(d)}},p2=(t,s)=>{const a={};return De(s,l=>{g2(l).each(d=>{const g=pk(t,d.pname);a[d.name]=p=>{const C=sa("Part: "+d.name+" in "+t,Bt(d.schema),p);return{...g,config:p,validated:C}}})}),a},pk=(t,s)=>({uiType:R0(),owner:t,name:s}),P0=(t,s,a)=>({uiType:R0(),owner:t,name:s,config:a,validated:{}}),M1=t=>me(t,s=>s.fold(O.none,O.some,O.none,O.none).map(a=>td(a.name,a.schema.concat([Nw(Su())]))).toArray()),IS=t=>ke(t,Tg),b2=(t,s,a)=>$0(t,s,a),v2=(t,s,a)=>El(O.some(t),s,s.components,a),Vo=(t,s,a)=>{const l=s.partUids[a];return t.getSystem().getByUid(l).toOptional()},bm=(t,s,a)=>Vo(t,s,a).getOrDie("Could not find part: "+a),LS=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return De(a,p=>{l[p]=q(g.getByUid(d[p]))}),l},HS=(t,s)=>{const a=t.getSystem();return Mo(s.partUids,(l,d)=>q(a.getByUid(l)))},VS=t=>Qo(t.partUids),y2=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return De(a,p=>{l[p]=q(g.getByUid(d[p]).getOrDie())}),l},zS=(t,s)=>{const a=IS(s);return ct(ke(a,l=>({key:l,value:t+"-"+l})))},C2=t=>yr("partUids","partUids",Jd(s=>zS(s.uid,t)),Nc());var US=Object.freeze({__proto__:null,generate:p2,generateOne:P0,schemas:M1,names:IS,substitutes:b2,components:v2,defaultUids:zS,defaultUidsSchema:C2,getAllParts:HS,getAllPartNames:VS,getPart:Vo,getPartOrDie:bm,getParts:LS,getPartsOrDie:y2});const WS=(t,s)=>(t.length>0?[td("parts",t)]:[]).concat([Ce("uid"),fe("dom",{}),fe("components",[]),Nw("originalSpec"),fe("debug.sketcher",{})]).concat(s),w2=(t,s,a,l,d)=>{const g=WS(l,d);return sa(t+" [SpecSchema]",oa(g.concat(s)),a)},ZS=(t,s,a,l)=>{const d=_g(l),g=w2(t,s,d,[],[]);return a(g,d)},S2=(t,s,a,l,d)=>{const g=_g(d),p=M1(a),C=C2(a),S=w2(t,s,g,p,[C]),k=b2(t,S,a),D=v2(t,S,k.internals());return l(S,D,g,k.externals())},jS=t=>Qn(t,"uid"),_g=t=>jS(t)?t:{...t,uid:cd("uid")},ap=t=>t.uid!==void 0,x2=oa([Ce("name"),Ce("factory"),Ce("configFields"),fe("apis",{}),fe("extraApis",{})]),bk=oa([Ce("name"),Ce("factory"),Ce("configFields"),Ce("partFields"),fe("apis",{}),fe("extraApis",{})]),ir=t=>{const s=sa("Sketcher for "+t.name,x2,t),a=g=>ZS(s.name,s.configFields,s.factory,g),l=Mo(s.apis,Ib),d=Mo(s.extraApis,(g,p)=>Qp(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...l,...d}},Tr=t=>{const s=sa("Sketcher for "+t.name,bk,t),a=p=>S2(s.name,s.configFields,s.partFields,s.factory,p),l=p2(s.name,s.partFields),d=Mo(s.apis,Ib),g=Mo(s.extraApis,(p,C)=>Qp(p,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l,...d,...g}},cp=t=>kc("input")(t)&&zr(t,"type")!=="radio"||kc("textarea")(t);var vk=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const gt=[Ce("find")],En=da({fields:gt,name:"composing",apis:vk}),yk=["input","button","textarea","select"],E2=(t,s,a)=>{(s.disabled()?B1:kg)(t,s)},lp=(t,s)=>s.useNative===!0&&Tn(yk,_c(t.element)),T2=t=>eh(t.element,"disabled"),Ck=t=>{gn(t.element,"disabled","disabled")},F0=t=>{ws(t.element,"disabled")},wk=t=>zr(t.element,"aria-disabled")==="true",Sk=t=>{gn(t.element,"aria-disabled","true")},GS=t=>{gn(t.element,"aria-disabled","false")},B1=(t,s,a)=>{s.disableClass.each(d=>{wr(t.element,d)}),(lp(t,s)?Ck:Sk)(t),s.onDisabled(t)},kg=(t,s,a)=>{s.disableClass.each(d=>{Oo(t.element,d)}),(lp(t,s)?F0:GS)(t),s.onEnabled(t)},_2=(t,s)=>lp(t,s)?T2(t):wk(t);var qS=Object.freeze({__proto__:null,enable:kg,disable:B1,isDisabled:_2,onLoad:E2,set:(t,s,a,l)=>{(l?B1:kg)(t,s)}}),KS=Object.freeze({__proto__:null,exhibit:(t,s)=>wl({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>ss([Yp(Cl(),(a,l)=>_2(a,t)),l1(t,s,E2)])}),LD=[xs("disabled",jn),fe("useNative",!0),oo("disableClass"),_n("onDisabled"),_n("onEnabled")];const zt=da({fields:LD,name:"disabling",active:KS,apis:qS}),xk=(t,s,a,l)=>{const d=Cc(t.element,"."+s.highlightClass);De(d,g=>{ko(l,C=>Ao(C.element,g))||(Oo(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),lo(C,Db())}))})},HD=(t,s,a)=>xk(t,s,a,[]),k2=(t,s,a,l)=>{xu(t,s,a,l)&&(Oo(l.element,s.highlightClass),s.onDehighlight(t,l),lo(l,Db()))},$1=(t,s,a,l)=>{xk(t,s,a,[l]),xu(t,s,a,l)||(wr(l.element,s.highlightClass),s.onHighlight(t,l),lo(l,lw()))},VD=(t,s,a)=>{O2(t,s).each(l=>{$1(t,s,a,l)})},I0=(t,s,a)=>{D2(t,s).each(l=>{$1(t,s,a,l)})},Ek=(t,s,a,l)=>{A2(t,s,a,l).fold(d=>{throw d},d=>{$1(t,s,a,d)})},Tk=(t,s,a,l)=>{const d=H0(t,s);Me(d,l).each(p=>{$1(t,s,a,p)})},xu=(t,s,a,l)=>as(l.element,s.highlightClass),L0=(t,s,a)=>lr(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),A2=(t,s,a,l)=>{const d=Cc(t.element,"."+s.itemClass);return O.from(d[l]).fold(()=>St.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},O2=(t,s,a)=>lr(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),D2=(t,s,a)=>{const l=Cc(t.element,"."+s.itemClass);return(l.length>0?O.some(l[l.length-1]):O.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},R2=(t,s,a,l)=>{const d=Cc(t.element,"."+s.itemClass);return Ie(d,p=>as(p,s.highlightClass)).bind(p=>{const C=Uh(p,l,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},_k=(t,s,a)=>R2(t,s,a,-1),kk=(t,s,a)=>R2(t,s,a,1),H0=(t,s,a)=>{const l=Cc(t.element,"."+s.itemClass);return Dl(ke(l,d=>t.getSystem().getByDom(d).toOptional()))};var Ag=Object.freeze({__proto__:null,dehighlightAll:HD,dehighlight:k2,highlight:$1,highlightFirst:VD,highlightLast:I0,highlightAt:Ek,highlightBy:Tk,isHighlighted:xu,getHighlighted:L0,getFirst:O2,getLast:D2,getPrevious:_k,getNext:kk,getCandidates:H0}),V0=[Ce("highlightClass"),Ce("itemClass"),_n("onHighlight"),_n("onDehighlight")];const to=da({fields:V0,name:"highlighting",apis:Ag}),XS=[8],Td=[9],Ql=[13],z0=[27],al=[32],P1=[37],Og=[38],U0=[39],Dg=[40],zD=(t,s,a)=>{const l=Zo(t.slice(0,s)),d=Zo(t.slice(s+1));return Me(l.concat(d),a)},Ak=(t,s,a)=>{const l=Zo(t.slice(0,s));return Me(l,a)},Ok=(t,s,a)=>{const l=t.slice(0,s),d=t.slice(s+1);return Me(d.concat(l),a)},UD=(t,s,a)=>{const l=t.slice(s+1);return Me(l,a)},Xn=t=>s=>{const a=s.raw;return Tn(t,a.which)},Tl=t=>s=>ro(t,a=>a(s)),Rg=t=>t.raw.shiftKey===!0,W0=t=>t.raw.ctrlKey===!0,xf=Oe(Rg),Hn=(t,s)=>({matches:t,classification:s}),vm=(t,s)=>Me(t,l=>l.matches(s)).map(l=>l.classification),Dk=(t,s,a)=>{s.exists(d=>a.exists(g=>Ao(g,d)))||Mt(t,cw(),{prevFocus:s,newFocus:a})},M2=()=>{const t=a=>Ri(a.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().triggerFocus(l,a.element);const g=t(a);Dk(a,d,g)}}},Rk=()=>{const t=a=>to.getHighlighted(a).map(l=>l.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().getByDom(l).fold(ee,p=>{to.highlight(a,p)});const g=t(a);Dk(a,d,g)}}};var Mg;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Mg||(Mg={}));const Ef=(t,s,a,l,d)=>{const g=()=>t.concat([fe("focusManager",M2()),aa("focusInside","onFocus",ed(k=>Tn(["onFocus","onEnterOrSpace","onApi"],k)?St.value(k):St.error("Invalid value for focusInside"))),Ho("handler",S),Ho("state",s),Ho("sendFocusIn",d)]),p=(k,D,B,P,H)=>{const Z=B(k,D,P,H);return vm(Z,D.event).bind(J=>J(k,D,P,H))},S={schema:g,processKey:p,toEvents:(k,D)=>{const B=k.focusInside!==Mg.OnFocusMode?O.none():d(k).map(Z=>Pe(rd(),(J,ge)=>{Z(J,k,D),ge.stop()})),P=(Z,J)=>{const ge=Xn(al.concat(Ql))(J.event);k.focusInside===Mg.OnEnterOrSpaceMode&&ge&&tl(Z,J)&&d(k).each(ie=>{ie(Z,k,D),J.stop()})},H=[Pe(vc(),(Z,J)=>{p(Z,J,a,k,D).fold(()=>{P(Z,J)},ge=>{J.stop()})}),Pe(sw(),(Z,J)=>{p(Z,J,l,k,D).each(ge=>{J.stop()})})];return ss(B.toArray().concat(H))}};return S},YS=t=>{const s=[oo("onEscape"),oo("onEnter"),fe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),fe("firstTabstop",0),fe("useTabstopAt",Ot),oo("visibilitySelector")].concat([t]),a=(J,ge)=>{const ie=J.visibilitySelector.bind(re=>ol(ge,re)).getOr(ge);return ys(ie)>0},l=(J,ge)=>{const ie=Cc(J.element,ge.selector),re=qn(ie,Ee=>a(ge,Ee));return O.from(re[ge.firstTabstop])},d=(J,ge)=>ge.focusManager.get(J).bind(ie=>ol(ie,ge.selector)),g=(J,ge)=>a(J,ge)&&J.useTabstopAt(ge),p=(J,ge,ie)=>{l(J,ge).each(re=>{ge.focusManager.set(J,re)})},C=(J,ge,ie,re,Ee)=>Ee(ge,ie,Re=>g(re,Re)).fold(()=>re.cyclic?O.some(!0):O.none(),Re=>(re.focusManager.set(J,Re),O.some(!0))),S=(J,ge,ie,re)=>{const Ee=Cc(J.element,ie.selector);return d(J,ie).bind(Re=>Ie(Ee,It(Ao,Re)).bind(Le=>C(J,Ee,Le,ie,re)))},k=(J,ge,ie)=>{const re=ie.cyclic?zD:Ak;return S(J,ge,ie,re)},D=(J,ge,ie)=>{const re=ie.cyclic?Ok:UD;return S(J,ge,ie,re)},B=(J,ge,ie)=>ie.onEnter.bind(re=>re(J,ge)),P=(J,ge,ie)=>ie.onEscape.bind(re=>re(J,ge)),H=q([Hn(Tl([Rg,Xn(Td)]),k),Hn(Xn(Td),D),Hn(Tl([xf,Xn(Ql)]),B)]),Z=q([Hn(Xn(z0),P)]);return Ef(s,yc.init,H,Z,()=>O.some(p))};var i=YS(Ia("cyclic",jn)),m=YS(Ia("cyclic",Ot));const h=(t,s,a)=>(oy(t,a,Cl()),O.some(!0)),v=(t,s,a)=>cp(a)&&Xn(al)(s.event)?O.none():h(t,s,a),x=(t,s)=>O.some(!0),A=[fe("execute",v),fe("useSpace",!1),fe("useEnter",!0),fe("useControlEnter",!1),fe("useDown",!1)],$=(t,s,a)=>a.execute(t,s,t.element),z=(t,s,a,l)=>{const d=a.useSpace&&!cp(t.element)?al:[],g=a.useEnter?Ql:[],p=a.useDown?Dg:[],C=d.concat(g).concat(p);return[Hn(Xn(C),$)].concat(a.useControlEnter?[Hn(Tl([W0,Xn(Ql)]),$)]:[])},j=(t,s,a,l)=>a.useSpace&&!cp(t.element)?[Hn(Xn(al),x)]:[];var Q=Ef(A,yc.init,z,j,()=>O.none());const de=()=>{const t=Fo();return nc({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var lt=Object.freeze({__proto__:null,flatgrid:de,init:t=>t.state(t)});const nt=t=>(s,a,l,d)=>{const g=t(s.element);return yt(g,s,a,l,d)},Ne=(t,s)=>{const a=Ly(t,s);return nt(a)},st=(t,s)=>{const a=Ly(s,t);return nt(a)},Ae=t=>(s,a,l,d)=>yt(t,s,a,l,d),yt=(t,s,a,l,d)=>l.focusManager.get(s).bind(p=>t(s.element,p,l,d)).map(p=>(l.focusManager.set(s,p),!0)),Yt=Ae,vn=Ae,Yo=Ae,ga=t=>t.offsetWidth<=0&&t.offsetHeight<=0,zs=t=>!ga(t.dom),cl=(t,s)=>Ie(t,s).map(a=>({index:a,candidates:t})),Ng=(t,s,a)=>{const l=p=>Ao(p,s),d=Cc(t,a),g=qn(d,zs);return cl(g,l)},Tf=(t,s)=>Ie(t,a=>Ao(s,a)),Z0=(t,s,a,l)=>{const d=Math.floor(s/a),g=s%a;return l(d,g).bind(p=>{const C=p.row*a+p.column;return C>=0&&C<t.length?O.some(t[C]):O.none()})},F1=(t,s,a,l,d)=>Z0(t,s,l,(g,p)=>{const S=g===a-1?t.length-g*l:l,k=Uh(p,d,0,S-1);return O.some({row:g,column:k})}),vo=(t,s,a,l,d)=>Z0(t,s,l,(g,p)=>{const C=Uh(g,d,0,a-1),k=C===a-1?t.length-C*l:l,D=Lc(p,0,k-1);return O.some({row:C,column:D})}),wc=(t,s,a,l)=>F1(t,s,a,l,1),cc=(t,s,a,l)=>F1(t,s,a,l,-1),Ii=(t,s,a,l)=>vo(t,s,a,l,-1),_l=(t,s,a,l)=>vo(t,s,a,l,1),Bg=[Ce("selector"),fe("execute",v),ua("onEscape"),fe("captureTab",!1),Bw()],Sc=(t,s,a)=>{lr(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},N2=(t,s)=>s.focusManager.get(t).bind(a=>ol(a,s.selector)),I1=(t,s,a,l)=>N2(t,a).bind(d=>a.execute(t,s,d)),ei=t=>(s,a,l,d)=>Ng(s,a,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),Da=(t,s,a)=>a.captureTab?O.some(!0):O.none(),Mk=(t,s,a)=>a.onEscape(t,s),j0=ei(cc),G0=ei(wc),Nk=ei(Ii),WD=ei(_l),q0=q([Hn(Xn(P1),Ne(j0,G0)),Hn(Xn(U0),st(j0,G0)),Hn(Xn(Og),Yt(Nk)),Hn(Xn(Dg),vn(WD)),Hn(Tl([Rg,Xn(Td)]),Da),Hn(Tl([xf,Xn(Td)]),Da),Hn(Xn(al.concat(Ql)),I1)]),Bk=q([Hn(Xn(z0),Mk),Hn(Xn(al),x)]);var L1=Ef(Bg,de,q0,Bk,()=>O.some(Sc));const Li=(t,s,a,l,d)=>{const g=C=>_c(C)==="button"&&zr(C,"disabled")==="disabled",p=(C,S,k)=>d(C,S,l,0,k.length-1,k[S],D=>g(k[D])?p(C,D,k):O.from(k[D]));return Ng(t,a,s).bind(C=>{const S=C.index,k=C.candidates;return p(S,S,k)})},ZD=(t,s,a,l)=>Li(t,s,a,l,(d,g,p,C,S,k,D)=>{const B=Lc(g+p,C,S);return B===d?O.from(k):D(B)}),JS=(t,s,a,l)=>Li(t,s,a,l,(d,g,p,C,S,k,D)=>{const B=Uh(g,p,C,S);return B===d?O.none():D(B)}),iF=[Ce("selector"),fe("getInitial",O.none),fe("execute",v),ua("onEscape"),fe("executeOnMove",!1),fe("allowVertical",!0),fe("allowHorizontal",!0),fe("cycles",!0)],uF=(t,s)=>s.focusManager.get(t).bind(a=>ol(a,s.selector)),$k=(t,s,a)=>uF(t,a).bind(l=>a.execute(t,s,l)),K0=(t,s,a)=>{s.getInitial(t).orThunk(()=>lr(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},QS=(t,s,a)=>(a.cycles?JS:ZD)(t,a.selector,s,-1),jD=(t,s,a)=>(a.cycles?JS:ZD)(t,a.selector,s,1),ex=t=>(s,a,l,d)=>t(s,a,l,d).bind(()=>l.executeOnMove?$k(s,a,l):O.some(!0)),tx=(t,s,a)=>a.onEscape(t,s),Pk=(t,s,a,l)=>{const d=[...a.allowHorizontal?P1:[]].concat(a.allowVertical?Og:[]),g=[...a.allowHorizontal?U0:[]].concat(a.allowVertical?Dg:[]);return[Hn(Xn(d),ex(Ne(QS,jD))),Hn(Xn(g),ex(st(QS,jD))),Hn(Xn(Ql),$k),Hn(Xn(al),$k)]},dF=q([Hn(Xn(al),x),Hn(Xn(z0),tx)]);var mF=Ef(iF,yc.init,Pk,dF,()=>O.some(K0));const nx=(t,s,a)=>O.from(t[s]).bind(l=>O.from(l[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),GD=(t,s,a,l)=>{const g=t[s].length,p=Uh(a,l,0,g-1);return nx(t,s,p)},qD=(t,s,a,l)=>{const d=Uh(a,l,0,t.length-1),g=t[d].length,p=Lc(s,0,g-1);return nx(t,d,p)},KD=(t,s,a,l)=>{const g=t[s].length,p=Lc(a+l,0,g-1);return nx(t,s,p)},Fk=(t,s,a,l)=>{const d=Lc(a+l,0,t.length-1),g=t[d].length,p=Lc(s,0,g-1);return nx(t,d,p)},Ik=(t,s,a)=>GD(t,s,a,1),fF=(t,s,a)=>GD(t,s,a,-1),gF=(t,s,a)=>qD(t,a,s,-1),hF=(t,s,a)=>qD(t,a,s,1),pF=(t,s,a)=>KD(t,s,a,-1),H1=(t,s,a)=>KD(t,s,a,1),bF=(t,s,a)=>Fk(t,a,s,-1),vF=(t,s,a)=>Fk(t,a,s,1),Lk=[td("selectors",[Ce("row"),Ce("cell")]),fe("cycles",!0),fe("previousSelector",O.none),fe("execute",v)],yF=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return lr(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},XD=(t,s,a)=>Ri(t.element).bind(l=>a.execute(t,s,l)),YD=(t,s)=>ke(t,a=>Cc(a,s.selectors.cell)),B2=(t,s)=>(a,l,d)=>{const g=d.cycles?t:s;return ol(l,d.selectors.row).bind(p=>{const C=Cc(p,d.selectors.cell);return Tf(C,l).bind(S=>{const k=Cc(a,d.selectors.row);return Tf(k,p).bind(D=>{const B=YD(k,d);return g(B,D,S).map(P=>P.cell)})})})},Hk=B2(fF,pF),JD=B2(Ik,H1),CF=B2(gF,bF),wF=B2(hF,vF),Vk=q([Hn(Xn(P1),Ne(Hk,JD)),Hn(Xn(U0),st(Hk,JD)),Hn(Xn(Og),Yt(CF)),Hn(Xn(Dg),vn(wF)),Hn(Xn(al.concat(Ql)),XD)]),SF=q([Hn(Xn(al),x)]);var xF=Ef(Lk,yc.init,Vk,SF,()=>O.some(yF));const EF=[Ce("selector"),fe("execute",v),fe("moveOnTab",!1)],QD=(t,s,a)=>a.focusManager.get(t).bind(l=>a.execute(t,s,l)),eR=(t,s,a)=>{lr(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},tR=(t,s,a)=>JS(t,a.selector,s,-1),nR=(t,s,a)=>JS(t,a.selector,s,1),TF=(t,s,a,l)=>a.moveOnTab?Yo(tR)(t,s,a,l):O.none(),oR=(t,s,a,l)=>a.moveOnTab?Yo(nR)(t,s,a,l):O.none(),_F=q([Hn(Xn(Og),Yo(tR)),Hn(Xn(Dg),Yo(nR)),Hn(Tl([Rg,Xn(Td)]),TF),Hn(Tl([xf,Xn(Td)]),oR),Hn(Xn(Ql),QD),Hn(Xn(al),QD)]),kF=q([Hn(Xn(al),x)]);var sR=Ef(EF,yc.init,_F,kF,()=>O.some(eR));const AF=[ua("onSpace"),ua("onEnter"),ua("onShiftEnter"),ua("onLeft"),ua("onRight"),ua("onTab"),ua("onShiftTab"),ua("onUp"),ua("onDown"),ua("onEscape"),fe("stopSpaceKeyup",!1),oo("focusIn")],OF=(t,s,a)=>[Hn(Xn(al),a.onSpace),Hn(Tl([xf,Xn(Ql)]),a.onEnter),Hn(Tl([Rg,Xn(Ql)]),a.onShiftEnter),Hn(Tl([Rg,Xn(Td)]),a.onShiftTab),Hn(Tl([xf,Xn(Td)]),a.onTab),Hn(Xn(Og),a.onUp),Hn(Xn(Dg),a.onDown),Hn(Xn(P1),a.onLeft),Hn(Xn(U0),a.onRight),Hn(Xn(al),a.onSpace)],ox=(t,s,a)=>[...a.stopSpaceKeyup?[Hn(Xn(al),x)]:[],Hn(Xn(z0),a.onEscape)];var DF=Ef(AF,yc.init,OF,ox,t=>t.focusIn);const rR=i.schema(),kl=m.schema(),RF=mF.schema(),aR=L1.schema(),MF=xF.schema(),NF=Q.schema(),cR=sR.schema(),BF=DF.schema();var lR=Object.freeze({__proto__:null,acyclic:rR,cyclic:kl,flow:RF,flatgrid:aR,matrix:MF,execution:NF,menu:cR,special:BF});const iR=t=>ba(t,"setGridSize"),Pt=Ww({branchKey:"mode",branches:lR,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,a)})},setGridSize:(t,s,a,l,d)=>{iR(a)?a.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:lt}),uR=(t,s)=>{u1(()=>{yg(t,s,()=>ke(s,t.getSystem().build))},t.element)},dR=(t,s)=>{u1(()=>{ak(t,s,()=>vw(t.element,s,t.getSystem().buildOrPatch))},t.element)},$F=(t,s,a,l)=>{xl(s);const d=$h(t.element,a,l,t.getSystem().buildOrPatch);Oa(t,d),t.syncComponents()},sx=(t,s,a)=>{const l=t.getSystem().build(a);S1(t,l,s)},mR=(t,s,a,l)=>{wd(s),sx(t,(d,g)=>br(d,g,a),l)},ip=(t,s,a,l)=>(s.reuseDom?dR:uR)(t,l),fR=(t,s,a,l)=>{sx(t,Xa,l)},gR=(t,s,a,l)=>{sx(t,nh,l)},zk=(t,s,a,l)=>{const d=rx(t);Me(d,p=>Ao(l.element,p.element)).each(wd)},rx=(t,s)=>t.components(),hR=(t,s,a,l,d)=>{const g=rx(t);return O.from(g[l]).map(p=>(d.fold(()=>wd(p),C=>{(s.reuseDom?$F:mR)(t,p,l,C)}),p))};var PF=Object.freeze({__proto__:null,append:fR,prepend:gR,remove:zk,replaceAt:hR,replaceBy:(t,s,a,l,d)=>{const g=rx(t);return Ie(g,l).bind(p=>hR(t,s,a,p,d))},set:ip,contents:rx});const nn=da({fields:[ca("reuseDom",!0)],name:"replacing",apis:PF}),Uk=(t,s)=>{const a=ss(s);return da({fields:[Ce("enabled")],name:t,active:{events:q(a)}})},hn=(t,s)=>{const a=Uk(t,s);return{key:t,value:{config:{},me:a,configAsRaw:q({}),initialConfig:{},state:yc}}},pR=(t,s)=>{s.ignore||(ql(t.element),s.onFocus(t))};var bR=Object.freeze({__proto__:null,focus:pR,blur:(t,s)=>{s.ignore||Va(t.element)},isFocused:t=>hd(t.element)}),$2=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return wl(a)},events:t=>ss([Pe(rd(),(s,a)=>{pR(s,t),a.stop()})].concat(t.stopMousedown?[Pe(Sn(),(s,a)=>{a.event.prevent()})]:[]))}),P2=[_n("onFocus"),fe("stopMousedown",!1),fe("ignore",!1)];const Zt=da({fields:P2,name:"focusing",active:$2,apis:bR}),vR=t=>({init:()=>{const a=Lt(t);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(t),readState:()=>a.get()}}}),up=(t,s,a)=>{const l=s.aria;l.update(t,l,a.get())},dp=(t,s,a)=>{s.toggleClass.each(l=>{a.get()?wr(t.element,l):Oo(t.element,l)})},F2=(t,s,a,l)=>{const d=a.get();a.set(l),dp(t,s,a),up(t,s,a),d!==l&&s.onToggled(t,l)},yR=(t,s,a)=>{F2(t,s,a,!a.get())},CR=(t,s,a)=>{F2(t,s,a,!0)},$g=(t,s,a)=>{F2(t,s,a,!1)},Wk=(t,s,a)=>a.get(),Zk=(t,s,a)=>{F2(t,s,a,s.selected)};var wR=Object.freeze({__proto__:null,onLoad:Zk,toggle:yR,isOn:Wk,on:CR,off:$g,set:F2}),xR=Object.freeze({__proto__:null,exhibit:()=>wl({}),events:(t,s)=>{const a=g_(t,s,yR),l=l1(t,s,Zk);return ss(He([t.toggleOnExecute?[a]:[],[l]]))}});const LF=(t,s,a)=>{gn(t.element,"aria-pressed",a),s.syncWithExpanded&&I2(t,s,a)},HF=(t,s,a)=>{gn(t.element,"aria-selected",a)},VF=(t,s,a)=>{gn(t.element,"aria-checked",a)},I2=(t,s,a)=>{gn(t.element,"aria-expanded",a)};var jk=[fe("selected",!1),oo("toggleClass"),fe("toggleOnExecute",!0),_n("onToggled"),aa("aria",{mode:"none"},Hs("mode",{pressed:[fe("syncWithExpanded",!1),Ho("update",LF)],checked:[Ho("update",VF)],expanded:[Ho("update",I2)],selected:[Ho("update",HF)],none:[Ho("update",ee)]}))];const yn=da({fields:jk,name:"toggling",active:xR,apis:wR,state:vR(!1)}),ER=()=>{const t=(s,a)=>{a.stop(),rf(s)};return[Pe(Zl(),t),Pe(Gp(),t),ad(nl()),ad(Sn())]},ax=t=>{const s=a=>bu((l,d)=>{a(l),d.stop()});return ss(He([t.map(s).toArray(),ER()]))},Gk="alloy.item-hover",qk="alloy.item-focus",Kk="alloy.item-toggled",Xk=t=>{(Ri(t.element).isNone()||Zt.isFocused(t))&&(Zt.isFocused(t)||Zt.focus(t),Mt(t,Gk,{item:t}))},TR=t=>{Mt(t,qk,{item:t})},Yk=(t,s)=>{Mt(t,Kk,{item:t,state:s})},_R=q(Gk),zF=q(qk),UF=q(Kk),WF=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),kR=t=>({aria:{mode:"checked"},...mi(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{at(t.onToggled)&&t.onToggled(s,a),Yk(s,a)}}),ZF=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:WF(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:rl.augment(t.itemBehaviours,[t.toggling.fold(yn.revoke,s=>yn.config(kR(s))),Zt.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{TR(s)}}),Pt.config({mode:"execution"}),ut.config({store:{mode:"memory",initialValue:t.data}}),hn("item-type-events",[...ER(),Pe(gu(),Xk),Pe(Ch(),Zt.focus)])]),components:t.components,eventOrder:t.eventOrder}),jF=[Ce("data"),Ce("components"),Ce("dom"),fe("hasSubmenu",!1),oo("toggling"),rl.field("itemBehaviours",[yn,Zt,Pt,ut]),fe("ignoreFocus",!1),fe("domModification",{}),Ho("builder",ZF),fe("eventOrder",{})],AR=t=>({dom:t.dom,components:t.components,events:ss([Mb(Ch())])}),L2=[Ce("dom"),Ce("components"),Ho("builder",AR)],Jk=q("item-widget"),z1=q([Qs({name:"widget",overrides:t=>({behaviours:Xe([ut.config({store:{mode:"manual",getValue:s=>t.data,setValue:ee}})])})})]),Qk=t=>{const s=b2(Jk(),t,z1()),a=v2(Jk(),t,s.internals()),l=g=>Vo(g,t,"widget").map(p=>(Pt.focusIn(p),p)),d=(g,p)=>cp(p.event.target)?O.none():(()=>(t.autofocus&&p.setSource(g.element),O.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:ss([bu((g,p)=>{l(g).each(C=>{p.stop()})}),Pe(gu(),Xk),Pe(Ch(),(g,p)=>{t.autofocus?l(g):Zt.focus(g)})]),behaviours:rl.augment(t.widgetBehaviours,[ut.config({store:{mode:"memory",initialValue:t.data}}),Zt.config({ignore:t.ignoreFocus,onFocus:g=>{TR(g)}}),Pt.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:Zw(),onLeft:d,onRight:d,onEscape:(g,p)=>!Zt.isFocused(g)&&!t.autofocus?(Zt.focus(g),O.some(!0)):(t.autofocus&&p.setSource(g.element),O.none())})])}},OR=[Ce("uid"),Ce("data"),Ce("components"),Ce("dom"),fe("autofocus",!1),fe("ignoreFocus",!1),rl.field("widgetBehaviours",[ut,Zt,Pt]),fe("domModification",{}),C2(z1()),Ho("builder",Qk)],DR=Hs("type",{widget:OR,item:jF,separator:L2}),GF=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),qF=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),RR=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),KF=q([B0({factory:{sketch:t=>{const s=sa("menu.spec item",DR,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Qn(s,"uid")?s:{...s,uid:cd("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),MR=q([Ce("value"),Ce("items"),Ce("dom"),Ce("components"),fe("eventOrder",{}),Ts("menuBehaviours",[to,ut,En,Pt]),aa("movement",{mode:"menu",moveOnTab:!0},Hs("mode",{grid:[Bw(),Ho("config",GF)],matrix:[Ho("config",qF),Ce("rowSelector"),fe("previousSelector",O.none)],menu:[fe("moveOnTab",!0),Ho("config",RR)]})),Mw(),fe("fakeFocus",!1),fe("focusManager",M2()),_n("onHighlight"),_n("onDehighlight")]),NR=q("alloy.menu-focus"),XF=(t,s)=>{const a=Cc(t.element,'[role="menuitemradio"][aria-checked="true"]');De(a,l=>{Ao(l,s.element)||t.getSystem().getByDom(l).each(d=>{yn.off(d)})})},BR=(t,s,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Js(t.menuBehaviours,[to.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),ut.config({store:{mode:"memory",initialValue:t.value}}),En.config({find:O.some}),Pt.config(t.movement.config(t,t.movement))]),events:ss([Pe(zF(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(C=>{to.highlight(d,C),g.stop(),Mt(d,NR(),{menu:d,item:C})})}),Pe(_R(),(d,g)=>{const p=g.event.item;to.highlight(d,p)}),Pe(UF(),(d,g)=>{const{item:p,state:C}=g.event;C&&zr(p.element,"role")==="menuitemradio"&&XF(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),_f=Tr({name:"Menu",configFields:MR(),partFields:KF(),factory:BR}),e4=t=>Rm(t,(s,a)=>({k:s,v:a})),cx=(t,s,a,l)=>Qe(a,l).bind(d=>Qe(t,d).bind(g=>{const p=cx(t,s,a,g);return O.some([g].concat(p))})).getOr([]),YF=(t,s)=>{const a={};Is(t,(p,C)=>{De(p,S=>{a[S]=C})});const l=s,d=e4(s),g=Mo(d,(p,C)=>[C].concat(cx(a,l,d,C)));return Mo(a,p=>Qe(g,p).getOr([p]))},JF=()=>{const t=Lt({}),s=Lt({}),a=Lt({}),l=Fo(),d=Lt({}),g=()=>{t.set({}),s.set({}),a.set({}),l.clear()},p=()=>l.get().isNone(),C=(tt,Le)=>{s.set({...s.get(),[tt]:{type:"prepared",menu:Le}})},S=(tt,Le,rt,Dt)=>{l.set(tt),t.set(rt),s.set(Le),d.set(Dt);const Nn=YF(Dt,rt);a.set(Nn)},k=tt=>bs(t.get(),(Le,rt)=>Le===tt),D=(tt,Le,rt)=>J(tt).bind(Dt=>k(tt).bind(Nn=>Le(Nn).map(xt=>({triggeredMenu:Dt,triggeringItem:xt,triggeringPath:rt})))),B=(tt,Le)=>{const rt=qn(ie(tt).toArray(),Dt=>J(Dt).isSome());return Qe(a.get(),tt).bind(Dt=>{const Nn=Zo(rt.concat(Dt)),xt=me(Nn,(An,pn)=>D(An,Le,Nn.slice(0,pn+1)).fold(()=>va(l.get(),An)?[]:[O.none()],$n=>[O.some($n)]));return Ko(xt)})},P=tt=>Qe(t.get(),tt).map(Le=>{const rt=Qe(a.get(),tt).getOr([]);return[Le].concat(rt)}),H=tt=>Qe(a.get(),tt).bind(Le=>Le.length>1?O.some(Le.slice(1)):O.none()),Z=tt=>Qe(a.get(),tt),J=tt=>ge(tt).bind($R),ge=tt=>Qe(s.get(),tt),ie=tt=>Qe(t.get(),tt);return{setMenuBuilt:C,setContents:S,expand:P,refresh:Z,collapse:H,lookupMenu:ge,lookupItem:ie,otherMenus:tt=>{const Le=d.get();return Ct(Qo(Le),tt)},getPrimary:()=>l.get().bind(J),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:B}},$R=t=>t.type==="prepared"?O.some(t.menu):O.none(),PR={init:JF,extractPreparedMenu:$R},t4=pt("tiered-menu-item-highlight"),n4=pt("tiered-menu-item-dehighlight");var ll;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ll||(ll={}));const QF=(t,s)=>{const a=Fo(),l=(it,kt,mt)=>Mo(mt,(Gt,Cn)=>{const zn=()=>_f.sketch({...Gt,value:Cn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(mr,so)=>{Mt(mr,t4,{menuComp:mr,itemComp:so})},onDehighlight:(mr,so)=>{Mt(mr,n4,{menuComp:mr,itemComp:so})},focusManager:t.fakeFocus?Rk():M2()});return Cn===kt?{type:"prepared",menu:it.getSystem().build(zn())}:{type:"notbuilt",nbMenu:zn}}),d=PR.init(),g=it=>{const kt=l(it,t.data.primary,t.data.menus),mt=S();return d.setContents(t.data.primary,kt,t.data.expansions,mt),d.getPrimary()},p=it=>ut.getValue(it).value,C=(it,kt,mt)=>gr(kt,Gt=>{if(!Gt.getSystem().isConnected())return O.none();const Cn=to.getCandidates(Gt);return Me(Cn,zn=>p(zn)===mt)}),S=it=>Mo(t.data.menus,(kt,mt)=>me(kt.items,Gt=>Gt.type==="separator"?[]:[Gt.data.value])),k=to.highlight,D=(it,kt)=>{k(it,kt),to.getHighlighted(kt).orThunk(()=>to.getFirst(kt)).each(mt=>{t.fakeFocus?to.highlight(kt,mt):oy(it,mt.element,Ch())})},B=(it,kt)=>Dl(ke(kt,mt=>it.lookupMenu(mt).bind(Gt=>Gt.type==="prepared"?O.some(Gt.menu):O.none()))),P=(it,kt,mt)=>{const Gt=B(kt,kt.otherMenus(mt));De(Gt,Cn=>{Sl(Cn.element,[t.markers.backgroundMenu]),t.stayInDom||nn.remove(it,Cn)})},H=it=>a.get().getOrThunk(()=>{const kt={},mt=Cc(it.element,`.${t.markers.item}`),Gt=qn(mt,Cn=>zr(Cn,"aria-haspopup")==="true");return De(Gt,Cn=>{it.getSystem().getByDom(Cn).each(zn=>{const mr=p(zn);kt[mr]=zn})}),a.set(kt),kt}),Z=(it,kt)=>{const mt=H(it);Is(mt,(Gt,Cn)=>{const zn=Tn(kt,Cn);gn(Gt.element,"aria-expanded",zn)})},J=(it,kt,mt)=>O.from(mt[0]).bind(Gt=>kt.lookupMenu(Gt).bind(Cn=>{if(Cn.type==="notbuilt")return O.none();{const zn=Cn.menu,mr=B(kt,mt.slice(1));return De(mr,so=>{wr(so.element,t.markers.backgroundMenu)}),$a(zn.element)||nn.append(it,Gl(zn)),Sl(zn.element,[t.markers.backgroundMenu]),D(it,zn),P(it,kt,mt),O.some(zn)}}));let ge;(function(it){it[it.HighlightSubmenu=0]="HighlightSubmenu",it[it.HighlightParent=1]="HighlightParent"})(ge||(ge={}));const ie=(it,kt,mt)=>{if(mt.type==="notbuilt"){const Gt=it.getSystem().build(mt.nbMenu());return d.setMenuBuilt(kt,Gt),Gt}else return mt.menu},re=(it,kt,mt=ge.HighlightSubmenu)=>{if(kt.hasConfigured(zt)&&zt.isDisabled(kt))return O.some(kt);{const Gt=p(kt);return d.expand(Gt).bind(Cn=>(Z(it,Cn),O.from(Cn[0]).bind(zn=>d.lookupMenu(zn).bind(mr=>{const so=ie(it,zn,mr);return $a(so.element)||nn.append(it,Gl(so)),t.onOpenSubmenu(it,kt,so,Zo(Cn)),mt===ge.HighlightSubmenu?(to.highlightFirst(so),J(it,d,Cn)):(to.dehighlightAll(so),O.some(kt))}))))}},Ee=(it,kt)=>{const mt=p(kt);return d.collapse(mt).bind(Gt=>(Z(it,Gt),J(it,d,Gt).map(Cn=>(t.onCollapseMenu(it,kt,Cn),Cn))))},Re=(it,kt)=>{const mt=p(kt);return d.refresh(mt).bind(Gt=>(Z(it,Gt),J(it,d,Gt)))},tt=(it,kt)=>cp(kt.element)?O.none():re(it,kt,ge.HighlightSubmenu),Le=(it,kt)=>cp(kt.element)?O.none():Ee(it,kt),rt=(it,kt)=>Ee(it,kt).orThunk(()=>t.onEscape(it,kt).map(()=>it)),Dt=it=>(kt,mt)=>ol(mt.getSource(),`.${t.markers.item}`).bind(Gt=>kt.getSystem().getByDom(Gt).toOptional().bind(Cn=>it(kt,Cn).map(Ot))),Nn=ss([Pe(NR(),(it,kt)=>{const mt=kt.event.item;d.lookupItem(p(mt)).each(()=>{const Gt=kt.event.menu;to.highlight(it,Gt);const Cn=p(kt.event.item);d.refresh(Cn).each(zn=>P(it,d,zn))})}),bu((it,kt)=>{const mt=kt.event.target;it.getSystem().getByDom(mt).each(Gt=>{p(Gt).indexOf("collapse-item")===0&&Ee(it,Gt),re(it,Gt,ge.HighlightSubmenu).fold(()=>{t.onExecute(it,Gt)},ee)})}),rs((it,kt)=>{g(it).each(mt=>{nn.append(it,Gl(mt)),t.onOpenMenu(it,mt),t.highlightOnOpen===ll.HighlightMenuAndItem?D(it,mt):t.highlightOnOpen===ll.HighlightJustMenu&&k(it,mt)})}),Pe(t4,(it,kt)=>{t.onHighlightItem(it,kt.event.menuComp,kt.event.itemComp)}),Pe(n4,(it,kt)=>{t.onDehighlightItem(it,kt.event.menuComp,kt.event.itemComp)}),...t.navigateOnHover?[Pe(_R(),(it,kt)=>{const mt=kt.event.item;Re(it,mt),re(it,mt,ge.HighlightParent),t.onHover(it,mt)})]:[]]),xt=it=>to.getHighlighted(it).bind(to.getHighlighted),An=it=>{xt(it).each(kt=>{Ee(it,kt)})},pn=it=>{d.getPrimary().each(kt=>{D(it,kt)})},$n=it=>O.from(it.components()[0]).filter(kt=>zr(kt.element,"role")==="menu"),wo={collapseMenu:An,highlightPrimary:pn,repositionMenus:it=>{d.getPrimary().bind(mt=>xt(it).bind(Gt=>{const Cn=p(Gt),zn=Mm(d.getMenus()),mr=Dl(ke(zn,PR.extractPreparedMenu));return d.getTriggeringPath(Cn,so=>C(it,mr,so))}).map(Gt=>({primary:mt,triggeringPath:Gt}))).fold(()=>{$n(it).each(mt=>{t.onRepositionMenu(it,mt,[])})},({primary:mt,triggeringPath:Gt})=>{t.onRepositionMenu(it,mt,Gt)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Js(t.tmenuBehaviours,[Pt.config({mode:"special",onRight:Dt(tt),onLeft:Dt(Le),onEscape:Dt(rt),focusIn:(it,kt)=>{d.getPrimary().each(mt=>{oy(it,mt.element,Ch())})}}),to.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),En.config({find:it=>to.getHighlighted(it)}),nn.config({})]),eventOrder:t.eventOrder,apis:wo,events:Nn}},eI=q("collapse-item"),tI=(t,s,a)=>({primary:t,menus:s,expansions:a}),nI=(t,s)=>({primary:t,menus:We(t,s),expansions:{}}),oI=t=>({value:pt(eI()),meta:{text:t}}),mp=ir({name:"TieredMenu",configFields:[we("onExecute"),we("onEscape"),vf("onOpenMenu"),vf("onOpenSubmenu"),_n("onRepositionMenu"),_n("onCollapseMenu"),fe("highlightOnOpen",ll.HighlightMenuAndItem),td("data",[Ce("primary"),Ce("menus"),Ce("expansions")]),fe("fakeFocus",!1),_n("onHighlightItem"),_n("onDehighlightItem"),_n("onHover"),fd(),Ce("dom"),fe("navigateOnHover",!0),fe("stayInDom",!1),Ts("tmenuBehaviours",[Pt,to,En,nn]),fe("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:QF,extraApis:{tieredData:tI,singleData:nI,collapseItem:oI}}),sI=(t,s,a,l,d)=>{const g=()=>t.lazySink(s),p=l.type==="horizontal"?{layouts:{onLtr:()=>Oy(),onRtl:()=>Dy()}}:{},C=k=>k.length===2,S=k=>C(k)?p:{};return mp.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Wn.close(s),t.onEscape.map(k=>k(s)),O.some(!0)),onExecute:()=>O.some(!0),onOpenMenu:(k,D)=>{Ua.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(k,D,B,P)=>{const H=g().getOrDie();Ua.position(H,B,{anchor:{type:"submenu",item:D,...S(P)}})},onRepositionMenu:(k,D,B)=>{const P=g().getOrDie();Ua.positionWithinBounds(P,D,a,d()),De(B,H=>{const Z=S(H.triggeringPath);Ua.position(P,H.triggeredMenu,{anchor:{type:"submenu",item:H.triggeringItem,...Z}})})}})},rI=(t,s)=>{const a=(P,H)=>t.getRelated(P).exists(J=>ug(J,H)),l=(P,H)=>{Wn.setContent(P,H)},d=(P,H,Z)=>{const J=O.none;g(P,H,Z,J)},g=(P,H,Z,J)=>{const ge=t.lazySink(P).getOrDie();Wn.openWhileCloaked(P,H,()=>Ua.positionWithinBounds(ge,P,Z,J())),ut.setValue(P,O.some({mode:"position",config:Z,getBounds:J}))},p=(P,H,Z)=>{C(P,H,Z,O.none)},C=(P,H,Z,J)=>{const ge=sI(t,P,H,Z,J);Wn.open(P,ge),ut.setValue(P,O.some({mode:"menu",menu:ge}))},S=P=>{Wn.isOpen(P)&&(ut.setValue(P,O.none()),Wn.close(P))},k=P=>Wn.getState(P),D=P=>{Wn.isOpen(P)&&ut.getValue(P).each(H=>{switch(H.mode){case"menu":Wn.getState(P).each(mp.repositionMenus);break;case"position":const Z=t.lazySink(P).getOrDie();Ua.positionWithinBounds(Z,P,H.config,H.getBounds());break}})},B={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:C,hide:S,getContent:k,reposition:D,isOpen:Wn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Js(t.inlineBehaviours,[Wn.config({isPartOf:(P,H,Z)=>ug(H,Z)||a(P,Z),getAttachPoint:P=>t.lazySink(P).getOrDie(),onOpen:P=>{t.onShow(P)},onClose:P=>{t.onHide(P)}}),ut.config({store:{mode:"memory",initialValue:O.none()}}),Vc.config({channels:{...T0({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({})}),...k1({...t.fireRepositionEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({}),doReposition:D})}})]),eventOrder:t.eventOrder,apis:B}},ur=ir({name:"InlineView",configFields:[Ce("lazySink"),_n("onShow"),_n("onHide"),nd("onEscape"),Ts("inlineBehaviours",[Wn,ut,Vc]),Ms("fireDismissalEventInstead",[fe("event",cm())]),Ms("fireRepositionEventInstead",[fe("event",ny())]),fe("getRelated",O.none),fe("isExtraPart",jn),fe("eventOrder",O.none)],factory:rI,apis:{showAt:(t,s,a,l)=>{t.showAt(s,a,l)},showWithinBounds:(t,s,a,l,d)=>{t.showWithinBounds(s,a,l,d)},showMenuAt:(t,s,a,l)=>{t.showMenuAt(s,a,l)},showMenuWithinBounds:(t,s,a,l,d)=>{t.showMenuWithinBounds(s,a,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var lx=tinymce.util.Tools.resolve("tinymce.util.Delay");const dr=ir({name:"Button",factory:t=>{const s=ax(t.action),a=t.dom.tag,l=g=>Qe(t.dom,"attributes").bind(p=>Qe(p,g)),d=()=>{if(a==="button"){const g=l("type").getOr("button"),p=l("role").map(C=>({role:C})).getOr({});return{type:g,...p}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:rl.augment(t.buttonBehaviours,[Zt.config({}),Pt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[fe("uid",void 0),Ce("dom"),fe("components",[]),rl.field("buttonBehaviours",[Zt,Pt]),oo("action"),oo("role"),fe("eventOrder",{})]}),yo=t=>{const s=ap(t)&&ba(t,"uid")?t.uid:cd("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var Eu=tinymce.util.Tools.resolve("tinymce.util.I18n");const U1={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},o4="temporary-placeholder",s4=t=>()=>Qe(t,o4).getOr("!not found!"),kf=(t,s)=>{const a=t.toLowerCase();if(Eu.isRtl()){const l=is(a,"-rtl");return Qn(s,l)?l:a}else return a},FR=(t,s)=>Qe(s,kf(t,s)),IR=(t,s)=>{const a=s();return FR(t,a).getOrThunk(s4(a))},Tu=(t,s,a)=>{const l=s();return FR(t,l).or(a).getOrThunk(s4(l))},LR=t=>Eu.isRtl()?Qn(U1,t):!1,ix=()=>hn("add-focusable",[rs(t=>{jb(t.element,"svg").each(s=>gn(s,"focusable","false"))})]),r4=(t,s,a,l)=>{var d,g;const p=LR(s)?["tox-icon--flip"]:[],C=Qe(a,kf(s,a)).or(l).getOrThunk(s4(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:C},behaviours:Xe([...(g=t.behaviours)!==null&&g!==void 0?g:[],ix()])}},_d=(t,s,a,l=O.none())=>r4(s,t,a(),l),a4=(t,s,a)=>{const l=a(),d=Me(t,g=>Qn(l,kf(g,l)));return r4(s,d.getOr(o4),l,O.none())},aI={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},c4=ir({name:"Notification",factory:t=>{const s=yo({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:Xe([nn.config({})])}),a=H=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${H}%`}}}),l=H=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${H}%`}}),d=yo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:Xe([nn.config({})])}),C={updateProgress:(H,Z)=>{H.getSystem().isConnected()&&d.getOpt(H).each(J=>{nn.set(J,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(Z)]},l(Z)])})},updateText:(H,Z)=>{if(H.getSystem().isConnected()){const J=s.get(H);nn.set(J,[Xs(Z)])}}},S=He([t.icon.toArray(),t.level.toArray(),t.level.bind(H=>O.from(aI[H])).toArray()]),k=yo(dr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[_d("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:H=>{t.onAction(H)}})),D=a4(S,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),B={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:Xe([nn.config({})])},P=[D,B];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(H=>["tox-notification","tox-notification--in",`tox-notification--${H}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Xe([Zt.config({}),hn("notification-events",[Pe(ki(),H=>{k.getOpt(H).each(Zt.focus)})])]),components:P.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[k.asSpec()]:[]),apis:C}},configFields:[oo("level"),Ce("progress"),oo("icon"),Ce("onAction"),Ce("text"),Ce("iconProvider"),Ce("translationProvider"),ca("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var ux=(t,s,a)=>{const l=s.backstage.shared,d=()=>{const S=M(ue.fromDom(t.getContentAreaContainer())),k=Ze(),D=Lc(k.x,S.x,S.right),B=Lc(k.y,S.y,S.bottom),P=Math.max(S.right,k.right),H=Math.max(S.bottom,k.bottom);return O.some(_(D,B,P-D,H-B))};return{open:(S,k)=>{const D=()=>{k(),ur.hide(P)},B=Sr(c4.sketch({text:S.text,level:Tn(["success","error","warning","warn","info"],S.type)?S.type:void 0,progress:S.progressBar===!0,icon:S.icon,closeButton:S.closeButton,onAction:D,iconProvider:l.providers.icons,translationProvider:l.providers.translate})),P=Sr(ur.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:l.getSink,fireDismissalEventInstead:{},...l.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(P),tr(S.timeout)&&S.timeout>0&&lx.setEditorTimeout(t,()=>{D()},S.timeout);const Z={close:D,reposition:()=>{const J=Gl(B),ge={maxHeightFunction:Zh()},ie=t.notificationManager.getNotifications();if(ie[0]===Z){const re={...l.anchors.banner(),overrides:ge};ur.showWithinBounds(P,J,{anchor:re},d)}else Be(ie,Z).each(re=>{const Ee=ie[re-1].getEl(),Re={type:"node",root:Nr(),node:O.some(ue.fromDom(Ee)),overrides:ge,layouts:{onRtl:()=>[Ys],onLtr:()=>[Ys]}};ur.showWithinBounds(P,J,{anchor:Re},d)})},text:J=>{c4.updateText(B,J)},settings:S,getEl:()=>B.element.dom,progressBar:{value:J=>{c4.updateProgress(B,J)}}};return Z},close:S=>{S.close()},getArgs:S=>S.settings}},W1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),HR=tinymce.util.Tools.resolve("tinymce.EditorManager"),Z1=tinymce.util.Tools.resolve("tinymce.Env"),Hi;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Hi||(Hi={}));var H2;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(H2||(H2={}));const zo=t=>s=>s.options.get(t),V2=t=>s=>O.from(t(s)),dx=t=>{const s=Z1.deviceType.isPhone(),a=Z1.deviceType.isTablet()||s,l=t.options.register,d=p=>$e(p)||p===!1,g=p=>$e(p)||tr(p);l("skin",{processor:p=>$e(p)||p===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:W1.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:p=>$e(p)||_o(p),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:p=>_o(p)||$e(p)||To(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Gn(9,p=>{l("toolbar"+(p+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:H2.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:p=>p==="both"||_o(p),default:!Z1.deviceType.isTouch()}),l("sidebar_show",{processor:"string"})},VR=zo("readonly"),j1=zo("height"),X0=zo("width"),mx=V2(zo("min_width")),fx=V2(zo("min_height")),gx=V2(zo("max_width")),l4=V2(zo("max_height")),zR=V2(zo("style_formats")),UR=zo("style_formats_merge"),hx=zo("style_formats_autohide"),i4=zo("content_langs"),u4=zo("removed_menuitems"),fp=zo("toolbar_mode"),WR=zo("toolbar_groups"),px=zo("toolbar_location"),cI=zo("fixed_toolbar_container"),lI=zo("fixed_toolbar_container_target"),ZR=zo("toolbar_persist"),d4=zo("toolbar_sticky_offset"),jR=zo("menubar"),bx=zo("toolbar"),vx=zo("file_picker_callback"),m4=zo("file_picker_validator_handler"),f4=zo("font_size_input_default_unit"),GR=zo("file_picker_types"),yx=zo("typeahead_urls"),qR=zo("anchor_top"),KR=zo("anchor_bottom"),XR=zo("draggable_modal"),YR=zo("statusbar"),JR=zo("elementpath"),g4=zo("branding"),Cx=zo("resize"),QR=zo("paste_as_text"),z2=zo("sidebar_show"),eM=zo("promotion"),h4=t=>t.options.get("skin")===!1,wx=t=>t.options.get("menubar")!==!1,tM=t=>{const s=t.options.get("skin_url");if(h4(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return HR.baseURL+"/skins/ui/"+a}},nM=t=>t.options.get("line_height_formats").split(" "),Sx=t=>{const s=bx(t),a=$e(s),l=To(s)&&s.length>0;return!U2(t)&&(l||a||s===!0)},xx=t=>{const s=Gn(9,l=>t.options.get("toolbar"+(l+1))),a=qn(s,$e);return tn(a.length>0,a)},U2=t=>xx(t).fold(()=>{const s=bx(t);return Ut(s,$e)&&s.length>0},Ot),p4=t=>px(t)===H2.bottom,Ex=t=>{var s;if(!t.inline)return O.none();const a=(s=cI(t))!==null&&s!==void 0?s:"";if(a.length>0)return lr(Nr(),a);const l=lI(t);return Fs(l)?O.some(ue.fromDom(l)):O.none()},kd=t=>t.inline&&Ex(t).isSome(),b4=t=>Ex(t).getOrThunk(()=>js(Jr(ue.fromDom(t.getElement())))),v4=t=>t.inline&&!wx(t)&&!Sx(t)&&!U2(t),G1=t=>(t.options.get("toolbar_sticky")||t.inline)&&!kd(t)&&!v4(t),gp=t=>!kd(t)&&t.options.get("ui_mode")==="split",y4=t=>{const s=t.options.get("menu");return Mo(s,a=>({...a,items:a.items}))};var iI=Object.freeze({__proto__:null,get ToolbarMode(){return Hi},get ToolbarLocation(){return H2},register:dx,getSkinUrl:tM,isReadOnly:VR,isSkinDisabled:h4,getHeightOption:j1,getWidthOption:X0,getMinWidthOption:mx,getMinHeightOption:fx,getMaxWidthOption:gx,getMaxHeightOption:l4,getUserStyleFormats:zR,shouldMergeStyleFormats:UR,shouldAutoHideStyleFormats:hx,getLineHeightFormats:nM,getContentLanguages:i4,getRemovedMenuItems:u4,isMenubarEnabled:wx,isMultipleToolbars:U2,isToolbarEnabled:Sx,isToolbarPersist:ZR,getMultipleToolbarsOption:xx,getUiContainer:b4,useFixedContainer:kd,isSplitUiMode:gp,getToolbarMode:fp,isDraggableModal:XR,isDistractionFree:v4,isStickyToolbar:G1,getStickyToolbarOffset:d4,getToolbarLocation:px,isToolbarLocationBottom:p4,getToolbarGroups:WR,getMenus:y4,getMenubar:jR,getToolbar:bx,getFilePickerCallback:vx,getFilePickerTypes:GR,useTypeaheadUrls:yx,getAnchorTop:qR,getAnchorBottom:KR,getFilePickerValidatorHandler:m4,getFontSizeInputDefaultUnit:f4,useStatusBar:YR,useElementPath:JR,promotionEnabled:eM,useBranding:g4,getResize:Cx,getPasteAsText:QR,getSidebarShow:z2});const C4="[data-mce-autocompleter]",w4=t=>ol(t,C4),S4=t=>lr(t,C4),oM={setup:(t,s)=>{const a=(d,g)=>{Mt(d,vc(),{raw:g})},l=()=>t.getMenu().bind(to.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(rf),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(to.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&w4(ue.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var x4;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(x4||(x4={}));var ti=x4;const E4="tox-menu-nav__js",Tx="tox-collection__item",W2="tox-swatch",T4={normal:E4,color:W2},sM="tox-collection__item--enabled",rM="tox-collection__group-heading",aM="tox-collection__item-icon",_4="tox-collection__item-label",k4="tox-collection__item-accessory",cM="tox-collection__item-caret",uI="tox-collection__item-checkmark",Z2="tox-collection__item--active",lM="tox-collection__item-container",dI="tox-collection__item-container--column",iM="tox-collection__item-container--row",mI="tox-collection__item-container--align-right",fI="tox-collection__item-container--align-left",gI="tox-collection__item-container--valign-top",hI="tox-collection__item-container--valign-middle",pI="tox-collection__item-container--valign-bottom",uM=t=>Qe(T4,t).getOr(E4),A4=t=>t==="color"?"tox-swatches":"tox-menu",O4=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:A4(t),tieredMenu:"tox-tiered-menu"}),q1=t=>{const s=O4(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:uM(t)}},bI=(t,s,a)=>{const l=O4(a);return{tag:"div",classes:He([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},dM=[_f.parts.items({})],_x=(t,s,a)=>{const l=O4(a);return{dom:{tag:"div",classes:He([[l.tieredMenu]])},markers:q1(a)}},mM=q([oo("data"),fe("inputAttributes",{}),fe("inputStyles",{}),fe("tag","input"),fe("inputClasses",[]),_n("onSetValue"),fe("styles",{}),fe("eventOrder",{}),Ts("inputBehaviours",[ut,Zt]),fe("selectOnFocus",!0)]),fM=t=>Xe([Zt.config({onFocus:t.selectOnFocus?s=>{const a=s.element,l=Fc(a);a.dom.setSelectionRange(0,l.length)}:ee})]),vI=t=>({...fM(t),...Js(t.inputBehaviours,[ut.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Fc(s.element),setValue:(s,a)=>{Fc(s.element)!==a&&Ic(s.element,a)}},onSetValue:t.onSetValue})])}),gM=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),yI=(t,s)=>({uid:t.uid,dom:gM(t),components:[],behaviours:vI(t),eventOrder:t.eventOrder}),Pg=ir({name:"Input",configFields:mM(),factory:yI}),hM=pt("refetch-trigger-event"),pM=pt("redirect-menu-item-interaction"),bM="tox-menu__searcher",kx=t=>lr(t.element,`.${bM}`).bind(s=>t.getSystem().getByDom(s).toOptional()),vM=kx,CI=(t,s)=>{ut.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},yM=t=>{const s=ut.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},wI=(t,s)=>{Ds(s.element,"id").each(a=>gn(t.element,"aria-activedescendant",a))},SI=t=>{const s=(d,g)=>(g.cut(),O.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return Mt(d,pM,p),O.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[Tx]},components:[Pg.sketch({inputClasses:[bM,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Xe([hn(l,[Pe(nf(),d=>{lo(d,hM)}),Pe(vc(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Pt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,Pt.name()]}})]}},Ax="tox-collection--results__js",CM=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:pt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},D4=(t,s)=>a=>{const l=Dn(a,s);return ke(l,d=>({dom:t,components:d}))},xI=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[_f.parts.items({preprocess:t!=="auto"?D4({tag:"div",classes:["tox-swatches__row"]},t):mn})]}]}),Ox=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[_f.parts.items({preprocess:D4({tag:"div",classes:["tox-collection__group"]},t)})]}),wM=(t,s)=>{const a=[];let l=[];return De(t,(d,g)=>{s(d,g)?(l.length>0&&a.push(l),l=[],(Qn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&a.push(l),ke(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},j2=(t,s,a)=>_f.parts.items({preprocess:l=>{const d=ke(l,a);return t!=="auto"&&t>1?D4({tag:"div",classes:["tox-collection__group"]},t)(d):wM(d,(g,p)=>s[p].type==="separator")}}),SM=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[j2(t,s,mn)]}),EI=(t,s,a=!0)=>{const l=pt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Ax].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[j2(t,s,CM)]}},TI=(t,s,a)=>{const l=pt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[SI({i18n:Eu.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Ax],attributes:{id:l}},components:[j2(t,s,CM)]}]}},_I=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[_f.parts.items({preprocess:a=>wM(a,(l,d)=>t[d].type==="separator")})]}),Dx=t=>ko(t,s=>"icon"in s&&s.icon!==void 0),Af=t=>(console.error(tf(t)),console.log(t),O.none()),kI=(t,s,a,l,d)=>{const g=_I(a);return{value:t,dom:g.dom,components:g.components,items:a}},G2=(t,s,a,l,d)=>{const g=()=>d.menuType!=="searchable"?SM(l,a):d.searchMode.searchMode==="search-with-field"?TI(l,a,d.searchMode):EI(l,a);if(d.menuType==="color"){const p=xI(l);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&l==="auto"){const p=SM(l,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&l!=="auto"){const p=Ox(l);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:bI(s,l,d.menuType),components:dM,items:a}},Us=ar("type"),Rx=ar("name"),q2=ar("label"),Ad=ar("text"),R4=ar("title"),ym=ar("icon"),K1=ar("value"),AI=$c("fetch"),OI=$c("getSubmenuItems"),Y0=$c("onAction"),DI=$c("onItemAction"),Od=xs("onSetup",()=>ee),RI=ra("name"),hp=ra("text"),Vi=ra("icon"),K2=ra("tooltip"),X2=ra("label"),MI=ra("shortcut"),M4=nd("select"),J0=ca("active",!1),NI=ca("borderless",!1),_u=ca("enabled",!0),Y2=ca("primary",!1),xM=t=>fe("columns",t),N4=fe("meta",{}),B4=xs("onAction",ee),X1=t=>La("type",t),$4=t=>yr("name","name",Fa(()=>pt(`${t}-name`)),hs),BI=t=>yr("value","value",Fa(()=>pt(`${t}-value`)),Nc()),P4=Bt([Us,hp]),EM=t=>bo("separatormenuitem",P4,t),$I=Bt([X1("autocompleteitem"),J0,_u,N4,K1,hp,Vi]),TM=t=>bo("Autocompleter.Separator",P4,t),_M=t=>bo("Autocompleter.Item",$I,t),Fg=[_u,K2,Vi,hp,Od],kM=Bt([Us,Y0].concat(Fg)),AM=t=>bo("toolbarbutton",kM,t),F4=[J0].concat(Fg),OM=Bt(F4.concat([Us,Y0])),DM=t=>bo("ToggleButton",OM,t),RM=[xs("predicate",jn),Ha("scope","node",["node","editor"]),Ha("position","selection",["node","selection","line"])],MM=Fg.concat([X1("contextformbutton"),Y2,Y0,Ia("original",mn)]),NM=F4.concat([X1("contextformbutton"),Y2,Y0,Ia("original",mn)]),BM=Fg.concat([X1("contextformbutton")]),$M=F4.concat([X1("contextformtogglebutton")]),PI=Hs("type",{contextformbutton:MM,contextformtogglebutton:NM}),FI=Bt([X1("contextform"),xs("initValue",q("")),X2,bc("commands",PI),_i("launch",Hs("type",{contextformbutton:BM,contextformtogglebutton:$M}))].concat(RM)),PM=t=>bo("ContextForm",FI,t),I4=Bt([X1("contexttoolbar"),ar("items")].concat(RM)),L4=t=>bo("ContextToolbar",I4,t),FM=[Us,ar("src"),ra("alt"),tm("classes",[],hs)],IM=Bt(FM),LM=[Us,Ad,RI,tm("classes",["tox-collection__item-label"],hs)],II=Bt(LM),Mx=mh(()=>pc("type",{cardimage:IM,cardtext:II,cardcontainer:LI})),LI=Bt([Us,La("direction","horizontal"),La("align","left"),La("valign","middle"),bc("items",Mx)]),Y1=[_u,hp,MI,BI("menuitem"),N4],HM=Bt([Us,X2,bc("items",Mx),Od,B4].concat(Y1)),J1=t=>bo("cardmenuitem",HM,t),HI=Bt([Us,J0,Vi].concat(Y1)),H4=t=>bo("choicemenuitem",HI,t),J2=[Us,ar("fancytype"),B4],VI=[fe("initData",{})].concat(J2),VM=[nd("select"),od("initData",{},[ca("allowCustomColors",!0),La("storageKey","default"),du("colors",Nc())])].concat(J2),zM=Hs("fancytype",{inserttable:VI,colorswatch:VM}),UM=t=>bo("fancymenuitem",zM,t),V4=Bt([Us,Od,B4,Vi].concat(Y1)),WM=t=>bo("menuitem",V4,t),zI=Bt([Us,OI,Od,Vi].concat(Y1)),ZM=t=>bo("nestedmenuitem",zI,t),jM=Bt([Us,Vi,J0,Od,Y0].concat(Y1)),GM=t=>bo("togglemenuitem",jM,t),Nx=(t,s,a)=>{const l=Cc(t.element,"."+a);if(l.length>0){const d=Ie(l,g=>{const p=g.dom.getBoundingClientRect().top,C=l[0].dom.getBoundingClientRect().top;return Math.abs(p-C)>s}).getOr(l.length);return O.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return O.none()},qM=(t,s)=>Xe([hn(t,s)]),Q2={namedEvents:qM,unnamedEvents:t=>qM(pt("unnamed-events"),t)},KM=pt("tooltip.exclusive"),eC=pt("tooltip.show"),tC=pt("tooltip.hide"),z4=(t,s,a)=>{t.getSystem().broadcastOn([KM],{})};var XM=Object.freeze({__proto__:null,hideAllExclusive:z4,setComponents:(t,s,a,l)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&nn.set(d,l)})}}),WI=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{wd(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},l=d=>{if(!s.isShowing()){z4(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ss(t.mode==="normal"?[Pe(gu(),C=>{lo(d,eC)}),Pe(Zr(),C=>{lo(d,tC)})]:[]),behaviours:Xe([nn.config({})])});s.setTooltip(p),Cd(g,p),t.onShow(d,p),Ua.position(g,p,{anchor:t.anchor(d)})}};return ss(He([[Pe(eC,d=>{s.resetTimer(()=>{l(d)},t.delay)}),Pe(tC,d=>{s.resetTimer(()=>{a(d)},t.delay)}),Pe(pu(),(d,g)=>{const p=g;p.universal||Tn(p.channels,KM)&&a(d)}),Ai(d=>{a(d)})],t.mode==="normal"?[Pe(ki(),d=>{lo(d,eC)}),Pe(yh(),d=>{lo(d,tC)}),Pe(gu(),d=>{lo(d,eC)}),Pe(Zr(),d=>{lo(d,tC)})]:[Pe(lw(),(d,g)=>{lo(d,eC)}),Pe(Db(),d=>{lo(d,tC)})]]))}}),ZI=[Ce("lazySink"),Ce("tooltipDom"),fe("exclusive",!0),fe("tooltipComponents",[]),fe("delay",300),Ha("mode","normal",["normal","follow-highlight"]),fe("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:q([Ys,Cs,Gr,Hc,xr,sc]),onRtl:q([Ys,Cs,Gr,Hc,xr,sc])}})),_n("onHide"),_n("onShow")],jI=Object.freeze({__proto__:null,init:()=>{const t=Fo(),s=Fo(),a=()=>{t.on(clearTimeout)},l=(g,p)=>{a(),t.set(setTimeout(g,p))},d=q("not-implemented");return nc({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:l,readState:d})}});const nC=da({fields:ZI,name:"tooltipping",active:WI,state:jI,apis:XM}),GI=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),U4="silver.readonly",qI=Bt([fh("readonly")]),oC=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&De(d,g=>{g.broadcastOn([gm()],{target:l})}),De(d,g=>{g.broadcastOn([U4],{readonly:s})})},W4=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&oC(s,!0)}),t.on("SwitchMode",()=>oC(s,t.mode.isReadOnly())),VR(t)&&t.mode.set("readonly")},Xr=()=>Vc.config({channels:{[U4]:{schema:qI,onReceive:(t,s)=>{zt.set(t,s.readonly)}}}}),Dd={item:t=>zt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>zt.config({disabled:t}),splitButton:t=>zt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>zt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},$x=(t,s)=>{const a=t.getApi(s);return l=>{l(a)}},pp=(t,s)=>rs(a=>{$x(t,a)(d=>{const g=t.onSetup(d);at(g)&&s.set(g)})}),bp=(t,s)=>Ai(a=>$x(t,a)(s.get())),YM=(t,s)=>bu((a,l)=>{$x(t,a)(t.onAction),!t.triggersSubmenu&&s===ti.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&lo(a,of()),l.stop())}),JM={[Cl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Q0=Dl,ev=(t,s,a,l)=>{const d=Lt(ee);return{type:"item",dom:s.dom,components:Q0(s.optComponents),data:t.data,eventOrder:JM,hasSubmenu:t.triggersSubmenu,itemBehaviours:Xe([hn("item-events",[YM(t,a),pp(t,d),bp(t,d)]),Dd.item(()=>!t.enabled||l.isDisabled()),Xr(),nn.config({})].concat(t.itemBehaviours))}},tv=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),QI=t=>{const s=Z1.os.isMacOS()||Z1.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=ke(g,C=>{const S=C.toLowerCase().trim();return Qn(d,S)?d[S]:C});return s?p.join(""):p.join("+")},Z4=(t,s,a=[aM])=>_d(t,{tag:"div",classes:a},s),j4=t=>({dom:{tag:"div",classes:[_4]},components:[Xs(Eu.translate(t))]}),QM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),e8=(t,s)=>({dom:{tag:"div",classes:[_4]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Xs(Eu.translate(s))]}]}),G4=t=>({dom:{tag:"div",classes:[k4]},components:[Xs(QI(t))]}),q4=t=>Z4("checkmark",t,[uI]),t8=t=>Z4("chevron-right",t,[cM]),n8=t=>Z4("chevron-down",t,[cM]),eN=(t,s)=>{const a=t.direction==="vertical"?dI:iM,l=t.align==="left"?fI:mI;return{dom:{tag:"div",classes:[lM,a,l,(()=>{switch(t.valign){case"top":return gI;case"middle":return hI;case"bottom":return pI}})()]},components:s}},o8=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),s8=(t,s,a)=>{const l="custom",d="remove",g=t.ariaLabel,p=t.value,C=t.iconContent.map(k=>Tu(k,s.icons,a));return{dom:(()=>{const k=W2,D=C.getOr(""),P={tag:"div",attributes:g.map(H=>({title:s.translate(H)})).getOr({}),classes:[k]};return p===l?{...P,tag:"button",classes:[...P.classes,"tox-swatches__picker-btn"],innerHtml:D}:p===d?{...P,classes:[...P.classes,"tox-swatch--remove"],innerHtml:D}:Fs(p)?{...P,attributes:{...P.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:D}:P})(),optComponents:[]}},K4=t=>{const s=t.map(a=>({attributes:{title:Eu.translate(a),id:pt("menu-item")}})).getOr({});return{tag:"div",classes:[E4,Tx],...s}},tN=(t,s,a,l)=>{const d={tag:"div",classes:[aM]},g=P=>_d(P,d,s.icons,l),p=()=>O.some({dom:d}),C=a?t.iconContent.map(g).orThunk(p):O.none(),S=t.checkMark,k=O.from(t.meta).fold(()=>j4,P=>Qn(P,"style")?It(e8,P.style):j4),D=t.htmlContent.fold(()=>t.textContent.map(k),P=>O.some(QM(P,[_4])));return{dom:K4(t.ariaLabel),optComponents:[C,D,t.shortcutContent.map(G4),S,t.caret]}},nv=(t,s,a,l=O.none())=>t.presets==="color"?s8(t,s,l):tN(t,s,a,l),nN=(t,s)=>Qe(t,"tooltipWorker").map(a=>[nC.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:Zh}}),mode:"follow-highlight",onShow:(l,d)=>{a(g=>{nC.setComponents(l,[Zb({element:ue.fromDom(g)})])})}})]).getOr([]),r8=t=>W1.DOM.encode(t),oN=(t,s)=>{const a=Eu.translate(t),l=r8(a);if(s.length>0){const d=new RegExp(GI(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},a8=(t,s,a,l,d,g,p,C=!0)=>{const S=nv({presets:l,textContent:O.none(),htmlContent:a?t.text.map(k=>oN(k,s)):O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:O.none(),checkMark:O.none(),caret:O.none(),value:t.value},p.providers,C,t.icon);return ev({data:tv(t),enabled:t.enabled,getApi:q({}),onAction:k=>d(t.value,t.meta),onSetup:q(ee),triggersSubmenu:!1,itemBehaviours:nN(t.meta,p)},S,g,p.providers)},sN=(t,s)=>ke(t,a=>{switch(a.type){case"cardcontainer":return eN(a,sN(a.items,s));case"cardimage":return o8(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>Tn(s.cardText.highlightOn,g))?O.from(s.cardText.matchText).getOr(""):"";return QM(oN(a.text,d),a.classes)}}),Q1=(t,s,a,l)=>{const d=p=>({isEnabled:()=>!zt.isDisabled(p),setEnabled:C=>{zt.set(p,!C),De(Cc(p.element,"*"),S=>{p.getSystem().getByDom(S).each(k=>{k.hasConfigured(zt)&&zt.set(k,!C)})})}}),g={dom:K4(t.label),optComponents:[O.some({dom:{tag:"div",classes:[lM,iM]},components:sN(t.items,l)})]};return ev({data:tv({text:O.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:O.from(l.itemBehaviours).getOr([])},g,s,a.providers)},X4=(t,s,a,l,d,g,p,C=!0)=>{const S=D=>({setActive:B=>{yn.set(D,B)},isActive:()=>yn.isOn(D),isEnabled:()=>!zt.isDisabled(D),setEnabled:B=>zt.set(D,!B)}),k=nv({presets:a,textContent:s?t.text:O.none(),htmlContent:O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:O.none(),checkMark:s?O.some(q4(p.icons)):O.none(),caret:O.none(),value:t.value},p,C);return Lo(ev({data:tv(t),enabled:t.enabled,getApi:S,onAction:D=>l(t.value),onSetup:D=>(D.setActive(d),ee),triggersSubmenu:!1,itemBehaviours:[]},k,g,p),{toggling:{toggleClass:sM,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},rN=p2(Jk(),z1()),sC=t=>({value:lN(t)}),Rd=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,aN=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,cN=t=>Rd.test(t)||aN.test(t),lN=t=>Hu(t,"#").toUpperCase(),Y4=t=>cN(t)?O.some({value:lN(t)}):O.none(),c8=t=>({value:t.value.replace(Rd,(a,l,d,g)=>l+l+d+d+g+g)}),l8=t=>{const s=c8(t),a=aN.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},Px=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},rC=t=>{const s=Px(t.red)+Px(t.green)+Px(t.blue);return sC(s)},iN=Math.min,uN=Math.max,zc=Math.round,Of=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,i8=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Ig=(t,s,a,l)=>({red:t,green:s,blue:a,alpha:l}),ov=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},Fx=t=>{let s,a,l;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=uN(0,iN(g,1)),p=uN(0,iN(p,1)),g===0)return s=a=l=zc(255*p),Ig(s,a,l,1);const C=d/60,S=p*g,k=S*(1-Math.abs(C%2-1)),D=p-S;switch(Math.floor(C)){case 0:s=S,a=k,l=0;break;case 1:s=k,a=S,l=0;break;case 2:s=0,a=S,l=k;break;case 3:s=0,a=k,l=S;break;case 4:s=k,a=0,l=S;break;case 5:s=S,a=0,l=k;break;default:s=a=l=0}return s=zc(255*(s+D)),a=zc(255*(a+D)),l=zc(255*(l+D)),Ig(s,a,l,1)},aC=t=>{const s=l8(t),a=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return Ig(a,l,d,1)},dN=(t,s,a,l)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),C=parseFloat(l);return Ig(d,g,p,C)},eb=t=>{if(t==="transparent")return O.some(Ig(0,0,0,0));const s=Of.exec(t);if(s!==null)return O.some(dN(s[1],s[2],s[3],"1"));const a=i8.exec(t);return a!==null?O.some(dN(a[1],a[2],a[3],a[4])):O.none()},cC=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,mN=Ig(255,0,0,1),vp=t=>{t.dispatch("SkinLoaded")},u8=(t,s)=>{t.dispatch("SkinLoadError",s)},d8=t=>{t.dispatch("ResizeEditor")},il=(t,s)=>{t.dispatch("ResizeContent",s)},J4=(t,s)=>{t.dispatch("ScrollContent",s)},Md=(t,s)=>{t.dispatch("TextColorChange",s)},m8=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},Uo=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),tb=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},sv=(t,s)=>()=>{t(),s()},xc=t=>nb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),Q4=(t,s)=>a=>{const l=Mi(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},rv=(t,s)=>a=>{const l=xc(t)(a),d=Q4(t,s)(a);return()=>{l(),d()}},nb=(t,s,a)=>l=>{const d=()=>a(l),g=()=>{a(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},Ix=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},ni=(t,s)=>()=>t.execCommand(s);var yp=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const e3={},t3=(t,s=10)=>{const a=yp.getItem(t),l=$e(a)?JSON.parse(a):[],g=(k=>s-k.length<0?k.slice(0,s):k)(l),p=k=>{Be(g,k).each(C),g.unshift(k),g.length>s&&g.pop(),yp.setItem(t,JSON.stringify(g))},C=k=>{g.splice(k,1)};return{add:p,state:()=>g.slice(0)}},n3=t=>Qe(e3,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=yp.getItem(s);if(qo(a)){const d=yp.getItem("tinymce-custom-colors");yp.setItem(s,Fs(d)?d:"[]")}const l=t3(s,10);return e3[t]=l,l}),Lx=t=>ke(n3(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),fN=(t,s)=>{n3(t).add(s)},lC=(t,s,a)=>({hue:t,saturation:s,value:a}),o3=t=>{let s=0,a=0,l=0;const d=t.red/255,g=t.green/255,p=t.blue/255,C=Math.min(d,Math.min(g,p)),S=Math.max(d,Math.max(g,p));if(C===S)return l=C,lC(0,0,l*100);const k=d===C?g-p:p===C?d-g:p-d;return s=d===C?3:p===C?1:5,s=60*(s-k/(S-C)),a=(S-C)/S,l=S,lC(Math.round(s),Math.round(a*100),Math.round(l*100))},f8=t=>o3(aC(t)),gN=t=>rC(Fx(t)),g8=t=>Y4(t).orThunk(()=>eb(t).map(rC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,d=l[0],g=l[1],p=l[2],C=l[3];return rC(Ig(d,g,p,C))}),s3="forecolor",r3="hilitecolor",a3=5,hN=t=>Math.max(a3,Math.ceil(Math.sqrt(t))),c3=(t,s)=>{const a=hN(s),l=Cm("color_cols")(t);return a3===a?l:a},h8=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+g8(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},Cm=t=>s=>s.options.get(t),l3="#000000",p8=t=>{const s=t.options.register,a=l=>Ut(l,$e)?{value:h8(l),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:hN(iC(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:c3(t,iC(t,s3).length)}),s("color_cols_background",{processor:"number",default:c3(t,iC(t,r3).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:l3}),s("color_default_background",{processor:"string",default:l3})},b8=(t,s)=>s===s3?Cm("color_cols_foreground")(t):s===r3?Cm("color_cols_background")(t):Cm("color_cols")(t),pN=(t,s)=>{const a=b8(t,s);return a>0?a:a3},bN=Cm("custom_colors"),iC=(t,s)=>s===s3&&t.options.isSet("color_map_foreground")?Cm("color_map_foreground")(t):s===r3&&t.options.isSet("color_map_background")?Cm("color_map_background")(t):Cm("color_map")(t),vN=Cm("color_default_foreground"),wm=Cm("color_default_background"),v8="rgba(0, 0, 0, 0)",i3=t=>eb(t).exists(s=>s.alpha!==0),yN=t=>la(t,s=>{if(po(s)){const a=Ve(s,"background-color");return tn(i3(a),a)}else return O.none()}).getOr(v8),u3=(t,s)=>{const a=ue.fromDom(t.selection.getStart()),l=s==="hilitecolor"?yN(a):Ve(a,"color");return eb(l).map(d=>"#"+rC(d).value)},CN=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},wN=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},SN=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{CN(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{wN(t,s)})},xN=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},d3=(t,s,a,l)=>{a==="custom"?kN(t)(g=>{g.each(p=>{fN(s,p),t.execCommand("mceApplyTextcolor",s,p),l(p)})},u3(t,s).getOr(l3)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(a),t.execCommand("mceApplyTextcolor",s,a))},EN=(t,s,a)=>t.concat(Lx(s).concat(xN(a))),TN=(t,s,a)=>l=>{l(EN(t,s,a))},Hx=(t,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},m3=(t,s)=>a=>{const l=u3(t,s);return va(l,a.toUpperCase())},f3=(t,s,a,l,d)=>{t.ui.registry.addSplitButton(s,{tooltip:l,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:m3(t,a),columns:pN(t,a),fetch:TN(iC(t,a),a,bN(t)),onAction:g=>{d3(t,a,d.get(),ee)},onItemAction:(g,p)=>{d3(t,a,p,C=>{d.set(C),Md(t,{name:s,color:C})})},onSetup:g=>{Hx(g,s,d.get());const p=C=>{C.name===s&&Hx(g,C.name,C.color)};return t.on("TextColorChange",p),sv(xc(t)(g),()=>{t.off("TextColorChange",p)})}})},_N=(t,s,a,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(Hx(g,s,d.get()),xc(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:m3(t,a),initData:{storageKey:a},onAction:g=>{d3(t,a,g.value,p=>{d.set(p),Md(t,{name:s,color:p})})}}]})},kN=t=>(s,a)=>{let l=!1;const d=C=>{const k=C.getData().colorpicker;l?(s(O.from(k)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",k]))},g=(C,S)=>{S.name==="hex-valid"&&(l=S.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:ee,onCancel:()=>{s(O.none())}})},y8=t=>{SN(t);const s=vN(t),a=wm(t),l=Lt(s),d=Lt(a);f3(t,"forecolor","forecolor","Text color",l),f3(t,"backcolor","hilitecolor","Background color",d),_N(t,"forecolor","forecolor","Text color",l),_N(t,"backcolor","hilitecolor","Background color",d)},Cp=(t,s,a,l,d,g,p,C)=>{const S=Dx(s),D=C8(s,a,l,d!=="color"?"normal":"color",g,p,C);return G2(t,S,D,l,{menuType:d})},C8=(t,s,a,l,d,g,p)=>Dl(ke(t,C=>C.type==="choiceitem"?H4(C).fold(Af,S=>O.some(X4(S,a===1,l,s,g(S.value),d,p,Dx(t)))):O.none())),uC=(t,s)=>{const a=q1(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?lr(d.element,"[aria-checked=true]"):O.none()}},AN=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${W2}`:`.${Tx}`}},ON=(t,s)=>{const a=g3(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...Cp(pt("menu-value"),a,C=>{t.onAction({value:C})},l,d,ti.CLOSE_ON_EXECUTE,t.select.getOr(jn),s.shared.providers),markers:q1(d),movement:uC(l,d)};return{type:"widget",data:{value:pt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[rN.widget(_f.sketch(p))]}},g3=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>EN(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(xN(a)))},Vx=pt("cell-over"),zx=pt("cell-execute"),DN=(t,s,a)=>{const l=p=>Mt(p,Vx,{row:t,col:s}),d=p=>Mt(p,zx,{row:t,col:s}),g=(p,C)=>{C.stop(),d(p)};return Sr({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:a}},behaviours:Xe([hn("insert-table-picker-cell",[Pe(gu(),Zt.focus),Pe(Cl(),d),Pe(Zl(),g),Pe(Gp(),g)]),yn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Zt.config({onFocus:l})])})},w8=(t,s,a)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(DN(d,p,t));l.push(g)}return l},RN=(t,s,a,l,d)=>{for(let g=0;g<l;g++)for(let p=0;p<d;p++)yn.set(t[g][p],g<=s&&p<=a)},S8=t=>me(t,s=>ke(s,Gl)),MN=(t,s)=>Xs(`${s}x${t}`),NN={inserttable:t=>{const l=pt("size-label"),d=w8(l,10,10),g=MN(0,0),p=yo({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:l}},components:[g],behaviours:Xe([nn.config({})])});return{type:"widget",data:{value:pt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[rN.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:S8(d).concat(p.asSpec()),behaviours:Xe([hn("insert-table-picker",[rs(C=>{nn.set(p.get(C),[g])}),ry(Vx,(C,S,k)=>{const{row:D,col:B}=k.event;RN(d,D,B,10,10),nn.set(p.get(C),[MN(D+1,B+1)])}),ry(zx,(C,S,k)=>{const{row:D,col:B}=k.event;t.onAction({numRows:D+1,numColumns:B+1}),lo(C,of())})]),Pt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:ON},BN=(t,s)=>Qe(NN,t.fancytype).map(a=>a(t,s)),$N=(t,s,a,l=!0,d=!1)=>{const g=d?n8(a.icons):t8(a.icons),p=S=>({isEnabled:()=>!zt.isDisabled(S),setEnabled:k=>zt.set(S,!k),setIconFill:(k,D)=>{lr(S.element,`svg path[class="${k}"], rect[class="${k}"]`).each(B=>{gn(B,"fill",D)})}}),C=nv({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.some(g),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return ev({data:tv(t),getApi:p,enabled:t.enabled,onAction:ee,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},x8=(t,s,a,l=!0)=>{const d=p=>({isEnabled:()=>!zt.isDisabled(p),setEnabled:C=>zt.set(p,!C)}),g=nv({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.none(),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return ev({data:tv(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},E8=t=>({type:"separator",dom:{tag:"div",classes:[Tx,rM]},components:t.text.map(Xs).toArray()}),T8=(t,s,a,l=!0)=>{const d=p=>({setActive:C=>{yn.set(p,C)},isActive:()=>yn.isOn(p),isEnabled:()=>!zt.isDisabled(p),setEnabled:C=>zt.set(p,!C)}),g=nv({iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,checkMark:O.some(q4(a.icons)),caret:O.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return Lo(ev({data:tv(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:sM,toggleOnExecute:!1,selected:t.active}})},_8=a8,PN=E8,k8=x8,A8=$N,O8=T8,D8=BN,R8=Q1;var N8=Object.freeze({__proto__:null,getCoupled:(t,s,a,l)=>a.getOrCreate(t,s,l),getExistingCoupled:(t,s,a,l)=>a.getExisting(t,s,l)}),B8=[ec("others",ds(St.value,Nc()))],$8=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(Qo(g.others).length===0)throw new Error("Cannot find any known coupled components");return Qe(t,p)},a=(g,p,C)=>s(p,C).getOrThunk(()=>{const k=Qe(p.others,C).getOrDie("No information found for coupled component: "+C)(g),D=g.getSystem().build(k);return t[C]=D,D}),l=(g,p,C)=>s(p,C).orThunk(()=>(Qe(p.others,C).getOrDie("No information found for coupled component: "+C),O.none())),d=q({});return nc({readState:d,getExisting:l,getOrCreate:a})}});const Ws=da({fields:B8,name:"coupling",apis:N8,state:$8}),av=t=>{let s=O.none(),a=[];const l=k=>av(D=>{d(B=>{D(k(B))})}),d=k=>{p()?S(k):a.push(k)},g=k=>{p()||(s=O.some(k),C(a),a=[])},p=()=>s.isSome(),C=k=>{De(k,S)},S=k=>{s.each(D=>{setTimeout(()=>{k(D)},0)})};return t(g),{get:d,map:l,isReady:p}},F8={nu:av,pure:t=>av(s=>{s(t)})},I8=t=>{setTimeout(()=>{throw t},0)},cv=t=>{const s=S=>{t().then(S,I8)};return{map:S=>cv(()=>t().then(S)),bind:S=>cv(()=>t().then(k=>S(k).toPromise())),anonBind:S=>cv(()=>t().then(()=>S.toPromise())),toLazy:()=>F8.nu(s),toCached:()=>{let S=null;return cv(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},lc={nu:t=>cv(()=>new Promise(t)),pure:t=>cv(()=>Promise.resolve(t))},Ux=q("sink"),h3=q(Jl({name:Ux(),overrides:q({dom:{tag:"div"},behaviours:Xe([Ua.config({useFixed:Ot})]),events:ss([ad(vc()),ad(Sn()),ad(Zl())])})})),p3=(t,s)=>{const a=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:d}),g=>({type:l,hotspot:a,overrides:d,layouts:g}))},L8=(t,s,a)=>{const l=t.fetch;return l(a).map(s)},FN=(t,s,a,l,d,g,p)=>{const C=L8(t,s,l),S=IN(l,t);return C.map(k=>k.bind(D=>O.from(mp.sketch({...g.menu(),uid:cd(""),data:D,highlightOnOpen:p,onOpenMenu:(B,P)=>{const H=S().getOrDie();Ua.position(H,P,{anchor:a}),Wn.decloak(d)},onOpenSubmenu:(B,P,H)=>{const Z=S().getOrDie();Ua.position(Z,H,{anchor:{type:"submenu",item:P}}),Wn.decloak(d)},onRepositionMenu:(B,P,H)=>{const Z=S().getOrDie();Ua.position(Z,P,{anchor:a}),De(H,J=>{Ua.position(Z,J.triggeredMenu,{anchor:{type:"submenu",item:J.triggeringItem}})})},onEscape:()=>(Zt.focus(l),Wn.close(d),O.some(!0))}))))},Wx=(t,s,a,l,d,g,p)=>{const C=p3(t,a);return FN(t,s,C,a,l,d,p).map(k=>(k.fold(()=>{Wn.isOpen(l)&&Wn.close(l)},D=>{Wn.cloak(l),Wn.open(l,D),g(l)}),l))},H8=(t,s,a,l,d,g,p)=>(Wn.close(l),lc.pure(l)),b3=(t,s,a,l,d,g)=>{const p=Ws.getCoupled(a,"sandbox");return(Wn.isOpen(p)?H8:Wx)(t,s,a,p,l,d,g)},V8=(t,s,a)=>{const l=En.getCurrent(s).getOr(s),d=or(t.element);a?Xt(l.element,"min-width",d+"px"):Io(l.element,d)},IN=(t,s)=>t.getSystem().getByUid(s.uid+"-"+Ux()).map(a=>()=>St.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>St.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),LN=t=>{Wn.getState(t).each(s=>{mp.repositionMenus(s)})},v3=(t,s,a)=>{const l=kw(),d=(C,S)=>{const k=p3(t,s);l.link(s.element),t.matchWidth&&V8(k.hotspot,S,t.useMinWidth),t.onOpen(k,C,S),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,S)},g=(C,S)=>{l.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(C,S)},p=IN(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:rl.augment(t.sandboxBehaviours,[ut.config({store:{mode:"memory",initialValue:s}}),Wn.config({onOpen:d,onClose:g,isPartOf:(C,S,k)=>ug(S,k)||ug(s,k),getAttachPoint:()=>p().getOrDie()}),En.config({find:C=>Wn.getState(C).bind(S=>En.getCurrent(S))}),Vc.config({channels:{...T0({isExtraPart:jn}),...k1({doReposition:LN})}})])}},HN=t=>{const s=Ws.getCoupled(t,"sandbox");LN(s)},y3=()=>[fe("sandboxClasses",[]),rl.field("sandboxBehaviours",[En,Vc,Wn,ut])],z8=q([Ce("dom"),Ce("fetch"),_n("onOpen"),ua("onExecute"),fe("getHotspot",O.some),fe("getAnchorOverrides",q({})),dm(),Ts("dropdownBehaviours",[yn,Ws,Pt,Zt]),Ce("toggleClass"),fe("eventOrder",{}),oo("lazySink"),fe("matchWidth",!1),fe("useMinWidth",!1),oo("role")].concat(y3())),Zx=q([Fi({schema:[fd(),fe("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),h3()]),C3=(t,s,a,l)=>{const d=D=>Qe(t.dom,"attributes").bind(B=>Qe(B,D)),g=D=>{Wn.getState(D).each(B=>{mp.highlightPrimary(B)})},p=(D,B,P)=>b3(t,mn,D,l,B,P),C=D=>{p(D,g,ll.HighlightMenuAndItem).get(ee)},S={expand:D=>{yn.isOn(D)||p(D,ee,ll.HighlightNone).get(ee)},open:D=>{yn.isOn(D)||p(D,ee,ll.HighlightMenuAndItem).get(ee)},refetch:D=>Ws.getExistingCoupled(D,"sandbox").fold(()=>p(D,ee,ll.HighlightMenuAndItem).map(ee),P=>Wx(t,mn,D,P,l,ee,ll.HighlightMenuAndItem).map(ee)),isOpen:yn.isOn,close:D=>{yn.isOn(D)&&p(D,ee,ll.HighlightMenuAndItem).get(ee)},repositionMenus:D=>{yn.isOn(D)&&HN(D)}},k=(D,B)=>(rf(D),O.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Js(t.dropdownBehaviours,[yn.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Ws.config({others:{sandbox:D=>v3(t,D,{onOpen:()=>yn.on(D),onClose:()=>yn.off(D)})}}),Pt.config({mode:"special",onSpace:k,onEnter:k,onDown:(D,B)=>{if(oi.isOpen(D)){const P=Ws.getCoupled(D,"sandbox");g(P)}else oi.open(D);return O.some(!0)},onEscape:(D,B)=>oi.isOpen(D)?(oi.close(D),O.some(!0)):O.none()}),Zt.config({})]),events:ax(O.some(C)),eventOrder:{...t.eventOrder,[Cl()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},oi=Tr({name:"Dropdown",configFields:z8(),partFields:Zx(),factory:C3,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),VN=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},U8=t=>{const s=ut.getValue(t),a=kx(t).map(yM);oi.refetch(s).get(()=>{const l=Ws.getCoupled(s,"sandbox");a.each(d=>kx(l).each(g=>CI(g,d)))})},W8=(t,s)=>{w3(t).each(a=>{iw(t,a.element,s.event.eventType,s.event.interactionEvent)})},w3=t=>Wn.getState(t).bind(to.getHighlighted).bind(to.getHighlighted),S3=t=>as(t.element,Ax)?O.some(t.element):lr(t.element,"."+Ax),dC=(t,s,a)=>{vM(t).each(l=>{wI(l,a),S3(s).each(g=>{Ds(g,"id").each(p=>gn(l.element,"aria-controls",p))})}),gn(a.element,"aria-selected","true")},zN=(t,s,a)=>{gn(a.element,"aria-selected","false")},Z8=t=>{vM(t).each(s=>Zt.focus(s))},j8=t=>Ws.getExistingCoupled(t,"sandbox").bind(kx).map(yM).map(a=>a.fetchPattern).getOr("");var jx;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(jx||(jx={}));const G8=(t,s,a,l,d)=>{const g=a.shared.providers,p=C=>d?{...C,shortcut:O.none(),icon:C.text.isSome()?O.none():C.icon}:C;switch(t.type){case"menuitem":return WM(t).fold(Af,C=>O.some(k8(p(C),s,g,l)));case"nestedmenuitem":return ZM(t).fold(Af,C=>O.some(A8(p(C),s,g,l,d)));case"togglemenuitem":return GM(t).fold(Af,C=>O.some(O8(p(C),s,g,l)));case"separator":return EM(t).fold(Af,C=>O.some(PN(C)));case"fancymenuitem":return UM(t).fold(Af,C=>D8(C,a));default:return console.error("Unknown item in general menu",t),O.none()}},q8=(t,s,a,l,d,g,p)=>{const C=l===1,S=!C||Dx(t);return Dl(ke(t,k=>{switch(k.type){case"separator":return TM(k).fold(Af,D=>O.some(PN(D)));case"cardmenuitem":return J1(k).fold(Af,D=>O.some(R8({...D,onAction:B=>{D.onAction(B),a(D.value,D.meta)}},d,g,{itemBehaviours:nN(D.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return _M(k).fold(Af,D=>O.some(_8(D,s,C,"normal",a,d,g,S)))}}))},UN=(t,s,a,l,d,g)=>{const p=Dx(s),C=Dl(ke(s,D=>{const B=H=>d?!Qn(H,"text"):p,P=H=>G8(H,a,l,B(H),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?P({...D,enabled:!1}):P(D)})),S=VN(g);return(d?kI:G2)(t,p,C,1,S)},x3=t=>mp.singleData(t.value,t),K8=(t,s,a,l)=>{const d=uC(s,l),g=q1(l);return{data:x3({...t,movement:d,menuBehaviours:Q2.unnamedEvents(s!=="auto"?[]:[rs((p,C)=>{Nx(p,4,g.item).each(({numColumns:S,numRows:k})=>{Pt.setGridSize(p,k,S)})})])}),menu:{markers:q1(l),fakeFocus:a===jx.ContentFocus}}},X8=(t,s)=>w4(ue.fromDom(s.startContainer)).map(a=>{const l=t.createRng();return l.selectNode(a.dom),l}),Y8={register:(t,s)=>{const a=Lt(!1),l=Lt(!1),d=Sr(ur.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Xe([hn("dismissAutocompleter",[Pe(cm(),()=>k())])]),lazySink:s.getSink})),g=()=>ur.isOpen(d),p=l.get,C=()=>{g()&&ur.hide(d)},S=()=>ur.getContent(d).bind(Z=>Jo(Z.components(),0)),k=()=>t.execCommand("mceAutocompleterClose"),D=Z=>{const J=gr(Z,ge=>O.from(ge.columns)).getOr(1);return me(Z,ge=>{const ie=ge.items;return q8(ie,ge.matchText,(re,Ee)=>{const Re=t.selection.getRng();X8(t.dom,Re).each(tt=>{const Le={hide:()=>k(),reload:rt=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:rt})}};a.set(!0),ge.onAction(Le,tt,re,Ee),a.set(!1)})},J,ti.BUBBLE_TO_SANDBOX,s,ge.highlightOn)})},B=(Z,J)=>{S4(ue.fromDom(t.getBody())).each(ge=>{const ie=gr(Z,re=>O.from(re.columns)).getOr(1);ur.showMenuAt(d,{anchor:{type:"node",root:ue.fromDom(t.getBody()),node:O.from(ge)}},K8(G2("autocompleter-value",!0,J,ie,{menuType:"normal"}),ie,jx.ContentFocus,"normal"))}),S().each(to.highlightFirst)},P=Z=>{const J=D(Z);J.length>0?B(Z,J):C()};t.on("AutocompleterStart",({lookupData:Z})=>{l.set(!0),a.set(!1),P(Z)}),t.on("AutocompleterUpdate",({lookupData:Z})=>P(Z)),t.on("AutocompleterEnd",()=>{C(),l.set(!1),a.set(!1)});const H={cancelIfNecessary:k,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:S};oM.setup(H,t)}},J8=["visible","hidden"],WN=t=>{if(pi(t)){const s=Ve(t,"overflow");return Mr(s).length>0&&!Tn(J8,s)}else return!1},ZN=t=>{const s=b1(t,WN),a=s.length===0?jd(t).map(jf).map(l=>b1(l,WN)).getOr([]):s;return Hr(a).map(l=>({element:l,others:a.slice(1)}))},mC=(t,s)=>gp(t)?ZN(s):O.none(),Gx=t=>{const s=[...ke(t.others,M),Ze()];return se(M(t.element),s)},zi=(t,s,a)=>ol(t,s,a).isSome(),jN=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},GN=5,E3=400,_r=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?O.none():O.some(s.touches[0])},Q8=(t,s)=>{const a=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return a>GN||l>GN},e7=t=>{const s=Fo(),a=Lt(!1),l=jN(k=>{t.triggerEvent(Cr(),k),a.set(!0)},E3),d=k=>(_r(k).each(D=>{l.cancel();const B={x:D.clientX,y:D.clientY,target:k.target};l.schedule(k),a.set(!1),s.set(B)}),O.none()),g=k=>(l.cancel(),_r(k).each(D=>{s.on(B=>{Q8(D,B)&&s.clear()})}),O.none()),p=k=>{l.cancel();const D=B=>Ao(B.target,k.target);return s.get().filter(D).map(B=>a.get()?(k.prevent(),!1):t.triggerEvent(Gp(),k))},C=ct([{key:nl(),value:d},{key:fu(),value:g},{key:sm(),value:p}]);return{fireIfReady:(k,D)=>Qe(C,D).bind(B=>B(k))}},t7=t=>t.raw.which===XS[0]&&!Tn(["input","textarea"],_c(t.target))&&!zi(t.target,'[contenteditable="true"]'),n7=(t,s)=>{const a={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=e7(a),g=ke(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),H=>za(t,H,Z=>{d.fireIfReady(Z,H).each(ge=>{ge&&Z.kill()}),a.triggerEvent(H,Z)&&Z.kill()})),p=Fo(),C=za(t,"paste",H=>{d.fireIfReady(H,"paste").each(J=>{J&&H.kill()}),a.triggerEvent("paste",H)&&H.kill(),p.set(setTimeout(()=>{a.triggerEvent(hu(),H)},0))}),S=za(t,"keydown",H=>{a.triggerEvent("keydown",H)?H.kill():a.stopBackspace&&t7(H)&&H.prevent()}),k=za(t,"focusin",H=>{a.triggerEvent("focusin",H)&&H.kill()}),D=Fo(),B=za(t,"focusout",H=>{a.triggerEvent("focusout",H)&&H.kill(),D.set(setTimeout(()=>{a.triggerEvent(yh(),H)},0))});return{unbind:()=>{De(g,H=>{H.unbind()}),S.unbind(),k.unbind(),B.unbind(),C.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},qN=(t,s)=>{const a=Qe(t,"target").getOr(s);return Lt(a)},o7=(t,s)=>{const a=Lt(!1),l=Lt(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},s7=t=>{const s=Lt(!1);return{stop:()=>{s.set(!0)},cut:ee,isStopped:s.get,isCut:jn,event:t,setSource:oe("Cannot set source of a broadcasted event"),getSource:oe("Cannot get source of a broadcasted event")}},fC=w.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),KN=(t,s,a,l,d,g)=>{const p=t(s,l),C=o7(a,d);return p.fold(()=>(g.logEventNoHandlers(s,l),fC.complete()),S=>{const k=S.descHandler;return t1(k)(C),C.isStopped()?(g.logEventStopped(s,S.element,k.purpose),fC.stopped()):C.isCut()?(g.logEventCut(s,S.element,k.purpose),fC.complete()):Ac(S.element).fold(()=>(g.logNoParent(s,S.element,k.purpose),fC.complete()),B=>(g.logEventResponse(s,S.element,k.purpose),fC.resume(B)))})},XN=(t,s,a,l,d,g)=>KN(t,s,a,l,d,g).fold(Ot,p=>XN(t,s,a,p,d,g),jn),r7=(t,s,a,l,d)=>{const g=qN(a,l);return KN(t,s,a,l,g,d)},a7=(t,s,a)=>{const l=s7(s);return De(t,d=>{const g=d.descHandler;t1(g)(l)}),l.isStopped()},c7=(t,s,a,l)=>YN(t,s,a,a.target,l),YN=(t,s,a,l,d)=>{const g=qN(a,l);return XN(t,s,a,l,g,d)},l7=(t,s)=>({element:t,descHandler:s}),i7=(t,s)=>({id:t,descHandler:s}),u7=()=>{const t={},s=(p,C,S)=>{Is(S,(k,D)=>{const B=t[D]!==void 0?t[D]:{};B[C]=Rh(k,p),t[D]=B})},a=(p,C)=>Oi(C).bind(S=>Qe(p,S)).map(S=>l7(C,S));return{registerId:s,unregisterId:p=>{Is(t,(C,S)=>{Qn(C,p)&&delete C[p]})},filterByType:p=>Qe(t,p).map(C=>Iu(C,(S,k)=>i7(k,S))).getOr([]),find:(p,C,S)=>Qe(t,C).bind(k=>la(S,D=>a(k,D),p))}},d7=()=>{const t=u7(),s={},a=k=>{const D=k.element;return Oi(D).getOrThunk(()=>e_("uid-",k.element))},l=(k,D)=>{const B=s[D];if(B===k)g(k);else throw new Error('The tagId "'+D+'" is already used by: '+ig(B.element)+`
Cannot use it for: `+ig(k.element)+`
The conflicting element is`+($a(B.element)?" ":" not ")+"already in the DOM")},d=k=>{const D=a(k);ba(s,D)&&l(k,D);const B=[k];t.registerId(B,D,k.events),s[D]=k},g=k=>{Oi(k.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(k,D,B)=>t.find(k,D,B),filter:k=>t.filterByType(k),register:d,unregister:g,getById:k=>Qe(s,k)}},Sm=ir({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:rp(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[fe("components",[]),Ts("containerBehaviours",[]),fe("events",{}),fe("domModification",{}),fe("eventOrder",{})]}),T3=t=>{const s=ie=>Ac(t.element).fold(Ot,re=>Ao(ie,re)),a=d7(),l=(ie,re)=>a.find(s,ie,re),d=n7(t.element,{triggerEvent:(ie,re)=>dg(ie,re.target,Ee=>c7(l,ie,re,Ee))}),g={debugInfo:q("real"),triggerEvent:(ie,re,Ee)=>{dg(ie,re,Re=>YN(l,ie,Ee,re,Re))},triggerFocus:(ie,re)=>{Oi(ie).fold(()=>{ql(ie)},Ee=>{dg(rd(),ie,Re=>(r7(l,rd(),{originator:re,kill:ee,prevent:ee,target:ie},ie,Re),!1))})},triggerEscape:(ie,re)=>{g.triggerEvent("keydown",ie.element,re.event)},getByUid:ie=>J(ie),getByDom:ie=>ge(ie),build:Sr,buildOrPatch:pf,addToGui:ie=>{S(ie)},removeFromGui:ie=>{k(ie)},addToWorld:ie=>{p(ie)},removeFromWorld:ie=>{C(ie)},broadcast:ie=>{P(ie)},broadcastOn:(ie,re)=>{H(ie,re)},broadcastEvent:(ie,re)=>{Z(ie,re)},isConnected:Ot},p=ie=>{ie.connect(g),wa(ie.element)||(a.register(ie),De(ie.components(),p),g.triggerEvent(rg(),ie.element,{target:ie.element}))},C=ie=>{wa(ie.element)||(De(ie.components(),C),a.unregister(ie)),ie.disconnect()},S=ie=>{Cd(t,ie)},k=ie=>{wd(ie)},D=()=>{d.unbind(),Ya(t.element)},B=ie=>{const re=a.filter(pu());De(re,Ee=>{const Re=Ee.descHandler;t1(Re)(ie)})},P=ie=>{B({universal:!0,data:ie})},H=(ie,re)=>{B({universal:!1,channels:ie,data:re})},Z=(ie,re)=>{const Ee=a.filter(ie);return a7(Ee,re)},J=ie=>a.getById(ie).fold(()=>St.error(new Error('Could not find component with uid: "'+ie+'" in system.')),St.value),ge=ie=>{const re=Oi(ie).getOr("not found");return J(re)};return p(t),{root:t,element:t.element,destroy:D,add:S,remove:k,getByUid:J,getByDom:ge,addToWorld:p,removeFromWorld:C,broadcast:P,broadcastOn:H,broadcastEvent:Z}},m7=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:ke(t.items,s.interpreter)}),f7=q([fe("prefix","form-field"),Ts("fieldBehaviours",[En,ut])]),g7=q([Jl({schema:[Ce("dom")],name:"label"}),Jl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ce("text")],name:"aria-descriptor"}),Qs({factory:{sketch:t=>{const s=ye(t,["factory"]);return t.factory.sketch(s)}},schema:[Ce("factory")],name:"field"})]),h7=(t,s,a,l)=>{const d=Js(t.fieldBehaviours,[En.config({find:C=>Vo(C,t,"field")}),ut.config({store:{mode:"manual",getValue:C=>En.getCurrent(C).bind(ut.getValue),setValue:(C,S)=>{En.getCurrent(C).each(k=>{ut.setValue(k,S)})}}})]),g=ss([rs((C,S)=>{const k=LS(C,t,["label","field","aria-descriptor"]);k.field().each(D=>{const B=pt(t.prefix);k.label().each(P=>{gn(P.element,"for",B),gn(D.element,"id",B)}),k["aria-descriptor"]().each(P=>{const H=pt(t.prefix);gn(P.element,"id",H),gn(D.element,"aria-describedby",H)})})})]),p={getField:C=>Vo(C,t,"field"),getLabel:C=>Vo(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},fo=Tr({name:"FormField",configFields:f7(),partFields:g7(),factory:h7,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var p7=Object.freeze({__proto__:null,exhibit:(t,s)=>wl({attributes:ct([{key:s.tabAttr,value:"true"}])})}),b7=[fe("tabAttr","data-alloy-tabstop")];const _s=da({fields:b7,name:"tabstopping",active:p7});var v7=tinymce.util.Tools.resolve("tinymce.html.Entities");const gC=(t,s,a,l)=>{const d=JN(t,s,a,l);return fo.sketch(d)},y7=(t,s)=>gC(t,s,[],[]),JN=(t,s,a,l)=>({dom:QN(a),components:t.toArray().concat([s]),fieldBehaviours:Xe(l)}),C7=()=>QN([]),QN=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),wp=(t,s)=>fo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Xs(s.translate(t))]}),si=pt("form-component-change"),lv=pt("form-close"),ob=pt("form-cancel"),xm=pt("form-action"),hC=pt("form-submit"),qx=pt("form-block"),_3=pt("form-unblock"),eB=pt("form-tabchange"),tB=pt("form-resize"),w7=(t,s,a)=>{const l=t.label.map(B=>wp(B,s)),d=B=>(P,H)=>{ol(H.event.target,"[data-collection-item-value]").each(Z=>{B(P,H,Z,zr(Z,"data-collection-item-value"))})},g=(B,P)=>{const H=ke(P,ge=>{const ie=Eu.translate(ge.text),re=t.columns===1?`<div class="tox-collection__item-label">${ie}</div>`:"",Ee=`<div class="tox-collection__item-icon">${ge.icon}</div>`,Re={_:" "," - ":" ","-":" "},tt=ie.replace(/\_| \- |\-/g,rt=>Re[rt]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${v7.encodeAllRaw(ge.value)}" title="${tt}" aria-label="${tt}">${Ee}${re}</div>`}),Z=t.columns!=="auto"&&t.columns>1?Dn(H,t.columns):[H],J=ke(Z,ge=>`<div class="tox-collection__group">${ge.join("")}</div>`);cf(B.element,J.join(""))},p=d((B,P,H,Z)=>{P.stop(),s.isDisabled()||Mt(B,xm,{name:t.name,value:Z})}),C=[Pe(gu(),d((B,P,H)=>{ql(H)})),Pe(Zl(),p),Pe(Gp(),p),Pe(ki(),d((B,P,H)=>{lr(B.element,"."+Z2).each(Z=>{Oo(Z,Z2)}),wr(H,Z2)})),Pe(Wl(),d(B=>{lr(B.element,"."+Z2).each(P=>{Oo(P,Z2)})})),bu(d((B,P,H,Z)=>{Mt(B,xm,{name:t.name,value:Z})}))],S=(B,P)=>ke(Cc(B.element,".tox-collection__item"),P),k=fo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:mn},behaviours:Xe([zt.config({disabled:s.isDisabled,onDisabled:B=>{S(B,P=>{wr(P,"tox-collection__item--state-disabled"),gn(P,"aria-disabled",!0)})},onEnabled:B=>{S(B,P=>{Oo(P,"tox-collection__item--state-disabled"),ws(P,"aria-disabled")})}}),Xr(),nn.config({}),ut.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(B,P)=>{g(B,P),t.columns==="auto"&&Nx(B,5,"tox-collection__item").each(({numRows:H,numColumns:Z})=>{Pt.setGridSize(B,H,Z)}),lo(B,tB)}}),_s.config({}),Pt.config(AN(t.columns,"normal")),hn("collection-events",C)]),eventOrder:{[Cl()]:["disabling","alloy.base.behaviour","collection-events"]}});return gC(l,k,["tox-form__group--collection"],[])},S7=["input","textarea"],nB=t=>{const s=_c(t);return Tn(S7,s)},oB=(t,s)=>{const a=s.getRoot(t).getOr(t.element);Oo(a,s.invalidClass),s.notify.each(l=>{nB(t.element)&&gn(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{cf(d,l.validHtml)}),l.onValid(t)})},sB=(t,s,a,l)=>{const d=s.getRoot(t).getOr(t.element);wr(d,s.invalidClass),s.notify.each(g=>{nB(t.element)&&gn(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{cf(p,l)}),g.onInvalid(t,l)})},rB=(t,s,a)=>s.validator.fold(()=>lc.pure(St.value(!0)),l=>l.validate(t)),k3=(t,s,a)=>(s.notify.each(l=>{l.onValidate(t)}),rB(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(sB(t,s,a,d),St.error(d)),d=>(oB(t,s),St.value(d))):St.error("No longer in system")));var x7=Object.freeze({__proto__:null,markValid:oB,markInvalid:sB,query:rB,run:k3,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return as(a,s.invalidClass)}}),T7=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>ss([Pe(a.onEvent,l=>{k3(l,t,s).get(mn)})].concat(a.validateOnLoad?[rs(l=>{k3(l,t,s).get(ee)})]:[]))).getOr({})}),_7=[Ce("invalidClass"),fe("getRoot",O.none),Ms("notify",[fe("aria","alert"),fe("getContainer",O.none),fe("validHtml",""),_n("onValid"),_n("onInvalid"),_n("onValidate")]),Ms("validator",[Ce("validate"),fe("onEvent","input"),fe("validateOnLoad",!0)])];const Df=da({fields:_7,name:"invalidating",active:T7,apis:x7,extra:{validation:t=>s=>{const a=ut.getValue(s);return lc.pure(t(a))}}});var A3=Object.freeze({__proto__:null,events:()=>ss([Yp(Qv(),Ot)]),exhibit:()=>wl({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const pC=da({fields:[],name:"unselecting",active:A3}),k7=(t,s)=>oi.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Xe([Dd.button(s.providers.isDisabled),Xr(),pC.config({}),_s.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>lc.nu(l=>t.fetch(l)).map(l=>O.from(x3(Lo(Cp(pt("menu-value"),l,d=>{t.onItemAction(a,d)},t.columns,t.presets,ti.CLOSE_ON_EXECUTE,jn,s.providers),{movement:uC(t.columns,t.presets)})))),parts:{menu:_x(!1,1,t.presets)}}),aB=pt("color-input-change"),O3=pt("color-swatch-change"),D3=pt("color-picker-cancel"),A7=(t,s,a,l)=>{const d=fo.parts.field({factory:Pg,inputClasses:["tox-textfield"],data:l,onSetValue:k=>Df.run(k).get(ee),inputBehaviours:Xe([zt.config({disabled:s.providers.isDisabled}),Xr(),_s.config({}),Df.config({invalidClass:"tox-textbox-field-invalid",getRoot:k=>Ba(k.element),notify:{onValid:k=>{const D=ut.getValue(k);Mt(k,aB,{color:D})}},validator:{validateOnLoad:!1,validate:k=>{const D=ut.getValue(k);if(D.length===0)return lc.pure(St.value(!0));{const B=ue.fromTag("span");Xt(B,"background-color",D);const P=Gs(B,"background-color").fold(()=>St.error("blah"),H=>St.value(D));return lc.pure(P)}}}})]),selectOnFocus:!1}),g=t.label.map(k=>wp(k,s.providers)),p=(k,D)=>{Mt(k,O3,{value:D})},C=(k,D)=>{S.getOpt(k).each(B=>{D==="custom"?a.colorPicker(P=>{P.fold(()=>lo(B,D3),H=>{p(B,H),fN(t.storageKey,H)})},"#ffffff"):D==="remove"?p(B,""):p(B,D)})},S=yo(k7({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[xr,Gr,Ys],onLtr:()=>[Gr,xr,Ys]},components:[],fetch:TN(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:C},s));return fo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:Xe([hn("form-field-events",[Pe(aB,(k,D)=>{S.getOpt(k).each(B=>{Xt(B.element,"background-color",D.event.color)}),Mt(k,si,{name:t.name})}),Pe(O3,(k,D)=>{fo.getField(k).each(B=>{ut.setValue(B,D.event.value),En.getCurrent(k).each(Zt.focus)})}),Pe(D3,(k,D)=>{fo.getField(k).each(B=>{En.getCurrent(k).each(Zt.focus)})})])])})},O7=Jl({schema:[Ce("dom")],name:"label"}),Lg=t=>Jl({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:ss([cg(nl(),(d,g,p)=>l(d,p),[s]),cg(Sn(),(d,g,p)=>l(d,p),[s]),cg(os(),(d,g,p)=>{p.mouseIsDown.get()&&l(d,p)},[s])])}))}),D7=Lg("top-left"),R7=Lg("top"),M7=Lg("top-right"),N7=Lg("right"),B7=Lg("bottom-right"),$7=Lg("bottom"),Kx=Lg("bottom-left"),P7=Lg("left"),Xx=Qs({name:"thumb",defaults:q({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ss([af(nl(),t,"spectrum"),af(fu(),t,"spectrum"),af(sm(),t,"spectrum"),af(Sn(),t,"spectrum"),af(os(),t,"spectrum"),af(Es(),t,"spectrum")])})}),F7=Qs({schema:[Ia("mouseIsDown",()=>Lt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,l=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:Xe([Pt.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),Zt.config({})]),events:ss([Pe(nl(),l),Pe(fu(),l),Pe(Sn(),l),Pe(os(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var I7=[O7,P7,N7,R7,$7,D7,M7,Kx,B7,Xx,F7];const bC=q("slider.change.value"),UZ=t=>t.type.indexOf("touch")!==-1,iv=t=>{const s=t.event.raw;if(UZ(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?O.some(a.touches[0]).map(l=>ts(l.clientX,l.clientY)):O.none()}else{const a=s;return a.clientX!==void 0?O.some(a).map(l=>ts(l.clientX,l.clientY)):O.none()}},uv="top",cB="right",lB="bottom",L7="left",sb=t=>t.model.minX,rb=t=>t.model.minY,Yx=t=>t.model.minX-1,Jx=t=>t.model.minY-1,ab=t=>t.model.maxX,cb=t=>t.model.maxY,Qx=t=>t.model.maxX+1,eE=t=>t.model.maxY+1,iB=(t,s,a)=>s(t)-a(t),R3=t=>iB(t,ab,sb),tE=t=>iB(t,cb,rb),lb=t=>R3(t)/2,Sp=t=>tE(t)/2,dv=t=>t.stepSize,M3=t=>t.snapToGrid,N3=t=>t.snapStart,vC=t=>t.rounded,nE=(t,s)=>t[s+"-edge"]!==void 0,mv=t=>nE(t,L7),fv=t=>nE(t,cB),uB=t=>nE(t,uv),dB=t=>nE(t,lB),Hg=t=>t.model.value.get(),xp=(t,s)=>({x:t,y:s}),Nd=(t,s)=>{Mt(t,bC(),{value:s})},H7=(t,s)=>{Nd(t,xp(Yx(s),Jx(s)))},oE=(t,s)=>{Nd(t,Jx(s))},V7=(t,s)=>{Nd(t,xp(lb(s),Jx(s)))},z7=(t,s)=>{Nd(t,xp(Qx(s),Jx(s)))},U7=(t,s)=>{Nd(t,Qx(s))},mB=(t,s)=>{Nd(t,xp(Qx(s),Sp(s)))},W7=(t,s)=>{Nd(t,xp(Qx(s),eE(s)))},Z7=(t,s)=>{Nd(t,eE(s))},j7=(t,s)=>{Nd(t,xp(lb(s),eE(s)))},fB=(t,s)=>{Nd(t,xp(Yx(s),eE(s)))},G7=(t,s)=>{Nd(t,Yx(s))},q7=(t,s)=>{Nd(t,xp(Yx(s),Sp(s)))},B3=(t,s,a,l)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-l),$3=(t,s,a,l)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+l),gB=(t,s,a)=>Math.max(s,Math.min(a,t)),hB=(t,s,a,l,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/l)*l;return gB(s+p,s-1,a+1)},g=>{const p=(t-g)%l,C=Math.round(p/l),S=Math.floor((t-g)/l),k=Math.floor((a-g)/l),D=Math.min(k,S+C),B=g+D*l;return Math.max(g,B)}),pB=(t,s,a)=>Math.min(a,Math.max(t,s))-s,bB=t=>{const{min:s,max:a,range:l,value:d,step:g,snap:p,snapStart:C,rounded:S,hasMinEdge:k,hasMaxEdge:D,minBound:B,maxBound:P,screenRange:H}=t,Z=k?s-1:s,J=D?a+1:a;if(d<B)return Z;if(d>P)return J;{const ge=pB(d,B,P),ie=gB(ge/H*l+s,Z,J);return p&&ie>=s&&ie<=a?hB(ie,s,a,g,C):S?Math.round(ie):ie}},vB=t=>{const{min:s,max:a,range:l,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:C,maxOffset:S,centerMinEdge:k,centerMaxEdge:D}=t;return d<s?g?0:k:d>a?p?C:D:(d-s)/l*S},P3="top",yB="right",CB="bottom",sE="left",gv="width",K7="height",Rf=t=>t.element.dom.getBoundingClientRect(),Bd=(t,s)=>t[s],ib=t=>{const s=Rf(t);return Bd(s,sE)},Ui=t=>{const s=Rf(t);return Bd(s,yB)},hv=t=>{const s=Rf(t);return Bd(s,P3)},F3=t=>{const s=Rf(t);return Bd(s,CB)},wB=t=>{const s=Rf(t);return Bd(s,gv)},SB=t=>{const s=Rf(t);return Bd(s,K7)},xB=(t,s,a)=>(t+s)/2-a,EB=(t,s)=>{const a=Rf(t),l=Rf(s),d=Bd(a,sE),g=Bd(a,yB),p=Bd(l,sE);return xB(d,g,p)},I3=(t,s)=>{const a=Rf(t),l=Rf(s),d=Bd(a,P3),g=Bd(a,CB),p=Bd(l,P3);return xB(d,g,p)},yC=(t,s)=>{Mt(t,bC(),{value:s})},L3=(t,s,a)=>{const l={min:sb(s),max:ab(s),range:R3(s),value:a,step:dv(s),snap:M3(s),snapStart:N3(s),rounded:vC(s),hasMinEdge:mv(s),hasMaxEdge:fv(s),minBound:ib(t),maxBound:Ui(t),screenRange:wB(t)};return bB(l)},X7=(t,s,a)=>{const l=L3(t,s,a);return yC(t,l),l},TB=(t,s)=>{const a=sb(s);yC(t,a)},Y7=(t,s)=>{const a=ab(s);yC(t,a)},_B=(t,s,a)=>{const d=(t>0?$3:B3)(Hg(a),sb(a),ab(a),dv(a));return yC(s,d),O.some(d)},H3=t=>(s,a)=>_B(t,s,a).map(Ot),kB=t=>iv(t).map(a=>a.left),J7=(t,s,a,l,d)=>{const p=wB(t),C=l.bind(D=>O.some(EB(D,t))).getOr(0),S=d.bind(D=>O.some(EB(D,t))).getOr(p),k={min:sb(s),max:ab(s),range:R3(s),value:a,hasMinEdge:mv(s),hasMaxEdge:fv(s),minBound:ib(t),minOffset:0,maxBound:Ui(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:S};return vB(k)},V3=(t,s,a,l,d,g)=>{const p=J7(s,g,a,l,d);return ib(s)-ib(t)+p},Q7=(t,s,a,l)=>{const d=Hg(a),g=V3(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),a),p=or(s.element)/2;Xt(s.element,"left",g-p+"px")},eL=H3(-1),tL=H3(1),nL=O.none,z3=O.none,oL={"top-left":O.none(),top:O.none(),"top-right":O.none(),right:O.some(U7),"bottom-right":O.none(),bottom:O.none(),"bottom-left":O.none(),left:O.some(G7)};var AB=Object.freeze({__proto__:null,setValueFrom:X7,setToMin:TB,setToMax:Y7,findValueOfOffset:L3,getValueFromEvent:kB,findPositionOfValue:V3,setPositionFromValue:Q7,onLeft:eL,onRight:tL,onUp:nL,onDown:z3,edgeActions:oL});const rE=(t,s)=>{Mt(t,bC(),{value:s})},U3=(t,s,a)=>{const l={min:rb(s),max:cb(s),range:tE(s),value:a,step:dv(s),snap:M3(s),snapStart:N3(s),rounded:vC(s),hasMinEdge:uB(s),hasMaxEdge:dB(s),minBound:hv(t),maxBound:F3(t),screenRange:SB(t)};return bB(l)},sL=(t,s,a)=>{const l=U3(t,s,a);return rE(t,l),l},rL=(t,s)=>{const a=rb(s);rE(t,a)},aL=(t,s)=>{const a=cb(s);rE(t,a)},cL=(t,s,a)=>{const d=(t>0?$3:B3)(Hg(a),rb(a),cb(a),dv(a));return rE(s,d),O.some(d)},OB=t=>(s,a)=>cL(t,s,a).map(Ot),DB=t=>iv(t).map(a=>a.top),RB=(t,s,a,l,d)=>{const p=SB(t),C=l.bind(D=>O.some(I3(D,t))).getOr(0),S=d.bind(D=>O.some(I3(D,t))).getOr(p),k={min:rb(s),max:cb(s),range:tE(s),value:a,hasMinEdge:uB(s),hasMaxEdge:dB(s),minBound:hv(t),minOffset:0,maxBound:F3(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:S};return vB(k)},W3=(t,s,a,l,d,g)=>{const p=RB(s,g,a,l,d);return hv(s)-hv(t)+p},lL=(t,s,a,l)=>{const d=Hg(a),g=W3(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),a),p=ys(s.element)/2;Xt(s.element,"top",g-p+"px")},iL=O.none,uL=O.none,dL=OB(-1),MB=OB(1),NB={"top-left":O.none(),top:O.some(oE),"top-right":O.none(),right:O.none(),"bottom-right":O.none(),bottom:O.some(Z7),"bottom-left":O.none(),left:O.none()};var BB=Object.freeze({__proto__:null,setValueFrom:sL,setToMin:rL,setToMax:aL,findValueOfOffset:U3,getValueFromEvent:DB,findPositionOfValue:W3,setPositionFromValue:lL,onLeft:iL,onRight:uL,onUp:dL,onDown:MB,edgeActions:NB});const pv=(t,s)=>{Mt(t,bC(),{value:s})},aE=(t,s)=>({x:t,y:s}),$B=(t,s,a)=>{const l=L3(t,s,a.left),d=U3(t,s,a.top),g=aE(l,d);return pv(t,g),g},mL=(t,s,a,l)=>{const d=t>0?$3:B3,g=s?Hg(l).x:d(Hg(l).x,sb(l),ab(l),dv(l)),p=s?d(Hg(l).y,rb(l),cb(l),dv(l)):Hg(l).y;return pv(a,aE(g,p)),O.some(g)},cE=(t,s)=>(a,l)=>mL(t,s,a,l).map(Ot),fL=(t,s)=>{const a=sb(s),l=rb(s);pv(t,aE(a,l))},gL=(t,s)=>{const a=ab(s),l=cb(s);pv(t,aE(a,l))},Z3=t=>iv(t),Vg=(t,s,a,l)=>{const d=Hg(a),g=V3(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),a),p=W3(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),a),C=or(s.element)/2,S=ys(s.element)/2;Xt(s.element,"left",g-C+"px"),Xt(s.element,"top",p-S+"px")},hL=cE(-1,!1),CC=cE(1,!1),pL=cE(-1,!0),j3=cE(1,!0),bL={"top-left":O.some(H7),top:O.some(V7),"top-right":O.some(z7),right:O.some(mB),"bottom-right":O.some(W7),bottom:O.some(j7),"bottom-left":O.some(fB),left:O.some(q7)};var vL=Object.freeze({__proto__:null,setValueFrom:$B,setToMin:fL,setToMax:gL,getValueFromEvent:Z3,setPositionFromValue:Vg,onLeft:hL,onRight:CC,onUp:pL,onDown:j3,edgeActions:bL});const yL=[fe("stepSize",1),fe("onChange",ee),fe("onChoose",ee),fe("onInit",ee),fe("onDragStart",ee),fe("onDragEnd",ee),fe("snapToGrid",!1),fe("rounded",!0),oo("snapStart"),ec("model",Hs("mode",{x:[fe("minX",0),fe("maxX",100),Ia("value",t=>Lt(t.mode.minX)),Ce("getInitialValue"),Ho("manager",AB)],y:[fe("minY",0),fe("maxY",100),Ia("value",t=>Lt(t.mode.minY)),Ce("getInitialValue"),Ho("manager",BB)],xy:[fe("minX",0),fe("maxX",100),fe("minY",0),fe("maxY",100),Ia("value",t=>Lt({x:t.mode.minX,y:t.mode.minY})),Ce("getInitialValue"),Ho("manager",vL)]})),Ts("sliderBehaviours",[Pt,ut]),Ia("mouseIsDown",()=>Lt(!1))],$d=Tr({name:"Slider",configFields:yL,partFields:I7,factory:(t,s,a,l)=>{const d=Re=>bm(Re,t,"thumb"),g=Re=>bm(Re,t,"spectrum"),p=Re=>Vo(Re,t,"left-edge"),C=Re=>Vo(Re,t,"right-edge"),S=Re=>Vo(Re,t,"top-edge"),k=Re=>Vo(Re,t,"bottom-edge"),D=t.model,B=D.manager,P=(Re,tt)=>{B.setPositionFromValue(Re,tt,t,{getLeftEdge:p,getRightEdge:C,getTopEdge:S,getBottomEdge:k,getSpectrum:g})},H=(Re,tt)=>{D.value.set(tt);const Le=d(Re);P(Re,Le)},Z=(Re,tt)=>{H(Re,tt);const Le=d(Re);return t.onChange(Re,Le,tt),O.some(!0)},J=Re=>{B.setToMin(Re,t)},ge=Re=>{B.setToMax(Re,t)},ie=Re=>{const tt=()=>{Vo(Re,t,"thumb").each(rt=>{const Dt=D.value.get();t.onChoose(Re,rt,Dt)})},Le=t.mouseIsDown.get();t.mouseIsDown.set(!1),Le&&tt()},re=(Re,tt)=>{tt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Re,d(Re))},Ee=(Re,tt)=>{tt.stop(),t.onDragEnd(Re,d(Re)),ie(Re)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Js(t.sliderBehaviours,[Pt.config({mode:"special",focusIn:Re=>Vo(Re,t,"spectrum").map(Pt.focusIn).map(Ot)}),ut.config({store:{mode:"manual",getValue:Re=>D.value.get(),setValue:H}}),Vc.config({channels:{[E0()]:{onReceive:ie}}})]),events:ss([Pe(bC(),(Re,tt)=>{Z(Re,tt.event.value)}),rs((Re,tt)=>{const Le=D.getInitialValue();D.value.set(Le);const rt=d(Re);P(Re,rt);const Dt=g(Re);t.onInit(Re,rt,Dt,D.value.get())}),Pe(nl(),re),Pe(sm(),Ee),Pe(Sn(),re),Pe(Es(),Ee)]),apis:{resetToMin:J,resetToMax:ge,setValue:H,refresh:P},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),wC=pt("rgb-hex-update"),lE=pt("slider-update"),iE=pt("palette-update"),wL=(t,s)=>{const a=$d.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=$d.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return $d.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:q(0)},components:[a,l],sliderBehaviours:Xe([Zt.config({})]),onChange:(d,g,p)=>{Mt(d,lE,{value:p})}})},ri="form",SL=[Ts("formBehaviours",[ut])],PB=t=>"<alloy.field."+t+">",FB=t=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),P0(ri,PB(C),S)),record:q(g)}})(),a=t(s),l=s.record(),d=ke(l,g=>Qs({name:g,pname:PB(g)}));return S2(ri,SL,d,xL,a)},IB=(t,s)=>t.fold(()=>St.error(s),St.value),xL=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Js(t.formBehaviours,[ut.config({store:{mode:"manual",getValue:a=>{const l=HS(a,t);return Mo(l,(d,g)=>d().bind(p=>{const C=En.getCurrent(p);return IB(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+ig(p.element)))}).map(ut.getValue))},setValue:(a,l)=>{Is(l,(d,g)=>{Vo(a,t,g).each(p=>{En.getCurrent(p).each(C=>{ut.setValue(C,d)})})})}}})]),apis:{getField:(a,l)=>Vo(a,t,l).bind(En.getCurrent)}}),bv={getField:Ib((t,s,a)=>t.getField(s,a)),sketch:FB},LB=pt("valid-input"),HB=pt("invalid-input"),VB=pt("validating-input"),G3="colorcustom.rgb.",EL=(t,s,a,l)=>{const d=(P,H)=>Df.config({invalidClass:s("invalid"),notify:{onValidate:Z=>{Mt(Z,VB,{type:P})},onValid:Z=>{Mt(Z,LB,{type:P,value:ut.getValue(Z)})},onInvalid:Z=>{Mt(Z,HB,{type:P,value:ut.getValue(Z)})}},validator:{validate:Z=>{const J=ut.getValue(Z),ge=H(J)?St.value(!0):St.error(t("aria.input.invalid"));return lc.pure(ge)},validateOnLoad:!1}}),g=(P,H,Z,J,ge)=>{const ie=t(G3+"range"),re=fo.parts.label({dom:{tag:"label",attributes:{"aria-label":J}},components:[Xs(Z)]}),Ee=fo.parts.field({data:ge,factory:Pg,inputAttributes:{type:"text",...H==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Xe([d(H,P),_s.config({})]),onSetValue:rt=>{Df.isInvalid(rt)&&Df.run(rt).get(ee)}}),Re=[re,Ee],tt=H!=="hex"?[fo.parts["aria-descriptor"]({text:ie})]:[],Le=Re.concat(tt);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Le}},p=(P,H)=>{const Z=rC(H);return bv.getField(P,"hex").each(J=>{Zt.isFocused(J)||ut.setValue(P,{hex:Z.value})}),Z},C=(P,H)=>{const Z=H.red,J=H.green,ge=H.blue;ut.setValue(P,{red:Z,green:J,blue:ge})},S=yo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),k=(P,H)=>{S.getOpt(P).each(Z=>{Xt(Z.element,"background-color","#"+H.value)})};return ir({factory:()=>{const P={red:Lt(O.some(255)),green:Lt(O.some(255)),blue:Lt(O.some(255)),hex:Lt(O.some("ffffff"))},H=(pn,$n)=>{const en=aC($n);C(pn,en),ie(en)},Z=pn=>P[pn].get(),J=(pn,$n)=>{P[pn].set($n)},ge=()=>Z("red").bind(pn=>Z("green").bind($n=>Z("blue").map(en=>Ig(pn,$n,en,1)))),ie=pn=>{const $n=pn.red,en=pn.green,wo=pn.blue;J("red",O.some($n)),J("green",O.some(en)),J("blue",O.some(wo))},re=(pn,$n)=>{const en=$n.event;en.type!=="hex"?J(en.type,O.none()):l(pn)},Ee=(pn,$n)=>{a(pn);const en=sC($n);J("hex",O.some(en.value));const wo=aC(en);C(pn,wo),ie(wo),Mt(pn,wC,{hex:en}),k(pn,en)},Re=(pn,$n,en)=>{const wo=parseInt(en,10);J($n,O.some(wo)),ge().each(it=>{const kt=p(pn,it);Mt(pn,wC,{hex:kt}),k(pn,kt)})},tt=pn=>pn.type==="hex",Le=(pn,$n)=>{const en=$n.event;tt(en)?Ee(pn,en.value):Re(pn,en.type,en.value)},rt=pn=>({label:t(G3+pn+".label"),description:t(G3+pn+".description")}),Dt=rt("red"),Nn=rt("green"),xt=rt("blue"),An=rt("hex");return Lo(bv.sketch(pn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[pn.field("red",fo.sketch(g(ov,"red",Dt.label,Dt.description,255))),pn.field("green",fo.sketch(g(ov,"green",Nn.label,Nn.description,255))),pn.field("blue",fo.sketch(g(ov,"blue",xt.label,xt.description,255))),pn.field("hex",fo.sketch(g(cN,"hex",An.label,An.description,"ffffff"))),S.asSpec()],formBehaviours:Xe([Df.config({invalidClass:s("form-invalid")}),hn("rgb-form-events",[Pe(LB,Le),Pe(HB,re),Pe(VB,re)])])})),{apis:{updateHex:(pn,$n)=>{ut.setValue(pn,{hex:$n.value}),H(pn,$n),k(pn,$n)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(P,H,Z)=>{P.updateHex(H,Z)}},extraApis:{}})},zB=(t,s)=>{const a=$d.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=$d.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(k,D)=>{const{width:B,height:P}=k,H=k.getContext("2d");if(H===null)return;H.fillStyle=D,H.fillRect(0,0,B,P);const Z=H.createLinearGradient(0,0,B,0);Z.addColorStop(0,"rgba(255,255,255,1)"),Z.addColorStop(1,"rgba(255,255,255,0)"),H.fillStyle=Z,H.fillRect(0,0,B,P);const J=H.createLinearGradient(0,0,0,P);J.addColorStop(0,"rgba(0,0,0,0)"),J.addColorStop(1,"rgba(0,0,0,1)"),H.fillStyle=J,H.fillRect(0,0,B,P)},g=(k,D)=>{const B=k.components()[0].element.dom,P=lC(D,100,100),H=Fx(P);d(B,cC(H))},p=(k,D)=>{const B=o3(aC(D));$d.setValue(k,{x:B.saturation,y:100-B.value})};return ir({factory:k=>{const D=q({x:0,y:0}),B=(Z,J,ge)=>{Mt(Z,iE,{value:ge})},P=(Z,J,ge,ie)=>{d(ge.element.dom,cC(mN))},H=Xe([En.config({find:O.some}),Zt.config({})]);return $d.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,l],onChange:B,onInit:P,sliderBehaviours:H})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(k,D,B)=>{g(D,B)},setThumb:(k,D,B)=>{p(D,B)}},extraApis:{}})},TL=(t,s)=>{const a=d=>{const g=EL(t,s,d.onValidHex,d.onInvalidHex),p=zB(t,s),C=Le=>(100-Le)/100*360,S=Le=>100-Le/360*100,k={paletteRgba:Lt(mN),paletteHue:Lt(0)},D=yo(wL(t,s)),B=yo(p.sketch({})),P=yo(g.sketch({})),H=(Le,rt,Dt)=>{B.getOpt(Le).each(Nn=>{p.setHue(Nn,Dt)})},Z=(Le,rt)=>{P.getOpt(Le).each(Dt=>{g.updateHex(Dt,rt)})},J=(Le,rt,Dt)=>{D.getOpt(Le).each(Nn=>{$d.setValue(Nn,S(Dt))})},ge=(Le,rt)=>{B.getOpt(Le).each(Dt=>{p.setThumb(Dt,rt)})},ie=(Le,rt)=>{const Dt=aC(Le);k.paletteRgba.set(Dt),k.paletteHue.set(rt)},re=(Le,rt,Dt,Nn)=>{ie(rt,Dt),De(Nn,xt=>{xt(Le,rt,Dt)})},Ee=()=>{const Le=[Z];return(rt,Dt)=>{const Nn=Dt.event.value,xt=k.paletteHue.get(),An=lC(xt,Nn.x,100-Nn.y),pn=gN(An);re(rt,pn,xt,Le)}},Re=()=>{const Le=[H,Z];return(rt,Dt)=>{const Nn=C(Dt.event.value),xt=k.paletteRgba.get(),An=o3(xt),pn=lC(Nn,An.saturation,An.value),$n=gN(pn);re(rt,$n,Nn,Le)}},tt=()=>{const Le=[H,J,ge];return(rt,Dt)=>{const Nn=Dt.event.hex,xt=f8(Nn);re(rt,Nn,xt.hue,Le)}};return{uid:d.uid,dom:d.dom,components:[B.asSpec(),D.asSpec(),P.asSpec()],behaviours:Xe([hn("colour-picker-events",[Pe(wC,tt()),Pe(iE,Ee()),Pe(lE,Re())]),En.config({find:Le=>P.getOpt(Le)}),Pt.config({mode:"acyclic"})])}};return ir({name:"ColourPicker",configFields:[Ce("dom"),fe("onValidHex",ee),fe("onInvalidHex",ee)],factory:a})},Wi={self:()=>En.config({find:O.some}),memento:t=>En.config({find:t.getOpt}),childAt:t=>En.config({find:s=>gl(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},kL=Bt([fe("preprocess",mn),fe("postprocess",mn)]),q3=(t,s)=>{const a=sa("RepresentingConfigs.memento processors",kL,s);return ut.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=ut.getValue(d);return a.postprocess(g)},setValue:(l,d)=>{const g=a.preprocess(d),p=t.get(l);ut.setValue(p,g)}}})},ub=(t,s,a)=>ut.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:a}}),uE=(t,s,a)=>ub(t,l=>s(l.element),(l,d)=>a(l.element,d)),ku={memento:q3,withElement:uE,withComp:ub,domValue:t=>uE(t,Fc,Ic),domHtml:t=>uE(t,Th,cf),memory:t=>ut.config({store:{mode:"memory",initialValue:t}})},dE={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},DL=t=>s=>t.translate(dE[s]),RL=(t,s,a)=>{const l=S=>"tox-"+S,d=TL(DL(s),l),g=S=>{Mt(S,xm,{name:"hex-valid",value:!0})},p=S=>{Mt(S,xm,{name:"hex-valid",value:!1})},C=yo(d.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[C.asSpec()],behaviours:Xe([ku.withComp(a,S=>{const k=C.get(S);return En.getCurrent(k).bind(P=>ut.getValue(P).hex).map(P=>"#"+Hu(P,"#")).getOr("")},(S,k)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,B=O.from(D.exec(k)).bind(Z=>Jo(Z,1)),P=C.get(S);En.getCurrent(P).fold(()=>{console.log("Can not find form")},Z=>{ut.setValue(Z,{hex:B.getOr("")}),bv.getField(Z,"hex").each(J=>{lo(J,nf())})})}),Wi.self()])}};var UB=tinymce.util.Tools.resolve("tinymce.Resource");const WB=t=>Qn(t,"init"),K3=t=>{const s=Fo(),a=yo({dom:{tag:t.tag}}),l=Fo();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Xe([hn("custom-editor-events",[rs(d=>{a.getOpt(d).each(g=>{(WB(t)?t.init(g.element.dom):UB.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{l.on(C=>{p.setValue(C)}),l.clear(),s.set(p)})})})]),ku.withComp(O.none(),()=>s.get().fold(()=>l.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>l.set(g),p=>p.setValue(g))}),Wi.self()]),components:[a.asSpec()]}};var Mf=tinymce.util.Tools.resolve("tinymce.util.Tools");const ul=(t,s)=>{const a=Mf.explode(s.getOption("images_file_types")),l=d=>ko(a,g=>Rr(d.name.toLowerCase(),`.${g.toLowerCase()}`));return qn(Ma(t),l)},ZB=(t,s,a)=>{const l=(P,H)=>{H.stop()},d=P=>(H,Z)=>{De(P,J=>{J(H,Z)})},g=(P,H)=>{var Z;if(!zt.isDisabled(P)){const J=H.event.raw;C(P,(Z=J.dataTransfer)===null||Z===void 0?void 0:Z.files)}},p=(P,H)=>{const Z=H.event.raw.target;C(P,Z.files)},C=(P,H)=>{H&&(ut.setValue(P,ul(H,s)),Mt(P,si,{name:t.name}))},S=yo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Xe([hn("input-file-events",[ad(Zl()),ad(Gp())])])}),k=P=>({uid:P.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Xe([ku.memory(a.getOr([])),Wi.self(),zt.config({}),yn.config({toggleClass:"dragenter",toggleOnExecute:!1}),hn("dropzone-events",[Pe("dragenter",d([l,yn.toggle])),Pe("dragleave",d([l,yn.toggle])),Pe("dragover",l),Pe("drop",d([l,g])),Pe(vh(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Xs(s.translate("Drop an image here"))]},dr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Xs(s.translate("Browse for an image")),S.asSpec()],action:H=>{S.get(H).element.dom.click()},buttonBehaviours:Xe([_s.config({}),Dd.button(s.isDisabled),Xr()])})]}]}),D=t.label.map(P=>wp(P,s)),B=fo.parts.field({factory:{sketch:k}});return gC(D,B,["tox-form__group--stretched"],[])},ML=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:ke(t.items,s.interpreter)}),X3=pt("alloy-fake-before-tabstop"),mE=pt("alloy-fake-after-tabstop"),jB=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Xe([Zt.config({ignore:!0}),_s.config({})])}),GB=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[jB([X3]),t,jB([mE])],behaviours:Xe([Wi.childAt(1)])}),qB=(t,s)=>{Mt(t,vc(),{raw:{which:9,shiftKey:s}})},KB=(t,s)=>{const a=s.element;as(a,X3)?qB(t,!0):as(a,mE)&&qB(t,!1)},Zi=t=>zi(t,["."+X3,"."+mE].join(","),jn),Y3=t=>{const s=Lt(t.getOr(""));return{getValue:a=>s.get(),setValue:(a,l)=>{s.get()!==l&&gn(a.element,"srcdoc",l),s.set(l)}}},XB=(t,s,a)=>{const l=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",p={...t.label.map(B=>({title:B})).getOr({}),...a.map(B=>({srcdoc:B})).getOr({}),...l?{sandbox:"allow-scripts allow-same-origin"}:{}},C=Y3(a),S=t.label.map(B=>wp(B,s)),k=B=>GB({uid:B.uid,dom:{tag:"iframe",attributes:p,classes:d?[g]:[g,`${g}--opaque`]},behaviours:Xe([_s.config({}),Zt.config({}),ku.withComp(a,C.getValue,C.setValue)])}),D=fo.parts.field({factory:{sketch:k}});return gC(S,D,["tox-form__group--stretched"],[])},fE=t=>new Promise((s,a)=>{const l=()=>{g(),s(t)},d=[za(t,"load",l),za(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>De(d,p=>p.unbind());t.dom.complete&&l()}),J3=(t,s,a,l,d)=>{const g=a*d,p=l*d,C=Math.max(0,t/2-g/2),S=Math.max(0,s/2-p/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},NL=(t,s,a)=>{const l=or(t),d=ys(t);return Math.min(l/s,d/a,1)},BL=(t,s)=>{const a=Lt(s.getOr({url:""})),l=yo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=yo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(S,k)=>{const D={url:k.url};k.zoom.each(P=>D.zoom=P),k.cachedWidth.each(P=>D.cachedWidth=P),k.cachedHeight.each(P=>D.cachedHeight=P),a.set(D);const B=()=>{const{cachedWidth:P,cachedHeight:H,zoom:Z}=D;if(!Wo(P)&&!Wo(H)){if(Wo(Z)){const ge=NL(S.element,P,H);D.zoom=ge}const J=J3(or(S.element),ys(S.element),P,H,D.zoom);d.getOpt(S).each(ge=>{pl(ge.element,J)})}};l.getOpt(S).each(P=>{const H=P.element;k.url!==zr(H,"src")&&(gn(H,"src",k.url),Oo(S.element,"tox-imagepreview__loaded")),B(),fE(H).then(Z=>{S.getSystem().isConnected()&&(wr(S.element,"tox-imagepreview__loaded"),D.cachedWidth=Z.dom.naturalWidth,D.cachedHeight=Z.dom.naturalHeight,B())})})},p={};t.height.each(S=>p.height=S);const C=s.map(S=>({url:S.url,zoom:O.from(S.zoom),cachedWidth:O.from(S.cachedWidth),cachedHeight:O.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Xe([Wi.self(),ku.withComp(C,()=>a.get(),g)])}},$L=(t,s)=>{const a={dom:{tag:"label",classes:["tox-label"]},components:[Xs(s.providers.translate(t.label))]},l=ke(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...l],behaviours:Xe([Wi.self(),nn.config({}),ku.domHtml(O.none()),Pt.config({mode:"acyclic"})])}},YB=pt("toolbar.button.execute"),PL=t=>bu((s,a)=>{$x(t,s)(l=>{Mt(s,YB,{buttonApi:l}),t.onAction(l)})}),db=pt("common-button-display-events"),JB={[Cl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Pc()]:["toolbar-button-events",db],[Sn()]:["focusing","alloy.base.behaviour",db]},gE=t=>Xt(t.element,"width",Ve(t.element,"width")),QB=(t,s,a)=>_d(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),Pd=(t,s)=>QB(t,s,[]),Em=(t,s)=>QB(t,s,[nn.config({})]),e5=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Xs(a.translate(t))],behaviours:Xe([nn.config({})])}),Au=pt("update-menu-text"),Ep=pt("update-menu-icon"),hE=(t,s,a)=>{const l=Lt(ee),d=t.text.map(P=>yo(e5(P,s,a.providers))),g=t.icon.map(P=>yo(Em(P,a.providers.icons))),p=(P,H)=>{const Z=ut.getValue(P);return Zt.focus(Z),Mt(Z,"keydown",{raw:H.event.raw}),oi.close(Z),O.some(!0)},C=t.role.fold(()=>({}),P=>({role:P})),S=t.tooltip.fold(()=>({}),P=>{const H=a.providers.translate(P);return{title:H,"aria-label":H}}),k=_d("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),D=pt("common-button-display-events");return yo(oi.sketch({...t.uid?{uid:t.uid}:{},...C,dom:{tag:"button",classes:[s,`${s}--select`].concat(ke(t.classes,P=>`${s}--${P}`)),attributes:{...S}},components:Q0([g.map(P=>P.asSpec()),d.map(P=>P.asSpec()),O.some(k)]),matchWidth:!0,useMinWidth:!0,onOpen:(P,H,Z)=>{t.searchable&&Z8(Z)},dropdownBehaviours:Xe([...t.dropdownBehaviours,Dd.button(()=>t.disabled||a.providers.isDisabled()),Xr(),pC.config({}),nn.config({}),hn("dropdown-events",[pp(t,l),bp(t,l)]),hn(D,[rs((P,H)=>gE(P))]),hn("menubutton-update-display-text",[Pe(Au,(P,H)=>{d.bind(Z=>Z.getOpt(P)).each(Z=>{nn.set(Z,[Xs(a.providers.translate(H.event.text))])})}),Pe(Ep,(P,H)=>{g.bind(Z=>Z.getOpt(P)).each(Z=>{nn.set(Z,[Em(H.event.icon,a.providers.icons)])})})])]),eventOrder:Lo(JB,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Pc()]:["toolbar-button-events","dropdown-events",D]}),sandboxBehaviours:Xe([Pt.config({mode:"special",onLeft:p,onRight:p}),hn("dropdown-sandbox-events",[Pe(hM,(P,H)=>{U8(P),H.stop()}),Pe(pM,(P,H)=>{W8(P,H),H.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{..._x(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:dC,onCollapseMenu:(P,H,Z)=>{to.getHighlighted(Z).each(J=>{dC(P,Z,J)})},onDehighlightItem:zN}},fetch:P=>lc.nu(It(t.fetch,P))})).asSpec()},Q3=t=>$e(t),SC=t=>t.type==="separator",xC=t=>Qn(t,"getSubmenuItems"),EC={type:"separator"},t5=(t,s)=>{const a=fn(t,(l,d)=>Q3(d)?d===""?l:d==="|"?l.length>0&&!SC(l[l.length-1])?l.concat([EC]):l:Qn(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return a.length>0&&SC(a[a.length-1])&&a.pop(),a},n5=(t,s)=>{const a=t.getSubmenuItems(),l=o5(a,s),d=Lo(l.menus,{[t.value]:l.items}),g=Lo(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},FL=t=>{const s=Qe(t,"value").getOrThunk(()=>pt("generated-menu-item"));return Lo({value:s},t)},o5=(t,s)=>{const a=t5($e(t)?t.split(" "):t,s);return Ro(a,(l,d)=>{if(xC(d)){const g=FL(d),p=n5(g,s);return{menus:Lo(l.menus,p.menus),items:[p.item,...l.items],expansions:Lo(l.expansions,p.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},IL=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),LL=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),vv=(t,s,a,l)=>{const d=pt("primary-menu"),g=o5(t,a.shared.providers.menuItems());if(g.items.length===0)return O.none();const p=IL(l),C=UN(d,g.items,s,a,l.isHorizontalMenu,p),S=LL(l),k=Mo(g.menus,(B,P)=>UN(P,B,s,a,!1,S)),D=Lo(k,We(d,C));return O.from(mp.tieredData(d,D,g.expansions))},eA=t=>!Qn(t,"items"),s5="data-value",tA=(t,s,a,l)=>ke(a,d=>eA(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===l,onAction:()=>{ut.setValue(t,d.value),Mt(t,si,{name:s}),Zt.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>tA(t,s,d.items,l)}),pE=(t,s)=>gr(t,a=>eA(a)?tn(a.value===s,a):pE(a.items,s)),HL=(t,s,a)=>{const l=s.shared.providers,d=a.bind(S=>pE(t.items,S)).orThunk(()=>Hr(t.items).filter(eA)),g=t.label.map(S=>wp(S,l)),p=fo.parts.field({dom:{},factory:{sketch:S=>hE({uid:S.uid,text:d.map(k=>k.text),icon:O.none(),tooltip:t.label,role:O.none(),fetch:(k,D)=>{const B=tA(k,t.name,t.items,ut.getValue(k));D(vv(B,ti.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:O.none()}))},onSetup:q(ee),getApi:q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[_s.config({}),ku.withComp(d.map(k=>k.value),k=>zr(k.element,s5),(k,D)=>{pE(t.items,D).each(B=>{gn(k.element,s5,B.value),Mt(k,Au,{text:B.text})})})]},"tox-listbox",s.shared)}}),C={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return fo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:He([g.toArray(),[C]]),fieldBehaviours:Xe([zt.config({disabled:q(!t.enabled),onDisabled:S=>{fo.getField(S).each(zt.disable)},onEnabled:S=>{fo.getField(S).each(zt.enable)}})])})},r5=(t,s)=>({dom:{tag:"div",classes:t.classes},components:ke(t.items,s.shared.interpreter)}),VL=(t,s)=>{const a=ke(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>We("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Js(t.selectBehaviours,[Zt.config({}),ut.config({store:{mode:"manual",getValue:d=>Fc(d.element),setValue:(d,g)=>{const p=Hr(t.options);Me(t.options,S=>S.value===g).isSome()?Ic(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&p.each(S=>Ic(d.element,S.value))},...l}})])}},a5=ir({name:"HtmlSelect",configFields:[Ce("options"),Ts("selectBehaviours",[Zt,ut]),fe("selectClasses",[]),fe("selectAttributes",{}),oo("data")],factory:VL}),TC=(t,s,a)=>{const l=ke(t.items,S=>({text:s.translate(S.text),value:S.value})),d=t.label.map(S=>wp(S,s)),g=fo.parts.field({dom:{},...a.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:l,factory:a5,selectBehaviours:Xe([zt.config({disabled:()=>!t.enabled||s.isDisabled()}),_s.config({}),hn("selectbox-change",[Pe(vh(),(S,k)=>{Mt(S,si,{name:t.name})})])])}),p=t.size>1?O.none():O.some(_d("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:He([[g],p.toArray()])};return fo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:He([d.toArray(),[C]]),fieldBehaviours:Xe([zt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:S=>{fo.getField(S).each(zt.disable)},onEnabled:S=>{fo.getField(S).each(zt.enable)}}),Xr()])})},zL=q([fe("field1Name","field1"),fe("field2Name","field2"),vf("onLockedChange"),Vh(["lockClass"]),fe("locked",!1),rl.field("coupledFieldBehaviours",[En,ut])]),c5=(t,s,a)=>Vo(t,s,a).bind(En.getCurrent),l5=(t,s)=>Qs({factory:fo,name:t,overrides:a=>({fieldBehaviours:Xe([hn("coupled-input-behaviour",[Pe(nf(),l=>{c5(l,a,s).each(d=>{Vo(l,a,"lock").each(g=>{yn.isOn(g)&&a.onLockedChange(l,d,g)})})})])])})}),UL=q([l5("field1","field2"),l5("field2","field1"),Qs({factory:dr,schema:[Ce("dom")],name:"lock",overrides:t=>({buttonBehaviours:Xe([yn.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),WL=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:rl.augment(t.coupledFieldBehaviours,[En.config({find:O.some}),ut.config({store:{mode:"manual",getValue:d=>{const g=y2(d,t,["field1","field2"]);return{[t.field1Name]:ut.getValue(g.field1()),[t.field2Name]:ut.getValue(g.field2())}},setValue:(d,g)=>{const p=y2(d,t,["field1","field2"]);ba(g,t.field1Name)&&ut.setValue(p.field1(),g[t.field1Name]),ba(g,t.field2Name)&&ut.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Vo(d,t,"field1"),getField2:d=>Vo(d,t,"field2"),getLock:d=>Vo(d,t,"lock")}}),ji=Tr({name:"FormCoupledInputs",configFields:zL(),partFields:UL(),factory:WL,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),i5=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},nA=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const l=parseFloat(a[1]),d=a[2];return St.value({value:l,unit:d})}else return St.error(t)},oA=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>Qn(a,d);return t.unit===s?O.some(t.value):l(t.unit)&&l(s)?a[t.unit]===a[s]?O.some(t.value):O.some(t.value/a[t.unit]*a[s]):O.none()},_C=t=>O.none(),zg=(t,s)=>a=>oA(a,s).map(l=>({value:l*t,unit:s})),sA=(t,s)=>{const a=nA(t).toOptional(),l=nA(s).toOptional();return Ji(a,l,(d,g)=>oA(d,g.unit).map(p=>g.value/p).map(p=>zg(p,g.unit)).getOr(_C)).getOr(_C)},u5=(t,s)=>{let a=_C;const l=pt("ratio-event"),d=B=>_d(B,{tag:"span",classes:["tox-icon","tox-lock-icon__"+B]},s.icons),g=ji.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:Xe([zt.config({disabled:()=>!t.enabled||s.isDisabled()}),Xr(),_s.config({})])}),p=B=>({dom:{tag:"div",classes:["tox-form__group"]},components:B}),C=B=>fo.parts.field({factory:Pg,inputClasses:["tox-textfield"],inputBehaviours:Xe([zt.config({disabled:()=>!t.enabled||s.isDisabled()}),Xr(),_s.config({}),hn("size-input-events",[Pe(ki(),(P,H)=>{Mt(P,l,{isField1:B})}),Pe(vh(),(P,H)=>{Mt(P,si,{name:t.name})})])]),selectOnFocus:!1}),S=B=>({dom:{tag:"label",classes:["tox-label"]},components:[Xs(s.translate(B))]}),k=ji.parts.field1(p([fo.parts.label(S("Width")),C(!0)])),D=ji.parts.field2(p([fo.parts.label(S("Height")),C(!1)]));return ji.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[k,D,p([S(l0),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(B,P,H)=>{nA(ut.getValue(B)).each(Z=>{a(Z).each(J=>{ut.setValue(P,i5(J))})})},coupledFieldBehaviours:Xe([zt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:B=>{ji.getField1(B).bind(fo.getField).each(zt.disable),ji.getField2(B).bind(fo.getField).each(zt.disable),ji.getLock(B).each(zt.disable)},onEnabled:B=>{ji.getField1(B).bind(fo.getField).each(zt.enable),ji.getField2(B).bind(fo.getField).each(zt.enable),ji.getLock(B).each(zt.enable)}}),Xr(),hn("size-input-events2",[Pe(l,(B,P)=>{const H=P.event.isField1,Z=H?ji.getField1(B):ji.getField2(B),J=H?ji.getField2(B):ji.getField1(B),ge=Z.map(ut.getValue).getOr(""),ie=J.map(ut.getValue).getOr("");a=sA(ge,ie)})])])})},d5=(t,s,a)=>{const l=$d.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Xs(s.translate(t.label))]}),d=$d.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=$d.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return $d.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:q(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:Xe([Wi.self(),Zt.config({})]),onChoose:(p,C,S)=>{Mt(p,si,{name:t.name,value:S})}})},rA=(t,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),l=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:ke(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:ke(C,d)}),p=C=>({dom:{tag:"tbody"},components:ke(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),p(t.cells)],behaviours:Xe([_s.config({}),Zt.config({})])}},aA=(t,s)=>{const a=t.label.map(H=>wp(H,s)),l=[zt.config({disabled:()=>t.disabled||s.isDisabled()}),Xr(),Pt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:H=>(lo(H,hC),O.some(!0))}),hn("textfield-change",[Pe(nf(),(H,Z)=>{Mt(H,si,{name:t.name})}),Pe(hu(),(H,Z)=>{Mt(H,si,{name:t.name})})]),_s.config({})],d=t.validation.map(H=>Df.config({getRoot:Z=>Ba(Z.element),invalidClass:"tox-invalid",validator:{validate:Z=>{const J=ut.getValue(Z),ge=H.validator(J);return lc.pure(ge===!0?St.value(J):St.error(ge))},validateOnLoad:H.validateOnLoad}})).toArray(),g=t.placeholder.fold(q({}),H=>({placeholder:s.translate(H)})),p=t.inputMode.fold(q({}),H=>({inputmode:H})),C={...g,...p},S=fo.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(H=>({data:H})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:Xe(He([l,d])),selectOnFocus:!1,factory:Pg}),k=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[S]}:S,B=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),P=[zt.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:H=>{fo.getField(H).each(zt.disable)},onEnabled:H=>{fo.getField(H).each(zt.enable)}}),Xr()];return gC(a,k,B,P)},bE=(t,s,a)=>aA({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:O.none(),maximized:t.maximized,data:a},s),m5=(t,s,a)=>aA({name:t.name,multiline:!0,label:t.label,inputMode:O.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:O.none(),maximized:t.maximized,data:a},s),yv=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Ug=t=>t.dimension.property,mb=(t,s)=>t.dimension.getDimension(s),vE=(t,s)=>{const a=yv(t,s);Sl(a,[s.shrinkingClass,s.growingClass])},cA=(t,s)=>{Oo(t.element,s.openClass),wr(t.element,s.closedClass),Xt(t.element,Ug(s),"0px"),yi(t.element)},lA=(t,s)=>{Oo(t.element,s.closedClass),wr(t.element,s.openClass),Ln(t.element,Ug(s))},iA=(t,s,a,l)=>{a.setCollapsed(),Xt(t.element,Ug(s),mb(s,t.element)),vE(t,s),cA(t,s),s.onStartShrink(t),s.onShrunk(t)},f5=(t,s,a,l)=>{const d=l.getOrThunk(()=>mb(s,t.element));a.setCollapsed(),Xt(t.element,Ug(s),d),yi(t.element);const g=yv(t,s);Oo(g,s.growingClass),wr(g,s.shrinkingClass),cA(t,s),s.onStartShrink(t)},g5=(t,s,a)=>{const l=mb(s,t.element);(l==="0px"?iA:f5)(t,s,a,O.some(l))},h5=(t,s,a)=>{const l=yv(t,s),d=as(l,s.shrinkingClass),g=mb(s,t.element);lA(t,s);const p=mb(s,t.element);(d?()=>{Xt(t.element,Ug(s),g),yi(t.element)}:()=>{cA(t,s)})(),Oo(l,s.shrinkingClass),wr(l,s.growingClass),lA(t,s),Xt(t.element,Ug(s),p),a.setExpanded(),s.onStartGrow(t)},ZL=(t,s,a)=>{if(a.isExpanded()){Ln(t.element,Ug(s));const l=mb(s,t.element);Xt(t.element,Ug(s),l)}},yE=(t,s,a)=>{a.isExpanded()||h5(t,s,a)},jL=(t,s,a)=>{a.isExpanded()&&g5(t,s,a)},GL=(t,s,a)=>{a.isExpanded()&&iA(t,s,a)},p5=(t,s,a)=>a.isExpanded(),b5=(t,s,a)=>a.isCollapsed(),v5=(t,s,a)=>{const l=yv(t,s);return as(l,s.growingClass)===!0},y5=(t,s,a)=>{const l=yv(t,s);return as(l,s.shrinkingClass)===!0};var KL=Object.freeze({__proto__:null,refresh:ZL,grow:yE,shrink:jL,immediateShrink:GL,hasGrown:p5,hasShrunk:b5,isGrowing:v5,isShrinking:y5,isTransitioning:(t,s,a)=>v5(t,s)||y5(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?g5:h5)(t,s,a)},disableTransitions:vE,immediateGrow:(t,s,a)=>{a.isExpanded()||(lA(t,s),Xt(t.element,Ug(s),mb(s,t.element)),vE(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),w5=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const l=s.expanded;return wl(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:We(s.dimension.property,"0px")})},events:(t,s)=>ss([Eh(jp(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(vE(a,t),s.isExpanded()&&Ln(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),S5=[Ce("closedClass"),Ce("openClass"),Ce("shrinkingClass"),Ce("growingClass"),oo("getAnimationRoot"),_n("onShrunk"),_n("onStartShrink"),_n("onGrown"),_n("onStartGrow"),fe("expanded",!1),ec("dimension",Hs("property",{width:[Ho("property","width"),Ho("getDimension",t=>or(t)+"px")],height:[Ho("property","height"),Ho("getDimension",t=>ys(t)+"px")]}))],XL=Object.freeze({__proto__:null,init:t=>{const s=Lt(t.expanded),a=()=>"expanded: "+s.get();return nc({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:It(s.set,!1),setExpanded:It(s.set,!0),readState:a})}});const ai=da({fields:S5,name:"sliding",active:w5,apis:KL,state:XL}),x5=t=>({isEnabled:()=>!zt.isDisabled(t),setEnabled:s=>zt.set(t,!s),setActive:s=>{const a=t.element;s?(wr(a,"tox-tbtn--enabled"),gn(a,"aria-pressed",!0)):(Oo(a,"tox-tbtn--enabled"),ws(a,"aria-pressed"))},isActive:()=>as(t.element,"tox-tbtn--enabled"),setText:s=>{Mt(t,Au,{text:s})},setIcon:s=>Mt(t,Ep,{icon:s})}),Cv=(t,s,a,l,d=!0)=>hE({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(g,p)=>{const C={pattern:t.search.isSome()?j8(g):""};t.fetch(S=>{p(vv(S,ti.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},C,x5(g))},onSetup:t.onSetup,getApi:x5,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[_s.config({})]:[]]},s,a.shared),YL=(t,s,a)=>{const l=g=>p=>{const C=!p.isActive();p.setActive(C),g.storage.set(C),a.shared.getSink().each(S=>{s().getOpt(S).each(k=>{ql(k.element),Mt(k,xm,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(ke(t,p=>{const C=p.text.fold(()=>({}),S=>({text:S}));return{type:p.type,active:!1,...C,onAction:l(p),onSetup:d(p)}}))}},uA=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[Xs(t)]}),E5=pt("leaf-label-event-id"),dA=({leaf:t,onLeafAction:s,visible:a,treeId:l,selectedId:d,backstage:g})=>{const p=t.menu.map(S=>Cv(S,"tox-mbtn",g,O.none(),a)),C=[uA(t.title)];return p.each(S=>C.push(S)),dr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(t.id),S.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[vc()]:[E5,"keying"]},buttonBehaviours:Xe([...a?[_s.config({})]:[],yn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Vc.config({channels:{[`update-active-item-${l}`]:{onReceive:(S,k)=>{(k.value===t.id?yn.on:yn.off)(S)}}}}),hn(E5,[rs((S,k)=>{d.each(D=>{(D===t.id?yn.on:yn.off)(S)})}),Pe(vc(),(S,k)=>{const D=k.event.raw.code==="ArrowLeft",B=k.event.raw.code==="ArrowRight";D?(md(S.element,".tox-tree--directory").each(P=>{S.getSystem().getByDom(P).each(H=>{jb(P,".tox-tree--directory__label").each(Z=>{H.getSystem().getByDom(Z).each(Zt.focus)})})}),k.stop()):B&&k.stop()})])])})},JL=(t,s,a)=>_d(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),QL=(t,s)=>JL(t,s,[]),T5=pt("directory-label-event-id"),eH=({directory:t,visible:s,noChildren:a,backstage:l})=>{const d=t.menu.map(C=>Cv(C,"tox-mbtn",l,O.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[QL("chevron-right",l.shared.providers.icons)]},uA(t.title)];d.each(C=>{g.push(C)});const p=C=>{md(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(k=>{const D=!yn.isOn(k);yn.toggle(k),Mt(C,"expand-tree-node",{expanded:D,node:t.id})})})};return dr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[vc()]:[T5,"keying"]},buttonBehaviours:Xe([...s?[_s.config({})]:[],hn(T5,[Pe(vc(),(C,S)=>{const k=S.event.raw.code==="ArrowRight",D=S.event.raw.code==="ArrowLeft";k&&a&&S.stop(),(k||D)&&md(C.element,".tox-tree--directory").each(B=>{C.getSystem().getByDom(B).each(P=>{!yn.isOn(P)&&k||yn.isOn(P)&&D?(p(C),S.stop()):D&&!yn.isOn(P)&&(md(P.element,".tox-tree--directory").each(H=>{jb(H,".tox-tree--directory__label").each(Z=>{P.getSystem().getByDom(Z).each(Zt.focus)})}),S.stop())})})})])])})},tH=({children:t,onLeafAction:s,visible:a,treeId:l,expandedIds:d,selectedId:g,backstage:p})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?dA({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:l,backstage:p}):mA({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:p})),behaviours:Xe([ai.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),nn.config({})])}),nH=pt("directory-event-id"),mA=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d,expandedIds:g,selectedId:p})=>{const{children:C}=t,S=Lt(g),k=B=>C.map(P=>P.type==="leaf"?dA({leaf:P,selectedId:p,onLeafAction:s,visible:B,treeId:l,backstage:d}):mA({directory:P,expandedIds:S.get(),selectedId:p,onLeafAction:s,labelTabstopping:B,treeId:l,backstage:d})),D=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[eH({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),tH({children:C,expandedIds:g,selectedId:p,onLeafAction:s,visible:D,treeId:l,backstage:d})],behaviours:Xe([hn(nH,[rs((B,P)=>{yn.set(B,D)}),Pe("expand-tree-node",(B,P)=>{const{expanded:H,node:Z}=P.event;S.set(H?[...S.get(),Z]:S.get().filter(J=>J!==Z))})]),yn.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(B,P)=>{const H=B.components()[1],Z=k(P);P?ai.grow(H):ai.shrink(H),nn.set(H,Z)}})])}},fA=pt("tree-event-id"),oH=(t,s)=>{const a=t.onLeafAction.getOr(ee),l=t.onToggleExpand.getOr(ee),d=t.defaultExpandedIds,g=Lt(d),p=Lt(t.defaultSelectedId),C=pt("tree-id"),S=(k,D)=>t.items.map(B=>B.type==="leaf"?dA({leaf:B,selectedId:k,onLeafAction:a,visible:!0,treeId:C,backstage:s}):mA({directory:B,selectedId:k,onLeafAction:a,expandedIds:D,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(p.get(),g.get()),behaviours:Xe([Pt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),hn(fA,[Pe("expand-tree-node",(k,D)=>{const{expanded:B,node:P}=D.event;g.set(B?[...g.get(),P]:g.get().filter(H=>H!==P)),l(g.get(),{expanded:B,node:P})})]),Vc.config({channels:{[`update-active-item-${C}`]:{onReceive:(k,D)=>{p.set(O.some(D.value)),nn.set(k,S(O.some(D.value),g.get()))}}}}),nn.config({})])}};var sH=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return ss([Pe(t.event,l),Ai(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Pe(d,()=>s.cancel())]).getOr([])))}});const kC=(t,s)=>{let a=null;return{cancel:()=>{As(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{As(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},AC=(t,s)=>{let a=null;const l=()=>{As(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...g)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},_5=t=>{const s=Lt(null);return nc({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var gA=Object.freeze({__proto__:null,throttle:_5,init:t=>t.stream.streams.state(t)});const rH=(t,s)=>{const a=t.stream,l=AC(t.onStream,a.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),a.stopEvent&&g.stop()}};var hA=[ec("stream",Hs("mode",{throttle:[Ce("delay"),fe("stopEvent",!0),Ho("streams",{setup:rH,state:_5})]})),fe("event","input"),oo("cancelEvent"),vf("onStream")];const CE=da({fields:hA,name:"streaming",active:sH,state:gA}),wE=(t,s,a)=>{const l=ut.getValue(a);ut.setValue(s,l),pA(s)},k5=(t,s)=>{const a=t.element,l=Fc(a),d=a.dom;zr(a,"type")!=="number"&&s(d,l)},pA=t=>{k5(t,(s,a)=>s.setSelectionRange(a.length,a.length))},A5=(t,s)=>{k5(t,(a,l)=>a.setSelectionRange(s,l.length))},aH=(t,s,a)=>{if(t.selectsOver){const l=ut.getValue(s),d=t.getDisplayText(l),g=ut.getValue(a);return t.getDisplayText(g).indexOf(d)===0?O.some(()=>{wE(t,s,a),A5(s,d.length)}):O.none()}else return O.none()},SE=q("alloy.typeahead.itemexecute"),O5=(t,s,a,l)=>{const d=(B,P,H)=>{t.previewing.set(!1);const Z=Ws.getCoupled(B,"sandbox");if(Wn.isOpen(Z))En.getCurrent(Z).each(J=>{to.getHighlighted(J).fold(()=>{H(J)},()=>{sy(Z,J.element,"keydown",P)})});else{const J=ge=>{En.getCurrent(ge).each(H)};Wx(t,p(B),B,Z,l,J,ll.HighlightMenuAndItem).get(ee)}},g=fM(t),p=B=>P=>P.map(H=>{const Z=Mm(H.menus),J=me(Z,ie=>qn(ie.items,re=>re.type==="item"));return ut.getState(B).update(ke(J,ie=>ie.data)),H}),C=B=>En.getCurrent(B),S="typeaheadevents",k=[Zt.config({}),ut.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:B=>Fc(B.element),getFallbackEntry:B=>({value:B,meta:{}}),setValue:(B,P)=>{Ic(B.element,t.model.getDisplayText(P))},...t.initialData.map(B=>We("initialValue",B)).getOr({})}}),CE.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(B,P)=>{const H=Ws.getCoupled(B,"sandbox");if(Zt.isFocused(B)&&Fc(B.element).length>=t.minChars){const J=C(H).bind(ie=>to.getHighlighted(ie).map(ut.getValue));t.previewing.set(!0);const ge=ie=>{C(H).each(re=>{J.fold(()=>{t.model.selectsOver&&to.highlightFirst(re)},Ee=>{to.highlightBy(re,Re=>ut.getValue(Re).value===Ee.value),to.getHighlighted(re).orThunk(()=>(to.highlightFirst(re),O.none()))})})};Wx(t,p(B),B,H,l,ge,ll.HighlightJustMenu).get(ee)}},cancelEvent:ey()}),Pt.config({mode:"special",onDown:(B,P)=>(d(B,P,to.highlightFirst),O.some(!0)),onEscape:B=>{const P=Ws.getCoupled(B,"sandbox");return Wn.isOpen(P)?(Wn.close(P),O.some(!0)):O.none()},onUp:(B,P)=>(d(B,P,to.highlightLast),O.some(!0)),onEnter:B=>{const P=Ws.getCoupled(B,"sandbox"),H=Wn.isOpen(P);if(H&&!t.previewing.get())return C(P).bind(Z=>to.getHighlighted(Z)).map(Z=>(Mt(B,SE(),{item:Z}),!0));{const Z=ut.getValue(B);return lo(B,ey()),t.onExecute(P,B,Z),H&&Wn.close(P),O.some(!0)}}}),yn.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Ws.config({others:{sandbox:B=>v3(t,B,{onOpen:()=>yn.on(B),onClose:()=>{t.lazyTypeaheadComp.get().each(P=>ws(P.element,"aria-activedescendant")),yn.off(B)}})}}),hn(S,[rs(B=>{t.lazyTypeaheadComp.set(O.some(B))}),Ai(B=>{t.lazyTypeaheadComp.set(O.none())}),bu(B=>{const P=ee;b3(t,p(B),B,l,P,ll.HighlightMenuAndItem).get(ee)}),Pe(SE(),(B,P)=>{const H=Ws.getCoupled(B,"sandbox");wE(t.model,B,P.event.item),lo(B,ey()),t.onItemExecute(B,H,P.event.item,ut.getValue(B)),Wn.close(H),pA(B)})].concat(t.dismissOnBlur?[Pe(yh(),B=>{const P=Ws.getCoupled(B,"sandbox");Ri(P.element).isNone()&&Wn.close(P)})]:[]))],D={[am()]:[ut.name(),CE.name(),S],...t.eventOrder};return{uid:t.uid,dom:gM(Lo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...Js(t.typeaheadBehaviours,k)},eventOrder:D}},cH=q([oo("lazySink"),Ce("fetch"),fe("minChars",5),fe("responseTime",1e3),_n("onOpen"),fe("getHotspot",O.some),fe("getAnchorOverrides",q({})),fe("layouts",O.none()),fe("eventOrder",{}),od("model",{},[fe("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),fe("selectsOver",!0),fe("populateFromBrowse",!0)]),_n("onSetValue"),ua("onExecute"),_n("onItemExecute"),fe("inputClasses",[]),fe("inputAttributes",{}),fe("inputStyles",{}),fe("matchWidth",!0),fe("useMinWidth",!1),fe("dismissOnBlur",!0),Vh(["openClass"]),oo("initialData"),Ts("typeaheadBehaviours",[Zt,ut,CE,Pt,yn,Ws]),Ia("lazyTypeaheadComp",()=>Lt(O.none)),Ia("previewing",()=>Lt(!0))].concat(mM()).concat(y3())),D5=q([Fi({schema:[fd()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{aH(t.model,d,l).fold(()=>{t.model.selectsOver?(to.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&wE(t.model,d,l),Ds(l.element,"id").each(g=>gn(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(l=>(Mt(l,SE(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&wE(t.model,l,a)})}})})]),R5=Tr({name:"Typeahead",configFields:cH(),partFields:D5(),factory:O5}),Ou=t=>({...t,toCached:()=>Ou(t.toCached()),bindFuture:S=>Ou(t.bind(k=>k.fold(D=>lc.pure(St.error(D)),D=>S(D)))),bindResult:S=>Ou(t.map(k=>k.bind(S))),mapResult:S=>Ou(t.map(k=>k.map(S))),mapError:S=>Ou(t.map(k=>k.mapError(S))),foldResult:(S,k)=>t.map(D=>D.fold(S,k)),withTimeout:(S,k)=>Ou(lc.nu(D=>{let B=!1;const P=setTimeout(()=>{B=!0,D(St.error(k()))},S);t.get(H=>{B||(clearTimeout(P),D(H))})}))}),M5=t=>Ou(lc.nu(t)),N5=t=>Ou(lc.pure(St.value(t))),uH={nu:M5,wrap:Ou,pure:N5,value:N5,error:t=>Ou(lc.pure(St.error(t))),fromResult:t=>Ou(lc.pure(t)),fromFuture:t=>Ou(t.map(St.value)),fromPromise:t=>M5(s=>{t.then(a=>{s(St.value(a))},a=>{s(St.error(a))})})},xE=(t,s,a=[],l,d,g)=>{const p=s.fold(()=>({}),k=>({action:k})),C={buttonBehaviours:Xe([Dd.button(()=>!t.enabled||g.isDisabled()),Xr(),_s.config({}),hn("button press",[xh("click"),xh("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},S=Lo(C,{dom:l});return Lo(S,{components:d})},bA=(t,s,a,l=[])=>{const d=t.tooltip.map(S=>({"aria-label":a.translate(S),title:a.translate(S)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(S=>Pd(S,a.icons)),C=Q0([p]);return xE(t,s,l,g,C,a)},vA=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},B5=(t,s,a,l=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(P=>Pd(P,a.icons)),C=[p.getOrThunk(()=>Xs(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),B={tag:"button",classes:[...vA(S),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return xE(t,s,l,B,C,a)},$5=(t,s,a,l=[],d=[])=>{const g=B5(t,O.some(s),a,l,d);return dr.sketch(g)},yA=(t,s)=>a=>{s==="custom"?Mt(a,xm,{name:t,value:{}}):s==="submit"?lo(a,hC):s==="cancel"?lo(a,ob):console.error("Unknown button type: ",s)},dH=(t,s)=>s==="menu",P5=(t,s)=>s==="custom"||s==="cancel"||s==="submit",mH=(t,s)=>s==="togglebutton",F5=(t,s)=>{var a,l;const d=t.icon.map(re=>Em(re,s.icons)).map(yo),g=re=>{Mt(re,xm,{name:t.name,value:{setIcon:Ee=>{d.map(Re=>Re.getOpt(re).each(tt=>{nn.set(tt,[Em(Ee,s.icons)])}))}}})},p=t.buttonType.getOr(t.primary?"primary":"secondary"),C={...t,name:(a=t.name)!==null&&a!==void 0?a:"",primary:p==="primary",tooltip:O.from(t.tooltip),enabled:(l=t.enabled)!==null&&l!==void 0?l:!1,borderless:!1},S=C.tooltip.map(re=>({"aria-label":s.translate(re),title:s.translate(re)})).getOr({}),k=vA(p??"secondary"),D=t.icon.isSome()&&t.text.isSome(),B={tag:"button",classes:[...k.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...D?["tox-button--icon-and-text"]:[]],attributes:S},P=[],H=s.translate(t.text.getOr("")),Z=Xs(H),ge=[...Q0([d.map(re=>re.asSpec())]),...t.text.isSome()?[Z]:[]],ie=xE(C,O.some(g),P,B,ge,s);return dr.sketch(ie)},EE=(t,s,a)=>{if(dH(t,s)){const l=()=>p,d=t,g={...t,type:"menubutton",search:O.none(),onSetup:C=>(C.setEnabled(t.enabled),ee),fetch:YL(d.items,l,a)},p=yo(Cv(g,"tox-tbtn",a,O.none()));return p.asSpec()}else if(P5(t,s)){const l=yA(t.name,s),d={...t,borderless:!1};return $5(d,l,a.shared.providers,[])}else{if(mH(t,s))return F5(t,a.shared.providers);throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},fH=(t,s)=>{const a=yA(t.name,"custom");return y7(O.none(),fo.parts.field({factory:dr,...B5(t,O.some(a),s,[ku.memory(""),Wi.self()])}))},gH={type:"separator"},hH=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ee}),TE=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ee}),pH=t=>ke(t,hH),bH=(t,s)=>qn(s,a=>a.type===t),CA=(t,s)=>pH(bH(t,s)),vH=t=>CA("header",t.targets),yH=t=>CA("anchor",t.targets),CH=t=>O.from(t.anchorTop).map(s=>TE("<top>",s)).toArray(),I5=t=>O.from(t.anchorBottom).map(s=>TE("<bottom>",s)).toArray(),wH=t=>ke(t,s=>TE(s,s)),SH=t=>fn(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(gH,a),[]),wA=(t,s)=>{const a=t.toLowerCase();return qn(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,p=(d=l.value)!==null&&d!==void 0?d:"";return Dr(g.toLowerCase(),a)||Dr(p.toLowerCase(),a)})},L5=(t,s,a)=>{var l,d;const g=ut.getValue(s),p=(d=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&d!==void 0?d:g.value;return a.getLinkInformation().fold(()=>[],S=>{const k=wA(p,wH(a.getHistory(t)));return t==="file"?SH([k,wA(p,vH(S)),wA(p,He([CH(S),yH(S),I5(S)]))]):k})},SA=pt("aria-invalid"),H5=(t,s,a,l)=>{const d=s.shared.providers,g=re=>{const Ee=ut.getValue(re);a.addToHistory(Ee.value,t.filetype)},p={...l.map(re=>({initialData:re})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":SA,type:"url"},minChars:0,responseTime:0,fetch:re=>{const Ee=L5(t.filetype,re,a),Re=vv(Ee,ti.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:O.none()});return lc.pure(Re)},getHotspot:re=>Z.getOpt(re),onSetValue:(re,Ee)=>{re.hasConfigured(Df)&&Df.run(re).get(ee)},typeaheadBehaviours:Xe([...a.getValidationHandler().map(re=>Df.config({getRoot:Ee=>Ba(Ee.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Ee,Re)=>{D.getOpt(Ee).each(tt=>{gn(tt.element,"title",d.translate(Re))})}},validator:{validate:Ee=>{const Re=ut.getValue(Ee);return uH.nu(tt=>{re({type:t.filetype,url:Re.value},Le=>{if(Le.status==="invalid"){const rt=St.error(Le.message);tt(rt)}else{const rt=St.value(Le.message);tt(rt)}})})},validateOnLoad:!1}})).toArray(),zt.config({disabled:()=>!t.enabled||d.isDisabled()}),_s.config({}),hn("urlinput-events",[Pe(nf(),re=>{const Ee=Fc(re.element),Re=Ee.trim();Re!==Ee&&Ic(re.element,Re),t.filetype==="file"&&Mt(re,si,{name:t.name})}),Pe(vh(),re=>{Mt(re,si,{name:t.name}),g(re)}),Pe(hu(),re=>{Mt(re,si,{name:t.name}),g(re)})])]),eventOrder:{[nf()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:re=>re.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:_x(!1,1,"normal")},onExecute:(re,Ee,Re)=>{Mt(Ee,hC,{})},onItemExecute:(re,Ee,Re,tt)=>{g(re),Mt(re,si,{name:t.name})}},C=fo.parts.field({...p,factory:R5}),S=t.label.map(re=>wp(re,d)),D=yo(((re,Ee,Re=re,tt=re)=>_d(Re,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+re],attributes:{title:d.translate(tt),"aria-live":"polite",...Ee.fold(()=>({}),Le=>({id:Le}))}},d.icons))("invalid",O.some(SA),"warning")),B=yo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),P=a.getUrlPicker(t.filetype),H=pt("browser.url.event"),Z=yo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,B.asSpec()],behaviours:Xe([zt.config({disabled:()=>!t.enabled||d.isDisabled()})])}),J=yo($5({name:t.name,icon:O.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:O.none(),borderless:!0},re=>lo(re,H),d,[],["tox-browse-url"])),ge=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:He([[Z.asSpec()],P.map(()=>J.asSpec()).toArray()])}),ie=re=>{En.getCurrent(re).each(Ee=>{const Re=ut.getValue(Ee),tt={fieldname:t.name,...Re};P.each(Le=>{Le(tt).get(rt=>{ut.setValue(Ee,rt),Mt(re,si,{name:t.name})})})})};return fo.sketch({dom:C7(),components:S.toArray().concat([ge()]),fieldBehaviours:Xe([zt.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:re=>{fo.getField(re).each(zt.disable),J.getOpt(re).each(zt.disable)},onEnabled:re=>{fo.getField(re).each(zt.enable),J.getOpt(re).each(zt.enable)}}),Xr(),hn("url-input-events",[Pe(H,ie)])])})},_E=(t,s)=>Sm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:IR(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:a=>{Mt(a,xm,{name:"alert-banner",value:t.url})},buttonBehaviours:Xe([ix()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),xH=(t,s)=>{t.dom.checked=s},EH=t=>t.dom.checked,TH=(t,s,a)=>{const l=S=>(S.element.dom.click(),O.some(!0)),d=fo.parts.field({factory:{sketch:mn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Xe([Wi.self(),zt.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:S=>{Ba(S.element).each(k=>wr(k,"tox-checkbox--disabled"))},onEnabled:S=>{Ba(S.element).each(k=>Oo(k,"tox-checkbox--disabled"))}}),_s.config({}),Zt.config({}),ku.withElement(a,EH,xH),Pt.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),hn("checkbox-events",[Pe(vh(),(S,k)=>{Mt(S,si,{name:t.name})})])])}),g=fo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Xs(s.translate(t.label))],behaviours:Xe([pC.config({})])}),p=S=>_d(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=yo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return fo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Xe([zt.config({disabled:()=>!t.enabled||s.isDisabled()}),Xr()])})},_H=t=>t.presets==="presentation"?Sm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Sm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Xe([_s.config({}),Zt.config({})])}),Pr=t=>(s,a,l,d)=>Qe(a,"name").fold(()=>t(a,d,O.none()),g=>s.field(g,t(a,d,Qe(l,g)))),V5=t=>(s,a,l,d)=>{const g=Lo(a,{source:"dynamic"});return Pr(t)(s,g,l,d)},kH={bar:Pr((t,s)=>m7(t,s.shared)),collection:Pr((t,s,a)=>w7(t,s.shared.providers,a)),alertbanner:Pr((t,s)=>_E(t,s.shared.providers)),input:Pr((t,s,a)=>bE(t,s.shared.providers,a)),textarea:Pr((t,s,a)=>m5(t,s.shared.providers,a)),label:Pr((t,s)=>$L(t,s.shared)),iframe:V5((t,s,a)=>XB(t,s.shared.providers,a)),button:Pr((t,s)=>fH(t,s.shared.providers)),checkbox:Pr((t,s,a)=>TH(t,s.shared.providers,a)),colorinput:Pr((t,s,a)=>A7(t,s.shared,s.colorinput,a)),colorpicker:Pr((t,s,a)=>RL(t,s.shared.providers,a)),dropzone:Pr((t,s,a)=>ZB(t,s.shared.providers,a)),grid:Pr((t,s)=>ML(t,s.shared)),listbox:Pr((t,s,a)=>HL(t,s,a)),selectbox:Pr((t,s,a)=>TC(t,s.shared.providers,a)),sizeinput:Pr((t,s)=>u5(t,s.shared.providers)),slider:Pr((t,s,a)=>d5(t,s.shared.providers,a)),urlinput:Pr((t,s,a)=>H5(t,s,s.urlinput,a)),customeditor:Pr(K3),htmlpanel:Pr(_H),imagepreview:Pr((t,s,a)=>BL(t,a)),table:Pr((t,s)=>rA(t,s.shared.providers)),tree:Pr((t,s)=>oH(t,s)),panel:Pr((t,s)=>r5(t,s))},AH={field:(t,s)=>s,record:q([])},xA=(t,s,a,l)=>{const d=Lo(l,{shared:{interpreter:g=>EA(t,g,a,d)}});return EA(t,s,a,d)},EA=(t,s,a,l)=>Qe(kH,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,l)),z5=(t,s,a)=>EA(AH,t,s,a),cn="layout-inset",fb=t=>t.x,TA=(t,s)=>t.x+t.width/2-s.width/2,kE=(t,s)=>t.x+t.width-s.width,AE=t=>t.y,OE=(t,s)=>t.y+t.height-s.height,_A=(t,s)=>t.y+t.height/2-s.height/2,kA=(t,s,a)=>jr(kE(t,s),OE(t,s),a.insetSouthwest(),qb(),"southwest",Xo(t,{right:0,bottom:3}),cn),Tp=(t,s,a)=>jr(fb(t),OE(t,s),a.insetSoutheast(),im(),"southeast",Xo(t,{left:1,bottom:3}),cn),OC=(t,s,a)=>jr(kE(t,s),AE(t),a.insetNorthwest(),Sy(),"northwest",Xo(t,{right:0,top:2}),cn),wv=(t,s,a)=>jr(fb(t),AE(t),a.insetNortheast(),zh(),"northeast",Xo(t,{left:1,top:2}),cn),Nf=(t,s,a)=>jr(TA(t,s),AE(t),a.insetNorth(),Kb(),"north",Xo(t,{top:2}),cn),DC=(t,s,a)=>jr(TA(t,s),OE(t,s),a.insetSouth(),xy(),"south",Xo(t,{bottom:3}),cn),U5=(t,s,a)=>jr(kE(t,s),_A(t,s),a.insetEast(),Pw(),"east",Xo(t,{right:0}),cn),AA=(t,s,a)=>jr(fb(t),_A(t,s),a.insetWest(),Ey(),"west",Xo(t,{left:1}),cn),OA=t=>{switch(t){case"north":return Nf;case"northeast":return wv;case"northwest":return OC;case"south":return DC;case"southeast":return Tp;case"southwest":return kA;case"east":return U5;case"west":return AA}},DA=(t,s,a,l,d)=>Yw(l).map(OA).getOr(Nf)(t,s,a,l,d),OH=t=>{switch(t){case"north":return DC;case"northeast":return Tp;case"northwest":return kA;case"south":return Nf;case"southeast":return wv;case"southwest":return OC;case"east":return AA;case"west":return U5}},DH=(t,s,a,l,d)=>Yw(l).map(OH).getOr(Nf)(t,s,a,l,d),W5={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},RH=(t,s,a)=>{const d={maxHeightFunction:Zh()},g=()=>({type:"node",root:js(Jr(t())),node:O.from(t()),bubble:jh(12,12,W5),layouts:{onRtl:()=>[wv],onLtr:()=>[OC]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:jh(-12,12,W5),layouts:{onRtl:()=>[Gr,xr,Ys],onLtr:()=>[xr,Gr,Ys]},overrides:d});return()=>a()?g():p()},MH=(t,s,a)=>{const l=()=>({type:"node",root:js(Jr(t())),node:O.from(t()),layouts:{onRtl:()=>[Nf],onLtr:()=>[Nf]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Ys],onLtr:()=>[Ys]}});return()=>a()?l():d()},Z5=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const d=l[0],g=l[l.length-1],p={firstCell:ue.fromDom(d),lastCell:ue.fromDom(g)};return O.some(p)}return O.some(p1.range(ue.fromDom(a.startContainer),a.startOffset,ue.fromDom(a.endContainer),a.endOffset))}}),NH=t=>s=>({type:"node",root:t(),node:s}),BH=(t,s,a)=>{const l=kd(t),d=()=>ue.fromDom(t.getBody()),g=()=>ue.fromDom(t.getContentAreaContainer()),p=()=>l||!a();return{inlineDialog:RH(g,s,p),banner:MH(g,s,p),cursor:Z5(t,d),node:NH(d)}},$H=t=>(s,a)=>{kN(t)(s,a)},PH=t=>()=>bN(t),FH=t=>s=>iC(t,s),IH=t=>s=>pN(t,s),LH=t=>({colorPicker:$H(t),hasCustomColors:PH(t),getColors:FH(t),getColorCols:IH(t)}),HH=t=>()=>XR(t),VH=t=>({isDraggableModal:HH(t)}),zH=t=>{const s=Lt(p4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},j5=t=>ba(t,"items"),RA=t=>ba(t,"format"),G5=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],UH=t=>Qn(t,"items"),WH=t=>Qn(t,"block"),ZH=t=>Qn(t,"inline"),jH=t=>Qn(t,"selector"),q5=t=>fn(t,(s,a)=>{if(UH(a)){const l=q5(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(ZH(a)||WH(a)||jH(a)){const d=`custom-${$e(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),K5=(t,s)=>{const a=q5(s),l=d=>{De(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},X5=t=>zR(t).map(s=>{const a=K5(t,s);return UR(t)?G5.concat(a):a}).getOr(G5),Y5=t=>{const s=Qo(t);return s.length===1&&Tn(s,"title")},J5=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),MA=(t,s,a,l)=>{const d=S=>J5(S,a,l),g=S=>{const k=C(S.items);return{...S,type:"submenu",getStyleItems:q(k)}},p=S=>{const k=$e(S.name)?S.name:pt(S.title),D=`custom-${k}`,B={...S,type:"formatter",format:D,isSelected:a(D),getStylePreview:l(D)};return t.formatter.register(k,B),B},C=S=>ke(S,k=>j5(k)?g(k):RA(k)?d(k):Y5(k)?{...k,type:"separator"}:p(k));return C(s)},Q5=t=>{const s=C=>()=>t.formatter.match(C),a=C=>()=>{const S=t.formatter.get(C);return S!==void 0?O.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):O.none()},l=Lt([]),d=Lt([]),g=Lt(!1);return t.on("PreInit",C=>{const S=X5(t),k=MA(t,S,s,a);l.set(k)}),t.on("addStyleModifications",C=>{const S=MA(t,C.items,s,a);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:l.get(),S=d.get();return C.concat(S)}}},e$=t=>Fs(t)&&t.nodeType===1,GH=Mf.trim,NA=t=>s=>!!(e$(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),t$=NA("true"),qH=NA("false"),BA=(t,s,a,l,d)=>({type:t,title:s,url:a,level:l,attach:d}),KH=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return t$(s)}return!1},XH=(t,s)=>ke(Cc(ue.fromDom(s),t),a=>a.dom),Fd=t=>t.innerText||t.textContent,DE=t=>t.id?t.id:pt("h"),RE=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,YH=t=>RE(t)&&n$(t),ME=t=>t&&/^(H[1-6])$/.test(t.nodeName),n$=t=>KH(t)&&!qH(t),$A=t=>ME(t)&&n$(t),o$=t=>ME(t)?parseInt(t.nodeName.substr(1),10):0,PA=t=>{var s;const a=DE(t),l=()=>{t.id=a};return BA("header",(s=Fd(t))!==null&&s!==void 0?s:"","#"+a,o$(t),l)},JH=t=>{const s=t.id||t.name,a=Fd(t);return BA("anchor",a||"#"+s,"#"+s,0,ee)},s$=t=>ke(qn(t,$A),PA),r$=t=>ke(qn(t,YH),JH),FA=t=>XH("h1,h2,h3,h4,h5,h6,a:not([href])",t),QH=t=>GH(t.title).length>0,a$={find:t=>{const s=FA(t);return qn(s$(s).concat(r$(s)),QH)}},NE="tinymce-url-history",c$=5,IA=t=>$e(t)&&/^https?/.test(t),l$=t=>To(t)&&t.length<=c$&&ro(t,IA),i$=t=>Ht(t)&&bs(t,s=>!l$(s)).isNone(),u$=()=>{const t=yp.getItem(NE);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+NE+" was not valid JSON",a),{};throw a}return i$(s)?s:(console.log("Local storage "+NE+" was not valid format",s),{})},e9=t=>{if(!i$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));yp.setItem(NE,JSON.stringify(t))},t9=t=>{const s=u$();return Qe(s,t).getOr([])},d$=(t,s)=>{if(!IA(t))return;const a=u$(),l=Qe(a,s).getOr([]),d=qn(l,g=>g!==t);a[s]=[t].concat(d).slice(0,c$),e9(a)},Id=t=>!!t,LA=t=>Mo(Mf.makeMap(t,/[, ]/),Id),HA=t=>O.from(vx(t)),n9=t=>{const s=O.from(GR(t)).filter(Id).map(LA);return HA(t).fold(jn,a=>s.fold(Ot,l=>Qo(l).length>0?l:!1))},o9=(t,s)=>{const a=n9(t);return _o(a)?a?HA(t):O.none():a[s]?HA(t):O.none()},s9=(t,s)=>o9(t,s).map(a=>l=>lc.nu(d=>{const g=(C,S)=>{if(!$e(C))throw new Error("Expected value to be string");if(S!==void 0&&!Ht(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},p={filetype:s,fieldname:l.fieldname,...O.from(l.meta).getOr({})};a.call(t,g,l.value,p)})),m$=t=>O.from(t).filter($e).getOrUndefined(),f$=t=>yx(t)?O.some({targets:a$.find(t.getBody()),anchorTop:m$(qR(t)),anchorBottom:m$(KR(t))}):O.none(),g$=t=>O.from(m4(t)),nj=t=>({getHistory:t9,addToHistory:d$,getLinkInformation:()=>f$(t),getValidationHandler:()=>g$(t),getUrlPicker:s=>s9(t,s)}),oj=(t,s,a)=>{const l=Lt(!1),d=zH(s),g={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Eu.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},p=nj(s),C=Q5(s),S=LH(s),k=VH(s),D=()=>l.get(),B=J=>l.set(J),P={shared:{providers:g,anchors:BH(s,a,d.isPositionedAtTop),header:d},urlinput:p,styles:C,colorinput:S,dialog:k,isContextMenuOpen:D,setContextMenuState:B},H={...P,shared:{...P.shared,interpreter:J=>z5(J,{},H),getSink:t.popup}},Z={...P,shared:{...P.shared,interpreter:J=>z5(J,{},Z),getSink:t.dialog}};return{popup:H,dialog:Z}},ic=(t,s,a)=>{const l=(Le,rt)=>{De([s,...a],Dt=>{Dt.broadcastEvent(Le,rt)})},d=(Le,rt)=>{De([s,...a],Dt=>{Dt.broadcastOn([Le],rt)})},g=Le=>d(gm(),{target:Le.target}),p=Xf(),C=za(p,"touchstart",g),S=za(p,"touchmove",Le=>l(wh(),Le)),k=za(p,"touchend",Le=>l(ty(),Le)),D=za(p,"mousedown",g),B=za(p,"mouseup",Le=>{Le.raw.button===0&&d(E0(),{target:Le.target})}),P=Le=>d(gm(),{target:ue.fromDom(Le.target)}),H=Le=>{Le.button===0&&d(E0(),{target:ue.fromDom(Le.target)})},Z=()=>{De(t.editorManager.get(),Le=>{t!==Le&&Le.dispatch("DismissPopups",{relatedTarget:t})})},J=Le=>l(ag(),um(Le)),ge=Le=>{d(tp(),{}),l(rm(),um(Le))},ie=Jr(ue.fromDom(t.getElement())),re=Iy(ie,"scroll",Le=>{requestAnimationFrame(()=>{const rt=t.getContainer();if(rt!=null){const Nn=mC(t,s.element).map(xt=>[xt.element,...xt.others]).getOr([]);ko(Nn,xt=>Ao(xt,Le.target))&&(t.dispatch("ElementScroll",{target:Le.target.dom}),l(Kp(),Le))}})}),Ee=()=>d(tp(),{}),Re=Le=>{Le.state&&d(gm(),{target:ue.fromDom(t.getContainer())})},tt=Le=>{d(gm(),{target:ue.fromDom(Le.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",P),t.on("tap",P),t.on("mouseup",H),t.on("mousedown",Z),t.on("ScrollWindow",J),t.on("ResizeWindow",ge),t.on("ResizeEditor",Ee),t.on("AfterProgressState",Re),t.on("DismissPopups",tt)}),t.on("remove",()=>{t.off("click",P),t.off("tap",P),t.off("mouseup",H),t.off("mousedown",Z),t.off("ScrollWindow",J),t.off("ResizeWindow",ge),t.off("ResizeEditor",Ee),t.off("AfterProgressState",Re),t.off("DismissPopups",tt),D.unbind(),C.unbind(),S.unbind(),k.unbind(),B.unbind(),re.unbind()}),t.on("detach",()=>{De([s,...a],xS),De([s,...a],Le=>Le.destroy())})},Fr=US,Bf=FS,BE=q([fe("shell",!1),Ce("makeItem"),fe("setupItem",ee),rl.field("listBehaviours",[nn])]),r9=Jl({name:"items",overrides:()=>({behaviours:Xe([nn.config({})])})}),a9=q([r9]),c9=q("CustomList"),l9=(t,s,a,l)=>{const d=(C,S)=>{p(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},k=>{const D=nn.contents(k),B=S.length,P=B-D.length,H=P>0?Gn(P,()=>t.makeItem()):[],Z=D.slice(B);De(Z,ge=>nn.remove(k,ge)),De(H,ge=>nn.append(k,ge));const J=nn.contents(k);De(J,(ge,ie)=>{t.setupItem(C,ge,S[ie],ie)})})},g=t.shell?{behaviours:[nn.config({})],components:[]}:{behaviours:[],components:s},p=C=>t.shell?O.some(C):Vo(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Js(t.listBehaviours,g.behaviours),apis:{setItems:d}}},h$=Tr({name:c9(),configFields:BE(),partFields:a9(),factory:l9,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),Sv=q([Ce("dom"),fe("shell",!0),Ts("toolbarBehaviours",[nn])]),p$=q([Jl({name:"groups",overrides:()=>({behaviours:Xe([nn.config({})])})})]),$E=(t,s,a,l)=>{const d=(C,S)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},k=>{nn.set(k,S)})},g=C=>t.shell?O.some(C):Vo(C,t,"groups"),p=t.shell?{behaviours:[nn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:Js(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},Tm=Tr({name:"Toolbar",configFields:Sv(),partFields:p$(),factory:$E,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),b$=ee,i9=jn,VA=q([]);var u9=Object.freeze({__proto__:null,setup:b$,isDocked:i9,getBehaviours:VA});const zA=t=>(va(Gs(t,"position"),"fixed")?O.none():Wf(t)).orThunk(()=>{const l=ue.fromTag("span");return Ac(t).bind(d=>{Xa(d,l);const g=Wf(l);return Ya(l),g})}),UA=t=>zA(t).map(xa).getOrThunk(()=>ts(0,0)),aj=(t,s)=>{const a=t.element;wr(a,s.transitionClass),Oo(a,s.fadeOutClass),wr(a,s.fadeInClass),s.onShow(t)},cj=(t,s)=>{const a=t.element;wr(a,s.transitionClass),Oo(a,s.fadeInClass),wr(a,s.fadeOutClass),s.onHide(t)},d9=(t,s)=>t.y<s.bottom&&t.bottom>s.y,v$=(t,s)=>t.y>=s.y,y$=(t,s)=>t.bottom<=s.bottom,PE=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),RC=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),WA=t=>t.box.x-t.win.x,m9=(t,s,a)=>{const l=s.win,d=s.box,g=WA(s);return gr(t,p=>{switch(p){case"bottom":return y$(d,a.bounds)?O.none():O.some(RC(l,g,a));case"top":return v$(d,a.bounds)?O.none():O.some(PE(l,g,a));default:return O.none()}}).getOr({location:"no-dock"})},C$=(t,s,a)=>ro(t,l=>{switch(l){case"bottom":return y$(s,a.bounds);case"top":return v$(s,a.bounds)}}),f9=(t,s)=>{const a=s.optScrollEnv.fold(q(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return ts(t.bounds.x,a)},g9=(t,s)=>{const a=s.optScrollEnv.fold(q(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return ts(t.x,a)},ZA=(t,s,a)=>a.getInitialPos().map(l=>{const d=f9(l,s);return{box:_(d.left,d.top,or(t),ys(t)),location:l.location}}),w$=(t,s,a,l,d)=>{const g=g9(s,a),p=_(g.left,g.top,s.width,s.height);l.setInitialPos({style:ea(t),position:Ve(t,"position")||"static",bounds:p,location:d.location})},jA=(t,s,a,l,d)=>{l.getInitialPos().fold(()=>w$(t,s,a,l,d),()=>ee)},GA=(t,s,a)=>a.getInitialPos().bind(l=>{var d;switch(a.clearInitialPos(),l.position){case"static":return O.some({morph:"static"});case"absolute":const g=zA(t).getOr(Nr()),p=M(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return O.some({morph:"absolute",positionCss:sl("absolute",Qe(l.style,"left").map(S=>s.x-p.x),Qe(l.style,"top").map(S=>s.y-p.y+C),Qe(l.style,"right").map(S=>p.right-s.right),Qe(l.style,"bottom").map(S=>p.bottom-s.bottom))});default:return O.none()}}),h9=(t,s,a)=>ZA(t,s,a).filter(({box:l})=>C$(a.getModes(),l,s)).bind(({box:l})=>GA(t,l,a)),qA=t=>{switch(t.location){case"top":return O.some({morph:"fixed",positionCss:sl("fixed",O.some(t.leftX),O.some(t.topY),O.none(),O.none())});case"bottom":return O.some({morph:"fixed",positionCss:sl("fixed",O.some(t.leftX),O.none(),O.none(),O.some(t.bottomY))});default:return O.none()}},p9=(t,s,a)=>{const l=M(t),d=Ze(),g=m9(a.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(w$(t,l,s,a,g),qA(g)):O.none()},b9=(t,s,a)=>h9(t,s,a).orThunk(()=>s.optScrollEnv.bind(l=>ZA(t,s,a)).bind(({box:l,location:d})=>{const g=Ze(),p=WA({win:g,box:l}),C=d==="top"?PE(g,p,s):RC(g,p,s);return qA(C)})),S$=(t,s,a)=>{const l=t.element;return va(Gs(l,"position"),"fixed")?b9(l,s,a):p9(l,s,a)},v9=(t,s,a)=>{const l=t.element;return ZA(l,s,a).bind(({box:d})=>GA(l,d,a))},FE=(t,s,a,l)=>{const d=M(t),g=Ze(),p=WA({win:g,box:d}),C=l(g,p,s);return C.location==="bottom"||C.location==="top"?(jA(t,d,s,a,C),qA(C)):O.none()},x$=(t,s,a)=>{a.setDocked(!1),De(["left","right","top","bottom","position"],l=>Ln(t.element,l)),s.onUndocked(t)},xv=(t,s,a,l)=>{const d=l.position==="fixed";a.setDocked(d),My(t.element,l),(d?s.onDocked:s.onUndocked)(t)},E$=(t,s,a,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const C=d9(p,l.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(id(t.element,[g.fadeOutClass]),g.onHide(t)):(C?aj:cj)(t,g))})})},IE=(t,s,a,l,d)=>{E$(t,s,a,l,!0),xv(t,s,a,d.positionCss)},MC=(t,s,a,l,d)=>{switch(d.morph){case"static":return x$(t,s,a);case"absolute":return xv(t,s,a,d.positionCss);case"fixed":return IE(t,s,a,l,d)}},T$=(t,s,a)=>{const l=s.lazyViewport(t);E$(t,s,a,l),S$(t,l,a).each(d=>{MC(t,s,a,l,d)})},y9=(t,s,a)=>{const l=t.element;a.setDocked(!1);const d=s.lazyViewport(t);v9(t,d,a).each(g=>{switch(g.morph){case"static":{x$(t,s,a);break}case"absolute":{xv(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Sl(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),NC(t,s,a)},NC=(t,s,a)=>{t.getSystem().isConnected()&&T$(t,s,a)},KA=(t,s,a)=>{a.isDocked()&&y9(t,s,a)},XA=t=>(s,a,l)=>{const d=a.lazyViewport(s);FE(s.element,d,l,t).each(p=>{IE(s,a,l,d,p)})},C9=XA(PE),YA=XA(RC);var Ev=Object.freeze({__proto__:null,refresh:NC,reset:KA,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,l)=>a.setModes(l),forceDockToTop:C9,forceDockToBottom:YA}),S9=Object.freeze({__proto__:null,events:(t,s)=>ss([Eh(jp(),(a,l)=>{t.contextual.each(d=>{as(a.element,d.transitionClass)&&(Sl(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),l.stop()})}),Pe(ag(),(a,l)=>{NC(a,t,s)}),Pe(Kp(),(a,l)=>{NC(a,t,s)}),Pe(rm(),(a,l)=>{KA(a,t,s)})])}),_$=[Ms("contextual",[ar("fadeInClass"),ar("fadeOutClass"),ar("transitionClass"),$c("lazyContext"),_n("onShow"),_n("onShown"),_n("onHide"),_n("onHidden")]),xs("lazyViewport",()=>({bounds:Ze(),optScrollEnv:O.none()})),tm("modes",["top","bottom"],hs),_n("onDocked"),_n("onUndocked")],QA=Object.freeze({__proto__:null,init:t=>{const s=Lt(!1),a=Lt(!0),l=Fo(),d=Lt(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return nc({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Ir=da({fields:_$,name:"docking",active:S9,apis:Ev,state:QA}),eO=q(pt("toolbar-height-change")),$f={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},LE="tox-tinymce--toolbar-sticky-on",A$="tox-tinymce--toolbar-sticky-off",x9=(t,s)=>{const a=ja(s),d=fl(s).dom.innerHeight,g=_a(a),p=ue.fromDom(t.elm),C=V(p),S=ys(p),k=C.y,D=k+S,B=xa(s),P=ys(s),H=B.top,Z=H+P,J=Math.abs(H-g.top)<2,ge=Math.abs(Z-(g.top+d))<2;if(J&&k<Z)Kf(g.left,k-P,a);else if(ge&&D>H){const ie=k-d+S+P;Kf(g.left,ie,a)}},HE=(t,s)=>Tn(Ir.getModes(t),s),tO=t=>{const s=l=>ru(l)+(parseInt(Ve(l,"margin-top"),10)||0)+(parseInt(Ve(l,"margin-bottom"),10)||0),a=t.element;Ba(a).each(l=>{const d="padding-"+Ir.getModes(t)[0];if(Ir.isDocked(t)){const g=or(l);Xt(a,"width",g+"px"),Xt(l,d,s(a)+"px")}else Ln(a,"width"),Ln(l,d)})},O$=(t,s)=>{s?(Oo(t,$f.fadeOutClass),id(t,[$f.transitionClass,$f.fadeInClass])):(Oo(t,$f.fadeInClass),id(t,[$f.fadeOutClass,$f.transitionClass]))},D$=(t,s)=>{const a=ue.fromDom(t.getContainer());s?(wr(a,LE),Oo(a,A$)):(wr(a,A$),Oo(a,LE))},E9=(t,s)=>{const a=ja(s);pd(a).filter(l=>!Ao(s,l)).filter(l=>Ao(l,ue.fromDom(a.dom.body))||Sa(t,l)).each(()=>ql(s))},R$=(t,s)=>Ri(t).orThunk(()=>s().toOptional().bind(a=>Ri(a.element))),T9=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Ir.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(tO)}),t.on("SkinLoaded",()=>{a().each(l=>{Ir.isDocked(l)?Ir.reset(l):Ir.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(Ir.reset)})),t.on("AfterScrollIntoView",l=>{a().each(d=>{Ir.refresh(d);const g=d.element;zs(g)&&x9(l,g)})}),t.on("PostRender",()=>{D$(t,!1)})},BC=t=>t().map(Ir.isDocked).getOr(!1),_9=()=>[Vc.config({channels:{[eO()]:{onReceive:tO}}})],M$=(t,s)=>{const a=Fo(),l=s.getSink,d=C=>{l().each(S=>C(S.element))},g=C=>{t.inline||tO(C),D$(t,Ir.isDocked(C)),C.getSystem().broadcastOn([tp()],{}),l().each(S=>S.getSystem().broadcastOn([tp()],{}))},p=t.inline?[]:_9();return[Zt.config({}),Ir.config({contextual:{lazyContext:C=>{const S=ru(C.element),k=t.inline?t.getContentAreaContainer():t.getContainer();return O.from(k).map(D=>{const B=M(ue.fromDom(D));return mC(t,C.element).fold(()=>{const H=B.height-S,Z=B.y+(HE(C,"top")?0:S);return _(B.x,Z,B.width,H)},H=>{const Z=te(B,Gx(H)),J=HE(C,"top")?Z.y:Z.y+S;return _(Z.x,J,Z.width,Z.height-S)})})},onShow:()=>{d(C=>O$(C,!0))},onShown:C=>{d(S=>Sl(S,[$f.transitionClass,$f.fadeInClass])),a.get().each(S=>{E9(C.element,S),a.clear()})},onHide:C=>{R$(C.element,l).fold(a.clear,a.set),d(S=>O$(S,!1))},onHidden:()=>{d(C=>Sl(C,[$f.transitionClass]))},...$f},lazyViewport:C=>mC(t,C.element).fold(()=>{const k=Ze(),D=d4(t),B=k.y+(HE(C,"top")?D:0),P=k.height-(HE(C,"bottom")?D:0);return{bounds:_(k.x,B,k.width,P),optScrollEnv:O.none()}},k=>({bounds:Gx(k),optScrollEnv:O.some({currentScrollTop:k.element.dom.scrollTop,scrollElmTop:xa(k.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var nO=Object.freeze({__proto__:null,setup:T9,isDocked:BC,getBehaviours:M$});const N$=t=>{const s=t.editor,a=t.sticky?M$:VA;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Xe(a(s,t.sharedBackstage))}},k9=Bt([Us,ec("items",Xm([tg([Rx,bc("items",hs)]),hs]))].concat(Fg)),A9=t=>bo("GroupToolbarButton",k9,t),O9=[ra("text"),ra("tooltip"),ra("icon"),aa("search",!1,Xm([Qm,Bt([ra("placeholder")])],t=>_o(t)?t?O.some({placeholder:O.none()}):O.none():O.some(t))),$c("fetch"),xs("onSetup",()=>ee)],B$=Bt([Us,...O9]),$$=t=>bo("menubutton",B$,t),D9=Bt([Us,K2,Vi,hp,M4,AI,Od,Ha("presets","normal",["normal","color","listpreview"]),xM(1),Y0,DI]),R9=t=>bo("SplitButton",D9,t);var oO=ir({factory:(t,s)=>{const a=(d,g)=>{const p=ke(g,C=>{const S={type:"menubutton",text:C.text,fetch:D=>{D(C.getItems())}},k=$$(S).mapError(D=>tf(D)).getOrDie();return Cv(k,"tox-mbtn",s.backstage,O.some("menuitem"))});nn.set(d,p)},l={focus:Pt.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:Xe([nn.config({}),hn("menubar-events",[rs(d=>{t.onSetup(d)}),Pe(gu(),(d,g)=>{lr(d.element,".tox-mbtn--active").each(p=>{ol(g.event.target,".tox-mbtn").each(C=>{Ao(p,C)||d.getSystem().getByDom(p).each(S=>{d.getSystem().getByDom(C).each(k=>{oi.expand(k),oi.close(S),Zt.focus(k)})})})})}),Pe(cw(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{oi.isOpen(p)&&(oi.expand(C),oi.close(p))})})})]),Pt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),O.some(!0))}),_s.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ce("dom"),Ce("uid"),Ce("onEscape"),Ce("backstage"),fe("onSetup",ee)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const P$="⚡️Upgrade",VE="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",zE=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:VE,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:P$}}]}),F$="container",M9=[Ts("slotBehaviours",[])],I$=t=>"<alloy.field."+t+">",N9=t=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),P0(F$,I$(C),S)),record:q(g)}})(),a=t(s),l=s.record(),d=ke(l,g=>Qs({name:g,pname:I$(g)}));return S2(F$,M9,d,Tv,a)},Tv=(t,s)=>{const a=J=>VS(t),l=(J,ge)=>Vo(J,t,ge),d=(J,ge)=>(ie,re)=>Vo(ie,t,re).map(Ee=>J(Ee,re)).getOr(ge),g=J=>(ge,ie)=>{De(ie,re=>J(ge,re))},p=(J,ge)=>zr(J.element,"aria-hidden")!=="true",C=(J,ge)=>{if(!p(J)){const ie=J.element;Ln(ie,"display"),ws(ie,"aria-hidden"),Mt(J,qp(),{name:ge,visible:!0})}},S=(J,ge)=>{if(p(J)){const ie=J.element;Xt(ie,"display","none"),gn(ie,"aria-hidden","true"),Mt(J,qp(),{name:ge,visible:!1})}},k=d(p,!1),D=d(S),B=g(D),P=J=>B(J,a()),H=d(C),Z={getSlotNames:a,getSlot:l,isShowing:k,hideSlot:D,hideAllSlots:P,showSlot:H};return{uid:t.uid,dom:t.dom,components:s,behaviours:rp(t.slotBehaviours),apis:Z}},Wa={...Mo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Ib(t)),sketch:N9},B9=Bt([Vi,K2,xs("onShow",ee),xs("onHide",ee),Od]),$9=t=>bo("sidebar",B9,t),P9=t=>{const{sidebars:s}=t.ui.registry.getAll();De(Qo(s),a=>{const l=s[a],d=()=>va(O.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},F9=t=>({element:()=>t.element.dom}),I9=(t,s)=>{const a=ke(Qo(s),l=>{const d=s[l],g=co($9(d));return{name:l,getApi:F9,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return ke(a,l=>{const d=Lt(ee);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Q2.unnamedEvents([pp(l,d),bp(l,d),Pe(qp(),(g,p)=>{const C=p.event;Me(a,k=>k.name===C.name).each(k=>{(C.visible?k.onShow:k.onHide)(k.getApi(g))})})])})})},L9=t=>Wa.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:I9(s,t),slotBehaviours:Q2.unnamedEvents([rs(a=>Wa.hideAllSlots(a))])})),H9=(t,s,a)=>{En.getCurrent(t).each(d=>{nn.set(d,[L9(s)]);const g=a==null?void 0:a.toLowerCase();$e(g)&&Qn(s,g)&&En.getCurrent(d).each(p=>{Wa.showSlot(p,g),ai.immediateGrow(d),Ln(d.element,"width"),UE(t.element,"region")})})},UE=(t,s)=>{gn(t,"role",s)},L$=(t,s)=>{En.getCurrent(t).each(l=>{En.getCurrent(l).each(g=>{ai.hasGrown(l)?Wa.isShowing(g,s)?(ai.shrink(l),UE(t.element,"presentation")):(Wa.hideAllSlots(g),Wa.showSlot(g,s),UE(t.element,"region")):(Wa.hideAllSlots(g),Wa.showSlot(g,s),ai.grow(l),UE(t.element,"region"))})})},H$=t=>En.getCurrent(t).bind(a=>ai.isGrowing(a)||ai.hasGrown(a)?En.getCurrent(a).bind(g=>Me(Wa.getSlotNames(g),p=>Wa.isShowing(g,p))):O.none()),rO=pt("FixSizeEvent"),aO=pt("AutoSizeEvent"),WE=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Xe([_s.config({}),Zt.config({}),ai.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{En.getCurrent(s).each(Wa.hideAllSlots),lo(s,aO)},onGrown:s=>{lo(s,aO)},onStartGrow:s=>{Mt(s,rO,{width:Gs(s.element,"width").getOr("")})},onStartShrink:s=>{Mt(s,rO,{width:or(s.element)+"px"})}}),nn.config({}),En.config({find:s=>{const a=nn.contents(s);return Hr(a)}})])}],behaviours:Xe([Wi.childAt(0),hn("sidebar-sliding-events",[Pe(rO,(s,a)=>{Xt(s.element,"width",a.event.width)}),Pe(aO,(s,a)=>{Ln(s.element,"width")})])])});var V9=Object.freeze({__proto__:null,block:(t,s,a,l)=>{gn(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Xe([Pt.config({mode:"special",onTab:()=>O.some(!0),onShiftTab:()=>O.some(!0)}),Zt.config({})]),p=l(d,g),C=d.getSystem().build(p);nn.append(d,Gl(C)),C.hasConfigured(Pt)&&s.focus&&Pt.focusIn(C),a.isBlocked()||s.onBlock(t),a.blockWith(()=>nn.remove(d,C))},unblock:(t,s,a)=>{ws(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()}}),z9=[xs("getRoot",O.none),ca("focus",!0),_n("onBlock"),_n("onUnblock")],lO=Object.freeze({__proto__:null,init:()=>{const t=Fy(),s=a=>{t.set({destroy:a})};return nc({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const _m=da({fields:z9,name:"blocking",apis:V9,state:lO}),iO=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return fn(s,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},U9=t=>Array.prototype.slice.call(t.dom.classList,0),Pf=t=>{const s=ue.fromHtml(t),a=Oc(s),l=iO(s),d=U9(s),g=a.length===0?{}:{innerHtml:Th(s)};return{tag:_c(s),classes:d,attributes:l,...g}},W9=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Pf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),V$=t=>En.getCurrent(t).each(s=>ql(s.element)),Z9=(t,s)=>{const a="tabindex",l=`data-mce-${a}`;O.from(t.iframeElement).map(ue.fromDom).each(d=>{s?(Ds(d,a).each(g=>gn(d,l,g)),gn(d,a,-1)):(ws(d,a),Ds(d,l).each(g=>{gn(d,a,g),ws(d,l)}))})},$C=(t,s,a,l)=>{const d=s.element;if(Z9(t,a),a)_m.block(s,W9(l)),Ln(d,"display"),ws(d,"aria-hidden"),t.hasFocus()&&V$(s);else{const g=En.getCurrent(s).exists(p=>hd(p.element));_m.unblock(s),Xt(d,"display","none"),gn(d,"aria-hidden","true"),g&&t.focus()}},j9=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Xe([nn.config({}),_m.config({focus:!1}),En.config({find:s=>Hr(s.components())})]),components:[]}),G9=t=>t.type==="focusin",q9=t=>G9(t)?(t.composed?Hr(t.composedPath()):O.from(t.target)).map(ue.fromDom).filter(po).exists(a=>as(a,"mce-pastebin")):!1,fj=(t,s,a)=>{const l=Lt(!1),d=Fo(),g=C=>{l.get()&&!q9(C)&&(C.preventDefault(),V$(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const p=C=>{C!==l.get()&&(l.set(C),$C(t,s(),C,a.providers),m8(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),tr(C.time)){const S=lx.setEditorTimeout(t,()=>p(C.state),C.time);d.set(S)}else p(C.state),d.clear()})},gj=(t,s)=>fn(t,(d,g)=>s(g,d.len).fold(q(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,ZE=(t,s,a)=>({within:t,extra:s,withinWidth:a}),z$=(t,s,a)=>{const l=gj(t,(C,S)=>{const k=a(C);return O.some({element:C,start:S,finish:S+k,width:k})}),d=qn(l,C=>C.finish<=s),g=Ro(d,(C,S)=>C+S.width,0),p=l.slice(d.length);return{within:d,extra:p,withinWidth:g}},PC=t=>ke(t,s=>s.element),K9=(t,s,a)=>{const l=PC(t.concat(s));return ZE(l,[],a)},X9=(t,s,a,l)=>{const d=PC(t).concat([a]);return ZE(d,PC(s),l)},Y9=(t,s,a)=>ZE(PC(t),[],a),J9=(t,s,a)=>{const l=z$(s,t,a);return l.extra.length===0?O.some(l):O.none()},Q9=(t,s,a,l)=>{const d=J9(t,s,a).getOrThunk(()=>z$(s,t-a(l),a)),g=d.within,p=d.extra,C=d.withinWidth;return p.length===1&&p[0].width<=a(l)?K9(g,p,C):p.length>=1?X9(g,p,l,C):Y9(g,p,C)},uO=(t,s)=>{const a=ke(s,l=>Gl(l));Tm.setGroups(t,a)},eV=t=>gr(t,s=>Ri(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),U$=(t,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=bm(t,s,"primary"),g=Ws.getCoupled(t,"overflowGroup");Xt(d.element,"visibility","hidden");const p=l.concat([g]),C=eV(p);a([]),uO(d,p);const S=or(d.element),k=Q9(S,s.builtGroups.get(),D=>or(D.element),g);k.extra.length===0?(nn.remove(d,g),a([])):(uO(d,k.within),a(k.extra)),Ln(d.element,"visibility"),yi(d.element),C.each(Zt.focus)},W$=q([Ts("splitToolbarBehaviours",[Ws]),Ia("builtGroups",()=>Lt([]))]),hj=q([Vh(["overflowToggledClass"]),nd("getOverflowBounds"),Ce("lazySink"),Ia("overflowGroups",()=>Lt([])),_n("onOpened"),_n("onClosed")].concat(W$())),pj=q([Qs({factory:Tm,schema:Sv(),name:"primary"}),Fi({schema:Sv(),name:"overflow"}),Fi({name:"overflow-button"}),Fi({name:"overflow-group"})]),jE=q((t,s)=>{Gd(t,Math.floor(s))}),Z$=q([Vh(["toggledClass"]),Ce("lazySink"),$c("fetch"),nd("getBounds"),Ms("fireDismissalEventInstead",[fe("event",cm())]),dm(),_n("onToggled")]),tV=q([Fi({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Xe([yn.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Fi({factory:Tm,schema:Sv(),name:"toolbar",overrides:t=>({toolbarBehaviours:Xe([Pt.config({mode:"cyclic",onEscape:s=>(Vo(s,t,"button").each(Zt.focus),O.none())})])})})]),GE=Fo(),Gi=(t,s)=>{GE.set(!0),dO(t,s),GE.clear()},dO=(t,s)=>{const a=Ws.getCoupled(t,"toolbarSandbox");Wn.isOpen(a)?Wn.close(a):Wn.open(a,s.toolbar())},qE=(t,s,a,l)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();Ua.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:jE()}}},d)},mO=(t,s,a,l,d)=>{Tm.setGroups(s,d),qE(t,s,a,l),yn.on(t)},nV=(t,s,a)=>{const l=kw(),d=(p,C)=>{const S=GE.get().getOr(!1);a.fetch().get(k=>{mO(t,C,a,s.layouts,k),l.link(t.element),S||Pt.focusIn(C)})},g=()=>{yn.off(t),GE.get().getOr(!1)||Zt.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:Xe([Pt.config({mode:"special",onEscape:p=>(Wn.close(p),O.some(!0))}),Wn.config({onOpen:d,onClose:g,isPartOf:(p,C,S)=>ug(C,S)||ug(t,S),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Vc.config({channels:{...T0({isExtraPart:jn,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...k1({doReposition:()=>{Wn.getState(Ws.getCoupled(t,"toolbarSandbox")).each(p=>{qE(t,p,a,s.layouts)})}})}})])}},_p=Tr({name:"FloatingToolbarButton",factory:(t,s,a,l)=>({...dr.sketch({...l.button(),action:d=>{dO(d,l)},buttonBehaviours:rl.augment({dump:l.button().buttonBehaviours},[Ws.config({others:{toolbarSandbox:d=>nV(d,a,t)}})])}),apis:{setGroups:(d,g)=>{Wn.getState(Ws.getCoupled(d,"toolbarSandbox")).each(p=>{mO(d,p,t,a.layouts,g)})},reposition:d=>{Wn.getState(Ws.getCoupled(d,"toolbarSandbox")).each(g=>{qE(d,g,t,a.layouts)})},toggle:d=>{dO(d,l)},toggleWithoutFocusing:d=>{Gi(d,l)},getToolbar:d=>Wn.getState(Ws.getCoupled(d,"toolbarSandbox")),isOpen:d=>Wn.isOpen(Ws.getCoupled(d,"toolbarSandbox"))}}),configFields:Z$(),partFields:tV(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),XE=q([Ce("items"),Vh(["itemSelector"]),Ts("tgroupBehaviours",[Pt])]),oV=q([B0({name:"items",unit:"item"})]),YE=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Js(t.tgroupBehaviours,[Pt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),JE=Tr({name:"ToolbarGroup",configFields:XE(),partFields:oV(),factory:YE}),j$=t=>ke(t,s=>Gl(s)),qi=(t,s,a)=>{U$(t,a,l=>{a.overflowGroups.set(l),s.getOpt(t).each(d=>{_p.setGroups(d,j$(l))})})},sV=(t,s,a,l)=>{const d=yo(_p.sketch({fetch:()=>lc.nu(g=>{g(j$(t.overflowGroups.get()))}),layouts:{onLtr:()=>[xr,Gr],onRtl:()=>[Gr,xr],onBottomLtr:()=>[sc,Hc],onBottomRtl:()=>[Hc,sc]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Js(t.splitToolbarBehaviours,[Ws.config({others:{overflowGroup:()=>JE.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(ke(p,g.getSystem().build)),qi(g,d,t)},refresh:g=>qi(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{_p.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(_p.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(_p.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{_p.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(_p.getToolbar)},domModification:{attributes:{role:"group"}}}},FC=Tr({name:"SplitFloatingToolbar",configFields:hj(),partFields:pj(),factory:sV,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),G$=q([Vh(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),_n("onOpened"),_n("onClosed")].concat(W$())),q$=q([Qs({factory:Tm,schema:Sv(),name:"primary"}),Qs({factory:Tm,schema:Sv(),name:"overflow",overrides:t=>({toolbarBehaviours:Xe([ai.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Vo(s,t,"overflow-button").each(a=>{yn.off(a),Zt.focus(a)}),t.onClosed(s)},onGrown:s=>{Pt.focusIn(s),t.onOpened(s)},onStartGrow:s=>{Vo(s,t,"overflow-button").each(yn.on)}}),Pt.config({mode:"acyclic",onEscape:s=>(Vo(s,t,"overflow-button").each(Zt.focus),O.some(!0))})])})}),Fi({name:"overflow-button",overrides:t=>({buttonBehaviours:Xe([yn.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Fi({name:"overflow-group"})]),rV=(t,s)=>Vo(t,s,"overflow").map(ai.hasGrown).getOr(!1),fO=(t,s)=>{Vo(t,s,"overflow-button").bind(()=>Vo(t,s,"overflow")).each(a=>{gO(t,s),ai.toggleGrow(a)})},gO=(t,s)=>{Vo(t,s,"overflow").each(a=>{U$(t,s,l=>{const d=ke(l,g=>Gl(g));Tm.setGroups(a,d)}),Vo(t,s,"overflow-button").each(l=>{ai.hasGrown(a)&&yn.on(l)}),ai.refresh(a)})},aV=(t,s,a,l)=>{const d="alloy.toolbar.toggle",g=(p,C)=>{const S=ke(C,p.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Js(t.splitToolbarBehaviours,[Ws.config({others:{overflowGroup:p=>JE.sketch({...l["overflow-group"](),items:[dr.sketch({...l["overflow-button"](),action:C=>{lo(p,d)}})]})}}),hn("toolbar-toggle-events",[Pe(d,p=>{fO(p,t)})])]),apis:{setGroups:(p,C)=>{g(p,C),gO(p,t)},refresh:p=>gO(p,t),toggle:p=>fO(p,t),isOpen:p=>rV(p,t)},domModification:{attributes:{role:"group"}}}},hO=Tr({name:"SplitSlidingToolbar",configFields:G$(),partFields:q$(),factory:aV,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),K$=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[JE.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Xe([_s.config({}),Zt.config({})])}},QE=t=>JE.sketch(K$(t)),X$=(t,s)=>{const a=rs(l=>{const d=ke(t.initGroups,QE);Tm.setGroups(l,d)});return Xe([Dd.toolbarButton(t.providers.isDisabled),Xr(),Pt.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),hn("toolbar-events",[a])])},Y$=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":K$({title:O.none(),items:[]}),"overflow-button":bA({name:"more",icon:O.some("more-drawer"),enabled:!0,tooltip:O.some("More..."),primary:!1,buttonType:O.none(),borderless:!1},O.none(),t.providers)},splitToolbarBehaviours:X$(t,s)}},J$=t=>{const s=Y$(t),a=4,l=FC.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return FC.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=V(d),p=$m(d),C=V(p),S=Math.max(p.dom.scrollHeight,C.height);return _(g.x+a,C.y,g.width-a*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},Q$=t=>{const s=hO.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=hO.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=Y$(t);return hO.sketch({...l,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([eO()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([eO()],{type:"closed"}),t.onToggled(d,!1)}})},IC=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Tm.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Hi.scrolling?["tox-toolbar--scrolling"]:[])},components:[Tm.parts.groups({})],toolbarBehaviours:X$(t,s)})},eP=[hp,Vi,ra("tooltip"),Ha("buttonType","secondary",["primary","secondary"]),ca("borderless",!1),$c("onAction")],tP=[...eP,Ad,yl("type",["button"])],nP=[...eP,ca("active",!1),yl("type",["togglebutton"])],pO={button:tP,togglebutton:nP},cV=[yl("type",["group"]),tm("buttons",[],Hs("type",pO))],lV=Hs("type",{...pO,group:cV}),iV=Bt([tm("buttons",[],lV),$c("onShow"),$c("onHide")]),oP=t=>bo("view",iV,t),uV=(t,s)=>{var a,l;const d=t.type==="togglebutton",g=t.icon.map(Ee=>Em(Ee,s.icons)).map(yo),C=(()=>Ee=>{const Re=rt=>{g.map(Dt=>Dt.getOpt(Ee).each(Nn=>{nn.set(Nn,[Em(rt,s.icons)])}))},tt=rt=>{const Dt=Ee.element;rt?(wr(Dt,"tox-button--enabled"),gn(Dt,"aria-pressed",!0)):(Oo(Dt,"tox-button--enabled"),ws(Dt,"aria-pressed"))},Le=()=>as(Ee.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Re,setActive:tt,isActive:Le});if(t.type==="button")return t.onAction({setIcon:Re})})(),S={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},k=vA((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),D=d?t.text.map(s.translate):O.some(s.translate(t.text)),B=D.map(Xs),P=S.tooltip.or(D).map(Ee=>({"aria-label":s.translate(Ee),title:s.translate(Ee)})).getOr({}),H=g.map(Ee=>Ee.asSpec()),Z=Q0([H,B]),J=t.icon.isSome()&&B.isSome(),ge={tag:"button",classes:k.concat(...t.icon.isSome()&&!J?["tox-button--icon"]:[]).concat(...J?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:P},ie=[],re=xE(S,O.some(C),ie,ge,Z,s);return dr.sketch(re)},sP=(t,s)=>uV(t,s),dV=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:ke(t.buttons,a=>sP(a,s))}),rP=Br().deviceType,mV=rP.isPhone(),fV=rP.isTablet(),gV=t=>{let s=!1;const a=ke(t.buttons,l=>l.type==="group"?(s=!0,dV(l,t.providers)):sP(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...mV||fV?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Xe([Zt.config({}),Pt.config({mode:"flow",selector:"button, .tox-button",focusInside:Mg.OnEnterOrSpaceMode})]),components:s?a:[Sm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Sm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},hV=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),pV=(t,s,a,l)=>{const d={getPane:g=>Fr.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var _v=Tr({name:"silver.View",configFields:[Ce("viewConfig")],partFields:[Jl({factory:{sketch:gV},schema:[Ce("buttons"),Ce("providers")],name:"header"}),Jl({factory:{sketch:hV},schema:[],name:"pane"})],factory:pV,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const aP=(t,s,a)=>Iu(s,(l,d)=>{const g=co(oP(l));return t.slot(d,_v.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[_v.parts.header({buttons:g.buttons,providers:a})]:[],_v.parts.pane({})]}))}),bV=(t,s)=>Wa.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:aP(a,t,s),slotBehaviours:Q2.unnamedEvents([rs(l=>Wa.hideAllSlots(l))])})),cP=t=>Me(Wa.getSlotNames(t),s=>Wa.isShowing(t,s)),bO=t=>{const s=t.element;Xt(s,"display","none"),gn(s,"aria-hidden","true")},vV=t=>{const s=t.element;Ln(s,"display"),ws(s,"aria-hidden")},eT=t=>({getContainer:q(t)}),lP=(t,s,a)=>{Wa.getSlot(t,s).each(l=>{_v.getPane(l).each(d=>{a(l)(eT(d.element.dom))})})},iP=(t,s)=>lP(t,s,_v.getOnShow),yV=(t,s)=>lP(t,s,_v.getOnHide);var vO=ir({factory:(t,s)=>{const g={setViews:(p,C)=>{nn.set(p,[bV(C,s.backstage.shared.providers)])},whichView:p=>En.getCurrent(p).bind(cP),toggleView:(p,C,S,k)=>En.getCurrent(p).exists(D=>{const B=cP(D),P=B.exists(Z=>k===Z),H=Wa.getSlot(D,k).isSome();return H&&(Wa.hideAllSlots(D),P?(bO(p),C()):(S(),vV(p),Wa.showSlot(D,k),iP(D,k)),B.each(Z=>yV(D,Z))),H})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Xe([nn.config({}),En.config({find:p=>{const C=nn.contents(p);return Hr(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Ce("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,l,d)=>t.toggleView(s,a,l,d),whichView:(t,s)=>t.whichView(s)}});const CV=(t,s,a)=>{let l=!1;const d={getSocket:g=>Fr.getPart(g,t,"socket"),setSidebar:(g,p,C)=>{Fr.getPart(g,t,"sidebar").each(S=>H9(S,p,C))},toggleSidebar:(g,p)=>{Fr.getPart(g,t,"sidebar").each(C=>L$(C,p))},whichSidebar:g=>Fr.getPart(g,t,"sidebar").bind(H$).getOrNull(),getHeader:g=>Fr.getPart(g,t,"header"),getToolbar:g=>Fr.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{Fr.getPart(g,t,"toolbar").each(C=>{const S=ke(p,QE);C.getApis().setGroups(C,S)})},setToolbars:(g,p)=>{Fr.getPart(g,t,"multiple-toolbar").each(C=>{const S=ke(p,k=>ke(k,QE));h$.setItems(C,S)})},refreshToolbar:g=>{Fr.getPart(g,t,"toolbar").each(C=>C.getApis().refresh(C))},toggleToolbarDrawer:g=>{Fr.getPart(g,t,"toolbar").each(p=>{No(p.getApis().toggle,C=>C(p))})},toggleToolbarDrawerWithoutFocusing:g=>{Fr.getPart(g,t,"toolbar").each(p=>{No(p.getApis().toggleWithoutFocusing,C=>C(p))})},isToolbarDrawerToggled:g=>Fr.getPart(g,t,"toolbar").bind(p=>O.from(p.getApis().isOpen).map(C=>C(p))).getOr(!1),getThrobber:g=>Fr.getPart(g,t,"throbber"),focusToolbar:g=>{Fr.getPart(g,t,"toolbar").orThunk(()=>Fr.getPart(g,t,"multiple-toolbar")).each(C=>{Pt.focusIn(C)})},setMenubar:(g,p)=>{Fr.getPart(g,t,"menubar").each(C=>{oO.setMenus(C,p)})},focusMenubar:g=>{Fr.getPart(g,t,"menubar").each(p=>{oO.focus(p)})},setViews:(g,p)=>{Fr.getPart(g,t,"viewWrapper").each(C=>{vO.setViews(C,p)})},toggleView:(g,p)=>Fr.getPart(g,t,"viewWrapper").exists(C=>vO.toggleView(C,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>Fr.getPart(g,t,"viewWrapper").bind(vO.whichView).getOrNull(),hideMainView:g=>{l=d.isToolbarDrawerToggled(g),l&&d.toggleToolbarDrawer(g),Fr.getPart(g,t,"editorContainer").each(p=>{const C=p.element;Xt(C,"display","none"),gn(C,"aria-hidden","true")})},showMainView:g=>{l&&d.toggleToolbarDrawer(g),Fr.getPart(g,t,"editorContainer").each(p=>{const C=p.element;Ln(C,"display"),ws(C,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},wV=Bf.optional({factory:oO,name:"menubar",schema:[Ce("backstage")]}),yO=t=>t.type===Hi.sliding?Q$:t.type===Hi.floating?J$:IC,SV=Bf.optional({factory:{sketch:t=>h$.sketch({uid:t.uid,dom:t.dom,listBehaviours:Xe([Pt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>IC({type:t.type,uid:pt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),O.some(!0))}),setupItem:(s,a,l,d)=>{Tm.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Ce("dom"),Ce("onEscape")]}),tT=Bf.optional({factory:{sketch:t=>{const s=yO(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),O.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Ce("dom"),Ce("onEscape"),Ce("getSink")]}),uP=Bf.optional({factory:{sketch:N$},name:"header",schema:[Ce("dom")]}),dP=Bf.optional({factory:{sketch:zE},name:"promotion",schema:[Ce("dom")]}),CO=Bf.optional({name:"socket",schema:[Ce("dom")]}),xV=Bf.optional({factory:{sketch:WE},name:"sidebar",schema:[Ce("dom")]}),mP=Bf.optional({factory:{sketch:j9},name:"throbber",schema:[Ce("dom")]}),kv=Bf.optional({factory:vO,name:"viewWrapper",schema:[Ce("backstage")]}),fP=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),EV=Bf.optional({factory:{sketch:fP},name:"editorContainer",schema:[]});var Go=Tr({name:"OuterContainer",factory:CV,configFields:[Ce("dom"),Ce("behaviours")],partFields:[uP,wV,tT,SV,CO,xV,dP,mP,kv,EV],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,l)=>{t.setSidebar(s,a,l)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const TV="file edit view insert format tools table help",nT={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},_V=(t,s,a)=>{const l=u4(a).split(/[ ,]/);return{text:t.title,getItems:()=>me(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:ko(l,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},wO=t=>t.split(" "),SO=(t,s)=>{const a={...nT,...s.menus},l=Qo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?wO(TV):wO(s.menubar===!1?"":s.menubar),g=qn(d,C=>{const S=Qn(nT,C);return l?S||Qe(s.menus,C).exists(k=>Qn(k,"items")):S}),p=ke(g,C=>{const S=a[C];return _V({title:S.title,items:wO(S.items)},s,t)});return qn(p,C=>{const S=k=>$e(k)||k.type!=="separator";return C.getItems().length>0&&ko(C.getItems(),S)})},xO=t=>{const s=()=>{t._skinLoaded=!0,vp(t)};return()=>{t.initialized?s():t.on("init",s)}},oT=(t,s)=>()=>u8(t,{message:s}),sT=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),kV=(t,s)=>{const a=s+"/skin.min.css";return sT(t,a,t.ui.styleSheetLoader)},AV=(t,s)=>{if(nu(ue.fromDom(t.getElement()))){const l=s+"/skin.shadowdom.min.css";return sT(t,l,W1.DOM.styleSheetLoader)}else return Promise.resolve()},EO=(t,s)=>{const a=tM(s);return a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!h4(s)&&$e(a)?Promise.all([kV(s,a),AV(s,a)]).then(xO(s),oT(s,"Skin could not be loaded")):Promise.resolve(xO(s)())},OV=It(EO,!1),DV=It(EO,!0),RV=(t,s,a)=>{const l=(C,S,k,D)=>{const B=s.shared.providers.translate(C.title);if(C.type==="separator")return O.some({type:"separator",text:B});if(C.type==="submenu"){const P=me(C.getStyleItems(),H=>d(H,S,D));return S===0&&P.length<=0?O.none():O.some({type:"nestedmenuitem",text:B,enabled:P.length>0,getSubmenuItems:()=>me(C.getStyleItems(),H=>d(H,S,D))})}else return O.some({type:"togglemenuitem",text:B,icon:C.icon,active:C.isSelected(D),enabled:!k,onAction:a.onAction(C),...C.getStylePreview().fold(()=>({}),P=>({meta:{style:P}}))})},d=(C,S,k)=>{const D=C.type==="formatter"&&a.isInvalid(C);return S===0?D?[]:l(C,S,!1,k).toArray():l(C,S,D,k).toArray()},g=C=>{const S=a.getCurrentValue(),k=a.shouldHide?0:1;return me(C,D=>d(D,k,S))};return{validateItems:g,getFetch:(C,S)=>(k,D)=>{const B=S(),P=g(B),H=vv(P,ti.CLOSE_ON_EXECUTE,C,{isHorizontalMenu:!1,search:O.none()});D(H)}}},gb=(t,s,a)=>{const l=a.dataset,d=l.type==="basic"?()=>ke(l.data,g=>J5(g,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:RV(t,s,a),getStyleItems:d}},LC=(t,s,a)=>{const{items:l,getStyleItems:d}=gb(t,s,a),g=C=>({getComponent:q(C)}),p=nb(t,"NodeChange",C=>{const S=C.getComponent();a.updateText(S),zt.set(C.getComponent(),!t.selection.isEditable())});return hE({text:a.icon.isSome()?O.none():a.text,icon:a.icon,tooltip:O.from(a.tooltip),role:O.none(),fetch:l.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},MV=t=>ke(t,s=>{let a=s,l=s;const d=s.split("=");return d.length>1&&(a=d[0],l=d[1]),{title:a,format:l}}),TO=t=>({type:"basic",data:t});var Av;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Av||(Av={}));const NV=(t,s)=>s===Av.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),rT=(t,s,a)=>{const l=t.options.get(s);return{type:"basic",data:MV(NV(l,a))}},_O=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],kO=t=>{const s=()=>Me(_O,C=>t.formatter.match(C.format)),a=C=>()=>t.formatter.match(C),l=C=>O.none,d=C=>{const k=s().fold(q("left"),D=>D.title.toLowerCase());Mt(C,Ep,{icon:`align-${k}`})},g=TO(_O),p=C=>()=>Me(_O,S=>S.format===C.format).each(S=>t.execCommand(S.command));return{tooltip:"Align",text:O.none(),icon:O.some("align-left"),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},BV=(t,s)=>LC(t,s,kO(t)),gP=(t,s)=>{const a=gb(t,s,kO(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),onSetup:xc(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},hP=(t,s)=>{const a=s(),l=ke(a,d=>d.format);return O.from(t.formatter.closest(l)).bind(d=>Me(a,g=>g.format===d)).orThunk(()=>tn(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},pP=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),l=p=>()=>{const C=t.formatter.get(p);return C?O.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},d=p=>{const S=hP(t,()=>g.data).fold(q(s),k=>k.title);Mt(p,Au,{text:S})},g=rT(t,"block_formats",Av.SemiColon);return{tooltip:"Blocks",text:O.some(s),icon:O.none(),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:Ix(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},$V=(t,s)=>LC(t,s,pP(t)),bP=(t,s)=>{const a=gb(t,s,pP(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:xc(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},PV=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],vP=t=>{const s=t.split(/\s*,\s*/);return ke(s,a=>a.replace(/^['"]+|['"]+$/g,""))},FV=t=>{const s=()=>{const a=vP(t.toLowerCase());return ro(PV,l=>a.indexOf(l.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},aT=t=>{const s="System Font",a=()=>{const k=Z=>Z?vP(Z)[0]:"",D=t.queryCommandValue("FontName"),B=S.data,P=D?D.toLowerCase():"";return{matchOpt:Me(B,Z=>{const J=Z.format;return J.toLowerCase()===P||k(J).toLowerCase()===k(P).toLowerCase()}).orThunk(()=>tn(FV(P),{title:s,format:P})),font:D}},l=k=>D=>D.exists(B=>B.format===k),d=()=>{const{matchOpt:k}=a();return k},g=k=>()=>O.some({tag:"div",styles:k.indexOf("dings")===-1?{"font-family":k}:{}}),p=k=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,k.format)})},C=k=>{const{matchOpt:D,font:B}=a(),P=D.fold(q(B),H=>H.title);Mt(k,Au,{text:P})},S=rT(t,"font_family_formats",Av.SemiColon);return{tooltip:"Fonts",text:O.some(s),icon:O.none(),isSelectedFor:l,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:C,dataset:S,shouldHide:!1,isInvalid:jn}},AO=(t,s)=>LC(t,s,aT(t)),IV=(t,s)=>{const a=gb(t,s,aT(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),onSetup:xc(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},LV={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},HV=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),l="\\.",d=C=>`(?:${C})?`,p=`[+-]?(?:${["Infinity",t+l+d(t)+d(a),l+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),VV=(t,s)=>ko(s,a=>ko(LV[a],l=>t===l)),cT=(t,s)=>O.from(HV.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return VV(g,s)?O.some({value:d,unit:g}):O.none()}),zV=(t,s)=>cT(t,s).map(({value:a,unit:l})=>a+l),yP={tab:q(9),escape:q(27),enter:q(13),backspace:q(8),delete:q(46),left:q(37),up:q(38),right:q(39),down:q(40),space:q(32),home:q(36),end:q(35),pageUp:q(33),pageDown:q(34)},UV=(t,s,a)=>{let l=O.none();const d=re=>re.map(Ee=>ut.getValue(Ee)).getOr(""),g=nb(t,"NodeChange",re=>{const Ee=re.getComponent();l=O.some(Ee),a.updateInputValue(Ee),zt.set(Ee,!t.selection.isEditable())}),p=re=>({getComponent:q(re)}),C=Lt(ee),S=pt("custom-number-input-events"),k=(re,Ee,Re)=>{const tt=d(l),Le=a.getNewValue(tt,re),rt=tt.length-`${Le}`.length,Dt=l.map(xt=>xt.element.dom.selectionStart-rt),Nn=l.map(xt=>xt.element.dom.selectionEnd-rt);a.onAction(Le,Re),l.each(xt=>{ut.setValue(xt,Le),Ee&&(Dt.each(An=>xt.element.dom.selectionStart=An),Nn.each(An=>xt.element.dom.selectionEnd=An))})},D=(re,Ee)=>k((Re,tt)=>Re-tt,re,Ee),B=(re,Ee)=>k((Re,tt)=>Re+tt,re,Ee),P=re=>Ba(re.element).fold(O.none,Ee=>(ql(Ee),O.some(!0))),H=re=>hd(re.element)?(Zf(re.element).each(Ee=>ql(Ee)),O.some(!0)):O.none(),Z=(re,Ee,Re,tt)=>{const Le=s.shared.providers.translate(Re),rt=pt("altExecuting"),Dt=nb(t,"NodeChange",xt=>{zt.set(xt.getComponent(),!t.selection.isEditable())}),Nn=xt=>{zt.isDisabled(xt)||re(!0)};return dr.sketch({dom:{tag:"button",attributes:{title:Le,"aria-label":Le},classes:tt.concat(Ee)},components:[Pd(Ee,s.shared.providers.icons)],buttonBehaviours:Xe([zt.config({}),hn(rt,[pp({onSetup:Dt,getApi:p},C),bp({getApi:p},C),Pe(vc(),(xt,An)=>{(An.event.raw.keyCode===yP.space()||An.event.raw.keyCode===yP.enter())&&(zt.isDisabled(xt)||re(!1))}),Pe(Zl(),Nn),Pe(sm(),Nn)])]),eventOrder:{[vc()]:[rt,"keying"],[Zl()]:[rt,"alloy.base.behaviour"],[sm()]:[rt,"alloy.base.behaviour"]}})},J=yo(Z(re=>D(!1,re),"minus","Decrease font size",["highlight-on-focus"])),ge=yo(Z(re=>B(!1,re),"plus","Increase font size",["highlight-on-focus"])),ie=yo({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[Pg.sketch({inputBehaviours:Xe([zt.config({}),hn(S,[pp({onSetup:g,getApi:p},C),bp({getApi:p},C)]),hn("input-update-display-text",[Pe(Au,(re,Ee)=>{ut.setValue(re,Ee.event.text)}),Pe(Wl(),re=>{a.onAction(ut.getValue(re))}),Pe(vh(),re=>{a.onAction(ut.getValue(re))})]),Pt.config({mode:"special",onEnter:re=>(k(mn,!0,!0),O.some(!0)),onEscape:P,onUp:re=>(B(!0,!1),O.some(!0)),onDown:re=>(D(!0,!1),O.some(!0)),onLeft:(re,Ee)=>(Ee.cut(),O.none()),onRight:(re,Ee)=>(Ee.cut(),O.none())})])})],behaviours:Xe([Zt.config({}),Pt.config({mode:"special",onEnter:H,onSpace:H,onEscape:P}),hn("input-wrapper-events",[Pe(gu(),re=>{De([J,ge],Ee=>{const Re=ue.fromDom(Ee.get(re).element.dom);hd(Re)&&Va(Re)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[J.asSpec(),ie.asSpec(),ge.asSpec()],behaviours:Xe([Zt.config({}),Pt.config({mode:"flow",focusInside:Mg.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:re=>hd(re.element)?O.none():(ql(re.element),O.some(!0))})])}},WV={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},CP={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},lT=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},OO=(t,s)=>/[0-9.]+px$/.test(t)?lT(parseInt(t,10)*72/96,s||0)+"pt":Qe(CP,t).getOr(t),wP=t=>Qe(WV,t).getOr(""),Wg=t=>{const s=()=>{let S=O.none();const k=C.data,D=t.queryCommandValue("FontSize");if(D)for(let B=3;S.isNone()&&B>=0;B--){const P=OO(D,B),H=wP(P);S=Me(k,Z=>Z.format===D||Z.format===P||Z.format===H)}return{matchOpt:S,size:D}},a=S=>k=>k.exists(D=>D.format===S),l=()=>{const{matchOpt:S}=s();return S},d=q(O.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},p=S=>{const{matchOpt:k,size:D}=s(),B=k.fold(q(D),P=>P.title);Mt(S,Au,{text:B})},C=rT(t,"font_size_formats",Av.Space);return{tooltip:"Font sizes",text:O.some("12pt"),icon:O.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:p,dataset:C,shouldHide:!1,isInvalid:jn}},SP=(t,s)=>LC(t,s,Wg(t)),ZV=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},jV=16,GV=t=>t>=0,qV=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>Mt(l,Au,{text:s()}),onAction:(l,d)=>t.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{cT(l,["unsupportedLength","empty"]);const g=cT(l,["unsupportedLength","empty"]).or(cT(s(),["unsupportedLength","empty"])),p=g.map(D=>D.value).getOr(jV),C=f4(t),S=g.map(D=>D.unit).filter(D=>D!=="").getOr(C),k=d(p,ZV(S).step);return`${GV(k)?k:p}${S}`}}},KV=(t,s)=>UV(t,s,qV(t)),XV=(t,s)=>{const a=gb(t,s,Wg(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:xc(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},xP=(t,s)=>{const a="Paragraph",l=p=>()=>t.formatter.match(p),d=p=>()=>{const C=t.formatter.get(p);return C!==void 0?O.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},g=p=>{const C=B=>j5(B)?me(B.items,C):RA(B)?[{title:B.title,format:B.format}]:[],S=me(X5(t),C),D=hP(t,q(S)).fold(q(a),B=>B.title);Mt(p,Au,{text:D})};return{tooltip:"Formats",text:O.some(a),icon:O.none(),isSelectedFor:l,getCurrentValue:O.none,getPreviewFor:d,onAction:Ix(t),updateText:g,shouldHide:hx(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},EP=(t,s)=>{const a={type:"advanced",...s.styles};return LC(t,s,xP(t,a))},YV=(t,s)=>{const a={type:"advanced",...s.styles},l=gb(t,s,xP(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:xc(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},JV=q([Ce("toggleClass"),Ce("fetch"),vf("onExecute"),fe("getHotspot",O.some),fe("getAnchorOverrides",q({})),dm(),vf("onItemExecute"),oo("lazySink"),Ce("dom"),_n("onOpen"),Ts("splitDropdownBehaviours",[Ws,Pt,Zt]),fe("matchWidth",!1),fe("useMinWidth",!1),fe("eventOrder",{}),oo("role")].concat(y3())),DO=Qs({factory:dr,schema:[Ce("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Xe([Zt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(rf)},buttonBehaviours:Xe([yn.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),QV=Qs({factory:dr,schema:[Ce("dom")],name:"button",defaults:()=>({buttonBehaviours:Xe([Zt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),ez=q([DO,QV,Jl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ce("text")],name:"aria-descriptor"}),Fi({schema:[fd()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,a)})}})}),h3()]),tz=(t,s,a,l)=>{const d=D=>{En.getCurrent(D).each(B=>{to.highlightFirst(B),Pt.focusIn(B)})},g=D=>{b3(t,mn,D,l,d,ll.HighlightMenuAndItem).get(ee)},p=D=>(g(D),O.some(!0)),C=D=>{const B=bm(D,t,"button");return rf(B),O.some(!0)},S={...ss([rs((D,B)=>{Vo(D,t,"aria-descriptor").each(H=>{const Z=pt("aria");gn(H.element,"id",Z),gn(D.element,"aria-describedby",Z)})})]),...ax(O.some(g))},k={repositionMenus:D=>{yn.isOn(D)&&HN(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:k,eventOrder:{...t.eventOrder,[Cl()]:["disabling","toggling","alloy.base.behaviour"]},events:S,behaviours:Js(t.splitDropdownBehaviours,[Ws.config({others:{sandbox:D=>{const B=bm(D,t,"arrow");return v3(t,D,{onOpen:()=>{yn.on(B),yn.on(D)},onClose:()=>{yn.off(B),yn.off(D)}})}}}),Pt.config({mode:"special",onSpace:C,onEnter:C,onDown:p}),Zt.config({}),yn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},iT=Tr({name:"SplitDropdown",configFields:JV(),partFields:ez(),factory:tz,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),TP=t=>({isEnabled:()=>!zt.isDisabled(t),setEnabled:s=>zt.set(t,!s),setText:s=>Mt(t,Au,{text:s}),setIcon:s=>Mt(t,Ep,{icon:s})}),nz=t=>({setActive:s=>{yn.set(t,s)},isActive:()=>yn.isOn(t),isEnabled:()=>!zt.isDisabled(t),setEnabled:s=>zt.set(t,!s),setText:s=>Mt(t,Au,{text:s}),setIcon:s=>Mt(t,Ep,{icon:s})}),RO=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),MO=pt("focus-button"),uT=(t,s,a,l,d)=>{const g=s.map(C=>yo(e5(C,"tox-tbtn",d))),p=t.map(C=>yo(Em(C,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:RO(a,d)},components:Q0([p.map(C=>C.asSpec()),g.map(C=>C.asSpec())]),eventOrder:{[Sn()]:["focusing","alloy.base.behaviour",db],[Pc()]:[db,"toolbar-group-button-events"]},buttonBehaviours:Xe([Dd.toolbarButton(d.isDisabled),Xr(),hn(db,[rs((C,S)=>gE(C)),Pe(Au,(C,S)=>{g.bind(k=>k.getOpt(C)).each(k=>{nn.set(k,[Xs(d.translate(S.event.text))])})}),Pe(Ep,(C,S)=>{p.bind(k=>k.getOpt(C)).each(k=>{nn.set(k,[Em(S.event.icon,d.icons)])})}),Pe(Sn(),(C,S)=>{S.event.prevent(),lo(C,MO)})])].concat(l.getOr([])))}},oz=(t,s,a,l)=>{const d=s.shared,g=Lt(ee),p={toolbarButtonBehaviours:[],getApi:TP,onSetup:t.onSetup},C=[hn("toolbar-group-button-events",[pp(p,g),bp(p,g)])];return _p.sketch({lazySink:d.getSink,fetch:()=>lc.nu(S=>{S(ke(a(t.items),QE))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:uT(t.icon,t.text,t.tooltip,O.some(C),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},NO=(t,s,a)=>{var l;const d=Lt(ee),g=uT(t.icon,t.text,t.tooltip,O.none(),a);return dr.sketch({dom:g.dom,components:g.components,eventOrder:JB,buttonBehaviours:{...Xe([hn("toolbar-button-events",[PL({onAction:t.onAction,getApi:s.getApi}),pp(s,d),bp(s,d)]),Dd.toolbarButton(()=>!t.enabled||a.isDisabled()),Xr()].concat(s.toolbarButtonBehaviours)),[db]:(l=g.buttonBehaviours)===null||l===void 0?void 0:l[db]}})},sz=(t,s)=>_P(t,s,[]),_P=(t,s,a)=>NO(t,{toolbarButtonBehaviours:a.length>0?[hn("toolbarButtonWith",a)]:[],getApi:TP,onSetup:t.onSetup},s),rz=(t,s)=>BO(t,s,[]),BO=(t,s,a)=>NO(t,{toolbarButtonBehaviours:[nn.config({}),yn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[hn("toolbarToggleButtonWith",a)]:[]),getApi:nz,onSetup:t.onSetup},s),az=(t,s,a)=>l=>lc.nu(d=>s.fetch(d)).map(d=>O.from(x3(Lo(Cp(pt("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,ti.CLOSE_ON_EXECUTE,s.select.getOr(jn),a),{movement:uC(s.columns,s.presets),menuBehaviours:Q2.unnamedEvents(s.columns!=="auto"?[]:[rs((g,p)=>{Nx(g,4,uM(s.presets)).each(({numRows:C,numColumns:S})=>{Pt.setGridSize(g,C,S)})})])})))),kP=(t,s)=>{const a=g=>({isEnabled:()=>!zt.isDisabled(g),setEnabled:p=>zt.set(g,!p),setIconFill:(p,C)=>{lr(g.element,`svg path[class="${p}"], rect[class="${p}"]`).each(S=>{gn(S,"fill",C)})},setActive:p=>{gn(g.element,"aria-pressed",p),lr(g.element,"span").each(C=>{g.getSystem().getByDom(C).each(S=>yn.set(S,p))})},isActive:()=>lr(g.element,"span").exists(p=>g.getSystem().getByDom(p).exists(yn.isOn)),setText:p=>lr(g.element,"span").each(C=>g.getSystem().getByDom(C).each(S=>Mt(S,Au,{text:p}))),setIcon:p=>lr(g.element,"span").each(C=>g.getSystem().getByDom(C).each(S=>Mt(S,Ep,{icon:p})))}),l=Lt(ee),d={getApi:a,onSetup:t.onSetup};return iT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...RO(t.tooltip,s.providers)}},onExecute:g=>{const p=a(g);p.isEnabled()&&t.onAction(p)},onItemExecute:(g,p,C)=>{},splitDropdownBehaviours:Xe([Dd.splitButton(s.providers.isDisabled),Xr(),hn("split-dropdown-events",[rs((g,p)=>gE(g)),Pe(MO,Zt.focus),pp(d,l),bp(d,l)]),pC.config({})]),eventOrder:{[Pc()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:az(a,t,s.providers),parts:{menu:_x(!1,t.columns,t.presets)},components:[iT.parts.button(uT(t.icon,t.text,O.none(),O.some([yn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),iT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:IR("chevron-down",s.providers.icons)},buttonBehaviours:Xe([Dd.splitButton(s.providers.isDisabled),Xr(),ix()])}),iT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},cz=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],HC=(t,s)=>(a,l,d)=>{const g=t(a).mapError(p=>tf(p)).getOrDie();return s(g,l,d)},lz={button:HC(AM,(t,s)=>sz(t,s.shared.providers)),togglebutton:HC(DM,(t,s)=>rz(t,s.shared.providers)),menubutton:HC($$,(t,s)=>Cv(t,"tox-tbtn",s,O.none(),!1)),splitbutton:HC(R9,(t,s)=>kP(t,s.shared)),grouptoolbarbutton:HC(A9,(t,s,a)=>{const l=a.ui.registry.getAll().buttons,d=p=>dT(a,{buttons:l,toolbar:p,allowToolbarGroups:!1},s,O.none()),g={[fg]:s.shared.header.isPositionedAtTop()?bd.TopToBottom:bd.BottomToTop};switch(fp(a)){case Hi.floating:return oz(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},iz=(t,s,a)=>Qe(lz,t.type).fold(()=>(console.error("skipping button defined by",t),O.none()),l=>O.some(l(t,s,a))),AP={styles:EP,fontsize:SP,fontsizeinput:KV,fontfamily:AO,blocks:$V,align:BV},uz=t=>{const s=ke(cz,a=>{const l=qn(a.items,d=>Qn(t,d)||Qn(AP,d));return{name:a.name,items:l}});return qn(s,a=>a.items.length>0)},OP=t=>{const s=t.split("|");return ke(s,a=>({items:a.trim().split(" ")}))},dz=t=>Ut(t,s=>Qn(s,"name")&&Qn(s,"items")),mz=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?uz(a):$e(s)?OP(s):dz(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},fz=(t,s,a,l,d,g)=>Qe(s,a.toLowerCase()).orThunk(()=>g.bind(p=>gr(p,C=>Qe(s,C+a.toLowerCase())))).fold(()=>Qe(AP,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),O.none()):iz(p,d,t)),dT=(t,s,a,l)=>{const d=mz(s),g=ke(d,p=>{const C=me(p.items,S=>S.trim().length===0?[]:fz(t,s.buttons,S,s.allowToolbarGroups,a,l).toArray());return{title:O.from(t.translate(p.name)),items:C}});return qn(g,p=>p.items.length>0)},DP=(t,s,a,l)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(Ut(g,$e)){const C=g.map(S=>{const k={toolbar:S,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return dT(t,k,l,O.none())});Go.setToolbars(d,C)}else Go.setToolbar(d,dT(t,a,l,O.none()))},$O=Br(),RP=$O.os.isiOS()&&$O.os.version.major<=12,MP=(t,s)=>{const{uiMotherships:a}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=Lt(ts(d.innerWidth,d.innerHeight)),C=Lt(ts(g.offsetWidth,g.offsetHeight)),S=()=>{const P=p.get();(P.left!==d.innerWidth||P.top!==d.innerHeight)&&(p.set(ts(d.innerWidth,d.innerHeight)),il(t))},k=()=>{const P=t.getDoc().documentElement,H=C.get();(H.left!==P.offsetWidth||H.top!==P.offsetHeight)&&(C.set(ts(P.offsetWidth,P.offsetHeight)),il(t))},D=P=>{J4(t,P)};l.bind(d,"resize",S),l.bind(d,"scroll",D);const B=Iy(ue.fromDom(t.getBody()),"load",k);t.on("hide",()=>{De(a,P=>{Xt(P.element,"display","none")})}),t.on("show",()=>{De(a,P=>{Ln(P.element,"display")})}),t.on("NodeChange",k),t.on("remove",()=>{B.unbind(),l.unbind(d,"resize",S),l.unbind(d,"scroll",D),d=null})},NP=(t,s,a)=>{gp(t)&&Cg(a.mainUi.mothership.element,a.popupUi.mothership),S0(s,a.dialogUi.mothership)};var BP=Object.freeze({__proto__:null,render:async(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:p}=s,C=Lt(0),S=g.outerContainer;await OV(t);const k=ue.fromDom(d.targetNode),D=js(Jr(k));Cg(k,g.mothership),NP(t,D,s),t.on("PostRender",()=>{Go.setSidebar(S,a.sidebar,z2(t)),DP(t,s,a,l),C.set(t.getWin().innerWidth),Go.setMenubar(S,SO(t,a)),Go.setViews(S,a.views),MP(t,s)});const B=Go.getSocket(S).getOrDie("Could not find expected socket element");if(RP){pl(B.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const J=kC(()=>{t.dispatch("ScrollContent")},20),ge=za(B.element,"scroll",J.throttle);t.on("remove",ge.unbind)}W4(t,s),t.addCommand("ToggleSidebar",(J,ge)=>{Go.toggleSidebar(S,ge),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var J;return(J=Go.whichSidebar(S))!==null&&J!==void 0?J:""}),t.addCommand("ToggleView",(J,ge)=>{if(Go.toggleView(S,ge)){const ie=S.element;g.mothership.broadcastOn([gm()],{target:ie}),De(p,re=>{re.broadcastOn([gm()],{target:ie})}),As(Go.whichView(S))&&(t.focus(),t.nodeChanged(),Go.refreshToolbar(S))}}),t.addQueryValueHandler("ToggleView",()=>{var J;return(J=Go.whichView(S))!==null&&J!==void 0?J:""});const P=fp(t),H=()=>{Go.refreshToolbar(s.mainUi.outerContainer)};(P===Hi.sliding||P===Hi.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const J=t.getWin().innerWidth;J!==C.get()&&(H(),C.set(J))});const Z={setEnabled:J=>{oC(s,!J)},isEnabled:()=>!zt.isDisabled(S)};return{iframeContainer:B.element.dom,editorContainer:S.element.dom,api:Z}}});const PO=t=>/^[0-9\.]+(|px)$/i.test(""+t)?O.some(parseInt(""+t,10)):O.none(),mT=t=>tr(t)?t+"px":t,fT=(t,s,a)=>{const l=s.filter(g=>t<g),d=a.filter(g=>t>g);return l.or(d).getOr(t)},gz=t=>{const s=j1(t),a=fx(t),l=l4(t);return PO(s).map(d=>fT(d,a,l))},hz=t=>gz(t).getOr(j1(t)),$P=t=>{const s=X0(t),a=mx(t),l=gx(t);return PO(s).map(d=>fT(d,a,l))},pz=t=>$P(t).getOr(X0(t)),{ToolbarLocation:FO,ToolbarMode:PP}=iI,bz=40,IO=(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:p}=a,C=W1.DOM,S=kd(t),k=G1(t),D=gx(t).or($P(t)),B=l.shared.header,P=B.isPositionedAtTop,H=fp(t),Z=H===PP.sliding||H===PP.floating,J=Lt(!1),ge=()=>J.get()&&!t.removed,ie=en=>Z?en.fold(q(0),wo=>wo.components().length>1?ys(wo.components()[1].element):0):0,re=en=>{switch(px(t)){case FO.auto:const wo=Go.getToolbar(g.outerContainer),it=ie(wo),kt=ys(en.element)-it,mt=M(s);if(mt.y>kt)return"top";{const Cn=$m(s),zn=Math.max(Cn.dom.scrollHeight,ys(Cn));return mt.bottom<zn-kt||Ze().bottom<mt.bottom-kt?"bottom":"top"}case FO.bottom:return"bottom";case FO.top:default:return"top"}},Ee=en=>{d.on(wo=>{Ir.setModes(wo,[en]),B.setDockingMode(en);const it=P()?bd.TopToBottom:bd.BottomToTop;gn(wo.element,fg,it)})},Re=()=>{d.on(en=>{const wo=D.getOrThunk(()=>{const it=PO(Ve(Nr(),"margin-left")).getOr(0);return or(Nr())-xa(s).left+it});Xt(en.element,"max-width",wo+"px")})},tt=en=>{d.on(wo=>{const it=Go.getToolbar(g.outerContainer),kt=ie(it),mt=M(s),{top:Gt,left:Cn}=Le(t,g.outerContainer.element).fold(()=>({top:P()?Math.max(mt.y-ys(wo.element)+kt,0):mt.bottom,left:mt.x}),so=>{var Wc;const Ps=M(so),$u=(Wc=so.dom.scrollTop)!==null&&Wc!==void 0?Wc:0,zd=Ao(so,Nr()),Xg=zd?Math.max(mt.y-ys(wo.element)+kt,0):mt.y-Ps.y+$u-ys(wo.element)+kt;return{top:P()?Xg:mt.bottom,left:zd?mt.x:mt.x-Ps.x}}),zn={position:"absolute",left:Math.round(Cn)+"px",top:Math.round(Gt)+"px"},mr=en.map(so=>{const Wc=_a(),Ps=150,$u=window.innerWidth-(Cn-Wc.left);return{width:Math.max(Math.min(so,$u),Ps)+"px"}}).getOr({});pl(g.outerContainer.element,{...zn,...mr})})},Le=(en,wo)=>gp(en)?zA(wo):O.none(),rt=()=>{De(p,en=>{en.broadcastOn([tp()],{})})},Dt=()=>{if(S)return O.none();if(xa(g.outerContainer.element).left+Ur(g.outerContainer.element)>=window.innerWidth-bz||Gs(g.outerContainer.element,"width").isSome()){Xt(g.outerContainer.element,"position","absolute"),Xt(g.outerContainer.element,"left","0px"),Ln(g.outerContainer.element,"width");const wo=Ur(g.outerContainer.element);return O.some(wo)}else return O.none()},Nn=en=>{if(!ge())return;S||Re();const wo=S?O.none():Dt();Z&&Go.refreshToolbar(g.outerContainer),S||tt(wo),k&&d.on(en),rt()},xt=()=>S||!k||!ge()?!1:d.get().exists(en=>{const wo=B.getDockingMode(),it=re(en);return it!==wo?(Ee(it),!0):!1});return{isVisible:ge,isPositionedAtTop:P,show:()=>{J.set(!0),Xt(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),De(p,en=>{Ln(en.element,"display")}),xt(),gp(t)?Nn(en=>Ir.isDocked(en)?Ir.reset(en):Ir.refresh(en)):Nn(Ir.refresh)},hide:()=>{J.set(!1),Xt(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),De(p,en=>{Xt(en.element,"display","none")})},update:Nn,updateMode:()=>{xt()&&Nn(Ir.reset)},repositionPopups:rt}},LO=(t,s)=>{const a=M(t);return{pos:s?a.y:a.bottom,bounds:a}},vz=(t,s,a,l)=>{const d=Lt(LO(s,a.isPositionedAtTop())),g=k=>{const{pos:D,bounds:B}=LO(s,a.isPositionedAtTop()),{pos:P,bounds:H}=d.get(),Z=B.height!==H.height||B.width!==H.width;d.set({pos:D,bounds:B}),Z&&il(t,k),a.isVisible()&&(P!==D?a.update(Ir.reset):Z&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Ir.reset)),t.on("NodeChange keydown",k=>{requestAnimationFrame(()=>g(k))});let p=0;const C=AC(()=>a.update(Ir.refresh),33);t.on("ScrollWindow",()=>{const k=_a().left;k!==p&&(p=k,C.throttle()),a.updateMode()}),gp(t)&&t.on("ElementScroll",k=>{a.update(Ir.refresh)});const S=Mi();S.set(Iy(ue.fromDom(t.getBody()),"load",k=>g(k.raw))),t.on("remove",()=>{S.clear()})};var yz=Object.freeze({__proto__:null,render:async(t,s,a,l,d)=>{const{mainUi:g}=s,p=Fo(),C=ue.fromDom(d.targetNode),S=IO(t,C,s,l,p),k=ZR(t);await DV(t);const D=()=>{if(p.isSet()){S.show();return}p.set(Go.getHeader(g.outerContainer).getOrDie());const P=b4(t);gp(t)?(Cg(C,g.mothership),Cg(C,s.popupUi.mothership)):S0(P,g.mothership),S0(P,s.dialogUi.mothership),DP(t,s,a,l),Go.setMenubar(g.outerContainer,SO(t,a)),S.show(),vz(t,C,S,k),t.nodeChanged()};t.on("show",D),t.on("hide",S.hide),k||(t.on("focus",D),t.on("blur",S.hide)),t.on("init",()=>{(t.hasFocus()||k)&&D()}),W4(t,s);const B={show:D,hide:S.hide,setEnabled:P=>{oC(s,!P)},isEnabled:()=>!zt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:B}}});const Cz=()=>{const t=Fo(),s=Fo(),a=Fo();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),p=s.get().map(C=>C.mothership);return g.fold(()=>p.toArray(),C=>p.fold(()=>[C],S=>Ao(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(C=>p(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},wz="contexttoolbar-show",HO="contexttoolbar-hide",Sz=t=>({hide:()=>lo(t,of()),getValue:()=>ut.getValue(t)}),FP=(t,s)=>Pe(YB,(a,l)=>{const d=t.get(a),g=Sz(d);s.onAction(g,l.event.buttonApi)}),IP=(t,s,a)=>{const{primary:l,...d}=s.original,g=co(AM({...d,type:"button",onAction:ee}));return _P(g,a,[FP(t,s)])},xz=(t,s,a)=>{const{primary:l,...d}=s.original,g=co(DM({...d,type:"togglebutton",onAction:ee}));return BO(g,a,[FP(t,s)])},LP=t=>t.type==="contextformtogglebutton",HP=(t,s,a)=>LP(s)?xz(t,s,a):IP(t,s,a),Ez=(t,s,a)=>{const l=ke(s,p=>yo(HP(t,p,a)));return{asSpecs:()=>ke(l,p=>p.asSpec()),findPrimary:p=>gr(s,(C,S)=>C.primary?O.from(l[S]).bind(k=>k.getOpt(p)).filter(Oe(zt.isDisabled)):O.none())}},VP=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),l=yo(Pg.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:Xe([Pt.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(rf(p),!0)),onLeft:(g,p)=>(p.cut(),O.none()),onRight:(g,p)=>(p.cut(),O.none())})])})),d=Ez(l,t.commands,s);return[{title:O.none(),items:[l.asSpec()]},{title:O.none(),items:d.asSpecs()}]},Ov={renderContextForm:(t,s,a)=>IC({type:t,uid:pt("context-toolbar"),initGroups:VP(s,a),onEscape:O.none,cyclicKeying:!0,providers:a}),buildInitGroups:VP},zP=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,Tz=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Zd(ue.fromDom(t.startContainer),t.startOffset).element;return(wa(a)?Ac(a):O.some(a)).filter(po).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},VO=t=>{const s=t.selection.getRng(),a=Tz(s);if(t.inline){const l=_a();return _(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=V(ue.fromDom(t.getBody()));return _(l.x+a.left,l.y+a.top,a.width,a.height)}},_z=(t,s)=>s.filter(a=>$a(a)&&pi(a)).map(V).getOrThunk(()=>VO(t)),kz=(t,s,a)=>{const l=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:l,width:d-l}},Az=(t,s,a,l,d,g)=>{const p=ue.fromDom(t.getContainer()),C=lr(p,".tox-editor-header").getOr(p),S=M(C),k=S.y>=s.bottom,D=l&&!k;if(t.inline&&D)return{y:Math.max(S.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(S.y-g,a.bottom)};const B=d==="line"?M(p):s;return D?{y:Math.max(S.bottom+g,a.y),bottom:Math.min(B.bottom-g,a.bottom)}:{y:Math.max(B.y+g,a.y),bottom:Math.min(S.y-g,a.bottom)}},UP=(t,s,a,l=0)=>{const d=Yd(window),g=M(ue.fromDom(t.getContentAreaContainer())),p=wx(t)||Sx(t)||U2(t),{x:C,width:S}=kz(g,d,l);if(t.inline&&!p)return _(C,d.y,S,d.height);{const k=s.header.isPositionedAtTop(),{y:D,bottom:B}=Az(t,g,d,k,a,l);return _(C,D,S,B-D)}},gT=12,hT={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},WP={maxHeightFunction:Zh(),maxWidthFunction:jE()},Oz=(t,s)=>{const a=t.selection.getRng(),l=Zd(ue.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Ao(l.element,s)},ZP=(t,s,a)=>{const l=Gs(t,"position");Xt(t,"position",s);const d=a(t);return l.each(g=>Xt(t,"position",g)),d},zO=t=>t==="node",Dz=(t,s,a,l,d)=>{const g=VO(t),p=l.lastElement().exists(C=>Ao(a,C));if(Oz(t,a))return p?DA:Nf;if(p)return ZP(s,l.getMode(),()=>zP(g,M(s),-20)&&!l.isReposition()?DH:DA);{const C=l.getMode()==="fixed"?d.y+_a().top:d.y,S=ys(s)+gT;return C+S<=g.y?Nf:DC}},Rz=(t,s,a,l)=>{const d=S=>(k,D,B,P,H)=>{const Z=Dz(t,P,S,a,H),J={...k,y:H.y,height:H.height};return{...Z(J,D,B,P,H),alwaysFit:!0}},g=S=>zO(l)?[d(S)]:[];return s?{onLtr:S=>[Ys,Gr,xr,Hc,sc,Cs].concat(g(S)),onRtl:S=>[Ys,xr,Gr,sc,Hc,Cs].concat(g(S))}:{onLtr:S=>[Cs,Ys,Hc,Gr,sc,xr].concat(g(S)),onRtl:S=>[Cs,Ys,sc,xr,Hc,Gr].concat(g(S))}},Mz=(t,s,a,l)=>s==="line"?{bubble:jh(gT,0,hT),layouts:{onLtr:()=>[Lw],onRtl:()=>[rc]},overrides:WP}:{bubble:jh(0,gT,hT,1/gT),layouts:Rz(t,a,l,s),overrides:WP},UO=(t,s)=>{const a=qn(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=dc(a,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},Nz=t=>{if(t.length<=1)return t;{const s=g=>ko(t,p=>p.position===g),a=g=>qn(t,p=>p.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=a("node"),p=ke(a("selection"),C=>({...C,position:"node"}));return g.concat(p)}else return a(l?"selection":"node");else return a("line")}},Bz=t=>{if(t.length<=1)return t;{const s=l=>Me(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>qn(t,d=>d.position===l))}},jP=(t,s,a)=>{const l=UO(t,s);if(l.contextForms.length>0)return O.some({elem:t,toolbars:[l.contextForms[0]]});{const d=UO(t,a);if(d.contextForms.length>0)return O.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=Nz(l.contextToolbars.concat(d.contextToolbars));return O.some({elem:t,toolbars:g})}else return O.none()}},$z=(t,s,a)=>t(s)?O.none():ns(s,l=>{if(po(l)){const{contextToolbars:d,contextForms:g}=UO(l,a.inNodeScope),p=g.length>0?g:Bz(d);return p.length>0?O.some({elem:l,toolbars:p}):O.none()}else return O.none()},t),Pz=(t,s)=>{const a=ue.fromDom(s.getBody()),l=p=>Ao(p,a),d=p=>!l(p)&&!Sa(a,p),g=ue.fromDom(s.selection.getNode());return d(g)?O.none():jP(g,t.inNodeScope,t.inEditorScope).orThunk(()=>$z(l,g,t))},Fz=(t,s)=>{const a={},l=[],d=[],g={},p={},C=(D,B)=>{const P=co(PM(B));a[D]=P,P.launch.map(H=>{g["form:"+D]={...B.launch,type:H.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(P)}}}),P.scope==="editor"?d.push(P):l.push(P),p[D]=P},S=(D,B)=>{L4(B).each(P=>{B.scope==="editor"?d.push(P):l.push(P),p[D]=P})},k=Qo(t);return De(k,D=>{const B=t[D];B.type==="contextform"?C(D,B):B.type==="contexttoolbar"&&S(D,B)}),{forms:a,inNodeScope:l,inEditorScope:d,lookupTable:p,formNavigators:g}},GP=pt("forward-slide"),VC=pt("backward-slide"),WO=pt("change-slide-event"),Dv="tox-pop--resizing",pT=t=>{const s=Lt([]);return ur.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),ur.getContent(a).each(l=>{Ln(l.element,"visibility")}),Oo(a.element,Dv),Ln(a.element,"width")},inlineBehaviours:Xe([hn("context-toolbar-events",[Eh(jp(),(a,l)=>{l.event.raw.propertyName==="width"&&(Oo(a.element,Dv),Ln(a.element,"width"))}),Pe(WO,(a,l)=>{const d=a.element;Ln(d,"width");const g=or(d);ur.setContent(a,l.event.contents),wr(d,Dv);const p=or(d);Xt(d,"width",g+"px"),ur.getContent(a).each(C=>{l.event.focus.bind(S=>(ql(S),Ri(d))).orThunk(()=>(Pt.focusIn(C),pd(Jr(d))))}),setTimeout(()=>{Xt(a.element,"width",p+"px")},0)}),Pe(GP,(a,l)=>{ur.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:pd(Jr(a.element))}]))}),Mt(a,WO,{contents:l.event.forwardContents,focus:O.none()})}),Pe(VC,(a,l)=>{Zc(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),Mt(a,WO,{contents:Gl(d.bar),focus:d.focus})})})]),Pt.config({mode:"special",onEscape:a=>Zc(s.get()).fold(()=>t.onEscape(),l=>(lo(a,VC),O.some(!0)))})]),lazySink:()=>St.value(t.sink)})},bT="tox-pop--transition",Iz=(t,s,a,l)=>{const d=l.backstage,g=d.shared,p=Br().deviceType.isTouch,C=Fo(),S=Fo(),k=Fo(),D=Sr(pT({sink:a,onEscape:()=>(t.focus(),O.some(!0))})),B=()=>{const xt=k.get().getOr("node"),An=zO(xt)?1:0;return UP(t,g,xt,An)},P=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),H=xt=>va(Ji(xt,C.get(),Ao),!0),Z=()=>{if(P()){const xt=B(),An=va(k.get(),"node")?_z(t,C.get()):VO(t);return xt.height<=0||!zP(An,xt,.01)}else return!0},J=()=>{C.clear(),S.clear(),k.clear(),ur.hide(D)},ge=()=>{if(ur.isOpen(D)){const xt=D.element;Ln(xt,"display"),Z()?Xt(xt,"display","none"):(S.set(0),ur.reposition(D))}},ie=xt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[xt],behaviours:Xe([Pt.config({mode:"acyclic"}),hn("pop-dialog-wrap-events",[rs(An=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Pt.focusIn(An))}),Ai(An=>{t.shortcuts.remove("ctrl+F9")})])])}),re=Rc(()=>Fz(s,xt=>{const An=tt([xt]);Mt(D,GP,{forwardContents:ie(An)})})),Ee=(xt,An)=>dT(t,{buttons:xt,toolbar:An.items,allowToolbarGroups:!1},l.backstage,O.some(["form:"])),Re=(xt,An)=>Ov.buildInitGroups(xt,An),tt=xt=>{const{buttons:An}=t.ui.registry.getAll(),pn=re(),$n={...An,...pn.formNavigators},en=fp(t)===Hi.scrolling?Hi.scrolling:Hi.default,wo=He(ke(xt,it=>it.type==="contexttoolbar"?Ee($n,it):Re(it,g.providers)));return IC({type:en,uid:pt("context-toolbar"),initGroups:wo,onEscape:O.none,cyclicKeying:!0,providers:g.providers})},Le=(xt,An)=>{const pn=xt==="node"?g.anchors.node(An):g.anchors.cursor(),$n=Mz(t,xt,p(),{lastElement:C.get,isReposition:()=>va(S.get(),0),getMode:()=>Ua.getMode(a)});return Lo(pn,$n)},rt=(xt,An)=>{if(Nn.cancel(),!P())return;const pn=tt(xt),$n=xt[0].position,en=Le($n,An);k.set($n),S.set(1);const wo=D.element;Ln(wo,"display"),H(An)||(Oo(wo,bT),Ua.reset(a,D)),ur.showWithinBounds(D,ie(pn),{anchor:en,transition:{classes:[bT],mode:"placement"}},()=>O.some(B())),An.fold(C.clear,C.set),Z()&&Xt(wo,"display","none")};let Dt=!1;const Nn=AC(()=>{if(!(!t.hasFocus()||t.removed||Dt))if(as(D.element,bT))Nn.throttle();else{const xt=re();Pz(xt,t).fold(J,An=>{rt(An.toolbars,O.some(An.elem))})}},17);t.on("init",()=>{t.on("remove",J),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ge),t.on("click keyup focus SetContent",Nn.throttle),t.on(HO,J),t.on(wz,xt=>{const An=re();Qe(An.lookupTable,xt.toolbarKey).each(pn=>{rt([pn],tn(xt.target!==t,xt.target)),ur.getContent(D).each(Pt.focusIn)})}),t.on("focusout",xt=>{lx.setEditorTimeout(t,()=>{Ri(a.element).isNone()&&Ri(D.element).isNone()&&J()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&J()}),t.on("AfterProgressState",xt=>{xt.state?J():t.hasFocus()&&Nn.throttle()}),t.on("dragstart",()=>{Dt=!0}),t.on("dragend drop",()=>{Dt=!1}),t.on("NodeChange",xt=>{Ri(D.element).fold(Nn.throttle,ee)})})},Lz=t=>{De([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:ni(t,a.cmd),onSetup:rv(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:xc(t),onAction:ni(t,"JustifyNone")})},qP=(t,s)=>{const a=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Fo();return ke(l,p=>({type:"togglemenuitem",text:s.display(p),onSetup:C=>{const S=D=>{D&&(g.on(B=>B.setActive(!1)),g.set(C)),C.setActive(D)};S(va(d,s.hash(p)));const k=s.watcher(t,p,S);return()=>{g.clear(),k()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},Hz=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:nM,hash:s=>zV(s,["fixed","relative","empty"]).getOr(s),display:mn,watcher:(s,a,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:a}).unbind,getCurrent:s=>O.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:xc(t),onMenuSetup:xc(t)}),Vz=t=>O.from(i4(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:q(a),hash:l=>Wo(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var p;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:l=>{const d=ue.fromDom(l.selection.getNode());return la(d,g=>O.some(g).filter(po).bind(p=>Ds(p,"lang").map(S=>{const k=Ds(p,"data-mce-lang").getOrUndefined();return{code:S,customCode:k,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=Mi();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),sv(d.clear,xc(t)(l))},onMenuSetup:xc(t)})),vT=t=>{qP(t,Hz(t)),Vz(t).each(s=>qP(t,s))},KP=(t,s)=>{gP(t,s),IV(t,s),YV(t,s),bP(t,s),XV(t,s)},XP=t=>nb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),YP=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:XP(t),onAction:ni(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:xc(t),onAction:ni(t,"indent")})},JP=t=>{YP(t)},QP=(t,s)=>a=>{a.setActive(s.get());const l=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",l),sv(()=>t.off("PastePlainTextToggle",l),xc(t)(a))},e6=t=>{const s=Lt(QR(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:QP(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:QP(t,s)})},ZO=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},zz=t=>{Mf.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:rv(t,s.name),onAction:ZO(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:rv(t,a),onAction:ZO(t,a)})}},Uz=t=>{Mf.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ni(t,s.action)})}),Mf.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:xc(t),onAction:ni(t,s.action)})})},Wz=t=>{Mf.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ni(t,s.action),onSetup:rv(t,s.name)})})},Zz=t=>{zz(t),Uz(t),Wz(t)},zC=t=>{Mf.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:ni(t,s.action)})}),Mf.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:xc(t),onAction:ni(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:xc(t),onAction:ZO(t,"code")})},jz=t=>{Zz(t),zC(t)},yT=(t,s)=>nb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),Gz=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:yT(t,"hasUndo"),onAction:ni(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:yT(t,"hasRedo"),onAction:ni(t,"redo")})},t6=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:yT(t,"hasUndo"),onAction:ni(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:yT(t,"hasRedo"),onAction:ni(t,"redo")})},qz=t=>{Gz(t),t6(t)},n6=t=>nb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),Kz=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:n6(t),onAction:ni(t,"mceToggleVisualAid")})},Xz=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:ni(t,"mceToggleVisualAid")})},Yz=t=>{Xz(t),Kz(t)},Jz=(t,s)=>{Lz(t),jz(t),KP(t,s),qz(t),y8(t),Yz(t),JP(t),vT(t),e6(t)},Qz=t=>$e(t)?t.split(/[ ,]/):t,Rv=t=>s=>s.options.get(t),o6=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:$e(a)||Ut(a,$e)?{value:Qz(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},s6=Rv("contextmenu_never_use_native"),eU=Rv("contextmenu_avoid_overlap"),r6=t=>CT(t).length===0,CT=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:qn(a,l=>Qn(s,l))},Mv=(t,s)=>({type:"makeshift",x:t,y:s}),a6=(t,s,a)=>Mv(t.x+s,t.y+a),c6=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Nv=t=>{if(c6(t)){const s=t.touches[0];return Mv(s.pageX,s.pageY)}else return Mv(t.pageX,t.pageY)},wT=t=>{if(c6(t)){const s=t.touches[0];return Mv(s.clientX,s.clientY)}else return Mv(t.clientX,t.clientY)},jO=(t,s)=>{const a=W1.DOM.getPos(t);return a6(s,a.x,a.y)},l6=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Nv(s):jO(t.getContentAreaContainer(),wT(s)):GO(t),GO=t=>({type:"selection",root:ue.fromDom(t.selection.getNode())}),tU=t=>({type:"node",node:O.some(ue.fromDom(t.selection.getNode())),root:ue.fromDom(t.getBody())}),qO=(t,s,a)=>{switch(a){case"node":return tU(t);case"point":return l6(t,s);case"selection":return GO(t)}},nU=(t,s,a,l,d,g)=>{const p=a(),C=qO(t,s,g);vv(p,ti.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:O.none()}).map(S=>{s.preventDefault(),ur.showMenuAt(d,{anchor:C},{menu:{markers:q1("normal")},data:S})})},oU={onLtr:()=>[Ys,Gr,xr,Hc,sc,Cs,Nf,DC,wv,Tp,OC,kA],onRtl:()=>[Ys,xr,Gr,sc,Hc,Cs,Nf,DC,OC,kA,wv,Tp]},sU=12,rU={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},aU=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=a.getRng();return d0(t.getWin(),p1.domRange(d)).exists(p=>p.left<=l.clientX&&p.right>=l.clientX&&p.top<=l.clientY&&p.bottom>=l.clientY)}},i6=t=>{const s=t.selection.getRng(),a=()=>{lx.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const l=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",l)}},ST=(t,s,a)=>{const l=qO(t,s,a);return{bubble:jh(0,a==="point"?sU:0,rU),layouts:oU,overrides:{maxWidthFunction:jE(),maxHeightFunction:Zh()},...l}},u6=(t,s,a,l,d,g,p)=>{const C=ST(t,s,g);vv(a,ti.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:O.none()}).map(S=>{s.preventDefault();const k=p?ll.HighlightMenuAndItem:ll.HighlightNone;ur.showMenuWithinBounds(d,{anchor:C},{menu:{markers:q1("normal"),highlightOnOpen:k},data:S,type:"horizontal"},()=>O.some(UP(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(HO)})},d6=(t,s,a,l,d,g)=>{const p=Br(),C=p.os.isiOS(),S=p.os.isMacOS(),k=p.os.isAndroid(),D=p.deviceType.isTouch(),B=()=>!(k||C||S&&D),P=()=>{const H=a();u6(t,s,H,l,d,g,B())};if((S||C)&&g!=="node"){const H=()=>{i6(t),P()};aU(t,s)?H():(t.once("selectionchange",H),t.once("touchend",()=>t.off("selectionchange",H)))}else P()},xT=t=>$e(t)?t==="|":t.type==="separator",KO={type:"separator"},XO=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if($e(t))return t;switch(t.type){case"separator":return KO;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return $e(l)?l:ke(l,XO)}};default:const a=t;return{type:"menuitem",...s(a),onAction:On(a.onAction)}}},m6=(t,s)=>{if(s.length===0)return t;const l=Zc(t).filter(d=>!xT(d)).fold(()=>[],d=>[KO]);return t.concat(l).concat(s).concat([KO])},cU=(t,s,a)=>{const l=fn(s,(d,g)=>Qe(t,g.toLowerCase()).map(p=>{const C=p.update(a);if($e(C))return m6(d,C.split(" "));if(C.length>0){const S=ke(C,XO);return m6(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&xT(l[l.length-1])&&l.pop(),l},ET=(t,s)=>s.ctrlKey&&!s6(t),f6=t=>t.type==="longpress"||Qn(t,"touches"),g6=(t,s)=>!f6(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),h6=(t,s)=>g6(t,s)?t.selection.getStart(!0):s.target,lU=(t,s)=>{const a=eU(t),l=g6(t,s)?"selection":"point";if(fc(a)){const d=h6(t,s);return zi(ue.fromDom(d),a)?"node":l}else return l},iU=(t,s,a)=>{const d=Br().deviceType.isTouch,g=Sr(ur.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Xe([hn("dismissContextMenu",[Pe(cm(),(S,k)=>{Wn.close(S),t.focus()})])])})),p=()=>ur.hide(g),C=S=>{if(s6(t)&&S.preventDefault(),ET(t,S)||r6(t))return;const k=lU(t,S),D=()=>{const P=h6(t,S),H=t.ui.registry.getAll(),Z=CT(t);return cU(H.contextMenus,Z,P)};(d()?d6:nU)(t,S,D,a,g,k)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,p),t.on("longpress contextmenu",C)})},YO=w.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),UC=t=>s=>s.translate(-t.left,-t.top),WC=t=>s=>s.translate(t.left,t.top),Zg=t=>(s,a)=>fn(t,(l,d)=>d(l),ts(s,a)),TT=(t,s,a)=>t.fold(Zg([WC(a),UC(s)]),Zg([UC(s)]),Zg([])),hb=(t,s,a)=>t.fold(Zg([WC(a)]),Zg([]),Zg([WC(s)])),p6=(t,s,a)=>t.fold(Zg([]),Zg([UC(a)]),Zg([WC(s),UC(a)])),uU=(t,s,a,l,d,g)=>{const p=hb(t,d,g),C=hb(s,d,g);return Math.abs(p.left-C.left)<=a&&Math.abs(p.top-C.top)<=l},dU=(t,s,a,l,d,g)=>{const p=hb(t,d,g),C=hb(s,d,g),S=Math.abs(p.left-C.left),k=Math.abs(p.top-C.top);return ts(S,k)},b6=(t,s,a)=>{const l=t.fold((d,g)=>({position:O.some("absolute"),left:O.some(d+"px"),top:O.some(g+"px")}),(d,g)=>({position:O.some("absolute"),left:O.some(d-a.left+"px"),top:O.some(g-a.top+"px")}),(d,g)=>({position:O.some("fixed"),left:O.some(d+"px"),top:O.some(g+"px")}));return{right:O.none(),bottom:O.none(),...l}},mU=(t,s,a)=>t.fold((l,d)=>_T(l+s,d+a),(l,d)=>kp(l+s,d+a),(l,d)=>jg(l+s,d+a)),ZC=(t,s,a,l)=>{const d=(g,p)=>(C,S)=>{const k=g(s,a,l);return p(C.getOr(k.left),S.getOr(k.top))};return t.fold(d(p6,_T),d(hb,kp),d(TT,jg))},_T=YO.offset,kp=YO.absolute,jg=YO.fixed,JO=(t,s)=>{const a=zr(t,s);return Wo(a)?NaN:parseInt(a,10)},v6=(t,s)=>{const a=t.element,l=JO(a,s.leftAttr),d=JO(a,s.topAttr);return isNaN(l)||isNaN(d)?O.none():O.some(ts(l,d))},fU=(t,s,a)=>{const l=t.element;gn(l,s.leftAttr,a.left+"px"),gn(l,s.topAttr,a.top+"px")},gU=(t,s)=>{const a=t.element;ws(a,s.leftAttr),ws(a,s.topAttr)},hU=(t,s,a,l)=>v6(t,s).fold(()=>a,d=>jg(d.left+l.left,d.top+l.top)),pU=(t,s,a,l,d,g)=>{const p=hU(t,s,a,l),C=s.mustSnap?vU(t,s,p,d,g):y6(t,s,p,d,g),S=TT(p,d,g);return fU(t,s,S),C.fold(()=>({coord:jg(S.left,S.top),extra:O.none()}),k=>({coord:k.output,extra:k.extra}))},bU=(t,s)=>{gU(t,s)},QO=(t,s,a,l)=>gr(t,d=>{const g=d.sensor;return uU(s,g,d.range.left,d.range.top,a,l)?O.some({output:ZC(d.output,s,a,l),extra:d.extra}):O.none()}),vU=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return QO(g,a,l,d).orThunk(()=>fn(g,(S,k)=>{const D=k.sensor,B=dU(a,D,k.range.left,k.range.top,l,d);return S.deltas.fold(()=>({deltas:O.some(B),snap:O.some(k)}),P=>{const H=(B.left+B.top)/2,Z=(P.left+P.top)/2;return H<=Z?{deltas:O.some(B),snap:O.some(k)}:S})},{deltas:O.none(),snap:O.none()}).snap.map(S=>({output:ZC(S.output,a,l,d),extra:S.extra})))},y6=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return QO(g,a,l,d)},yU=(t,s,a)=>({coord:ZC(t.output,t.output,s,a),extra:t.extra});var eD=Object.freeze({__proto__:null,snapTo:(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ja(t.element),p=_a(g),C=UA(d),S=yU(l,p,C),k=b6(S.coord,p,C);Dc(d,k)}}});const kT="data-initial-z-index",CU=t=>{Ac(t.element).filter(po).each(s=>{Ds(s,kT).fold(()=>Ln(s,"z-index"),a=>Xt(s,"z-index",a)),ws(s,kT)})},wU=t=>{Ac(t.element).filter(po).each(s=>{Gs(s,"z-index").each(a=>{gn(s,kT,a)}),Xt(s,"z-index",Ve(t.element,"z-index"))})},AT=(t,s)=>{t.getSystem().addToGui(s),wU(s)},SU=t=>{CU(t),t.getSystem().removeFromGui(t)},C6=(t,s,a)=>t.getSystem().build(Sm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var xU=Ms("snaps",[Ce("getSnapPoints"),_n("onSensor"),Ce("leftAttr"),Ce("topAttr"),fe("lazyViewport",Ze),fe("mustSnap",!1)]);const tD=[fe("useFixed",jn),Ce("blockerClass"),fe("getTarget",mn),fe("onDrag",ee),fe("repositionTarget",!0),fe("onDrop",ee),xs("getBounds",Ze),xU],EU=t=>Tc(Gs(t,"left"),Gs(t,"top"),Gs(t,"position"),(s,a,l)=>(l==="fixed"?jg:_T)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=xa(t);return kp(s.left,s.top)}),w6=(t,s,a,l,d)=>{const g=d.bounds,p=hb(s,a,l),C=Lc(p.left,g.x,g.x+g.width-d.width),S=Lc(p.top,g.y,g.y+g.height-d.height),k=kp(C,S);return s.fold(()=>{const D=p6(k,a,l);return _T(D.left,D.top)},q(k),()=>{const D=TT(k,a,l);return jg(D.left,D.top)})},TU=(t,s,a,l,d,g,p)=>{const C=s.fold(()=>{const S=mU(a,g.left,g.top),k=TT(S,l,d);return jg(k.left,k.top)},S=>{const k=pU(t,S,a,g,l,d);return k.extra.each(D=>{S.onSensor(t,D)}),k.coord});return w6(t,C,l,d,p)},_U=(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ja(t.element),p=_a(g),C=UA(d),S=EU(d),k=TU(t,s.snaps,S,p,C,l,a),D=b6(k,p,C);Dc(d,D)}s.onDrag(t,d,l)},S6=(t,s)=>({bounds:t.getBounds(),height:ru(s.element),width:Ur(s.element)}),nD=(t,s,a,l,d)=>{const g=a.update(l,d),p=a.getStartData().getOrThunk(()=>S6(s,t));g.each(C=>{_U(t,s,p,C)})},x6=(t,s,a,l)=>{s.each(SU),a.snaps.each(g=>{bU(t,g)});const d=a.getTarget(t.element);l.reset(),a.onDrop(t,d)},oD=t=>(s,a)=>{const l=d=>{a.setStartData(S6(s,d))};return ss([Pe(ag(),d=>{a.getStartData().each(()=>l(d))}),...t(s,a,l)])},kU=t=>ss([Pe(Sn(),t.forceDrop),Pe(Es(),t.drop),Pe(os(),(s,a)=>{t.move(a.event)}),Pe(Zr(),t.delayDrop)]);var OU=Object.freeze({__proto__:null,getData:t=>O.from(ts(t.x,t.y)),getDelta:(t,s)=>ts(s.left-t.left,s.top-t.top)});const sD=(t,s,a)=>[Pe(Sn(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>x6(l,O.some(k),t,s),C=jN(p,200),S={drop:p,delayDrop:C.schedule,forceDrop:p,move:B=>{C.cancel(),nD(l,t,s,OU,B)}},k=C6(l,t.blockerClass,kU(S));(()=>{a(l),AT(l,k)})()})],DU=[...tD,Ho("dragger",{handlers:oD(sD)})],RU=t=>ss([Pe(nl(),t.forceDrop),Pe(sm(),t.drop),Pe(Ob(),t.drop),Pe(fu(),(s,a)=>{t.move(a.event)})]),MU=t=>{const s=t[0];return O.some(ts(s.clientX,s.clientY))};var E6=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?MU(a):O.none()},getDelta:(t,s)=>ts(s.left-t.left,s.top-t.top)});const T6=(t,s,a)=>{const l=Fo(),d=g=>{x6(g,l.get(),t,s),l.clear()};return[Pe(nl(),(g,p)=>{p.stop();const C=()=>d(g),S={drop:C,delayDrop:ee,forceDrop:C,move:B=>{nD(g,t,s,E6,B)}},k=C6(g,t.blockerClass,RU(S));l.set(k),(()=>{a(g),AT(g,k)})()}),Pe(fu(),(g,p)=>{p.stop(),nD(g,t,s,E6,p.event)}),Pe(sm(),(g,p)=>{p.stop(),d(g)}),Pe(Ob(),d)]},BU=[...tD,Ho("dragger",{handlers:oD(T6)})],$U=(t,s,a)=>[...sD(t,s,a),...T6(t,s,a)],_6=[...tD,Ho("dragger",{handlers:oD($U)})];var PU=Object.freeze({__proto__:null,mouse:DU,touch:BU,mouseOrTouch:_6}),FU=Object.freeze({__proto__:null,init:()=>{let t=O.none(),s=O.none();const a=()=>{t=O.none(),s=O.none()},l=(S,k)=>{const D=t.map(B=>S.getDelta(B,k));return t=O.some(k),D},d=(S,k)=>S.getData(k).bind(D=>l(S,D)),g=S=>{s=O.some(S)},p=()=>s,C=q({});return nc({readState:C,reset:a,update:d,getStartData:p,setStartData:g})}});const pb=Ww({branchKey:"mode",branches:PU,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:O.from(t.extra)})},state:FU,apis:eD}),rD=40,OT=rD/2,k6=(t,s,a,l,d,g)=>t.fold(()=>pb.snap({sensor:kp(a-OT,l-OT),range:ts(d,g),output:kp(O.some(a),O.some(l)),extra:{td:s}}),p=>{const C=a-OT,S=l-OT,k=rD,D=rD,B=p.element.dom.getBoundingClientRect();return pb.snap({sensor:kp(C,S),range:ts(k,D),output:kp(O.some(a-B.width/2),O.some(l-B.height/2)),extra:{td:s}})}),aD=(t,s,a)=>{const l=(d,g)=>d.exists(p=>Ao(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;l(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},cD=t=>yo(dr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Xe([pb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),pC.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),IU=(t,s)=>{const a=Lt([]),l=Lt([]),d=Lt(!1),g=Fo(),p=Fo(),C=rt=>{const Dt=V(rt);return k6(H.getOpt(s),rt,Dt.x,Dt.y,Dt.width,Dt.height)},S=()=>ke(a.get(),rt=>C(rt)),k=rt=>{const Dt=V(rt);return k6(Z.getOpt(s),rt,Dt.right,Dt.bottom,Dt.width,Dt.height)},D=()=>ke(l.get(),rt=>k(rt)),B=aD(S,g,rt=>{p.get().each(Dt=>{t.dispatch("TableSelectorChange",{start:rt,finish:Dt})})}),P=aD(D,p,rt=>{g.get().each(Dt=>{t.dispatch("TableSelectorChange",{start:Dt,finish:rt})})}),H=cD(B),Z=cD(P),J=Sr(H.asSpec()),ge=Sr(Z.asSpec()),ie=(rt,Dt,Nn,xt)=>{const An=Dt.dom.getBoundingClientRect();Ln(rt.element,"display");const pn=fl(ue.fromDom(t.getBody())).dom.innerHeight,$n=Nn(An),en=xt(An,pn);($n||en)&&Xt(rt.element,"display","none")},re=(rt,Dt,Nn,xt)=>{const An=Nn(Dt);pb.snapTo(rt,An),ie(rt,Dt,en=>en[xt]<0,(en,wo)=>en[xt]>wo)},Ee=rt=>re(J,rt,C,"top"),Re=()=>g.get().each(Ee),tt=rt=>re(ge,rt,k,"bottom"),Le=()=>p.get().each(tt);Br().deviceType.isTouch()&&(t.on("TableSelectionChange",rt=>{d.get()||(Cd(s,J),Cd(s,ge),d.set(!0)),g.set(rt.start),p.set(rt.finish),rt.otherCells.each(Dt=>{a.set(Dt.upOrLeftCells),l.set(Dt.downOrRightCells),Ee(rt.start),tt(rt.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Re(),Le()}),t.on("TableSelectionClear",()=>{d.get()&&(wd(J),wd(ge),d.set(!1)),g.clear(),p.clear()}))};var jC=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const LU=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",HU=(t,s,a)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(k,D,B)=>dr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":B,"aria-level":B+1}},components:[Xs(k)],action:P=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:Xe([Dd.button(a.isDisabled),Xr()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Xs(` ${d} `)]}),C=k=>fn(k,(D,B,P)=>{const H=g(B.name,B.element,P);return P===0?D.concat([H]):D.concat([p(),H])},[]),S=k=>{const D=[];let B=k.length;for(;B-- >0;){const P=k[B];if(P.nodeType===1&&!LU(P)){const H=Uo(t,P);if(H.isDefaultPrevented()||D.push({name:H.name,element:P}),H.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Xe([Pt.config({mode:"flow",selector:"div[role=button]"}),zt.config({disabled:a.isDisabled}),Xr(),_s.config({}),nn.config({}),hn("elementPathEvents",[rs((k,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Pt.focusIn(k)),t.on("NodeChange",B=>{const P=S(B.parents),H=P.length>0?C(P):[];nn.set(k,H)})})])]),components:[]}};var Ff;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Ff||(Ff={}));const VU=(t,s,a,l,d)=>{const g={height:fT(l+s.top,fx(t),l4(t))};return a===Ff.Both&&(g.width=fT(d+s.left,mx(t),gx(t))),g},A6=(t,s,a)=>{const l=ue.fromDom(t.getContainer()),d=VU(t,s,a,ys(l),or(l));Is(d,(g,p)=>{tr(g)&&Xt(l,p,mT(g))}),d8(t)},zU=t=>{const s=Cx(t);return s===!1?Ff.None:s==="both"?Ff.Both:Ff.Vertical},DT=(t,s,a,l)=>{const g=ts(a*20,l*20);return A6(t,g,s),O.some(!0)},UU=(t,s)=>{const a=zU(t);if(a===Ff.None)return O.none();const l=a===Ff.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return O.some(_d("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize"),"aria-label":s.translate(l)},behaviours:[pb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,p)=>A6(t,p,a),blockerClass:"tox-blocker"}),Pt.config({mode:"special",onLeft:()=>DT(t,a,-1,0),onRight:()=>DT(t,a,1,0),onUp:()=>DT(t,a,0,-1),onDown:()=>DT(t,a,0,1)}),_s.config({}),Zt.config({})]},s.icons))},WU=(t,s)=>{const a=(l,d,g)=>nn.set(l,[Xs(s.translate(["{0} "+g,d[g]]))]);return dr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Xe([Dd.button(s.isDisabled),Xr(),_s.config({}),nn.config({}),ut.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),hn("wordcount-events",[bu(l=>{const d=ut.getValue(l),g=d.mode==="words"?"characters":"words";ut.setValue(l,{mode:g,count:d.count}),a(l,d.count,g)}),rs(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=ut.getValue(l);ut.setValue(l,{mode:g,count:d.wordCount}),a(l,d.wordCount,g)})})])]),eventOrder:{[Cl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},ZU=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":Eu.translate(["Powered by {0}","Tiny"])},innerHtml:jC.trim()},behaviours:Xe([Zt.config({})])}]}),l=()=>{const g=[];return JR(t)&&g.push(HU(t,{},s)),t.hasPlugin("wordcount")&&g.push(WU(t,s)),g4(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=l(),p=UU(t,s);return g.concat(p.toArray())})()}},O6=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),jU=(t,s)=>{const a=t.inline,l=a?yz:BP,d=G1(t)?nO:u9,g=Cz(),p=Fo(),C=Fo(),S=Fo(),P=Br().deviceType.isTouch()?["tox-platform-touch"]:[],H=p4(t),Z=fp(t),J=yo({dom:{tag:"div",classes:["tox-anchorbar"]}}),ge=()=>g.mainUi.get().map(mt=>mt.outerContainer).bind(Go.getHeader),ie=()=>St.fromOption(g.dialogUi.get().map(mt=>mt.sink),"UI has not been rendered"),re=()=>St.fromOption(g.popupUi.get().map(mt=>mt.sink),"(popup) UI has not been rendered"),Ee=g.lazyGetInOuterOrDie("anchor bar",J.getOpt),Re=g.lazyGetInOuterOrDie("toolbar",Go.getToolbar),tt=g.lazyGetInOuterOrDie("throbber",Go.getThrobber),Le=oj({popup:re,dialog:ie},t,Ee),rt=()=>{const mt={attributes:{[fg]:H?bd.BottomToTop:bd.TopToBottom}},Gt=Go.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Le.popup,onEscape:()=>{t.focus()}}),Cn=Go.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Le.popup.shared.getSink,providers:Le.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:zT=>{tb(t,zT)},type:Z,lazyToolbar:Re,lazyHeader:()=>ge().getOrDie("Could not find header element"),...mt}),zn=Go.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Le.popup.shared.providers,onEscape:()=>{t.focus()},type:Z}),mr=U2(t),so=Sx(t),Wc=wx(t),Ps=eM(t),$u=Dt(),zd=mr||so||Wc,Xg=()=>mr?[zn]:so?[Cn]:[],XC=Ps?[$u,Gt]:[Gt];return Go.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(zd?[]:["tox-editor-header--empty"]),...mt},components:He([Wc?XC:[],Xg(),kd(t)?[]:[J.asSpec()]]),sticky:G1(t),editor:t,sharedBackstage:Le.popup.shared})},Dt=()=>Go.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Nn=()=>{const mt=Go.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Gt=Go.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[mt,Gt]}},xt=()=>{const mt=b4(t),Gt=Ao(Nr(),mt)&&Ve(mt,"display")==="grid",Cn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(P),attributes:{...Eu.isRtl()?{dir:"rtl"}:{}}},behaviours:Xe([Ua.config({useFixed:()=>d.isDocked(ge)})])},zn={dom:{styles:{width:document.body.clientWidth+"px"}},events:ss([Pe(rm(),Wc=>{Xt(Wc.element,"width",document.body.clientWidth+"px")})])},mr=Sr(Lo(Cn,Gt?zn:{})),so=T3(mr);return C.set(so),{sink:mr,mothership:so}},An=()=>{const mt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(P),attributes:{...Eu.isRtl()?{dir:"rtl"}:{}}},behaviours:Xe([Ua.config({useFixed:()=>d.isDocked(ge),getBounds:()=>s.getPopupSinkBounds()})])},Gt=Sr(mt),Cn=T3(Gt);return S.set(Cn),{sink:Gt,mothership:Cn}},pn=()=>{const mt=rt(),Gt=Nn(),Cn=Go.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Le.popup}),zn=Go.parts.viewWrapper({backstage:Le.popup}),mr=YR(t)&&!a?O.some(ZU(t,Le.popup.shared.providers)):O.none(),so=He([H?[]:[mt],a?[]:[Gt],H?[mt]:[]]),Wc=Go.parts.editorContainer({components:He([so,a?[]:mr.toArray()])}),Ps=v4(t),$u={role:"application",...Eu.isRtl()?{dir:"rtl"}:{},...Ps?{"aria-hidden":"true"}:{}},zd=Sr(Go.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(H?["tox-tinymce--toolbar-bottom"]:[]).concat(P),styles:{visibility:"hidden",...Ps?{opacity:"0",border:"0"}:{}},attributes:$u},components:[Wc,...a?[]:[zn],Cn],behaviours:Xe([Xr(),zt.config({disableClass:"tox-tinymce--disabled"}),Pt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Xg=T3(zd);return p.set(Xg),{mothership:Xg,outerContainer:zd}},$n=mt=>{const Gt=mT(hz(t)),Cn=mT(pz(t));return t.inline||(Lm("div","width",Cn)&&Xt(mt.element,"width",Cn),Lm("div","height",Gt)?Xt(mt.element,"height",Gt):Xt(mt.element,"height","400px")),Gt},en=mt=>{t.addShortcut("alt+F9","focus menubar",()=>{Go.focusMenubar(mt)}),t.addShortcut("alt+F10","focus toolbar",()=>{Go.focusToolbar(mt)}),t.addCommand("ToggleToolbarDrawer",(Gt,Cn)=>{Cn!=null&&Cn.skipFocus?Go.toggleToolbarDrawerWithoutFocusing(mt):Go.toggleToolbarDrawer(mt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Go.isToolbarDrawerToggled(mt))},wo=mt=>{const{mainUi:Gt,popupUi:Cn,uiMotherships:zn}=mt;Mo(WR(t),(Sb,ED)=>{t.ui.registry.addGroupToolbarButton(ED,Sb)});const{buttons:mr,menuItems:so,contextToolbars:Wc,sidebars:Ps,views:$u}=t.ui.registry.getAll(),zd=xx(t),Xg={menuItems:so,menus:y4(t),menubar:jR(t),toolbar:zd.getOrThunk(()=>bx(t)),allowToolbarGroups:Z===Hi.floating,buttons:mr,sidebar:Ps,views:$u};en(Gt.outerContainer),ic(t,Gt.mothership,zn),d.setup(t,Le.popup.shared,ge),Jz(t,Le.popup),iU(t,Le.popup.shared.getSink,Le.popup),P9(t),fj(t,tt,Le.popup.shared),Iz(t,Wc,Cn.sink,{backstage:Le.popup}),IU(t,Cn.sink);const XC=t.getElement(),zT=$n(Gt.outerContainer),Vv={targetNode:XC,height:zT};return l.render(t,mt,Xg,Le.popup,Vv)},it=mt=>(S.set(mt.mothership),mt),kt=()=>{const mt=pn(),Gt=xt(),Cn=gp(t)?An():it(Gt);g.dialogUi.set(Gt),g.popupUi.set(Cn),g.mainUi.set(mt);const zn={popupUi:Cn,dialogUi:Gt,mainUi:mt,uiMotherships:g.getUiMotherships()};return wo(zn)};return{popups:{backstage:Le.popup,getMothership:()=>O6("popups",S)},dialogs:{backstage:Le.dialog,getMothership:()=>O6("dialogs",C)},renderUI:kt}},GU=(t,s)=>{const a=Ds(t,"id").fold(()=>{const l=pt("dialog-label");return gn(s,"id",l),l},mn);gn(t,"aria-labelledby",a)},qU=q([Ce("lazySink"),oo("dragBlockClass"),xs("getBounds",Ze),fe("useTabstopAt",Ot),fe("firstTabstop",0),fe("eventOrder",{}),Ts("modalBehaviours",[Pt]),ua("onExecute"),we("onEscape")]),lD={sketch:mn},KU=q([Jl({name:"draghandle",overrides:(t,s)=>({behaviours:Xe([pb.config({mode:"mouse",getTarget:a=>md(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Qs({schema:[Ce("dom")],name:"title"}),Qs({factory:lD,schema:[Ce("dom")],name:"close"}),Qs({factory:lD,schema:[Ce("dom")],name:"body"}),Jl({factory:lD,schema:[Ce("dom")],name:"footer"}),Fi({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[fe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),fe("components",[])],name:"blocker"})]),XU=(t,s,a,l)=>{const d=Fo(),g=H=>{d.set(H);const Z=t.lazySink(H).getOrDie(),J=l.blocker(),ge=Z.getSystem().build({...J,components:J.components.concat([Gl(H)]),behaviours:Xe([Zt.config({}),hn("dialog-blocker-events",[Eh(ki(),()=>{Pt.focusIn(H)})])])});Cd(Z,ge),Pt.focusIn(H)},p=H=>{d.clear(),Ac(H.element).each(Z=>{H.getSystem().getByDom(Z).each(J=>{wd(J)})})},C=H=>bm(H,t,"body"),S=H=>bm(H,t,"footer"),k=(H,Z)=>{_m.block(H,Z)},D=H=>{_m.unblock(H)},B=pt("modal-events"),P={...t.eventOrder,[Pc()]:[B].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:C,getFooter:S,setIdle:D,setBusy:k},eventOrder:P,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Js(t.modalBehaviours,[nn.config({}),Pt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),_m.config({getRoot:d.get}),hn(B,[rs(H=>{GU(H.element,bm(H,t,"title").element)})])])}},Yr=Tr({name:"ModalDialog",configFields:qU(),partFields:KU(),factory:XU,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),YU=Bt([Us,Rx].concat(Y1)),JU=Qm,$v=[$4("button"),Vi,Ha("align","end",["start","end"]),Y2,_u,gh("buttonType",["primary","secondary"])],D6=[...$v,Ad],iD=[yl("type",["submit","cancel","custom"]),...D6],QU=[yl("type",["menu"]),hp,K2,Vi,bc("items",YU),...$v],eW=[...$v,yl("type",["togglebutton"]),ar("tooltip"),Vi,hp,ca("active",!1)],tW=Hs("type",{submit:iD,cancel:iD,custom:iD,menu:QU,togglebutton:eW}),nW=[Us,Ad,yl("level",["info","warn","error","success"]),ym,fe("url","")],R6=Bt(nW),oW=t=>[Us,t],sW=[Us,Ad,_u,$4("button"),Vi,NI,gh("buttonType",["primary","secondary","toolbar"]),Y2],rW=Bt(sW),Pv=[Us,Rx],km=Pv.concat([X2]),uD=Pv.concat([q2,_u]),M6=Bt(uD),aW=Qm,cW=km.concat([xM("auto")]),lW=Bt(cW),iW=tg([K1,Ad,ym]),uW=km.concat([La("storageKey","default")]),dW=Bt(uW),mW=hs,fW=Bt(km),gW=hs,hW=Pv.concat([La("tag","textarea"),ar("scriptId"),ar("scriptUrl"),ph("settings",void 0)]),pW=Pv.concat([La("tag","textarea"),$c("init")]),bW=ed(t=>bo("customeditor.old",oa(pW),t).orThunk(()=>bo("customeditor.new",oa(hW),t))),vW=hs,yW=Bt(km),CW=ef(),wW=t=>[Us,Ab("columns"),t],SW=[Us,ar("html"),Ha("presets","presentation",["presentation","document"])],xW=Bt(SW),EW=km.concat([ca("sandboxed",!0),ca("transparent",!0)]),N6=Bt(EW),B6=hs,bb=Bt(Pv.concat([ra("height")])),TW=Bt([ar("url"),og("zoom"),og("cachedWidth"),og("cachedHeight")]),dD=km.concat([ra("inputMode"),ra("placeholder"),ca("maximized",!1),_u]),RT=Bt(dD),_W=hs,kW=t=>[Us,q2,t],AW=[Ad,K1],OW=[Ad,bc("items",em("items",()=>$6))],$6=Xm([Bt(AW),Bt(OW)]),vb=km.concat([bc("items",$6),_u]),P6=Bt(vb),DW=hs,RW=km.concat([Zp("items",[Ad,K1]),sg("size",1),_u]),MW=Bt(RW),NW=hs,BW=km.concat([ca("constrain",!0),_u]),$W=Bt(BW),F6=Bt([ar("width"),ar("height")]),PW=Pv.concat([q2,sg("min",0),sg("max",0)]),mD=Bt(PW),GC=Jm,fD=[Us,bc("header",hs),bc("cells",dt(hs))],MT=Bt(fD),yb=km.concat([ra("placeholder"),ca("maximized",!1),_u]),NT=Bt(yb),FW=hs,gD=[yl("type",["directory","leaf"]),R4,ar("id"),_i("menu",B$)],hD=Bt(gD),LW=gD.concat([bc("children",em("children",()=>pc("type",{directory:I6,leaf:hD})))]),I6=Bt(LW),HW=pc("type",{directory:I6,leaf:hD}),L6=[Us,bc("items",HW),nd("onLeafAction"),nd("onToggleExpand"),tm("defaultExpandedIds",[],hs),ra("defaultSelectedId")],H6=Bt(L6),pD=km.concat([Ha("filetype","file",["image","media","file"]),_u]),VW=Bt(pD),zW=Bt([K1,N4]),bD=t=>yr("items","items",no(),dt(ed(s=>bo(`Checking item of ${t}`,BT,s).fold(a=>St.error(tf(a)),a=>St.value(a))))),BT=mh(()=>pc("type",{alertbanner:R6,bar:Bt(oW(bD("bar"))),button:rW,checkbox:M6,colorinput:dW,colorpicker:fW,dropzone:yW,grid:Bt(wW(bD("grid"))),iframe:N6,input:RT,listbox:P6,selectbox:MW,sizeinput:$W,slider:mD,textarea:NT,urlinput:VW,customeditor:bW,htmlpanel:xW,imagepreview:bb,collection:lW,label:Bt(kW(bD("label"))),table:MT,tree:H6,panel:V6})),UW=[Us,fe("classes",[]),bc("items",BT)],V6=Bt(UW),WW=[$4("tab"),R4,bc("items",BT)],vD=[Us,Zp("tabs",WW)],yD=Bt(vD),ZW=D6,z6=tW,jW=Bt([ar("title"),ec("body",pc("type",{panel:V6,tabpanel:yD})),La("size","normal"),bc("buttons",z6),fe("initialData",{}),xs("onAction",ee),xs("onChange",ee),xs("onSubmit",ee),xs("onClose",ee),xs("onCancel",ee),xs("onTabChange",ee)]),GW=t=>bo("dialog",jW,t),U6=Bt([yl("type",["cancel","custom"]),...ZW]),qW=Bt([ar("title"),ar("url"),og("height"),og("width"),du("buttons",U6),xs("onAction",ee),xs("onCancel",ee),xs("onClose",ee),xs("onMessage",ee)]),KW=t=>bo("dialog",qW,t),Gg=t=>Ht(t)?[t].concat(me(Mm(t),Gg)):To(t)?me(t,Gg):[],W6=t=>$e(t.type)&&$e(t.name),XW={checkbox:aW,colorinput:mW,colorpicker:gW,dropzone:CW,input:_W,iframe:B6,imagepreview:TW,selectbox:NW,sizeinput:F6,slider:GC,listbox:DW,size:F6,textarea:FW,urlinput:zW,customeditor:vW,collection:iW,togglemenuitem:JU},$T=t=>O.from(XW[t.type]),Fv=t=>qn(Gg(t),W6),PT=t=>{const s=Fv(t),a=me(s,l=>$T(l).fold(()=>[],d=>[ec(l.name,d)]));return Bt(a)},CD=t=>{var s;const a=co(GW(t)),l=PT(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:l,initialData:d}},Ap={open:(t,s)=>{const a=CD(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=co(KW(s));return t(a)},redial:t=>CD(t)};var FT=Object.freeze({__proto__:null,events:(t,s)=>{const a=(l,d)=>{t.updateState.each(g=>{const p=g(l,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?dR:uR)(l,p)})};return ss([Pe(pu(),(l,d)=>{const g=d;if(!g.universal){const p=t.channel;Tn(g.channels,p)&&a(l,g.data)}}),rs((l,d)=>{t.initialData.each(g=>{a(l,g)})})])}}),Z6=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),JW=[Ce("channel"),oo("renderComponents"),oo("updateState"),oo("initialData"),ca("reuseDom",!0)],Op=Object.freeze({__proto__:null,init:()=>{const t=Lt(O.none()),s=()=>t.set(O.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Du=da({fields:JW,name:"reflecting",active:FT,apis:Z6,state:Op}),j6=t=>{const s=[],a={};return Is(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?St.error(s):St.value(a)},G6=(t,s,a)=>{const l=yo(bv.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:ke(t.items,g=>xA(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:Xe([Pt.config({mode:"acyclic",useTabstopAt:Oe(Zi)}),Wi.memento(l),ku.memento(l,{postprocess:d=>j6(d).fold(g=>(console.error(g),{}),mn)})])}},Iv=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:ax(t.action),behaviours:Js(t.tabButtonBehaviours,[Zt.config({}),Pt.config({mode:"execution",useSpace:!0,useEnter:!0}),ut.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),IT=ir({name:"TabButton",configFields:[fe("uid",void 0),Ce("value"),yr("dom","dom",Jd(()=>({attributes:{role:"tab",id:pt("aria"),"aria-selected":"false"}})),Nc()),oo("action"),fe("domModification",{}),Ts("tabButtonBehaviours",[Zt,Pt,ut]),Ce("view")],factory:Iv}),q6=q([Ce("tabs"),Ce("dom"),fe("clickToDismiss",!1),Ts("tabbarBehaviours",[to,Pt]),Vh(["tabClass","selectedClass"])]),QW=B0({factory:IT,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{to.dehighlight(l,d),Mt(l,sf(),{tabbar:l,button:d})},a=(l,d)=>{to.highlight(l,d),Mt(l,Sh(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=to.isHighlighted(d,l);(()=>g&&t.clickToDismiss?s:g?ee:a)()(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),eZ=q([QW]),tZ=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Js(t.tabbarBehaviours,[to.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{gn(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{gn(g.element,"aria-selected","false")}}),Pt.config({mode:"flow",getInitial:d=>to.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),K6=Tr({name:"Tabbar",configFields:q6(),partFields:eZ(),factory:tZ}),Lv=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Js(t.tabviewBehaviours,[nn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Dj=ir({name:"Tabview",configFields:[Ts("tabviewBehaviours",[nn])],factory:Lv}),nZ=q([fe("selectFirst",!0),_n("onChangeTab"),_n("onDismissTab"),fe("tabs",[]),Ts("tabSectionBehaviours",[])]),oZ=Qs({factory:K6,schema:[Ce("dom"),td("markers",[Ce("tabClass"),Ce("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Rj=Qs({factory:Dj,name:"tabview"}),sZ=q([oZ,Rj]),rZ=(t,s,a,l)=>{const d=p=>{const C=ut.getValue(p);Vo(p,t,"tabview").each(S=>{Me(t.tabs,D=>D.value===C).each(D=>{const B=D.view();Ds(p.element,"id").each(P=>{gn(S.element,"aria-labelledby",P)}),nn.set(S,B),t.onChangeTab(S,p,B)})})},g=(p,C)=>{Vo(p,t,"tabbar").each(S=>{C(S).each(rf)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:rp(t.tabSectionBehaviours),events:ss(He([t.selectFirst?[rs((p,C)=>{g(p,to.getFirst)})]:[],[Pe(Sh(),(p,C)=>{const S=C.event.button;d(S)}),Pe(sf(),(p,C)=>{const S=C.event.button;t.onDismissTab(p,S)})]])),apis:{getViewItems:p=>Vo(p,t,"tabview").map(C=>nn.contents(C)).getOr([]),showTab:(p,C)=>{g(p,k=>{const D=to.getCandidates(k);return Me(D,P=>ut.getValue(P)===C).filter(P=>!to.isHighlighted(k,P))})}}}},If=Tr({name:"TabSection",configFields:nZ(),partFields:sZ(),factory:rZ,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),aZ=(t,s,a)=>ke(t,(l,d)=>{nn.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return nn.set(a,[]),g.height}),cZ=t=>Hr(mc(t,(s,a)=>s>a?-1:s<a?1:0)),X6=(t,s,a)=>{const l=$m(t).dom,d=md(t,".tox-dialog-wrap").getOr(t),g=Ve(d,"position")==="fixed";let p;g?p=Math.max(l.clientHeight,window.innerHeight):p=Math.max(l.offsetHeight,l.scrollHeight);const C=ys(s),k=s.dom.offsetLeft>=a.dom.offsetLeft+or(a)?Math.max(ys(a),C):C,D=parseInt(Ve(t,"margin-top"),10)||0,B=parseInt(Ve(t,"margin-bottom"),10)||0,H=ys(t)+D+B-k;return p-H},lZ=(t,s)=>{Hr(t).each(a=>If.showTab(s,a.value))},iZ=(t,s)=>{Xt(t,"height",s+"px"),Xt(t,"flex-basis",s+"px")},e=(t,s,a)=>{md(t,'[role="dialog"]').each(l=>{lr(l,'[role="tablist"]').each(d=>{a.get().map(g=>(Xt(s,"height","0"),Xt(s,"flex-basis","0"),Math.min(g,X6(l,s,d)))).each(g=>{iZ(s,g)})})})},n=t=>lr(t,'[role="tabpanel"]'),o=t=>{const s=Fo();return{extraEvents:[rs(d=>{const g=d.element;n(g).each(p=>{Xt(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(C=>{const S=aZ(t,p,C);cZ(S).fold(s.clear,s.set)}),e(g,p,s),Ln(p,"visibility"),lZ(t,d),requestAnimationFrame(()=>{e(g,p,s)})})}),Pe(rm(),d=>{const g=d.element;n(g).each(p=>{e(g,p,s)})}),Pe(tB,(d,g)=>{const p=d.element;n(p).each(C=>{const S=pd(Jr(C));Xt(C,"visibility","hidden");const k=Gs(C,"height").map(P=>parseInt(P,10));Ln(C,"height"),Ln(C,"flex-basis");const D=C.dom.getBoundingClientRect().height;k.forall(P=>D>P)?(s.set(D),e(p,C,s)):k.each(P=>{iZ(C,P)}),Ln(C,"visibility"),S.each(ql)})})],selectFirst:!1}},r="send-data-to-section",c="send-data-to-view",u=(t,s,a)=>{const l=Lt({}),d=k=>{const D=ut.getValue(k),B=j6(D).getOr({}),P=l.get(),H=Lo(P,B);l.set(H)},g=k=>{const D=l.get();ut.setValue(k,D)},p=Lt(null),C=ke(t.tabs,k=>({value:k.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Xs(a.shared.providers.translate(k.title))],view:()=>[bv.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:ke(k.items,B=>xA(D,B,s,a)),formBehaviours:Xe([Pt.config({mode:"acyclic",useTabstopAt:Oe(Zi)}),hn("TabView.form.events",[rs(g),Ai(d)]),Vc.config({channels:ct([{key:r,value:{onReceive:d}},{key:c,value:{onReceive:g}}])})])}))]})),S=o(C);return If.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(k,D,B)=>{const P=ut.getValue(D);Mt(k,eB,{name:P,oldName:p.get()}),p.set(P)},tabs:C,components:[If.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[K6.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Xe([_s.config({})])}),If.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:S.selectFirst,tabSectionBehaviours:Xe([hn("tabpanel",S.extraEvents),Pt.config({mode:"acyclic"}),En.config({find:k=>Hr(If.getViewItems(k))}),ku.withComp(O.none(),k=>(k.getSystem().broadcastOn([r],{}),l.get()),(k,D)=>{l.set(D),k.getSystem().broadcastOn([c],{})})])})},f=pt("update-dialog"),b=pt("update-title"),y=pt("update-body"),T=pt("update-footer"),N=pt("body-send-message"),R=(t,s,a,l,d)=>{const g=S=>{const k=S.body;switch(k.type){case"tabpanel":return[u(k,S.initialData,l)];default:return[G6(k,S.initialData,l)]}},p=(S,k)=>O.some({isTabPanel:()=>k.body.type==="tabpanel"}),C={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(S=>({id:S})).getOr({}),...d?C:{}}},components:[],behaviours:Xe([Wi.childAt(0),Du.config({channel:`${y}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},I=(t,s,a,l,d)=>R(t,s,O.some(a),l,d),G=(t,s,a)=>{const l=R(t,s,O.none(),a,!1);return Yr.parts.body(l)},X=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[GB({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Xe([_s.config({}),Zt.config({})])})]}],behaviours:Xe([Pt.config({mode:"acyclic",useTabstopAt:Oe(Zi)})])};return Yr.parts.body(s)};function W(t){"@babel/helpers - typeof";return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},W(t)}function K(t,s){return K=Object.setPrototypeOf||function(l,d){return l.__proto__=d,l},K(t,s)}function ae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function le(t,s,a){return ae()?le=Reflect.construct:le=function(d,g,p){var C=[null];C.push.apply(C,g);var S=Function.bind.apply(d,C),k=new S;return p&&K(k,p.prototype),k},le.apply(null,arguments)}function ce(t){return he(t)||Fe(t)||Et(t)||ve()}function he(t){if(Array.isArray(t))return Ue(t)}function Fe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Et(t,s){if(t){if(typeof t=="string")return Ue(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ue(t,s)}}function Ue(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,l=new Array(s);a<s;a++)l[a]=t[a];return l}function ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _e=Object.hasOwnProperty,et=Object.setPrototypeOf,ot=Object.isFrozen,bt=Object.getPrototypeOf,sn=Object.getOwnPropertyDescriptor,Rt=Object.freeze,kn=Object.seal,go=Object.create,Bs=typeof Reflect<"u"&&Reflect,ha=Bs.apply,kr=Bs.construct;ha||(ha=function(s,a,l){return s.apply(a,l)}),Rt||(Rt=function(s){return s}),kn||(kn=function(s){return s}),kr||(kr=function(s,a){return le(s,ce(a))});var Ye=ho(Array.prototype.forEach),Tt=ho(Array.prototype.pop),Zn=ho(Array.prototype.push),Vn=ho(String.prototype.toLowerCase),_t=ho(String.prototype.match),vt=ho(String.prototype.replace),Ke=ho(String.prototype.indexOf),Jt=ho(String.prototype.trim),ln=ho(RegExp.prototype.test),Co=un(TypeError);function ho(t){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return ha(t,s,l)}}function un(t){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return kr(t,a)}}function Nt(t,s){et&&et(t,null);for(var a=s.length;a--;){var l=s[a];if(typeof l=="string"){var d=Vn(l);d!==l&&(ot(s)||(s[a]=d),l=d)}t[l]=!0}return t}function ps(t){var s=go(null),a;for(a in t)ha(_e,t,[a])&&(s[a]=t[a]);return s}function Do(t,s){for(;t!==null;){var a=sn(t,s);if(a){if(a.get)return ho(a.get);if(typeof a.value=="function")return ho(a.value)}t=bt(t)}function l(d){return console.warn("fallback value for",d),null}return l}var ks=Rt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$s=Rt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),cs=Rt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ar=Rt(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),li=Rt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),uc=Rt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ld=Rt(["#text"]),ii=Rt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),qg=Rt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Dp=Rt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ki=Rt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Hd=kn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Lr=kn(/<%[\w\W]*|[\w\W]*%>/gm),Ru=kn(/^data-[\-\w.\u00B7-\uFFFF]/),Am=kn(/^aria-[\-\w]+$/),Mu=kn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Nu=kn(/^(?:\w+script|data):/i),Lf=kn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ec=kn(/^html$/i),Kg=function(){return typeof window>"u"?null:window},Hf=function(s,a){if(W(s)!=="object"||typeof s.createPolicy!="function")return null;var l=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(l=a.currentScript.getAttribute(d));var g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML:function(C){return C}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function Bu(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Kg(),s=function(xe){return Bu(xe)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,l=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,C=t.Element,S=t.NodeFilter,k=t.NamedNodeMap,D=k===void 0?t.NamedNodeMap||t.MozNamedAttrMap:k,B=t.HTMLFormElement,P=t.DOMParser,H=t.trustedTypes,Z=C.prototype,J=Do(Z,"cloneNode"),ge=Do(Z,"nextSibling"),ie=Do(Z,"childNodes"),re=Do(Z,"parentNode");if(typeof g=="function"){var Ee=l.createElement("template");Ee.content&&Ee.content.ownerDocument&&(l=Ee.content.ownerDocument)}var Re=Hf(H,a),tt=Re?Re.createHTML(""):"",Le=l,rt=Le.implementation,Dt=Le.createNodeIterator,Nn=Le.createDocumentFragment,xt=Le.getElementsByTagName,An=a.importNode,pn={};try{pn=ps(l).documentMode?l.documentMode:{}}catch{}var $n={};s.isSupported=typeof re=="function"&&rt&&typeof rt.createHTMLDocument<"u"&&pn!==9;var en=Hd,wo=Lr,it=Ru,kt=Am,mt=Nu,Gt=Lf,Cn=Mu,zn=null,mr=Nt({},[].concat(ce(ks),ce($s),ce(cs),ce(li),ce(Ld))),so=null,Wc=Nt({},[].concat(ce(ii),ce(qg),ce(Dp),ce(Ki))),Ps=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$u=null,zd=null,Xg=!0,XC=!0,zT=!1,Vv=!1,Sb=!1,ED=!1,mZ=!1,UT=!1,eF=!1,tF=!1,Bj=!0,fZ=!0,TD=!1,WT={},ZT=null,$j=Nt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Pj=null,Fj=Nt({},["audio","video","img","source","image","track"]),gZ=null,Ij=Nt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hZ="http://www.w3.org/1998/Math/MathML",pZ="http://www.w3.org/2000/svg",zv="http://www.w3.org/1999/xhtml",nF=zv,bZ=!1,jT,xG=["application/xhtml+xml","text/html"],EG="text/html",YC,GT=null,TG=l.createElement("form"),Lj=function(xe){return xe instanceof RegExp||xe instanceof Function},vZ=function(xe){GT&&GT===xe||((!xe||W(xe)!=="object")&&(xe={}),xe=ps(xe),zn="ALLOWED_TAGS"in xe?Nt({},xe.ALLOWED_TAGS):mr,so="ALLOWED_ATTR"in xe?Nt({},xe.ALLOWED_ATTR):Wc,gZ="ADD_URI_SAFE_ATTR"in xe?Nt(ps(Ij),xe.ADD_URI_SAFE_ATTR):Ij,Pj="ADD_DATA_URI_TAGS"in xe?Nt(ps(Fj),xe.ADD_DATA_URI_TAGS):Fj,ZT="FORBID_CONTENTS"in xe?Nt({},xe.FORBID_CONTENTS):$j,$u="FORBID_TAGS"in xe?Nt({},xe.FORBID_TAGS):{},zd="FORBID_ATTR"in xe?Nt({},xe.FORBID_ATTR):{},WT="USE_PROFILES"in xe?xe.USE_PROFILES:!1,Xg=xe.ALLOW_ARIA_ATTR!==!1,XC=xe.ALLOW_DATA_ATTR!==!1,zT=xe.ALLOW_UNKNOWN_PROTOCOLS||!1,Vv=xe.SAFE_FOR_TEMPLATES||!1,Sb=xe.WHOLE_DOCUMENT||!1,UT=xe.RETURN_DOM||!1,eF=xe.RETURN_DOM_FRAGMENT||!1,tF=xe.RETURN_TRUSTED_TYPE||!1,mZ=xe.FORCE_BODY||!1,Bj=xe.SANITIZE_DOM!==!1,fZ=xe.KEEP_CONTENT!==!1,TD=xe.IN_PLACE||!1,Cn=xe.ALLOWED_URI_REGEXP||Cn,nF=xe.NAMESPACE||zv,xe.CUSTOM_ELEMENT_HANDLING&&Lj(xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ps.tagNameCheck=xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),xe.CUSTOM_ELEMENT_HANDLING&&Lj(xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ps.attributeNameCheck=xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),xe.CUSTOM_ELEMENT_HANDLING&&typeof xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ps.allowCustomizedBuiltInElements=xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),jT=xG.indexOf(xe.PARSER_MEDIA_TYPE)===-1?jT=EG:jT=xe.PARSER_MEDIA_TYPE,YC=jT==="application/xhtml+xml"?function(At){return At}:Vn,Vv&&(XC=!1),eF&&(UT=!0),WT&&(zn=Nt({},ce(Ld)),so=[],WT.html===!0&&(Nt(zn,ks),Nt(so,ii)),WT.svg===!0&&(Nt(zn,$s),Nt(so,qg),Nt(so,Ki)),WT.svgFilters===!0&&(Nt(zn,cs),Nt(so,qg),Nt(so,Ki)),WT.mathMl===!0&&(Nt(zn,li),Nt(so,Dp),Nt(so,Ki))),xe.ADD_TAGS&&(zn===mr&&(zn=ps(zn)),Nt(zn,xe.ADD_TAGS)),xe.ADD_ATTR&&(so===Wc&&(so=ps(so)),Nt(so,xe.ADD_ATTR)),xe.ADD_URI_SAFE_ATTR&&Nt(gZ,xe.ADD_URI_SAFE_ATTR),xe.FORBID_CONTENTS&&(ZT===$j&&(ZT=ps(ZT)),Nt(ZT,xe.FORBID_CONTENTS)),fZ&&(zn["#text"]=!0),Sb&&Nt(zn,["html","head","body"]),zn.table&&(Nt(zn,["tbody"]),delete $u.tbody),Rt&&Rt(xe),GT=xe)},Hj=Nt({},["mi","mo","mn","ms","mtext"]),Vj=Nt({},["foreignobject","desc","title","annotation-xml"]),_G=Nt({},["title","style","font","a","script"]),oF=Nt({},$s);Nt(oF,cs),Nt(oF,Ar);var yZ=Nt({},li);Nt(yZ,uc);var kG=function(xe){var At=re(xe);(!At||!At.tagName)&&(At={namespaceURI:zv,tagName:"template"});var bn=Vn(xe.tagName),Or=Vn(At.tagName);return xe.namespaceURI===pZ?At.namespaceURI===zv?bn==="svg":At.namespaceURI===hZ?bn==="svg"&&(Or==="annotation-xml"||Hj[Or]):!!oF[bn]:xe.namespaceURI===hZ?At.namespaceURI===zv?bn==="math":At.namespaceURI===pZ?bn==="math"&&Vj[Or]:!!yZ[bn]:xe.namespaceURI===zv?At.namespaceURI===pZ&&!Vj[Or]||At.namespaceURI===hZ&&!Hj[Or]?!1:!yZ[bn]&&(_G[bn]||!oF[bn]):!1},xb=function(xe){Zn(s.removed,{element:xe});try{xe.parentNode.removeChild(xe)}catch{try{xe.outerHTML=tt}catch{xe.remove()}}},sF=function(xe,At){try{Zn(s.removed,{attribute:At.getAttributeNode(xe),from:At})}catch{Zn(s.removed,{attribute:null,from:At})}if(At.removeAttribute(xe),xe==="is"&&!so[xe])if(UT||eF)try{xb(At)}catch{}else try{At.setAttribute(xe,"")}catch{}},zj=function(xe){var At,bn;if(mZ)xe="<remove></remove>"+xe;else{var Or=_t(xe,/^[\r\n\t ]+/);bn=Or&&Or[0]}jT==="application/xhtml+xml"&&(xe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+xe+"</body></html>");var Ud=Re?Re.createHTML(xe):xe;if(nF===zv)try{At=new P().parseFromString(Ud,jT)}catch{}if(!At||!At.documentElement){At=rt.createDocument(nF,"template",null);try{At.documentElement.innerHTML=bZ?"":Ud}catch{}}var Yi=At.body||At.documentElement;return xe&&bn&&Yi.insertBefore(l.createTextNode(bn),Yi.childNodes[0]||null),nF===zv?xt.call(At,Sb?"html":"body")[0]:Sb?At.documentElement:Yi},Uj=function(xe){return Dt.call(xe.ownerDocument||xe,xe,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT,null,!1)},AG=function(xe){return xe instanceof B&&(typeof xe.nodeName!="string"||typeof xe.textContent!="string"||typeof xe.removeChild!="function"||!(xe.attributes instanceof D)||typeof xe.removeAttribute!="function"||typeof xe.setAttribute!="function"||typeof xe.namespaceURI!="string"||typeof xe.insertBefore!="function")},_D=function(xe){return W(p)==="object"?xe instanceof p:xe&&W(xe)==="object"&&typeof xe.nodeType=="number"&&typeof xe.nodeName=="string"},Eb=function(xe,At,bn){$n[xe]&&Ye($n[xe],function(Or){Or.call(s,At,bn,GT)})},Wj=function(xe){var At;if(Eb("beforeSanitizeElements",xe,null),AG(xe)||ln(/[\u0080-\uFFFF]/,xe.nodeName))return xb(xe),!0;var bn=YC(xe.nodeName);if(Eb("uponSanitizeElement",xe,{tagName:bn,allowedTags:zn}),xe.hasChildNodes()&&!_D(xe.firstElementChild)&&(!_D(xe.content)||!_D(xe.content.firstElementChild))&&ln(/<[/\w]/g,xe.innerHTML)&&ln(/<[/\w]/g,xe.textContent)||bn==="select"&&ln(/<template/i,xe.innerHTML))return xb(xe),!0;if(!zn[bn]||$u[bn]){if(!$u[bn]&&jj(bn)&&(Ps.tagNameCheck instanceof RegExp&&ln(Ps.tagNameCheck,bn)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(bn)))return!1;if(fZ&&!ZT[bn]){var Or=re(xe)||xe.parentNode,Ud=ie(xe)||xe.childNodes;if(Ud&&Or)for(var Yi=Ud.length,ui=Yi-1;ui>=0;--ui)Or.insertBefore(J(Ud[ui],!0),ge(xe))}return xb(xe),!0}return xe instanceof C&&!kG(xe)||(bn==="noscript"||bn==="noembed")&&ln(/<\/no(script|embed)/i,xe.innerHTML)?(xb(xe),!0):(Vv&&xe.nodeType===3&&(At=xe.textContent,At=vt(At,en," "),At=vt(At,wo," "),xe.textContent!==At&&(Zn(s.removed,{element:xe.cloneNode()}),xe.textContent=At)),Eb("afterSanitizeElements",xe,null),!1)},Zj=function(xe,At,bn){if(Bj&&(At==="id"||At==="name")&&(bn in l||bn in TG))return!1;if(!(XC&&!zd[At]&&ln(it,At))){if(!(Xg&&ln(kt,At))){if(!so[At]||zd[At]){if(!(jj(xe)&&(Ps.tagNameCheck instanceof RegExp&&ln(Ps.tagNameCheck,xe)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(xe))&&(Ps.attributeNameCheck instanceof RegExp&&ln(Ps.attributeNameCheck,At)||Ps.attributeNameCheck instanceof Function&&Ps.attributeNameCheck(At))||At==="is"&&Ps.allowCustomizedBuiltInElements&&(Ps.tagNameCheck instanceof RegExp&&ln(Ps.tagNameCheck,bn)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(bn))))return!1}else if(!gZ[At]){if(!ln(Cn,vt(bn,Gt,""))){if(!((At==="src"||At==="xlink:href"||At==="href")&&xe!=="script"&&Ke(bn,"data:")===0&&Pj[xe])){if(!(zT&&!ln(mt,vt(bn,Gt,"")))){if(bn)return!1}}}}}}return!0},jj=function(xe){return xe.indexOf("-")>0},Gj=function(xe){var At,bn,Or,Ud;Eb("beforeSanitizeAttributes",xe,null);var Yi=xe.attributes;if(Yi){var ui={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:so};for(Ud=Yi.length;Ud--;){At=Yi[Ud];var rF=At,di=rF.name,qj=rF.namespaceURI;bn=di==="value"?At.value:Jt(At.value),Or=YC(di);var DG=bn;if(ui.attrName=Or,ui.attrValue=bn,ui.keepAttr=!0,ui.forceKeepAttr=void 0,Eb("uponSanitizeAttribute",xe,ui),bn=ui.attrValue,!ui.forceKeepAttr){if(!ui.keepAttr){sF(di,xe);continue}if(ln(/\/>/i,bn)){sF(di,xe);continue}Vv&&(bn=vt(bn,en," "),bn=vt(bn,wo," "));var RG=YC(xe.nodeName);if(!Zj(RG,Or,bn)){sF(di,xe);continue}if(bn!==DG)try{qj?xe.setAttributeNS(qj,di,bn):xe.setAttribute(di,bn)}catch{sF(di,xe)}}}Eb("afterSanitizeAttributes",xe,null)}},OG=function Pn(xe){var At,bn=Uj(xe);for(Eb("beforeSanitizeShadowDOM",xe,null);At=bn.nextNode();)Eb("uponSanitizeShadowNode",At,null),!Wj(At)&&(At.content instanceof d&&Pn(At.content),Gj(At));Eb("afterSanitizeShadowDOM",xe,null)};return s.sanitize=function(Pn,xe){var At,bn,Or,Ud,Yi;if(bZ=!Pn,bZ&&(Pn="<!-->"),typeof Pn!="string"&&!_D(Pn)){if(typeof Pn.toString!="function")throw Co("toString is not a function");if(Pn=Pn.toString(),typeof Pn!="string")throw Co("dirty is not a string, aborting")}if(!s.isSupported){if(W(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Pn=="string")return t.toStaticHTML(Pn);if(_D(Pn))return t.toStaticHTML(Pn.outerHTML)}return Pn}if(ED||vZ(xe),s.removed=[],typeof Pn=="string"&&(TD=!1),TD){if(Pn.nodeName){var ui=YC(Pn.nodeName);if(!zn[ui]||$u[ui])throw Co("root node is forbidden and cannot be sanitized in-place")}}else if(Pn instanceof p)At=zj("<!---->"),bn=At.ownerDocument.importNode(Pn,!0),bn.nodeType===1&&bn.nodeName==="BODY"||bn.nodeName==="HTML"?At=bn:At.appendChild(bn);else{if(!UT&&!Vv&&!Sb&&Pn.indexOf("<")===-1)return Re&&tF?Re.createHTML(Pn):Pn;if(At=zj(Pn),!At)return UT?null:tF?tt:""}At&&mZ&&xb(At.firstChild);for(var rF=Uj(TD?Pn:At);Or=rF.nextNode();)Or.nodeType===3&&Or===Ud||Wj(Or)||(Or.content instanceof d&&OG(Or.content),Gj(Or),Ud=Or);if(Ud=null,TD)return Pn;if(UT){if(eF)for(Yi=Nn.call(At.ownerDocument);At.firstChild;)Yi.appendChild(At.firstChild);else Yi=At;return so.shadowroot&&(Yi=An.call(a,Yi,!0)),Yi}var di=Sb?At.outerHTML:At.innerHTML;return Sb&&zn["!doctype"]&&At.ownerDocument&&At.ownerDocument.doctype&&At.ownerDocument.doctype.name&&ln(Ec,At.ownerDocument.doctype.name)&&(di="<!DOCTYPE "+At.ownerDocument.doctype.name+`>
`+di),Vv&&(di=vt(di,en," "),di=vt(di,wo," ")),Re&&tF?Re.createHTML(di):di},s.setConfig=function(Pn){vZ(Pn),ED=!0},s.clearConfig=function(){GT=null,ED=!1},s.isValidAttribute=function(Pn,xe,At){GT||vZ({});var bn=YC(Pn),Or=YC(xe);return Zj(bn,Or,At)},s.addHook=function(Pn,xe){typeof xe=="function"&&($n[Pn]=$n[Pn]||[],Zn($n[Pn],xe))},s.removeHook=function(Pn){if($n[Pn])return Tt($n[Pn])},s.removeHooks=function(Pn){$n[Pn]&&($n[Pn]=[])},s.removeAllHooks=function(){$n={}},s}var Rp=Bu();const LT=t=>Rp().sanitize(t),wD=Z1.deviceType.isTouch(),qC=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),HT=(t,s)=>Yr.parts.close(dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Xe([_s.config({})])})),VT=()=>Yr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),SD=(t,s)=>Yr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Pf(`<p>${LT(s.translate(t))}</p>`)}]}]}),Vd=t=>Yr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Cb=(t,s)=>[Sm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Sm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],pe=t=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",d=s+"__disable-scroll";return Yr.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),O.some(!0)),useTabstopAt:g=>!Zi(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Pf(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:wD?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:Xe([Zt.config({}),hn("dialog-events",t.dialogEvents.concat([Eh(ki(),(g,p)=>{Pt.focusIn(g)})])),hn("scroll-lock",[rs(()=>{wr(Nr(),d)}),Ai(()=>{Oo(Nr(),d)})]),...t.extraBehaviours]),eventOrder:{[Cl()]:["dialog-events"],[Pc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[am()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},be=t=>dr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:Xe([_s.config({})]),components:[_d("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{lo(s,ob)}}),Je=(t,s,a,l)=>{const d=g=>[Xs(l.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:Xe([Du.config({channel:`${b}-${s}`,initialData:t,renderComponents:d})])}},Ge=()=>({dom:Pf('<div class="tox-dialog__draghandle"></div>')}),Ft=(t,s,a,l)=>Sm.sketch({dom:Pf('<div class="tox-dialog__header"></div>'),components:[Je(t,s,O.some(a),l),Ge(),be(l)],containerBehaviours:Xe([pb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>ol(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Yn=(t,s,a)=>{const l=Yr.parts.title(Je(t,s,O.none(),a)),d=Yr.parts.draghandle(Ge()),g=Yr.parts.close(be(a)),p=[l].concat(t.draggable?[d]:[]).concat([g]);return Sm.sketch({dom:Pf('<div class="tox-dialog__header"></div>'),components:p})},ls=(t,s,a)=>Yn({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),pa=(t,s,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:Pf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Ra=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{Yr.setBusy(t(),(d,g)=>pa(l.message,g,s))},onUnblock:()=>{Yr.setIdle(t())}}),Hv=(t,s,a,l)=>{const d=(g,p)=>O.some(p);return Sr(pe({...t,firstTabstop:1,lazySink:l.shared.getSink,extraBehaviours:[Du.config({channel:`${f}-${t.id}`,updateState:d,initialData:s}),ku.memory({}),...t.extraBehaviours],onEscape:g=>{lo(g,ob)},dialogEvents:a,eventOrder:{[pu()]:[Du.name(),Vc.name()],[Pc()]:["scroll-lock",Du.name(),"messages","dialog-events","alloy.base.behaviour"],[am()]:["alloy.base.behaviour","dialog-events","messages",Du.name(),"scroll-lock"]}}))},wb=(t,s={})=>{const a=l=>{const d=ke(l.items,g=>{const p=Qe(s,g.name).getOr(Lt(!1));return{...g,storage:p}});return{...l,items:d}};return ke(t,l=>l.type==="menu"?a(l):l)},xD=t=>fn(t,(s,a)=>a.type==="menu"?fn(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),Y6=(t,s)=>[ry(ki(),KB),t(lv,(a,l,d,g)=>{pd(Jr(g.element)).fold(ee,Va),s.onClose(),l.onClose()}),t(ob,(a,l,d,g)=>{l.onCancel(a),lo(g,lv)}),Pe(_3,(a,l)=>s.onUnblock()),Pe(qx,(a,l)=>s.onBlock(l.event))],wt={initUrlDialog:(t,s)=>{const a=(d,g)=>Pe(d,(p,C)=>{l(p,(S,k)=>{g(t(),S,C.event,p)})}),l=(d,g)=>{Du.getState(d).get().each(p=>{g(p,d)})};return[...Y6(a,s),a(xm,(d,g,p)=>{g.onAction(d,{name:p.name})})]},initDialog:(t,s,a)=>{const l=(g,p)=>Pe(g,(C,S)=>{d(C,(k,D)=>{p(t(),k,S.event,C)})}),d=(g,p)=>{Du.getState(g).get().each(C=>{p(C.internalDialog,g)})};return[...Y6(l,s),l(hC,(g,p)=>p.onSubmit(g)),l(si,(g,p,C)=>{p.onChange(g,{name:C.name})}),l(xm,(g,p,C,S)=>{const k=()=>Pt.focusIn(S),D=H=>eh(H,"disabled")||Ds(H,"aria-disabled").exists(Z=>Z==="true"),B=Jr(S.element),P=pd(B);p.onAction(g,{name:C.name,value:C.value}),pd(B).fold(k,H=>{D(H)||P.exists(Z=>Sa(H,Z)&&D(Z))?k():a().toOptional().filter(Z=>!Sa(Z.element,H)).each(k)})}),l(eB,(g,p,C)=>{p.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),Ai(g=>{const p=t();ut.setValue(g,p.getData())})]}},dn=(t,s)=>EE(t,t.type,s),er=(t,s,a)=>Me(s,l=>l.name===a).bind(l=>l.memento.getOpt(t)),Xi=(t,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),l=dc(a,C=>C.align==="start"),d=(C,S)=>Sm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:ke(S,k=>k.memento.asSpec())}),g=d("start",l.pass),p=d("end",l.fail);return[g,p]},dl=(t,s,a)=>{const l=(d,g)=>{const p=ke(g.buttons,S=>{const k=yo(dn(S,a));return{name:S.name,align:S.align,memento:k}}),C=S=>er(d,p,S);return O.some({lookupByName:C,footerButtons:p})};return{dom:Pf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Xe([Du.config({channel:`${T}-${s}`,initialData:t,updateState:l,renderComponents:Xi})])}},ml=(t,s,a)=>dl(t,s,a),KC=(t,s,a)=>Yr.parts.footer(dl(t,s,a)),Uc=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=En.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return bv.getField(l,s).orThunk(()=>{const d=t.getFooter();return Du.getState(d).get().bind(p=>p.lookupByName(s))})}else return O.none()},J6=(t,s)=>{const a=t.getRoot();return Du.getState(a).get().map(l=>co(bo("data",l.dataValidator,s))).getOr(s)},Q6=(t,s,a)=>{const l=Z=>{const J=t.getRoot();J.getSystem().isConnected()&&Z(J)},H={getData:()=>{const Z=t.getRoot(),J=Z.getSystem().isConnected()?t.getFormWrapper():Z,ge=ut.getValue(J),ie=Mo(a,re=>re.get());return{...ge,...ie}},setData:Z=>{l(J=>{const ge=H.getData(),ie=Lo(ge,Z),re=J6(t,ie),Ee=t.getFormWrapper();ut.setValue(Ee,re),Is(a,(Re,tt)=>{Qn(ie,tt)&&Re.set(ie[tt])})})},setEnabled:(Z,J)=>{Uc(t,Z).each(J?zt.enable:zt.disable)},focus:Z=>{Uc(t,Z).each(Zt.focus)},block:Z=>{if(!$e(Z))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(J=>{Mt(J,qx,{message:Z})})},unblock:()=>{l(Z=>{lo(Z,_3)})},showTab:Z=>{l(J=>{const ge=t.getBody();Du.getState(ge).get().exists(re=>re.isTabPanel())&&En.getCurrent(ge).each(re=>{If.showTab(re,Z)})})},redial:Z=>{l(J=>{const ge=t.getId(),ie=s(Z),re=wb(ie.internalDialog.buttons,a);J.getSystem().broadcastOn([`${f}-${ge}`],ie),J.getSystem().broadcastOn([`${b}-${ge}`],ie.internalDialog),J.getSystem().broadcastOn([`${y}-${ge}`],ie.internalDialog),J.getSystem().broadcastOn([`${T}-${ge}`],{...ie.internalDialog,buttons:re}),H.setData(ie.initialData)})},close:()=>{l(Z=>{lo(Z,lv)})},toggleFullscreen:t.toggleFullscreen};return H},uZ=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},Mj=(t,s,a)=>{const l=pt("dialog"),d=t.internalDialog,g=ls(d.title,l,a),p=G({body:d.body,initialData:d.initialData},l,a),C=wb(d.buttons),S=xD(C),k=KC({buttons:C},l,a),D=wt.initDialog(()=>J,Ra(()=>H,a.shared.providers,s),a.shared.getSink),B=uZ(d.size),P={id:l,header:g,body:p,footer:O.some(k),extraClasses:B,extraBehaviours:[],extraStyles:{}},H=Hv(P,t,D,a),Z=(()=>{const ge=()=>{const re=Yr.getBody(H);return En.getCurrent(re).getOr(re)},ie=()=>{const re="tox-dialog--fullscreen",Ee=ue.fromDom(H.element.dom);as(Ee,re)?(Oo(Ee,re),id(Ee,B)):(Sl(Ee,B),wr(Ee,re))};return{getId:q(l),getRoot:q(H),getBody:()=>Yr.getBody(H),getFooter:()=>Yr.getFooter(H),getFormWrapper:ge,toggleFullscreen:ie}})(),J=Q6(Z,s.redial,S);return{dialog:H,instanceApi:J}},iG=(t,s,a,l)=>{const d=pt("dialog"),g=pt("dialog-label"),p=pt("dialog-content"),C=t.internalDialog,S=(Ee,Re)=>O.some(Re),k=yo(Ft({title:C.title,draggable:!0},d,g,a.shared.providers)),D=yo(I({body:C.body,initialData:C.initialData},d,p,a,l)),B=wb(C.buttons),P=xD(B),H=yo(ml({buttons:B},d,a)),Z=wt.initDialog(()=>re,{onBlock:Ee=>{_m.block(ge,(Re,tt)=>pa(Ee.message,tt,a.shared.providers))},onUnblock:()=>{_m.unblock(ge)},onClose:()=>s.closeWindow()},a.shared.getSink),J="tox-dialog-inline",ge=Sr({dom:{tag:"div",classes:["tox-dialog",J],attributes:{role:"dialog",["aria-labelledby"]:g}},eventOrder:{[pu()]:[Du.name(),Vc.name()],[Cl()]:["execute-on-form"],[Pc()]:["reflecting","execute-on-form"]},behaviours:Xe([Pt.config({mode:"cyclic",onEscape:Ee=>(lo(Ee,lv),O.some(!0)),useTabstopAt:Ee=>!Zi(Ee)&&(_c(Ee)!=="button"||zr(Ee,"disabled")!=="disabled"),firstTabstop:1}),Du.config({channel:`${f}-${d}`,updateState:S,initialData:t}),Zt.config({}),hn("execute-on-form",Z.concat([Eh(ki(),(Ee,Re)=>{Pt.focusIn(Ee)})])),_m.config({getRoot:()=>O.some(ge)}),nn.config({}),ku.memory({})]),components:[k.asSpec(),D.asSpec(),H.asSpec()]}),ie=()=>{const Ee="tox-dialog--fullscreen",Re=ue.fromDom(ge.element.dom);jl(Re,[Ee])?(Sl(Re,[Ee]),id(Re,[J])):(Sl(Re,[J]),id(Re,[Ee]))},re=Q6({getId:q(d),getRoot:q(ge),getFooter:()=>H.get(ge),getBody:()=>D.get(ge),getFormWrapper:()=>{const Ee=D.get(ge);return En.getCurrent(Ee).getOr(Ee)},toggleFullscreen:ie},s.redial,P);return{dialog:ge,instanceApi:re}};var dZ=tinymce.util.Tools.resolve("tinymce.util.URI");const uG=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!$e(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{Mt(C,qx,{message:p})})},unblock:()=>{s(p=>{lo(p,_3)})},close:()=>{s(p=>{lo(p,lv)})},sendMessage:p=>{s(C=>{C.getSystem().broadcastOn([N],p)})}}},dG=["insertContent","setContent","execCommand","close","block","unblock"],Nj=t=>Ht(t)&&dG.indexOf(t.mceAction)!==-1,mG=t=>!Nj(t)&&Ht(t)&&Qn(t,"mceAction"),fG=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=_o(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},gG=(t,s,a,l)=>{const d=pt("dialog"),g=ls(t.title,d,l),p=X(t),C=t.buttons.bind(re=>re.length===0?O.none():O.some(KC({buttons:re},d,l))),S=wt.initUrlDialog(()=>ie,Ra(()=>ge,l.shared.providers,s)),k={...t.height.fold(()=>({}),re=>({height:re+"px","max-height":re+"px"})),...t.width.fold(()=>({}),re=>({width:re+"px","max-width":re+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new dZ(t.url,{base_uri:new dZ(window.location.href)}),P=`${B.protocol}://${B.host}${B.port?":"+B.port:""}`,H=Mi(),Z=[hn("messages",[rs(()=>{const re=za(ue.fromDom(window),"message",Ee=>{if(B.isSameOrigin(new dZ(Ee.raw.origin))){const Re=Ee.raw.data;Nj(Re)?fG(a,ie,Re):mG(Re)&&t.onMessage(ie,Re)}});H.set(re)}),Ai(H.clear)]),Vc.config({channels:{[N]:{onReceive:(re,Ee)=>{lr(re.element,"iframe").each(Re=>{const tt=Re.dom.contentWindow;Fs(tt)&&tt.postMessage(Ee,P)})}}}})],ge=Hv({id:d,header:g,body:p,footer:C,extraClasses:D,extraBehaviours:Z,extraStyles:k},t,S,l),ie=uG(ge);return{dialog:ge,instanceApi:ie}},hG=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{Yr.hide(k),d()},p=yo(EE({name:"close-alert",text:"OK",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"cancel",t)),C=VT(),S=HT(g,s.providers),k=Sr(pe({lazySink:()=>s.getSink(),header:qC(C,S),body:SD(l,s.providers),footer:O.some(Vd(Cb([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Pe(ob,g)],eventOrder:{}}));Yr.show(k);const D=p.get(k);Zt.focus(D)}}},pG=t=>{const s=t.shared;return{open:(l,d)=>{const g=P=>{Yr.hide(D),d(P)},p=yo(EE({name:"yes",text:"Yes",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"submit",t)),C=EE({name:"no",text:"No",primary:!1,buttonType:O.some("secondary"),align:"end",enabled:!0,icon:O.none()},"cancel",t),S=VT(),k=HT(()=>g(!1),s.providers),D=Sr(pe({lazySink:()=>s.getSink(),header:qC(S,k),body:SD(l,s.providers),footer:O.some(Vd(Cb([],[C,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Pe(ob,()=>g(!1)),Pe(hC,()=>g(!0))],eventOrder:{}}));Yr.show(D);const B=p.get(D);Zt.focus(B)}}},bG=(t,s)=>co(bo("data",s,t)),vG=t=>zi(t,".tox-alert-dialog")||zi(t,".tox-confirm-dialog"),yG=(t,s,a)=>s&&a?[]:[Ir.config({contextual:{lazyContext:()=>O.some(M(ue.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>mC(t,l.element).map(g=>({bounds:Gx(g),optScrollEnv:O.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:xa(g.element).top})})).getOrThunk(()=>({bounds:Ze(),optScrollEnv:O.none()}))})],CG=t=>{const s=t.editor,a=G1(s),l=hG(t.backstages.dialog),d=pG(t.backstages.dialog),g=(H,Z,J)=>Z!==void 0&&Z.inline==="toolbar"?k(H,t.backstages.popup.shared.anchors.inlineDialog(),J,Z.ariaAttrs):Z!==void 0&&Z.inline==="cursor"?k(H,t.backstages.popup.shared.anchors.cursor(),J,Z.ariaAttrs):S(H,J),p=(H,Z)=>C(H,Z),C=(H,Z)=>{const J=ge=>{const ie=gG(ge,{closeWindow:()=>{Yr.hide(ie.dialog),Z(ie.instanceApi)}},s,t.backstages.dialog);return Yr.show(ie.dialog),ie.instanceApi};return Ap.openUrl(J,H)},S=(H,Z)=>{const J=(ge,ie,re)=>{const Ee=ie,tt=Mj({dataValidator:re,initialData:Ee,internalDialog:ge},{redial:Ap.redial,closeWindow:()=>{Yr.hide(tt.dialog),Z(tt.instanceApi)}},t.backstages.dialog);return Yr.show(tt.dialog),tt.instanceApi.setData(Ee),tt.instanceApi};return Ap.open(J,H)},k=(H,Z,J,ge=!1)=>{const ie=(re,Ee,Re)=>{const tt=bG(Ee,Re),Le=Fo(),rt=t.backstages.popup.shared.header.isPositionedAtTop(),Dt={dataValidator:Re,initialData:tt,internalDialog:re},Nn=()=>Le.on($n=>{ur.reposition($n),Ir.refresh($n)}),xt=iG(Dt,{redial:Ap.redial,closeWindow:()=>{Le.on(ur.hide),s.off("ResizeEditor",Nn),Le.clear(),J(xt.instanceApi)}},t.backstages.popup,ge),An=Sr(ur.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...rt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Xe([hn("window-manager-inline-events",[Pe(cm(),($n,en)=>{lo(xt.dialog,ob)})]),...yG(s,a,rt)]),isExtraPart:($n,en)=>vG(en)}));Le.set(An);const pn=()=>{const $n=s.inline?Nr():ue.fromDom(s.getContainer()),en=M($n);return O.some(en)};return ur.showWithinBounds(An,Gl(xt.dialog),{anchor:Z},pn),(!a||!rt)&&(Ir.refresh(An),s.on("ResizeEditor",Nn)),xt.instanceApi.setData(tt),Pt.focusIn(xt.dialog),xt.instanceApi};return Ap.open(ie,H)};return{open:g,openUrl:p,alert:(H,Z)=>{l.open(H,Z)},close:H=>{H.close()},confirm:(H,Z)=>{d.open(H,Z)}}},wG=t=>{dx(t),p8(t),o6(t)};var SG=()=>{Wt.add("silver",t=>{wG(t);let s=()=>Ze();const{dialogs:a,popups:l,renderUI:d}=jU(t,{getPopupSinkBounds:()=>s()}),g=async()=>{const S=await d();return mC(t,l.getMothership().element).each(D=>{s=()=>Gx(D)}),S};Y8.register(t,l.backstage.shared);const p=CG({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),C=()=>ux(t,{backstage:l.backstage},l.getMothership());return{renderUI:g,getWindowManagerImpl:q(p),getNotificationManagerImpl:C}})};SG()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var qe=tinymce.util.Tools.resolve("tinymce.ModelManager");const on=(i,m,h)=>{var v;return h(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},qt=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&on(i,String,(h,v)=>v.isPrototypeOf(h))?"string":m},Rn=i=>m=>qt(m)===i,Un=i=>m=>typeof m===i,Fn=i=>m=>i===m,Kt=Rn("string"),$e=Rn("object"),Ht=Rn("array"),Zs=Fn(null),To=Un("boolean"),As=Fn(void 0),_o=i=>i==null,Wo=i=>!_o(i),qo=Un("function"),Fs=Un("number"),at=()=>{},tr=(i,m)=>(...h)=>i(m.apply(null,h)),Ut=(i,m)=>h=>i(m(h)),ee=i=>()=>i,On=i=>i,Za=(i,m)=>i===m;function Bn(i,...m){return(...h)=>{const v=m.concat(h);return i.apply(null,v)}}const q=i=>m=>!i(m),mn=i=>()=>{throw new Error(i)},xo=i=>i(),It=ee(!1),Oe=ee(!0);class oe{constructor(m,h){this.tag=m,this.value=h}static some(m){return new oe(!0,m)}static none(){return oe.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?oe.some(m(this.value)):oe.none()}bind(m){return this.tag?m(this.value):oe.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:oe.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Wo(m)?oe.some(m):oe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}oe.singletonNone=new oe(!1);const Os=Array.prototype.slice,jn=Array.prototype.indexOf,Ot=Array.prototype.push,O=(i,m)=>jn.call(i,m),io=(i,m)=>O(i,m)>-1,Te=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const x=i[h];if(m(x,h))return!0}return!1},ht=(i,m)=>{const h=[];for(let v=0;v<i;v++)h.push(m(v));return h},$t=(i,m)=>{const h=i.length,v=new Array(h);for(let x=0;x<h;x++){const A=i[x];v[x]=m(A,x)}return v},Be=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const x=i[h];m(x,h)}},Tn=(i,m)=>{for(let h=i.length-1;h>=0;h--){const v=i[h];m(v,h)}},ko=(i,m)=>{const h=[],v=[];for(let x=0,A=i.length;x<A;x++){const $=i[x];(m($,x)?h:v).push($)}return{pass:h,fail:v}},Gn=(i,m)=>{const h=[];for(let v=0,x=i.length;v<x;v++){const A=i[v];m(A,v)&&h.push(A)}return h},Dn=(i,m,h)=>(Tn(i,(v,x)=>{h=m(h,v,x)}),h),ke=(i,m,h)=>(Be(i,(v,x)=>{h=m(h,v,x)}),h),De=(i,m,h)=>{for(let v=0,x=i.length;v<x;v++){const A=i[v];if(m(A,v))return oe.some(A);if(h(A,v))break}return oe.none()},L=(i,m)=>De(i,m,It),dc=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const x=i[h];if(m(x,h))return oe.some(h)}return oe.none()},qn=i=>{const m=[];for(let h=0,v=i.length;h<v;++h){if(!Ht(i[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+i);Ot.apply(m,i[h])}return m},Ro=(i,m)=>qn($t(i,m)),fn=(i,m)=>{for(let h=0,v=i.length;h<v;++h){const x=i[h];if(m(x,h)!==!0)return!1}return!0},Fu=i=>{const m=Os.call(i,0);return m.reverse(),m},Me=(i,m)=>{const h={};for(let v=0,x=i.length;v<x;v++){const A=i[v];h[String(A)]=m(A,v)}return h},Ie=(i,m)=>{const h=Os.call(i,0);return h.sort(m),h},He=(i,m)=>m>=0&&m<i.length?oe.some(i[m]):oe.none(),me=i=>He(i,0),ro=i=>He(i,i.length-1),Zo=(i,m)=>{for(let h=0;h<i.length;h++){const v=m(i[h],h);if(v.isSome())return v}return oe.none()},Ct=Object.keys,fr=Object.hasOwnProperty,Eo=(i,m)=>{const h=Ct(i);for(let v=0,x=h.length;v<x;v++){const A=h[v],$=i[A];m($,A)}},mc=(i,m)=>Jo(i,(h,v)=>({k:v,v:m(h,v)})),Jo=(i,m)=>{const h={};return Eo(i,(v,x)=>{const A=m(v,x);h[A.k]=A.v}),h},Hr=i=>(m,h)=>{i[h]=m},Zc=(i,m,h,v)=>{Eo(i,(x,A)=>{(m(x,A)?h:v)(x,A)})},Ma=(i,m)=>{const h={};return Zc(i,m,Hr(h),at),h},gr=(i,m)=>{const h=[];return Eo(i,(v,x)=>{h.push(m(v,x))}),h},Qo=i=>gr(i,On),Dm=(i,m)=>Is(i,m)?oe.from(i[m]):oe.none(),Is=(i,m)=>fr.call(i,m),Mo=(i,m)=>Is(i,m)&&i[m]!==void 0&&i[m]!==null,Rm=i=>{for(const m in i)if(fr.call(i,m))return!1;return!0},In=typeof window<"u"?window:Function("return this;")(),Na=(i,m)=>{let h=m??In;for(let v=0;v<i.length&&h!==void 0&&h!==null;++v)h=h[i[v]];return h},hr=(i,m)=>{const h=i.split(".");return Na(h,m)},mi=(i,m)=>hr(i,m),Iu=(i,m)=>{const h=mi(i,m);if(h==null)throw new Error(i+" not available on this browser");return h},bs=Object.getPrototypeOf,Mm=i=>Iu("HTMLElement",i),Qe=i=>{const m=hr("ownerDocument.defaultView",i);return $e(i)&&(Mm(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(bs(i).constructor.name))},Qn=8,ba=9,va=11,Ol=1,Dl=3,Ko=i=>i.dom.nodeName.toLowerCase(),Ji=i=>i.dom.nodeType,Tc=i=>m=>Ji(m)===i,No=i=>Ji(i)===Qn||Ko(i)==="#comment",tn=i=>Vr(i)&&Qe(i.dom),Vr=Tc(Ol),Qi=Tc(Dl),Lu=Tc(ba),Hu=Tc(va),is=i=>m=>Vr(m)&&Ko(m)===i,Dr=(i,m,h)=>{if(Kt(h)||To(h)||Fs(h))i.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",i),new Error("Attribute value was not simple")},ms=(i,m,h)=>{Dr(i.dom,m,h)},Rr=(i,m)=>{const h=i.dom;Eo(m,(v,x)=>{Dr(h,x,v)})},eu=(i,m)=>{Eo(m,(h,v)=>{h.fold(()=>{vs(i,v)},x=>{Dr(i.dom,v,x)})})},Mr=(i,m)=>{const h=i.dom.getAttribute(m);return h===null?void 0:h},fc=(i,m)=>oe.from(Mr(i,m)),vs=(i,m)=>{i.dom.removeAttribute(m)},ya=i=>ke(i.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),fi=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const x="HTML does not have a single root node";throw console.error(x,i),new Error(x)}return Rl(v.childNodes[0])},Vf=(i,m)=>{const v=(m||document).createElement(i);return Rl(v)},tu=(i,m)=>{const v=(m||document).createTextNode(i);return Rl(v)},Rl=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},ue={fromHtml:fi,fromTag:Vf,fromText:tu,fromDom:Rl,fromPoint:(i,m,h)=>oe.from(i.dom.elementFromPoint(m,h)).map(Rl)},Ca=(i,m)=>{const h=i.dom;if(h.nodeType!==Ol)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Ml=i=>i.nodeType!==Ol&&i.nodeType!==ba&&i.nodeType!==va||i.childElementCount===0,gi=(i,m)=>{const h=m===void 0?document:m.dom;return Ml(h)?[]:$t(h.querySelectorAll(i),ue.fromDom)},Nm=(i,m)=>{const h=m===void 0?document:m.dom;return Ml(h)?oe.none():oe.from(h.querySelector(i)).map(ue.fromDom)},Bo=(i,m)=>i.dom===m.dom,zf=(i,m)=>{const h=i.dom,v=m.dom;return h===v?!1:h.contains(v)},Np=Ca,Nl=i=>ue.fromDom(i.dom.ownerDocument),zu=i=>Lu(i)?i:Nl(i),es=i=>ue.fromDom(zu(i).dom.documentElement),jo=i=>ue.fromDom(zu(i).dom.defaultView),Bl=i=>oe.from(i.dom.parentNode).map(ue.fromDom),_c=i=>oe.from(i.dom.parentElement).map(ue.fromDom),hi=(i,m)=>{const h=qo(m)?m:It;let v=i.dom;const x=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const A=v.parentNode,$=ue.fromDom(A);if(x.push($),h($)===!0)break;v=A}return x},Uu=i=>oe.from(i.dom.previousSibling).map(ue.fromDom),pi=i=>oe.from(i.dom.nextSibling).map(ue.fromDom),po=i=>$t(i.dom.childNodes,ue.fromDom),wa=(i,m)=>{const h=i.dom.childNodes;return oe.from(h[m]).map(ue.fromDom)},Bm=i=>wa(i,0),bi=(i,m)=>{Bl(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},kc=(i,m)=>{pi(i).fold(()=>{Bl(i).each(x=>{fs(x,m)})},v=>{bi(v,m)})},Ls=(i,m)=>{Bm(i).fold(()=>{fs(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},fs=(i,m)=>{i.dom.appendChild(m.dom)},Bp=(i,m,h)=>{wa(i,h).fold(()=>{fs(i,m)},v=>{bi(v,m)})},Uf=(i,m)=>{bi(i,m),fs(m,i)},Ao=(i,m)=>{Be(m,(h,v)=>{const x=v===0?i:m[v-1];kc(x,h)})},Sa=(i,m)=>{Be(m,h=>{fs(i,h)})},ja=i=>{i.dom.textContent="",Be(po(i),m=>{nr(m)})},nr=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},$m=i=>{const m=po(i);m.length>0&&Ao(i,m),nr(i)},fl=(i,m)=>ue.fromDom(i.dom.cloneNode(m)),Ac=i=>fl(i,!1),Ba=i=>fl(i,!0),Jg=(i,m)=>{const h=ue.fromTag(m),v=ya(i);return Rr(h,v),h},Wf=(i,m)=>{const h=Jg(i,m),v=po(Ba(i));return Sa(h,v),h},Pm=(i,m)=>{const h=Jg(i,m);kc(i,h);const v=po(i);return Sa(h,v),nr(i),h},Oc=["tfoot","thead","tbody","colgroup"],gl=i=>io(Oc,i),Zf=(i,m)=>({rows:i,columns:m}),hl=(i,m)=>({row:i,column:m}),Zd=(i,m,h)=>({element:i,rowspan:m,colspan:h}),Fm=(i,m,h,v)=>({element:i,rowspan:m,colspan:h,isNew:v}),Wu=(i,m,h,v,x,A)=>({element:i,rowspan:m,colspan:h,row:v,column:x,isLocked:A}),Im=(i,m,h)=>({element:i,cells:m,section:h}),Jr=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),js=(i,m,h)=>({element:i,isNew:m,isLocked:h}),nu=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),jd=(i,m,h,v)=>({startRow:i,startCol:m,finishRow:h,finishCol:v}),jf=(i,m,h)=>({element:i,colspan:m,column:h}),jc=(i,m)=>({element:i,columns:m}),Qg=i=>Hu(i)&&Wo(i.dom.host),$a=qo(Element.prototype.attachShadow)&&qo(Node.prototype.getRootNode),Nr=ee($a),Gc=$a?i=>ue.fromDom(i.dom.getRootNode()):zu,vi=i=>{const m=Gc(i);return Qg(m)?oe.some(m):oe.none()},gn=i=>ue.fromDom(i.dom.host),Kn=i=>{if(Nr()&&Wo(i.target)){const m=ue.fromDom(i.target);if(Vr(m)&&zr(m)&&i.composed&&i.composedPath){const h=i.composedPath();if(h)return me(h)}}return oe.from(i.target)},zr=i=>Wo(i.dom.shadowRoot),Ds=i=>{const m=Qi(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return vi(ue.fromDom(m)).fold(()=>h.body.contains(m),Ut(Ds,gn))},eh=()=>ws(ue.fromDom(document)),ws=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return ue.fromDom(m)},$p=(i,m,h)=>Gn(hi(i,h),m),ou=(i,m)=>Gn(po(i),m),Qr=(i,m)=>{let h=[];return Be(po(i),v=>{m(v)&&(h=h.concat([v])),h=h.concat(Qr(v,m))}),h},Xt=(i,m,h)=>$p(i,v=>Ca(v,m),h),pl=(i,m)=>ou(i,h=>Ca(h,m)),Dc=(i,m)=>gi(m,i);var Ve=(i,m,h,v,x)=>i(h,v)?oe.some(h):qo(x)&&x(h)?oe.none():m(h,v,x);const qc=(i,m,h)=>{let v=i.dom;const x=qo(h)?h:It;for(;v.parentNode;){v=v.parentNode;const A=ue.fromDom(v);if(m(A))return oe.some(A);if(x(A))break}return oe.none()},Gs=(i,m,h)=>Ve((x,A)=>A(x),qc,i,m,h),ea=(i,m)=>{const h=x=>m(ue.fromDom(x));return L(i.dom.childNodes,h).map(ue.fromDom)},Lm=(i,m)=>{const h=v=>{for(let x=0;x<v.childNodes.length;x++){const A=ue.fromDom(v.childNodes[x]);if(m(A))return oe.some(A);const $=h(v.childNodes[x]);if($.isSome())return $}return oe.none()};return h(i.dom)},Ln=(i,m,h)=>qc(i,v=>Ca(v,m),h),yi=(i,m)=>ea(i,h=>Ca(h,m)),su=(i,m)=>Nm(m,i),qs=(i,m,h)=>Ve((x,A)=>Ca(x,A),Ln,i,m,h),ys=(i,m,h=Za)=>i.exists(v=>h(v,m)),ru=i=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(h);return m},Tb=(i,m)=>i!=null?m(i):oe.none(),Gf=(i,m)=>i?oe.some(m):oe.none(),ts=(i,m,h)=>m===""||i.length>=m.length&&i.substr(h,h+m.length)===m,Ga=(i,m,h=0,v)=>{const x=i.indexOf(m,h);return x!==-1?As(v)?!0:x+m.length<=v:!1},qa=(i,m)=>ts(i,m,0),xa=(i,m)=>ts(i,m,i.length-m.length),Pl=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),Io=i=>i.length>0,or=i=>{const m=parseFloat(i);return isNaN(m)?oe.none():oe.some(m)},Ur=i=>i.style!==void 0&&qo(i.style.getPropertyValue),Gd=(i,m,h)=>{if(!Kt(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",i),new Error("CSS value must be a string: "+h);Ur(i)&&i.style.setProperty(m,h)},Rc=(i,m)=>{Ur(i)&&i.style.removeProperty(m)},$o=(i,m,h)=>{const v=i.dom;Gd(v,m,h)},sr=(i,m)=>{const h=i.dom;Eo(m,(v,x)=>{Gd(h,x,v)})},Kc=(i,m)=>{const h=i.dom,x=window.getComputedStyle(h).getPropertyValue(m);return x===""&&!Ds(i)?Zu(h,m):x},Zu=(i,m)=>Ur(i)?i.style.getPropertyValue(m):"",Fl=(i,m)=>{const h=i.dom,v=Zu(h,m);return oe.from(v).filter(x=>x.length>0)},Xc=(i,m)=>{const h=i.dom;Rc(h,m),ys(fc(i,"style").map(Pl),"")&&vs(i,"style")},Ss=(i,m)=>{const h=i.dom,v=m.dom;Ur(h)&&Ur(v)&&(v.style.cssText=h.style.cssText)},ta=(i,m,h=0)=>fc(i,m).map(v=>parseInt(v,10)).getOr(h),pr=(i,m)=>ta(i,m,1),Yc=i=>is("col")(i)?ta(i,"span",1)>1:pr(i,"colspan")>1,Ci=i=>pr(i,"rowspan")>1,ao=(i,m)=>parseInt(Kc(i,m),10),gc=ee(10),qd=ee(10),Il=(i,m)=>ju(i,m,Oe),ju=(i,m,h)=>Ro(po(i),v=>Ca(v,m)?h(v)?[v]:[]:ju(v,m,h)),Hm=(i,m,h=It)=>{if(h(m))return oe.none();if(io(i,Ko(m)))return oe.some(m);const v=x=>Ca(x,"table")||h(x);return Ln(m,i.join(","),v)},Ll=(i,m)=>Hm(["td","th"],i,m),Ka=i=>Il(i,"th,td"),au=i=>Ca(i,"colgroup")?pl(i,"col"):Ro(bl(i),m=>pl(m,"col")),Ea=(i,m)=>qs(i,"table",m),Hl=i=>Il(i,"tr"),bl=i=>Ea(i).fold(ee([]),m=>pl(m,"colgroup")),Vm=(i,m)=>$t(i,h=>{if(Ko(h)==="colgroup"){const v=$t(au(h),x=>{const A=ta(x,"span",1);return Zd(x,1,A)});return Im(h,v,"colgroup")}else{const v=$t(Ka(h),x=>{const A=ta(x,"rowspan",1),$=ta(x,"colspan",1);return Zd(x,A,$)});return Im(h,v,m(h))}}),Jc=i=>Bl(i).map(m=>{const h=Ko(m);return gl(h)?h:"tbody"}).getOr("tbody"),zm=i=>{const m=Hl(i),v=[...bl(i),...m];return Vm(v,Jc)},Kd=(i,m)=>Vm(i,()=>m),wi=i=>{let m=!1,h;return(...v)=>(m||(m=!0,h=i.apply(null,v)),h)},Um=(i,m,h,v)=>{const x=i.isiOS()&&/ipad/i.test(h)===!0,A=i.isiOS()&&!x,$=i.isiOS()||i.isAndroid(),z=$||v("(pointer:coarse)"),j=x||!A&&$&&v("(min-device-width:768px)"),Q=A||$&&!j,de=m.isSafari()&&i.isiOS()&&/safari/i.test(h)===!1,ze=!Q&&!j&&!de;return{isiPad:ee(x),isiPhone:ee(A),isTablet:ee(j),isPhone:ee(Q),isTouch:ee(z),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:ee(de),isDesktop:ee(ze)}},Wm=(i,m)=>{for(let h=0;h<i.length;h++){const v=i[h];if(v.test(m))return v}},cu=(i,m)=>{const h=Wm(i,m);if(!h)return{major:0,minor:0};const v=x=>Number(m.replace(h,"$"+x));return Zm(v(1),v(2))},th=(i,m)=>{const h=String(m).toLowerCase();return i.length===0?Y():cu(i,h)},Y=()=>Zm(0,0),Zm=(i,m)=>({major:i,minor:m}),Ta={nu:Zm,detect:th,unknown:Y},qf=(i,m)=>Zo(m.brands,h=>{const v=h.brand.toLowerCase();return L(i,x=>{var A;return v===((A=x.brand)===null||A===void 0?void 0:A.toLowerCase())}).map(x=>({current:x.name,version:Ta.nu(parseInt(h.version,10),0)}))}),Pp=(i,m)=>{const h=String(m).toLowerCase();return L(i,v=>v.search(h))},Fp=(i,m)=>Pp(i,m).map(h=>{const v=Ta.detect(h.versionRegexes,m);return{current:h.name,version:v}}),uo=(i,m)=>Pp(i,m).map(h=>{const v=Ta.detect(h.versionRegexes,m);return{current:h.name,version:v}}),hc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Br=i=>m=>Ga(m,i),Vl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>Ga(i,"edge/")&&Ga(i,"chrome")&&Ga(i,"safari")&&Ga(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,hc],search:i=>Ga(i,"chrome")&&!Ga(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>Ga(i,"msie")||Ga(i,"trident")},{name:"Opera",versionRegexes:[hc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Br("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Br("firefox")},{name:"Safari",versionRegexes:[hc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(Ga(i,"safari")||Ga(i,"mobile/"))&&Ga(i,"applewebkit")}],Si=[{name:"Windows",search:Br("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>Ga(i,"iphone")||Ga(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Br("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Br("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Br("linux"),versionRegexes:[]},{name:"Solaris",search:Br("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Br("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Br("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Gu={browsers:ee(Vl),oses:ee(Si)},Pa="Edge",jm="Chromium",Xd="IE",Gm="Opera",Qc="Firefox",lu="Safari",nh=()=>Xa({current:void 0,version:Ta.unknown()}),Xa=i=>{const m=i.current,h=i.version,v=x=>()=>m===x;return{current:m,version:h,isEdge:v(Pa),isChromium:v(jm),isIE:v(Xd),isOpera:v(Gm),isFirefox:v(Qc),isSafari:v(lu)}},br={unknown:nh,nu:Xa,edge:ee(Pa),chromium:ee(jm),ie:ee(Xd),opera:ee(Gm),firefox:ee(Qc),safari:ee(lu)},xi="Windows",qu="iOS",Ya="Android",_a="Linux",Kf="macOS",oh="Solaris",Ku="FreeBSD",Yd="ChromeOS",Xf=()=>vl({current:void 0,version:Ta.unknown()}),vl=i=>{const m=i.current,h=i.version,v=x=>()=>m===x;return{current:m,version:h,isWindows:v(xi),isiOS:v(qu),isAndroid:v(Ya),isMacOS:v(Kf),isLinux:v(_a),isSolaris:v(oh),isFreeBSD:v(Ku),isChromeOS:v(Yd)}},qm={unknown:Xf,nu:vl,windows:ee(xi),ios:ee(qu),android:ee(Ya),linux:ee(_a),macos:ee(Kf),solaris:ee(oh),freebsd:ee(Ku),chromeos:ee(Yd)},Ip={detect:(i,m,h)=>{const v=Gu.browsers(),x=Gu.oses(),A=m.bind(j=>qf(v,j)).orThunk(()=>Fp(v,i)).fold(br.unknown,br.nu),$=uo(x,i).fold(qm.unknown,qm.nu),z=Um($,A,i,h);return{browser:A,os:$,deviceType:z}}},Yf=i=>window.matchMedia(i).matches;let Xu=wi(()=>Ip.detect(navigator.userAgent,oe.from(navigator.userAgentData),Yf));const sh=()=>Xu(),zl=(i,m)=>{const h=(z,j)=>{if(!Fs(j)&&!j.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+j);const Q=z.dom;Ur(Q)&&(Q.style[i]=j+"px")},v=z=>{const j=m(z);if(j<=0||j===null){const Q=Kc(z,i);return parseFloat(Q)||0}return j},x=v,A=(z,j)=>ke(j,(Q,de)=>{const ze=Kc(z,de),lt=ze===void 0?0:parseInt(ze,10);return isNaN(lt)?Q:Q+lt},0);return{set:h,get:v,getOuter:x,aggregate:A,max:(z,j,Q)=>{const de=A(z,Q);return j>de?j-de:0}}},_=(i,m)=>or(i).getOr(m),M=(i,m,h)=>_(Kc(i,m),h),V=(i,m,h,v)=>{const x=M(i,`padding-${h}`,0),A=M(i,`padding-${v}`,0),$=M(i,`border-${h}-width`,0),z=M(i,`border-${v}-width`,0);return m-x-A-$-z},te=(i,m)=>{const h=i.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:V(i,v,"left","right")},se=i=>M(i,"height",i.dom.offsetHeight),Ze=i=>M(i,"width",i.dom.offsetWidth),Wt=i=>te(i,"content-box"),rn=zl("width",i=>i.dom.offsetWidth),an=i=>rn.get(i),Qt=i=>rn.getOuter(i),St=Wt,us=Ze,vr=(i,m,h)=>{const v=i.cells,x=v.slice(0,m),A=v.slice(m),$=x.concat(h).concat(A);return rh(i,$)},Lp=(i,m,h)=>vr(i,m,[h]),Jf=(i,m,h)=>{const v=i.cells;v[m]=h},rh=(i,m)=>nu(i.element,m,i.section,i.isNew),ah=(i,m)=>{const h=i.cells,v=$t(h,m);return nu(i.element,v,i.section,i.isNew)},rr=(i,m)=>i.cells[m],ka=(i,m)=>rr(i,m).element,Ja=i=>i.cells.length,na=i=>{const m=ko(i,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},ch=(i,m,h)=>{const v=$t(i.cells,h);return nu(m(i.element),v,i.section,!0)},gs="data-snooker-locked-cols",Qa=i=>fc(i,gs).bind(m=>oe.from(m.match(/\d+/g))).map(m=>Me(m,Oe)),Mc=i=>{const m=ke(na(i).rows,(v,x)=>(Be(x.cells,(A,$)=>{A.isLocked&&(v[$]=!0)}),v),{}),h=gr(m,(v,x)=>parseInt(x,10));return Ie(h)},Km=(i,m)=>i+","+m,Rs=(i,m,h)=>oe.from(i.access[Km(m,h)]),_b=(i,m,h)=>{const v=Hp(i,x=>h(m,x.element));return v.length>0?oe.some(v[0]):oe.none()},Hp=(i,m)=>{const h=Ro(i.all,v=>v.cells);return Gn(h,m)},Lo=i=>{const m={};let h=0;return Be(i.cells,v=>{const x=v.colspan;ht(x,A=>{const $=h+A;m[$]=jf(v.element,x,$)}),h+=x}),m},Ei=i=>{const m={},h=[],x=me(i).map(nt=>nt.element).bind(Ea).bind(Qa).getOr({});let A=0,$=0,z=0;const{pass:j,fail:Q}=ko(i,nt=>nt.section==="colgroup");Be(Q,nt=>{const Ne=[];Be(nt.cells,st=>{let Ae=0;for(;m[Km(z,Ae)]!==void 0;)Ae++;const yt=Mo(x,Ae.toString()),Yt=Wu(st.element,st.rowspan,st.colspan,z,Ae,yt);for(let vn=0;vn<st.colspan;vn++)for(let Yo=0;Yo<st.rowspan;Yo++){const ga=z+Yo,zs=Ae+vn,cl=Km(ga,zs);m[cl]=Yt,$=Math.max($,zs+1)}Ne.push(Yt)}),A++,h.push(Im(nt.element,Ne,nt.section)),z++});const{columns:de,colgroups:ze}=ro(j).map(nt=>{const Ne=Lo(nt);return{colgroups:[jc(nt.element,Qo(Ne))],columns:Ne}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Zf(A,$),access:m,all:h,columns:de,colgroups:ze}},xn={fromTable:i=>{const m=zm(i);return Ei(m)},generate:Ei,getAt:Rs,findItem:_b,filterItems:Hp,justCells:i=>Ro(i.all,m=>m.cells),justColumns:i=>Qo(i.columns),hasColumns:i=>Ct(i.columns).length>0,getColumnAt:(i,m)=>oe.from(i.columns[m])},lh=(i,m=Oe)=>{const h=i.grid,v=ht(h.columns,On),x=ht(h.rows,On);return $t(v,A=>ih(()=>Ro(x,Q=>xn.getAt(i,Q,A).filter(de=>de.column===A).toArray()),Q=>Q.colspan===1&&m(Q.element),()=>xn.getAt(i,0,A)))},ih=(i,m,h)=>{const v=i();return L(v,m).orThunk(()=>oe.from(v[0]).orThunk(h)).map($=>$.element)},Zv=i=>{const m=i.grid,h=ht(m.rows,On),v=ht(m.columns,On);return $t(h,x=>ih(()=>Ro(v,j=>xn.getAt(i,x,j).filter(Q=>Q.row===x).fold(ee([]),Q=>[Q])),j=>j.rowspan===1,()=>xn.getAt(i,x,0)))},nw=(i,m)=>{if(m<0||m>=i.length-1)return oe.none();const h=i[m].fold(()=>{const x=Fu(i.slice(0,m));return Zo(x,(A,$)=>A.map(z=>({value:z,delta:$+1})))},x=>oe.some({value:x,delta:0})),v=i[m+1].fold(()=>{const x=i.slice(m+1);return Zo(x,(A,$)=>A.map(z=>({value:z,delta:$+1})))},x=>oe.some({value:x,delta:1}));return h.bind(x=>v.map(A=>{const $=A.delta+x.delta;return Math.abs(A.value-x.value)/$}))},uh=(i,m)=>h=>Qf(h)==="rtl"?m:i,Qf=i=>Kc(i,"direction")==="rtl"?"rtl":"ltr",jv=zl("height",i=>{const m=i.dom;return Ds(i)?m.getBoundingClientRect().height:m.offsetHeight}),Ti=i=>jv.get(i),Qd=i=>jv.getOuter(i),Gv=se,eg=(i,m)=>({left:i,top:m,translate:(v,x)=>eg(i+v,m+x)}),iu=eg,Vp=i=>{const m=i.getBoundingClientRect();return iu(m.left,m.top)},Ul=(i,m)=>i!==void 0?i:m!==void 0?m:0,Qu=i=>{const m=i.dom.ownerDocument,h=m.body,v=m.defaultView,x=m.documentElement;if(h===i.dom)return iu(h.offsetLeft,h.offsetTop);const A=Ul(v==null?void 0:v.pageYOffset,x.scrollTop),$=Ul(v==null?void 0:v.pageXOffset,x.scrollLeft),z=Ul(x.clientTop,h.clientTop),j=Ul(x.clientLeft,h.clientLeft);return qv(i).translate($-j,A-z)},qv=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?iu(v.offsetLeft,v.offsetTop):Ds(i)?Vp(m):iu(0,0)},dh=(i,m)=>({row:i,y:m}),zp=(i,m)=>({col:i,x:m}),Up=i=>Qu(i).left+Qt(i),Wp=i=>Qu(i).left,Wr=(i,m)=>zp(i,Wp(m)),mh=(i,m)=>zp(i,Up(m)),Ks=i=>Qu(i).top,oa=(i,m)=>dh(i,Ks(m)),Bt=(i,m)=>dh(i,Ks(m)+Qd(m)),dt=(i,m,h)=>{if(h.length===0)return[];const v=$t(h.slice(1),(A,$)=>A.map(z=>i($,z))),x=h[h.length-1].map(A=>m(h.length-1,A));return v.concat([x])},Xm=i=>-i,el={delta:On,positions:i=>dt(oa,Bt,i),edge:Ks},Nc=uh({delta:On,edge:Wp,positions:i=>dt(Wr,mh,i)},{delta:Xm,edge:Up,positions:i=>dt(mh,Wr,i)}),Bc={delta:(i,m)=>Nc(m).delta(i,m),positions:(i,m)=>Nc(m).positions(i,m),edge:i=>Nc(i).edge(i)},Jm={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},hs=(()=>{const i="[0-9]+",h="[eE]"+("[+-]?"+i),v="\\.",x=z=>`(?:${z})?`,$=`[+-]?(?:${["Infinity",i+v+x(i)+x(h),v+i+x(h),i+x(h)].join("|")})`;return new RegExp(`^(${$})(.*)$`)})(),Qm=(i,m)=>Te(m,h=>Te(Jm[h],v=>i===v)),ng=(i,m)=>oe.from(hs.exec(i)).bind(v=>{const x=Number(v[1]),A=v[2];return Qm(A,m)?oe.some({value:x,unit:A}):oe.none()}),je=/(\d+(\.\d+)?)%/,Kv=/(\d+(\.\d+)?)px|em/,Xv=is("col"),pc=(i,m,h)=>{const v=_c(i).getOrThunk(()=>ws(Nl(i)));return m(i)/h(v)*100},ef=(i,m)=>{$o(i,"width",m+"px")},ed=(i,m)=>{$o(i,"width",m+"%")},ds=(i,m)=>{$o(i,"height",m+"px")},kb=i=>Gv(i)+"px",bo=(i,m,h,v)=>{const x=Ea(i).map(A=>{const $=h(A);return Math.floor(m/100*$)}).getOr(m);return v(i,x),x},co=(i,m,h,v)=>{const x=parseFloat(i);return xa(i,"%")&&Ko(m)!=="table"?bo(m,x,h,v):x},sa=i=>{const m=kb(i);return m?co(m,i,Ti,ds):Ti(i)},tf=(i,m,h)=>{const v=h(i),x=pr(i,m);return v/x},Hs=(i,m)=>Fl(i,m).orThunk(()=>fc(i,m).map(h=>h+"px")),em=i=>Hs(i,"width"),yr=i=>Hs(i,"height"),Ia=i=>pc(i,an,St),uu=i=>Xv(i)?an(i):us(i),Ce=i=>tf(i,"rowspan",sa),ec=i=>em(i).bind(h=>ng(h,["fixed","relative","empty"])),Ab=(i,m,h)=>{$o(i,"width",m+h)},ar=i=>an(i)+"px",yl=i=>pc(i,an,St)+"%",fh=i=>em(i).exists(m=>je.test(m)),$c=i=>em(i).exists(m=>Kv.test(m)),Yv=i=>em(i).isNone(),td=ee(je),Zp=is("col"),bc=i=>em(i).getOrThunk(()=>uu(i)+"px"),oo=i=>yr(i).getOrThunk(()=>Ce(i)+"px"),_i=i=>$t(xn.justColumns(i),m=>oe.from(m.element)),og=i=>{const m=sh().browser,h=m.isChromium()||m.isFirefox();return Zp(i)?h:!0},ra=(i,m,h,v,x,A)=>i.filter(v).fold(()=>A(nw(h,m)),$=>x($)),gh=(i,m,h,v)=>{const x=lh(i),A=xn.hasColumns(i)?_i(i):x,$=[oe.some(Bc.edge(m))].concat($t(Bc.positions(x,m),j=>j.map(Q=>Q.x))),z=q(Yc);return $t(A,(j,Q)=>ra(j,Q,$,z,de=>{if(og(de))return h(de);{const ze=Tb(x[Q],On);return ra(ze,Q,$,z,lt=>v(oe.some(an(lt))),v)}},v))},nd=i=>i.map(m=>m+"px").getOr(""),du=(i,m)=>gh(i,m,bc,nd),Ms=(i,m,h)=>gh(i,m,Ia,v=>v.fold(()=>h.minCellWidth(),x=>x/h.pixelWidth()*100)),hh=(i,m,h)=>gh(i,m,uu,v=>v.getOrThunk(h.minCellWidth)),fe=(i,m,h,v,x)=>{const A=Zv(i),$=[oe.some(h.edge(m))].concat($t(h.positions(A,m),z=>z.map(j=>j.y)));return $t(A,(z,j)=>ra(z,j,$,q(Ci),v,x))},aa=(i,m,h)=>fe(i,m,h,Ce,v=>v.getOrThunk(qd)),sg=(i,m,h)=>fe(i,m,h,oo,nd),La=(i,m)=>()=>Ds(i)?m(i):parseFloat(Fl(i,"width").getOr("0")),Ha=i=>{const m=La(i,an),h=ee(0);return{width:m,pixelWidth:m,getWidths:(x,A)=>hh(x,i,A),getCellDelta:h,singleColumnWidth:ee([0]),minCellWidth:h,setElementWidth:at,adjustTableWidth:at,isRelative:!0,label:"none"}},ca=i=>{const m=La(i,j=>parseFloat(yl(j))),h=La(i,an);return{width:m,pixelWidth:h,getWidths:(j,Q)=>Ms(j,i,Q),getCellDelta:j=>j/h()*100,singleColumnWidth:(j,Q)=>[100-j],minCellWidth:()=>gc()/h()*100,setElementWidth:ed,adjustTableWidth:j=>{const Q=m(),de=j/100*Q,ze=Q+de;ed(i,ze)},isRelative:!0,label:"percent"}},xs=i=>{const m=La(i,an);return{width:m,pixelWidth:m,getWidths:($,z)=>hh($,i,z),getCellDelta:On,singleColumnWidth:($,z)=>[Math.max(gc(),$+z)-$],minCellWidth:gc,setElementWidth:ef,adjustTableWidth:$=>{const z=m()+$;ef(i,z)},isRelative:!1,label:"pixel"}},ph=(i,m)=>td().exec(m)!==null?ca(i):xs(i),od={getTableSize:i=>em(i).fold(()=>Ha(i),h=>ph(i,h)),pixelSize:xs,percentageSize:ca,noneSize:Ha},Lt=(i,m,h,v,x,A)=>({minRow:i,minCol:m,maxRow:h,maxCol:v,allCells:x,selectedCells:A}),ow=(i,m)=>{const h=i.grid.columns;let x=i.grid.rows,A=h,$=0,z=0;const j=[],Q=[];return Eo(i.access,de=>{if(j.push(de),m(de)){Q.push(de);const ze=de.row,lt=ze+de.rowspan-1,nt=de.column,Ne=nt+de.colspan-1;ze<x?x=ze:lt>$&&($=lt),nt<A?A=nt:Ne>z&&(z=Ne)}}),Lt(x,A,$,z,j,Q)},w=(i,m,h)=>{const v=i[h].element,x=ue.fromTag("td");fs(x,ue.fromTag("br")),(m?fs:Ls)(v,x)},E=(i,m,h,v)=>{const x=Gn(i,z=>z.section!=="colgroup"),A=m.grid.columns,$=m.grid.rows;for(let z=0;z<$;z++){let j=!1;for(let Q=0;Q<A;Q++)z<h.minRow||z>h.maxRow||Q<h.minCol||Q>h.maxCol||(xn.getAt(m,z,Q).filter(v).isNone()?w(x,j,z):j=!0)}},F=(i,m,h,v)=>{Eo(h.columns,$=>{($.column<m.minCol||$.column>m.maxCol)&&nr($.element)});const x=Gn(Il(i,"tr"),$=>$.dom.childElementCount===0);Be(x,nr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Be(Il(i,"th,td"),$=>{vs($,"rowspan"),vs($,"colspan")}),vs(i,gs),vs(i,"data-snooker-col-series"),od.getTableSize(i).adjustTableWidth(v)},U=(i,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const x=hh(m,i,h),A=ke(x,(Q,de)=>Q+de,0),j=ke(x.slice(v.minCol,v.maxCol+1),(Q,de)=>Q+de,0)/A*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(j)},ne=(i,m)=>{const h=lt=>Ca(lt.element,m),v=Ba(i),x=zm(v),A=od.getTableSize(i),$=xn.generate(x),z=ow($,h),j="th:not("+m+"),td:not("+m+")",Q=ju(v,"th,td",lt=>Ca(lt,j));Be(Q,nr),E(x,$,z,h);const de=xn.fromTable(i),ze=U(i,de,A,z);return F(v,z,$,ze),v},ye=" ",ct=((i,m)=>{const h=A=>{if(!i(A))throw new Error("Can only get "+m+" value of a "+m+" node");return v(A).getOr("")},v=A=>i(A)?oe.from(A.dom.nodeValue):oe.none();return{get:h,getOption:v,set:(A,$)=>{if(!i(A))throw new Error("Can only set raw "+m+" value of a "+m+" node");A.dom.nodeValue=$}}})(Qi,"text"),Vt=i=>ct.get(i),jt=i=>ct.getOption(i),mo=(i,m)=>ct.set(i,m),eo=i=>Ko(i)==="img"?1:jt(i).fold(()=>po(i).length,m=>m.length),ns=i=>jt(i).filter(m=>m.trim().length!==0||m.indexOf(ye)>-1).isSome(),la=i=>tn(i)&&Mr(i,"contenteditable")==="false",tl=["img","br"],mu=i=>ns(i)||io(tl,Ko(i))||la(i),tc=i=>Lm(i,mu),nm=i=>bh(i,mu),bh=(i,m)=>{const h=v=>{const x=po(v);for(let A=x.length-1;A>=0;A--){const $=x[A];if(m($))return oe.some($);const z=h($);if(z.isSome())return z}return oe.none()};return h(i)},om={scope:["row","col"]},sd=i=>()=>{const m=ue.fromTag("td",i.dom);return fs(m,ue.fromTag("br",i.dom)),m},Vs=i=>()=>ue.fromTag("col",i.dom),nl=i=>()=>ue.fromTag("colgroup",i.dom),fu=i=>()=>ue.fromTag("tr",i.dom),sm=(i,m,h)=>{const v=Wf(i,m);return Eo(h,(x,A)=>{x===null?vs(v,A):ms(v,A,x)}),v},Ob=i=>i,Sn=(i,m,h)=>tc(i).map(x=>{const A=h.join(","),$=Xt(x,A,z=>Bo(z,i));return Dn($,(z,j)=>{const Q=Ac(j);return fs(z,Q),Q},m)}).getOr(m),os=(i,m)=>{Eo(om,(h,v)=>fc(i,v).filter(x=>io(h,x)).each(x=>ms(m,v,x)))},Zr=(i,m,h)=>{const v=($,z)=>{Ss($.element,z),Xc(z,"height"),$.colspan!==1&&Xc(z,"width")},x=$=>{const z=ue.fromTag(Ko($.element),m.dom),j=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Q=j.length>0?Sn($.element,z,j):z;return fs(Q,ue.fromTag("br")),v($,z),os($.element,z),i($.element,z),z};return{col:$=>{const z=ue.fromTag(Ko($.element),m.dom);return v($,z),i($.element,z),z},colgroup:nl(m),row:fu(m),cell:x,replace:sm,colGap:Vs(m),gap:sd(m)}},Es=i=>({col:Vs(i),colgroup:nl(i),row:fu(i),cell:sd(i),replace:Ob,colGap:Vs(i),gap:sd(i)}),gu=(i,m)=>{const v=(m||document).createElement("div");return v.innerHTML=i,po(ue.fromDom(v))},ki=i=>$t(i,ue.fromDom),Wl=i=>m=>m.options.get(i),vc="100%",sw=i=>{var m;const h=i.dom,v=(m=h.getParent(i.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:i.getBody();return St(ue.fromDom(v))+"px"},nf=(i,m)=>pu(i)||!Ch(i)?m:hu(i)?{...m,width:sw(i)}:{...m,width:vc},vh=(i,m)=>pu(i)||Ch(i)?m:hu(i)?{...m,width:sw(i)}:{...m,width:vc},Zl=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=io(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=io(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},rw=i=>oe.from(i.options.get("table_clone_elements")),jp=i=>{const m=i.options.get("object_resizing");return io(m.split(","),"table")},Jv=Wl("table_header_type"),Qv=Wl("table_column_resizing"),Ns=i=>Qv(i)==="preservetable",aw=i=>Qv(i)==="resizetable",rd=Wl("table_sizing_mode"),yh=i=>rd(i)==="relative",hu=i=>rd(i)==="fixed",pu=i=>rd(i)==="responsive",Cl=Wl("table_resize_bars"),Ch=Wl("table_style_by_css"),Gp=Wl("table_merge_content_on_paste"),Cr=i=>{const m=i.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:vh(i,h)},of=i=>{const m=i.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:nf(i,h)},ey=Wl("table_use_colgroups"),rg=i=>qs(i,"[contenteditable]"),wh=(i,m=!1)=>Ds(i)?i.dom.isContentEditable:rg(i).fold(ee(m),h=>ty(h)==="true"),ty=i=>i.dom.contentEditable,ag=i=>ue.fromDom(i.getBody()),rm=i=>m=>Bo(m,ag(i)),Pc=i=>{vs(i,"data-mce-style");const m=h=>vs(h,"data-mce-style");Be(Ka(i),m),Be(au(i),m),Be(Hl(i),m)},am=i=>ue.fromDom(i.selection.getStart()),cm=i=>i.getBoundingClientRect().width,ny=i=>i.getBoundingClientRect().height,cw=(i,m)=>{const h=i.dom.getStyle(m,"width")||i.dom.getAttrib(m,"width");return oe.from(h).filter(Io)},qp=i=>/^(\d+(\.\d+)?)%$/.test(i),Kp=i=>/^(\d+(\.\d+)?)px$/.test(i),Sh=i=>Gs(i,is("table")).exists(wh),sf=(i,m)=>{const h=m.column,v=m.column+m.colspan-1,x=m.row,A=m.row+m.rowspan-1;return h<=i.finishCol&&v>=i.startCol&&x<=i.finishRow&&A>=i.startRow},lw=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,Db=(i,m)=>{let h=!0;const v=Bn(lw,m);for(let x=m.startRow;x<=m.finishRow;x++)for(let A=m.startCol;A<=m.finishCol;A++)h=h&&xn.getAt(i,x,A).exists(v);return h?oe.some(m):oe.none()},lo=(i,m)=>jd(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),Mt=(i,m,h)=>{const v=xn.findItem(i,m,Bo),x=xn.findItem(i,h,Bo);return v.bind(A=>x.map($=>lo(A,$)))},rf=(i,m,h)=>Mt(i,m,h).bind(v=>Db(i,v)),oy=(i,m,h,v)=>xn.findItem(i,m,Bo).bind(x=>{const A=h>0?x.row+x.rowspan-1:x.row,$=v>0?x.column+x.colspan-1:x.column;return xn.getAt(i,A+h,$+v).map(j=>j.element)}),Xp=(i,m,h)=>Mt(i,m,h).map(v=>{const x=xn.filterItems(i,Bn(sf,v));return $t(x,A=>A.element)}),iw=(i,m)=>{const h=(v,x)=>zf(x,v);return xn.findItem(i,m,h).map(v=>v.element)},sy=(i,m,h)=>Ea(i).bind(v=>{const x=xh(v);return oy(x,i,m,h)}),ss=(i,m,h)=>{const v=xh(i);return Xp(v,m,h)},Yp=(i,m,h,v,x)=>{const A=xh(i),$=Bo(i,h)?oe.some(m):iw(A,m),z=Bo(i,x)?oe.some(v):iw(A,v);return $.bind(j=>z.bind(Q=>Xp(A,j,Q)))},KT=(i,m,h)=>{const v=xh(i);return rf(v,m,h)},xh=xn.fromTable;var Pe=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],cg=()=>{const i=Q=>ue.fromDom(Q.dom.cloneNode(!1)),m=Q=>zu(Q).dom,h=Q=>Vr(Q)?Ko(Q)==="body"?!0:io(Pe,Ko(Q)):!1,v=Q=>Vr(Q)?io(["br","img","hr","input"],Ko(Q)):!1,x=Q=>Vr(Q)&&Mr(Q,"contenteditable")==="false",A=(Q,de)=>Q.dom.compareDocumentPosition(de.dom),$=(Q,de)=>{const ze=ya(Q);Rr(de,ze)},z=Q=>{const de=Ko(Q);return io(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],de)},j=Q=>Vr(Q)?fc(Q,"lang"):oe.none();return{up:ee({selector:Ln,closest:qs,predicate:qc,all:hi}),down:ee({selector:Dc,predicate:Qr}),styles:ee({get:Kc,getRaw:Fl,set:$o,remove:Xc}),attrs:ee({get:Mr,set:ms,remove:vs,copyTo:$}),insert:ee({before:bi,after:kc,afterAll:Ao,append:fs,appendAll:Sa,prepend:Ls,wrap:Uf}),remove:ee({unwrap:$m,remove:nr}),create:ee({nu:ue.fromTag,clone:i,text:ue.fromText}),query:ee({comparePosition:A,prevSibling:Uu,nextSibling:pi}),property:ee({children:po,name:Ko,parent:Bl,document:m,isText:Qi,isComment:No,isElement:Vr,isSpecial:z,getLanguage:j,getText:Vt,setText:mo,isBoundary:h,isEmptyTag:v,isNonEditable:x}),eq:Bo,is:Np}};const XT=(i,m,h,v)=>{const x=h[0],A=h.slice(1);return v(i,m,x,A)},Rb=(i,m,h)=>h.length>0?XT(i,m,h,YT):oe.none(),YT=(i,m,h,v)=>{const x=m(i,h);return Dn(v,(A,$)=>{const z=m(i,$);return af(i,A,z)},x)},af=(i,m,h)=>m.bind(v=>h.filter(Bn(i.eq,v))),ry=(i,m)=>Bn(i.eq,m),ad=(i,m,h,v=It)=>{const x=[m].concat(i.up().all(m)),A=[h].concat(i.up().all(h)),$=de=>dc(de,v).fold(()=>de,lt=>de.slice(0,lt+1)),z=$(x),j=$(A),Q=L(z,de=>Te(j,ry(i,de)));return{firstpath:z,secondpath:j,shared:Q}},Mb=Rb,Eh=ad,rs=cg(),Ai=(i,m)=>Mb(rs,(h,v)=>i(v),m),lg=(i,m,h)=>Eh(rs,i,m,h),bu=i=>Ln(i,"table"),Nb=(i,m,h)=>{const v=x=>A=>h!==void 0&&h(A)||Bo(A,x);return Bo(i,m)?oe.some({boxes:oe.some([i]),start:i,finish:m}):bu(i).bind(x=>bu(m).bind(A=>{if(Bo(x,A))return oe.some({boxes:ss(x,i,m),start:i,finish:m});if(zf(x,A)){const $=Xt(m,"td,th",v(x)),z=$.length>0?$[$.length-1]:m;return oe.some({boxes:Yp(x,i,x,m,A),start:i,finish:z})}else if(zf(A,x)){const $=Xt(i,"td,th",v(A)),z=$.length>0?$[$.length-1]:i;return oe.some({boxes:Yp(A,i,x,m,A),start:i,finish:z})}else return lg(i,m).shared.bind($=>qs($,"table",h).bind(z=>{const j=Xt(m,"td,th",v(z)),Q=j.length>0?j[j.length-1]:m,de=Xt(i,"td,th",v(z)),ze=de.length>0?de[de.length-1]:i;return oe.some({boxes:Yp(z,i,x,m,A),start:ze,finish:Q})}))}))},Th=(i,m)=>{const h=Dc(i,m);return h.length>0?oe.some(h):oe.none()},cf=(i,m)=>L(i,h=>Ca(h,m)),ay=(i,m,h)=>su(i,m).bind(v=>su(i,h).bind(x=>Ai(bu,[v,x]).map(A=>({first:v,last:x,table:A})))),JT=(i,m)=>Ln(i,"table").bind(h=>su(h,m).bind(v=>Nb(v,i).bind(x=>x.boxes.map(A=>({boxes:A,start:x.start,finish:x.finish}))))),uw=(i,m,h,v,x)=>cf(i,x).bind(A=>sy(A,m,h).bind($=>JT($,v))),Bb=(i,m)=>Th(i,m),ig=(i,m,h)=>ay(i,m,h).bind(v=>{const x=j=>Bo(i,j),A="thead,tfoot,tbody,table",$=Ln(v.first,A,x),z=Ln(v.last,A,x);return $.bind(j=>z.bind(Q=>Bo(j,Q)?KT(v.table,v.first,v.last):oe.none()))}),QT=On,lf=i=>{const m=(v,x)=>fc(v,x).exists(A=>parseInt(A,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&fn(i,h)?oe.some(i):oe.none()},$b=(i,m,h)=>m.length<=1?oe.none():ig(i,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),uf="data-mce-selected",pt="td["+uf+"],th["+uf+"]",_h="["+uf+"]",Aa="data-mce-first-selected",cy="td["+Aa+"],th["+Aa+"]",Jp="data-mce-last-selected",e_="td["+Jp+"],th["+Jp+"]",ia=_h,Oi={selected:uf,selectedSelector:pt,firstSelected:Aa,firstSelectedSelector:cy,lastSelected:Jp,lastSelectedSelector:e_},cd=(i,m,h)=>({element:h,mergable:$b(m,i,Oi),unmergable:lf(i),selection:QT(i)}),t_=(i,m,h)=>({element:i,clipboard:m,generators:h}),kh=(i,m,h,v)=>({selection:QT(i),clipboard:h,generators:v}),df=i=>Ea(i).bind(m=>Bb(m,Oi.firstSelectedSelector)).fold(ee(i),m=>m[0]),Pb=i=>(m,h)=>{const v=Ko(m),x=v==="col"||v==="colgroup"?df(m):m;return qs(x,i,h)},ly=Pb("th,td,caption"),Qp=Pb("th,td"),ld=i=>ki(i.model.table.getSelectedCells()),Fb=i=>Gn(ld(i),m=>Ca(m,Oi.selectedSelector)),iy=i=>Ea(i[0]).map(m=>{const h=ne(m,ia);return Pc(h),[h]}),uy=(i,m)=>$t(m,h=>i.selection.serializer.serialize(h.dom,{})).join(""),dw=i=>$t(i,m=>m.dom.innerText).join(""),Ib=(i,m)=>{i.on("BeforeGetContent",h=>{const v=x=>{h.preventDefault(),iy(x).each(A=>{h.content=h.format==="text"?dw(A):uy(i,A)})};if(h.selection===!0){const x=Fb(i);x.length>=1&&v(x)}}),i.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=ld(i);me(v).each(x=>{Ea(x).each(A=>{const $=Gn(gu(h.content),j=>Ko(j)!=="meta"),z=is("table");if(Gp(i)&&$.length===1&&z($[0])){h.preventDefault();const j=ue.fromDom(i.getDoc()),Q=Es(j),de=t_(x,$[0],Q);m.pasteCells(A,de).each(()=>{i.focus()})}})})}})},yc=(i,m)=>({element:i,offset:m}),nc=(i,m,h)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?h(m).bind(v=>nc(i,v,h).orThunk(()=>oe.some(v))):oe.none(),mw=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,Ah=(i,m)=>{const h=nc(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(h))return yc(h,mw(i,h));const v=i.property().children(h);return v.length>0?Ah(i,v[v.length-1]):yc(h,mw(i,h))},n_=Ah,mf=cg(),wl=i=>n_(mf,i),o_=(i,m)=>{Yc(i)||ec(i).each(v=>{const x=v.value/2;Ab(i,x,v.unit),Ab(m,x,v.unit)})},Oh=i=>$t(i,ee(0)),fw=(i,m,h,v,x)=>x(i.slice(0,m)).concat(v).concat(x(i.slice(h))),Dh=i=>(m,h,v,x)=>{if(i(v)){const A=Math.max(x,m[h]-Math.abs(v)),$=Math.abs(A-m[h]);return v>=0?$:-$}else return v},e1=Dh(i=>i<0),Rh=Dh(Oe),t1=()=>{const i=(z,j,Q,de,ze)=>{const lt=e1(z,j,de,ze);return fw(z,j,Q+1,[lt,0],Oh)},m=(z,j,Q,de)=>{const ze=(100+Q)/100,lt=Math.max(de,(z[j]+Q)/ze);return $t(z,(nt,Ne)=>(Ne===j?lt:nt/ze)-nt)},h=(z,j,Q,de,ze,lt)=>lt?m(z,j,de,ze):i(z,j,Q,de,ze);return{resizeTable:(z,j)=>z(j),clampTableDelta:e1,calcLeftEdgeDeltas:h,calcMiddleDeltas:(z,j,Q,de,ze,lt,nt)=>h(z,Q,de,ze,lt,nt),calcRightEdgeDeltas:(z,j,Q,de,ze,lt)=>{if(lt)return m(z,Q,de,ze);{const nt=e1(z,Q,de,ze);return Oh(z.slice(0,Q)).concat([nt])}},calcRedestributedWidths:(z,j,Q,de)=>{if(de){const lt=(j+Q)/j,nt=$t(z,Ne=>Ne/lt);return{delta:lt*100-100,newSizes:nt}}else return{delta:Q,newSizes:z}}}},dy=()=>{const i=($,z,j,Q,de)=>{const ze=Q>=0?j:z,lt=Rh($,ze,Q,de);return fw($,z,j+1,[lt,-lt],Oh)};return{resizeTable:($,z,j)=>{j&&$(z)},clampTableDelta:($,z,j,Q,de)=>{if(de){if(j>=0)return j;{const ze=ke($,(lt,nt)=>lt+nt-Q,0);return Math.max(-ze,j)}}else return e1($,z,j,Q)},calcLeftEdgeDeltas:i,calcMiddleDeltas:($,z,j,Q,de,ze)=>i($,j,Q,de,ze),calcRightEdgeDeltas:($,z,j,Q,de,ze)=>{if(ze)return Oh($);{const lt=Q/$.length;return $t($,ee(lt))}},calcRedestributedWidths:($,z,j,Q)=>({delta:0,newSizes:$})}},Lb=i=>xn.fromTable(i).grid,Hb=is("th"),Po=i=>fn(i,m=>Hb(m.element)),s_=(i,m)=>i&&m?"sectionCells":i?"section":"cells",gw=i=>{const m=i.section==="thead",h=ys(my(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:s_(m,h)}:{type:"body"}},my=i=>{const m=Gn(i,h=>Hb(h.element));return m.length===0?oe.some("td"):m.length===i.length?oe.some("th"):oe.none()},Vb=i=>{const m=$t(i,x=>gw(x).type),h=io(m,"header"),v=io(m,"footer");if(!h&&!v)return oe.some("body");{const x=io(m,"body");return h&&!x&&!v?oe.some("header"):!h&&!x&&v?oe.some("footer"):oe.none()}},ff=i=>Zo(i.all,m=>{const h=gw(m);return h.type==="header"?oe.from(h.subType):oe.none()}),vu=(i,m,h)=>js(h(i.element,m),!0,i.isLocked),$r=(i,m)=>i.section!==m?nu(i.element,i.cells,m,i.isNew):i,hw=()=>({transformRow:$r,transformCell:(i,m,h)=>{const v=h(i.element,m),x=Ko(v)!=="td"?Pm(v,"td"):v;return js(x,i.isNew,i.isLocked)}}),pw=()=>({transformRow:$r,transformCell:vu}),Mh=()=>({transformRow:(i,m)=>$r(i,m==="thead"?"tbody":m),transformCell:vu}),Ub={getTableSectionType:(i,m)=>{const h=xn.fromTable(i);switch(ff(h).getOr(m)){case"section":return hw();case"sectionCells":return pw();case"cells":return Mh()}},section:hw,sectionCells:pw,cells:Mh,fallback:()=>({transformRow:On,transformCell:vu})},gf=(i,m,h,v)=>{h===v?vs(i,m):ms(i,m,h)},bw=(i,m,h)=>{ro(pl(i,m)).fold(()=>Ls(i,h),v=>kc(v,h))},OD=(i,m)=>{const h=yi(i,m).getOrThunk(()=>{const v=ue.fromTag(m,Nl(i).dom);return m==="thead"?bw(i,"caption,colgroup",v):m==="colgroup"?bw(i,"caption",v):fs(i,v),v});return ja(h),h},DD=(i,m)=>{const h=[],v=[],x=nt=>$t(nt,Ne=>{Ne.isNew&&h.push(Ne.element);const st=Ne.element;return ja(st),Be(Ne.cells,Ae=>{Ae.isNew&&v.push(Ae.element),gf(Ae.element,"colspan",Ae.colspan,1),gf(Ae.element,"rowspan",Ae.rowspan,1),fs(st,Ae.element)}),st}),A=nt=>Ro(nt,Ne=>$t(Ne.cells,st=>(gf(st.element,"span",st.colspan,1),st.element))),$=(nt,Ne)=>{const st=OD(i,Ne),yt=(Ne==="colgroup"?A:x)(nt);Sa(st,yt)},z=nt=>{yi(i,nt).each(nr)},j=(nt,Ne)=>{nt.length>0?$(nt,Ne):z(Ne)},Q=[],de=[],ze=[],lt=[];return Be(m,nt=>{switch(nt.section){case"thead":Q.push(nt);break;case"tbody":de.push(nt);break;case"tfoot":ze.push(nt);break;case"colgroup":lt.push(nt);break}}),j(lt,"colgroup"),j(Q,"thead"),j(de,"tbody"),j(ze,"tfoot"),{newRows:h,newCells:v}},wr=i=>$t(i,m=>{const h=Ac(m.element);return Be(m.cells,v=>{const x=Ba(v.element);gf(x,"colspan",v.colspan,1),gf(x,"rowspan",v.rowspan,1),fs(h,x)}),h}),RD=(i,m)=>$t(i,h=>rr(h,m)),Oo=(i,m)=>i[m],as=(i,m)=>{if(i.length===0)return 0;const h=i[0];return dc(i,x=>!m(h.element,x.element)).getOr(i.length)},id=(i,m,h,v)=>{const x=Oo(i,m),A=x.section==="colgroup",$=as(x.cells.slice(h),v),z=A?1:as(RD(i.slice(m),h),v);return{colspan:$,rowspan:z}},Sl=(i,m)=>{const h=$t(i,x=>$t(x.cells,It)),v=(x,A,$,z)=>{for(let j=x;j<x+$;j++)for(let Q=A;Q<A+z;Q++)h[j][Q]=!0};return $t(i,(x,A)=>{const $=Ro(x.cells,(z,j)=>{if(h[A][j]===!1){const Q=id(i,A,j,m);return v(A,j,Q.rowspan,Q.colspan),[Fm(z.element,Q.rowspan,Q.colspan,z.isNew)]}else return[]});return Jr(x.element,$,x.section,x.isNew)})},jl=(i,m,h)=>{const v=[];Be(i.colgroups,x=>{const A=[];for(let $=0;$<i.grid.columns;$++){const z=xn.getColumnAt(i,$).map(j=>js(j.element,h,!1)).getOrThunk(()=>js(m.colGap(),!0,!1));A.push(z)}v.push(nu(x.element,A,"colgroup",h))});for(let x=0;x<i.grid.rows;x++){const A=[];for(let j=0;j<i.grid.columns;j++){const Q=xn.getAt(i,x,j).map(de=>js(de.element,h,de.isLocked)).getOrThunk(()=>js(m.gap(),!0,!1));A.push(Q)}const $=i.all[x],z=nu($.element,A,$.section,h);v.push(z)}return v},Wb=(i,m)=>jl(i,m,!1),Nh=i=>Sl(i,Bo),Fc=(i,m)=>Zo(i.all,h=>L(h.cells,v=>Bo(m,v.element))),Ic=(i,m,h)=>{const v=$t(m.selection,A=>Ll(A).bind($=>Fc(i,$)).filter(h)),x=ru(v);return Gf(x.length>0,x)},cr=(i,m,h,v,x)=>(A,$,z,j)=>{const Q=xn.fromTable(A),de=oe.from(j==null?void 0:j.section).getOrThunk(Ub.fallback);return m(Q,$).map(lt=>{const nt=Wb(Q,z),Ne=i(nt,lt,Bo,x(z),de),st=Mc(Ne.grid),Ae=Nh(Ne.grid);return{info:lt,grid:Ae,cursor:Ne.cursor,lockedColumns:st}}).bind(lt=>{const nt=DD(A,lt.grid),Ne=oe.from(j==null?void 0:j.sizing).getOrThunk(()=>od.getTableSize(A)),st=oe.from(j==null?void 0:j.resize).getOrThunk(dy);return h(A,lt.grid,lt.info,{sizing:Ne,resize:st,section:de}),v(A),vs(A,gs),lt.lockedColumns.length>0&&ms(A,gs,lt.lockedColumns.join(",")),oe.some({cursor:lt.cursor,newRows:nt.newRows,newCells:nt.newCells})})},Bh=(i,m)=>Ll(m.element).bind(h=>Fc(i,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),hf=(i,m)=>Ic(i,m,Oe).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),$h=(i,m)=>m.mergable,vw=(i,m)=>m.unmergable,ud=(i,m)=>Ic(i,m,Oe),dd=(i,m)=>Ic(i,m,h=>!h.isLocked),yw=(i,m)=>Fc(i,m).exists(h=>!h.isLocked),fy=(i,m)=>fn(m,h=>yw(i,h)),Cw=(i,m)=>$h(i,m).filter(h=>fy(i,h.cells)),a_=(i,m)=>vw(i,m).filter(h=>fy(i,h)),c_=(i,m,h,v)=>{const x=na(i).rows;if(x.length===0)return i;for(let A=m.startRow;A<=m.finishRow;A++)for(let $=m.startCol;$<=m.finishCol;$++){const z=x[A],j=rr(z,$).isLocked;Jf(z,$,js(v(),!1,j))}return i},ww=(i,m,h,v)=>{const x=na(i).rows;let A=!0;for(let $=0;$<x.length;$++)for(let z=0;z<Ja(x[0]);z++){const j=x[$],Q=rr(j,z),de=Q.element,ze=h(de,m);ze&&!A?Jf(j,z,js(v(),!0,Q.isLocked)):ze&&(A=!1)}return i},Sw=(i,m)=>ke(i,(h,v)=>Te(h,x=>m(x.element,v.element))?h:h.concat([v]),[]),n1=(i,m,h,v)=>(m>0&&m<i[0].cells.length&&Be(i,x=>{const A=x.cells[m-1];let $=0;const z=v();for(;x.cells.length>m+$&&h(A.element,x.cells[m+$].element);)Jf(x,m+$,js(z,!0,x.cells[m+$].isLocked)),$++}),i),l_=(i,m,h,v)=>{const x=na(i).rows;if(m>0&&m<x.length){const A=x[m-1].cells,$=Sw(A,h);Be($,z=>{let j=oe.none();for(let Q=m;Q<x.length;Q++)for(let de=0;de<Ja(x[0]);de++){const ze=x[Q],lt=rr(ze,de);h(lt.element,z.element)&&(j.isNone()&&(j=oe.some(v())),j.each(Ne=>{Jf(ze,de,js(Ne,!0,lt.isLocked))}))}})}return i},xw=i=>{const m=A=>A(i),h=ee(i),v=()=>x,x={tag:!0,inner:i,fold:(A,$)=>$(i),isValue:Oe,isError:It,map:A=>o1.value(A(i)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:A=>{A(i)},toOptional:()=>oe.some(i)};return x},gy=i=>{const m=()=>h,h={tag:!1,inner:i,fold:(v,x)=>v(i),isValue:It,isError:Oe,map:m,mapError:v=>o1.error(v(i)),bind:m,exists:It,forall:Oe,getOr:On,or:On,getOrThunk:xo,orThunk:xo,getOrDie:mn(String(i)),each:at,toOptional:oe.none};return h},o1={value:xw,error:gy,fromOption:(i,m)=>i.fold(()=>gy(m),xw)},Xs=(i,m,h)=>{if(i.row>=m.length||i.column>Ja(m[0]))return o1.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),x=v[0].cells.slice(i.column),A=Ja(h[0]),$=h.length;return o1.value({rowDelta:v.length-$,colDelta:x.length-A})},Zb=(i,m)=>{const h=Ja(i[0]),v=Ja(m[0]);return{rowDelta:0,colDelta:h-v}},hy=(i,m)=>{const h=i.length,v=m.length;return{rowDelta:h-v,colDelta:0}},lm=(i,m,h,v)=>{const x=m.section==="colgroup"?h.col:h.cell;return ht(i,A=>js(x(),!0,v(A)))},pf=(i,m,h,v)=>{const x=i[i.length-1];return i.concat(ht(m,()=>{const A=x.section==="colgroup"?h.colgroup:h.row,$=ch(x,A,On),z=lm($.cells.length,$,h,j=>Is(v,j.toString()));return rh($,z)}))},Sr=(i,m,h,v)=>$t(i,x=>{const A=lm(m,x,h,It);return vr(x,v,A)}),Gl=(i,m,h)=>$t(i,v=>ke(h,(x,A)=>{const $=lm(1,v,m,Oe)[0];return Lp(x,A,$)},v)),Fh=(i,m,h)=>{const v=m.colDelta<0?Sr:On,x=m.rowDelta<0?pf:On,A=Mc(i),$=Ja(i[0]),z=Te(A,de=>de===$-1),j=v(i,Math.abs(m.colDelta),h,z?$-1:$),Q=Mc(j);return x(j,Math.abs(m.rowDelta),h,Me(Q,Oe))},py=(i,m,h,v)=>{const x=rr(i[m],h),A=Bn(v,x.element),$=i[m];return i.length>1&&Ja($)>1&&(h>0&&A(ka($,h-1))||h<$.cells.length-1&&A(ka($,h+1))||m>0&&A(ka(i[m-1],h))||m<i.length-1&&A(ka(i[m+1],h)))},Ih=(i,m,h,v,x,A)=>{const $=i.row,z=i.column,j=h.length,Q=Ja(h[0]),de=$+j,ze=z+Q+A.length,lt=Me(A,Oe);for(let nt=$;nt<de;nt++){let Ne=0;for(let st=z;st<ze;st++){if(lt[st]){Ne++;continue}py(m,nt,st,x)&&ww(m,ka(m[nt],st),x,v.cell);const Ae=st-z-Ne,yt=rr(h[nt-$],Ae),Yt=yt.element,vn=v.replace(Yt);Jf(m[nt],st,js(vn,!0,yt.isLocked))}}return m},s1=(i,m,h)=>{const v=Ja(m[0]),x=na(m).cols.length+i.row,A=ht(v-i.column,z=>z+i.column),$=L(A,z=>fn(h,j=>j!==z)).getOr(v-1);return{row:x,column:$}},Ew=(i,m,h)=>Gn(h,v=>v>=i.column&&v<=Ja(m[0])+i.column),Tw=(i,m,h,v,x)=>{const A=Mc(m),$=s1(i,m,A),z=na(h).rows,j=Ew($,z,A);return Xs($,m,z).map(de=>{const ze={...de,colDelta:de.colDelta-j.length},lt=Fh(m,ze,v),nt=Mc(lt),Ne=Ew($,z,nt);return Ih($,lt,z,v,x,Ne)})},md=(i,m,h,v,x)=>{n1(m,i,x,v.cell);const A=hy(h,m),$=Fh(h,A,v),z=hy(m,$),j=Fh(m,z,v);return $t(j,(Q,de)=>vr(Q,i,$[de].cells))},jb=(i,m,h,v,x)=>{l_(m,i,x,v.cell);const A=Mc(m),$=Zb(m,h),z={...$,colDelta:$.colDelta-A.length},j=Fh(m,z,v),{cols:Q,rows:de}=na(j),ze=Mc(j),lt=Zb(h,m),nt={...lt,colDelta:lt.colDelta+ze.length},Ne=Gl(h,v,ze),st=Fh(Ne,nt,v);return[...Q,...de.slice(0,i),...st,...de.slice(i,de.length)]},lr=(i,m,h,v)=>ch(i,x=>v(x,h),m),ol=(i,m,h,v,x)=>{const{rows:A,cols:$}=na(i),z=A.slice(0,m),j=A.slice(m),Q=lr(A[h],(de,ze)=>m>0&&m<A.length&&v(ka(A[m-1],ze),ka(A[m],ze))?rr(A[m],ze):js(x(de.element,v),!0,de.isLocked),v,x);return[...$,...z,Q,...j]},Di=(i,m,h,v,x,A,$)=>{if(h==="colgroup"||!v){const z=rr(i,x);return js($(z.element,A),!0,!1)}else return rr(i,m)},_w=(i,m,h,v,x)=>$t(i,A=>{const $=m>0&&m<Ja(A)&&v(ka(A,m-1),ka(A,m)),z=Di(A,m,A.section,$,h,v,x);return Lp(A,m,z)}),kw=(i,m)=>Ro(i,h=>{const v=h.cells,x=Dn(m,(A,$)=>$>=0&&$<A.length?A.slice(0,$).concat(A.slice($+1)):A,v);return x.length>0?[nu(h.element,x,h.section,h.isNew)]:[]}),Aw=(i,m,h)=>{const{rows:v,cols:x}=na(i);return[...x,...v.slice(0,m),...v.slice(h+1)]},ug=(i,m,h,v)=>ka(i[m],h)!==void 0&&m>0&&v(ka(i[m-1],h),ka(i[m],h)),Ow=(i,m,h)=>m>0&&h(ka(i,m-1),ka(i,m)),bf=(i,m,h,v)=>ug(i,m,h,v)||Ow(i[m],h,v),by=(i,m)=>fn(m,On)&&Po(i.cells)?Oe:(v,x,A)=>!(Ko(v.element)==="th"&&m[A]),Dw=(i,m)=>fn(m,On)&&Po(i)?Oe:(v,x,A)=>!(Ko(v.element)==="th"&&m[x]),Rw=(i,m,h,v)=>{const x=$=>$==="row"?Ci(m):Yc(m),A=$=>x($)?`${$}group`:$;return i?Hb(m)?A(h):null:v&&Hb(m)?A(h==="row"?"col":"row"):null},r1=(i,m)=>(h,v,x)=>oe.some(Rw(i,h.element,"col",m[x])),i_=(i,m)=>(h,v)=>oe.some(Rw(i,h.element,"row",m[v])),Lh=(i,m,h)=>js(h(i.element,m),!0,i.isLocked),dg=(i,m,h,v,x,A,$)=>{const z=j=>Te(m,Q=>h(j.element,Q.element));return $t(i,(j,Q)=>ah(j,(de,ze)=>{if(z(de)){const lt=$(de,Q,ze)?x(de,h,v):de;return A(lt,Q,ze).each(nt=>{eu(lt.element,{scope:oe.from(nt)})}),lt}else return de}))},vy=(i,m,h)=>Ro(i,(v,x)=>bf(i,x,m,h)?[]:[rr(v,m)]),a1=(i,m,h)=>{const v=i[m];return Ro(v.cells,(x,A)=>bf(i,m,A,h)?[]:[x])},Hh=(i,m,h,v,x)=>{const A=na(i).rows,$=Ro(m,de=>vy(A,de,v)),z=$t(A,de=>Po(de.cells)),j=Dw($,z),Q=i_(h,z);return dg(i,$,v,x,Lh,Q,j)},yy=(i,m,h,v,x,A,$)=>{const{cols:z,rows:j}=na(i),Q=j[m[0]],de=Ro(m,Ae=>a1(j,Ae,x)),ze=$t(Q.cells,(Ae,yt)=>Po(vy(j,yt,x))),lt=[...j];Be(m,Ae=>{lt[Ae]=$.transformRow(j[Ae],h)});const nt=[...z,...lt],Ne=by(Q,ze),st=r1(v,ze);return dg(nt,de,x,A,$.transformCell,st,Ne)},Cy=(i,m,h,v)=>{const x=na(i).rows,A=$t(m,$=>rr(x[$.row],$.column));return dg(i,A,h,v,Lh,oe.none,Oe)},fd={generate:i=>{if(!Ht(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],h={};return Be(i,(v,x)=>{const A=Ct(v);if(A.length!==1)throw new Error("one and only one name per case");const $=A[0],z=v[$];if(h[$]!==void 0)throw new Error("duplicate key detected:"+$);if($==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ht(z))throw new Error("case arguments must be an array");m.push($),h[$]=(...j)=>{const Q=j.length;if(Q!==z.length)throw new Error("Wrong number of arguments to case "+$+". Expected "+z.length+" ("+z+"), got "+Q);return{fold:(...ze)=>{if(ze.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+ze.length);return ze[x].apply(null,j)},match:ze=>{const lt=Ct(ze);if(m.length!==lt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+lt.join(","));if(!fn(m,Ne=>io(lt,Ne)))throw new Error("Not all branches were specified when using match. Specified: "+lt.join(", ")+`
Required: `+m.join(", "));return ze[$].apply(null,j)},log:ze=>{console.log(ze,{constructors:m,constructor:$,params:j})}}}}),h}},gd={...fd.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},_n=(i,m)=>i.length===0?gd.none():i.length===1?gd.only(0):m===0?gd.left(0,1):m===i.length-1?gd.right(m-1,m):m>0&&m<i.length-1?gd.middle(m-1,m,m+1):gd.none(),ua=(i,m,h,v,x)=>{const A=i.slice(0),$=_n(i,m),z=ee($t(A,ee(0))),j=lt=>v.singleColumnWidth(A[lt],h),Q=(lt,nt)=>x.calcLeftEdgeDeltas(A,lt,nt,h,v.minCellWidth(),v.isRelative),de=(lt,nt,Ne)=>x.calcMiddleDeltas(A,lt,nt,Ne,h,v.minCellWidth(),v.isRelative),ze=(lt,nt)=>x.calcRightEdgeDeltas(A,lt,nt,h,v.minCellWidth(),v.isRelative);return $.fold(z,j,Q,de,ze)},vf=(i,m,h)=>{let v=0;for(let x=i;x<m;x++)v+=h[x]!==void 0?h[x]:0;return v},we=(i,m)=>{const h=xn.justCells(i);return $t(h,v=>{const x=vf(v.column,v.column+v.colspan,m);return{element:v.element,width:x,colspan:v.colspan}})},Ho=(i,m)=>{const h=xn.justColumns(i);return $t(h,(v,x)=>({element:v.element,width:m[x],colspan:v.colspan}))},Nw=(i,m)=>{const h=xn.justCells(i);return $t(h,v=>{const x=vf(v.row,v.row+v.rowspan,m);return{element:v.element,height:x,rowspan:v.rowspan}})},Bw=(i,m)=>$t(i.all,(h,v)=>({element:h.element,height:m[v]})),jr=i=>Dn(i,(m,h)=>m+h,0),oc=(i,m)=>xn.hasColumns(i)?Ho(i,m):we(i,m),Gb=(i,m,h)=>{const v=oc(i,m);Be(v,x=>{h.setElementWidth(x.element,x.width)})},wy=(i,m,h,v,x)=>{const A=xn.fromTable(i),$=x.getCellDelta(m),z=x.getWidths(A,x),j=h===A.grid.columns-1,Q=v.clampTableDelta(z,h,$,x.minCellWidth(),j),de=ua(z,h,Q,x,v),ze=$t(de,(lt,nt)=>lt+z[nt]);Gb(A,ze,x),v.resizeTable(x.adjustTableWidth,Q,j)},$w=(i,m,h,v)=>{const x=xn.fromTable(i),A=aa(x,i,v),$=$t(A,(de,ze)=>h===ze?Math.max(m+de,qd()):de),z=Nw(x,$),j=Bw(x,$);Be(j,de=>{ds(de.element,de.height)}),Be(z,de=>{ds(de.element,de.height)});const Q=jr($);ds(i,Q)},zh=(i,m,h,v,x)=>{const A=xn.generate(m),$=v.getWidths(A,v),z=v.pixelWidth(),{newSizes:j,delta:Q}=x.calcRedestributedWidths($,z,h.pixelDelta,v.isRelative);Gb(A,j,v),v.adjustTableWidth(Q)},Sy=(i,m,h,v)=>{const x=xn.generate(m),A=v.getWidths(x,v);Gb(x,A,v)},im=i=>ke(i,(h,v)=>Te(h,A=>A.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),qb=is("col"),Kb=is("colgroup"),xy=i=>Ko(i)==="tr"||Kb(i),Ey=i=>{const m=ta(i,"colspan",1),h=ta(i,"rowspan",1);return{element:i,colspan:m,rowspan:h}},Pw=(i,m=Ey)=>{const h=z=>qb(z.element)?i.col(z):i.cell(z),v=z=>Kb(z.element)?i.colgroup(z):i.row(z),x=z=>{if(xy(z))return v({element:z});{const j=z,Q=h(m(j));return A=oe.some({item:j,replacement:Q}),Q}};let A=oe.none();return{getOrInit:(z,j)=>A.fold(()=>x(z),Q=>j(z,Q.item)?Q.replacement:x(z))}},Uh=i=>m=>{const h=[],v=($,z)=>L(h,j=>z(j.item,$)),x=$=>{const z=i==="td"?{scope:null}:{},j=m.replace($,i,z);return h.push({item:$,sub:j}),j};return{replaceOrInit:($,z)=>{if(xy($)||qb($))return $;{const j=$;return v(j,z).fold(()=>x(j),Q=>z($,Q.item)?Q.sub:x(j))}}}},Lc=i=>fc(i,"scope").map(m=>m.substr(0,3)),Xo={modification:Pw,transform:Uh,merging:i=>({unmerge:v=>{const x=Lc(v);return x.each(A=>ms(v,"scope",A)),()=>{const A=i.cell({element:v,colspan:1,rowspan:1});return Xc(A,"width"),Xc(v,"width"),x.each($=>ms(A,"scope",$)),A}},merge:v=>{const x=()=>{const A=ru($t(v,Lc));if(A.length===0)return oe.none();{const $=A[0],z=["row","col"];return Te(A,Q=>Q!==$&&io(z,Q))?oe.none():oe.from($)}};return Xc(v[0],"width"),x().fold(()=>vs(v[0],"scope"),A=>ms(v[0],"scope",A+"group")),ee(v[0])}})},Fw=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],yf=(i,m)=>{const h=i.property().name(m);return io(["ol","ul"],h)},Xb=(i,m)=>{const h=i.property().name(m);return io(Fw,h)},_y=(i,m)=>io(["br","img","hr","input"],i.property().name(m)),c1=cg(),Wh=i=>Xb(c1,i),ky=i=>yf(c1,i),Ay=i=>_y(c1,i),u_=i=>{const m=is("br"),h=j=>fn(j,Q=>m(Q)||Qi(Q)&&Vt(Q).trim().length===0),v=j=>Ko(j)==="li"||qc(j,ky).isSome(),x=j=>pi(j).map(Q=>Wh(Q)?!0:Ay(Q)?Ko(Q)!=="img":!1).getOr(!1),A=j=>nm(j).bind(Q=>{const de=x(Q);return Bl(Q).map(ze=>de===!0||v(ze)||m(Q)||Wh(ze)&&!Bo(j,ze)?[]:[ue.fromTag("br")])}).getOr([]),z=(()=>{const j=Ro(i,Q=>{const de=po(Q);return h(de)?[]:de.concat(A(Q))});return j.length===0?[ue.fromTag("br")]:j})();ja(i[0]),Sa(i[0],z)},Iw=i=>wh(i,!0),Gr=i=>{Ka(i).length===0&&nr(i)},xr=(i,m)=>({grid:i,cursor:m}),Hc=i=>Zo(i,m=>Zo(m.cells,h=>{const v=h.element;return Gf(Iw(v),v)})),sc=(i,m,h)=>{var v,x;const A=na(i).rows;return oe.from((x=(v=A[m])===null||v===void 0?void 0:v.cells[h])===null||x===void 0?void 0:x.element).filter(Iw).orThunk(()=>Hc(A))},Cs=(i,m,h)=>{const v=sc(i,m,h);return xr(i,v)},Ys=i=>ke(i,(h,v)=>Te(h,A=>A.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),Lw=(i,m,h,v)=>{const x=m[0].row,A=Ys(m),$=Dn(A,(z,j)=>({grid:ol(z.grid,x,j.row+z.delta,h,v.getOrInit),delta:z.delta+1}),{grid:i,delta:0}).grid;return Cs($,x,m[0].column)},rc=(i,m,h,v)=>{const x=Ys(m),A=x[x.length-1],$=A.row+A.rowspan,z=Dn(x,(j,Q)=>ol(j,$,Q.row,h,v.getOrInit),i);return Cs(z,$,m[0].column)},d_=(i,m,h,v)=>{const x=m.details,A=im(x),$=A[0].column,z=Dn(A,(j,Q)=>({grid:_w(j.grid,$,Q.column+j.delta,h,v.getOrInit),delta:j.delta+1}),{grid:i,delta:0}).grid;return Cs(z,x[0].row,$)},yu=(i,m,h,v)=>{const x=m.details,A=x[x.length-1],$=A.column+A.colspan,z=im(x),j=Dn(z,(Q,de)=>_w(Q,$,de.column,h,v.getOrInit),i);return Cs(j,x[0].row,$)},Hw=(i,m,h,v)=>{const x=im(m),A=$t(x,z=>z.column),$=Hh(i,A,!0,h,v.replaceOrInit);return Cs($,m[0].row,m[0].column)},Vw=(i,m,h,v)=>{const x=Cy(i,m,h,v.replaceOrInit);return Cs(x,m[0].row,m[0].column)},Oy=(i,m,h,v)=>{const x=im(m),A=$t(x,z=>z.column),$=Hh(i,A,!1,h,v.replaceOrInit);return Cs($,m[0].row,m[0].column)},Dy=(i,m,h,v)=>{const x=Cy(i,m,h,v.replaceOrInit);return Cs(x,m[0].row,m[0].column)},Yb=(i,m)=>(h,v,x,A,$)=>{const z=Ys(v),j=$t(z,de=>de.row),Q=yy(h,j,i,m,x,A.replaceOrInit,$);return Cs(Q,v[0].row,v[0].column)},m_=Yb("thead",!0),f_=Yb("tbody",!1),zw=Yb("tfoot",!1),g_=(i,m,h,v)=>{const x=im(m.details),A=kw(i,$t(x,z=>z.column)),$=A.length>0?A[0].cells.length-1:0;return Cs(A,x[0].row,Math.min(x[0].column,$))},l1=(i,m,h,v)=>{const x=Ys(m),A=Aw(i,x[0].row,x[x.length-1].row),$=A.length>0?A.length-1:0;return Cs(A,Math.min(m[0].row,$),m[0].column)},h_=(i,m,h,v)=>{const x=m.cells;u_(x);const A=c_(i,m.bounds,h,v.merge(x));return xr(A,oe.from(x[0]))},p_=(i,m,h,v)=>{const A=Dn(m,($,z)=>ww($,z,h,v.unmerge(z)),i);return xr(A,oe.from(m[0]))},b_=(i,m,h,v)=>{const A=((j,Q)=>{const de=xn.fromTable(j);return jl(de,Q,!0)})(m.clipboard,m.generators),$=hl(m.row,m.column);return Tw($,i,A,m.generators,h).fold(()=>xr(i,oe.some(m.element)),j=>Cs(j,m.row,m.column))},i1=(i,m,h)=>{const v=Kd(i,h.section),x=xn.generate(v);return jl(x,m,!0)},ft=(i,m,h,v)=>{const x=na(i).rows,A=m.cells[0].column,$=x[m.cells[0].row],z=i1(m.clipboard,m.generators,$),j=md(A,i,z,m.generators,h);return Cs(j,m.cells[0].row,m.cells[0].column)},Xe=(i,m,h,v)=>{const x=na(i).rows,A=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,$=x[m.cells[0].row],z=i1(m.clipboard,m.generators,$),j=md(A,i,z,m.generators,h);return Cs(j,m.cells[0].row,m.cells[0].column)},Uw=(i,m,h,v)=>{const x=na(i).rows,A=m.cells[0].row,$=x[A],z=i1(m.clipboard,m.generators,$),j=jb(A,i,z,m.generators,h);return Cs(j,m.cells[0].row,m.cells[0].column)},da=(i,m,h,v)=>{const x=na(i).rows,A=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,$=x[m.cells[0].row],z=i1(m.clipboard,m.generators,$),j=jb(A,i,z,m.generators,h);return Cs(j,m.cells[0].row,m.cells[0].column)},v_=(i,m)=>{const h=xn.fromTable(i);return ud(h,m).bind(x=>{const A=x[x.length-1],$=x[0].column,z=A.column+A.colspan,j=qn($t(h.all,Q=>Gn(Q.cells,de=>de.column>=$&&de.column<z)));return my(j)}).getOr("")},Ww=(i,m)=>{const h=xn.fromTable(i);return ud(h,m).bind(my).getOr("")},Zw=(i,m)=>{const h=xn.fromTable(i);return ud(h,m).bind(x=>{const A=x[x.length-1],$=x[0].row,z=A.row+A.rowspan,j=h.all.slice($,z);return Vb(j)}).getOr("")},Vc=(i,m,h,v)=>Sy(i,m,h,v.sizing),jw=(i,m,h,v)=>zh(i,m,h,v.sizing,v.resize),Ry=(i,m)=>Te(m,h=>h.column===0&&h.isLocked),ql=(i,m)=>Te(m,h=>h.column+h.colspan>=i.grid.columns&&h.isLocked),Va=(i,m)=>{const h=lh(i),v=im(m);return ke(v,(x,A)=>{const z=h[A.column].map(Qt).getOr(0);return x+z},0)},hd=i=>(m,h)=>ud(m,h).filter(v=>!(i?Ry:ql)(m,v)).map(v=>({details:v,pixelDelta:Va(m,v)})),pd=(i,m)=>dd(i,m).map(h=>({details:h,pixelDelta:-Va(i,h)})),Ri=i=>(m,h)=>hf(m,h).filter(v=>!(i?Ry:ql)(m,v.cells)),u1=Xo.transform("th"),sl=Xo.transform("td"),y_=cr(Lw,ud,at,at,Xo.modification),My=cr(rc,ud,at,at,Xo.modification),Jb=cr(d_,hd(!0),jw,at,Xo.modification),Gw=cr(yu,hd(!1),jw,at,Xo.modification),Ny=cr(g_,pd,jw,Gr,Xo.modification),By=cr(l1,ud,at,Gr,Xo.modification),C_=cr(Hw,dd,at,at,u1),qw=cr(Oy,dd,at,at,sl),w_=cr(m_,dd,at,at,u1),S_=cr(f_,dd,at,at,sl),x_=cr(zw,dd,at,at,sl),$y=cr(Vw,dd,at,at,u1),Kw=cr(Dy,dd,at,at,sl),Py=cr(h_,Cw,Vc,at,Xo.merging),Xw=cr(p_,a_,Vc,at,Xo.merging),Yw=cr(b_,Bh,Vc,at,Xo.modification),E_=cr(ft,Ri(!0),at,at,Xo.modification),Qb=cr(Xe,Ri(!1),at,at,Xo.modification),Jw=cr(Uw,hf,at,at,Xo.modification),T_=cr(da,hf,at,at,Xo.modification),__=v_,Qw=Ww,k_=Zw,e0=(i,m)=>i.dispatch("NewRow",{node:m}),Fy=(i,m)=>i.dispatch("NewCell",{node:m}),Mi=(i,m,h)=>{i.dispatch("TableModified",{...h,table:m})},Fo=(i,m,h,v,x)=>{i.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:x})},eS=i=>{i.dispatch("TableSelectionClear")},za=(i,m,h,v,x)=>{i.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:x})},Iy=(i,m,h,v,x)=>{i.dispatch("ObjectResized",{target:m,width:h,height:v,origin:x})},um={structure:!1,style:!0},qr={structure:!0,style:!1},t0={structure:!0,style:!0},tS=(i,m)=>yh(i)?od.percentageSize(m):hu(i)?od.pixelSize(m):od.getTableSize(m),A_=(i,m,h)=>{const v=Sc=>Ko(ag(Sc))==="table",x=Sc=>!v(i)||Lb(Sc).rows>1,A=Sc=>!v(i)||Lb(Sc).columns>1,$=rw(i),z=aw(i)?at:o_,j=Sc=>{switch(Jv(i)){case"section":return Ub.section();case"sectionCells":return Ub.sectionCells();case"cells":return Ub.cells();default:return Ub.getTableSectionType(Sc,"section")}},Q=(Sc,N2)=>N2.cursor.fold(()=>{const I1=Ka(Sc);return me(I1).filter(Ds).map(ei=>{h.clearSelectedCells(Sc.dom);const Da=i.dom.createRng();return Da.selectNode(ei.dom),i.selection.setRng(Da),ms(ei,"data-mce-selected","1"),Da})},I1=>{const ei=wl(I1),Da=i.dom.createRng();return Da.setStart(ei.element.dom,ei.offset),Da.setEnd(ei.element.dom,ei.offset),i.selection.setRng(Da),h.clearSelectedCells(Sc.dom),oe.some(Da)}),de=(Sc,N2,I1,ei)=>(Da,Mk,j0=!1)=>{Pc(Da);const G0=ue.fromDom(i.getDoc()),Nk=Zr(I1,G0,$),WD={sizing:tS(i,Da),resize:aw(i)?t1():dy(),section:j(Da)};return N2(Da)?Sc(Da,Mk,Nk,WD).bind(q0=>{m.refresh(Da.dom),Be(q0.newRows,L1=>{e0(i,L1.dom)}),Be(q0.newCells,L1=>{Fy(i,L1.dom)});const Bk=Q(Da,q0);return Ds(Da)&&(Pc(Da),j0||Mi(i,Da.dom,ei)),Bk.map(L1=>({rng:L1,effect:ei}))}):oe.none()},ze=de(By,x,at,qr),lt=de(Ny,A,at,qr),nt=de(y_,Oe,at,qr),Ne=de(My,Oe,at,qr),st=de(Jb,Oe,z,qr),Ae=de(Gw,Oe,z,qr),yt=de(Py,Oe,at,qr),Yt=de(Xw,Oe,at,qr),vn=de(E_,Oe,at,qr),Yo=de(Qb,Oe,at,qr),ga=de(Jw,Oe,at,qr),zs=de(T_,Oe,at,qr),cl=de(Yw,Oe,at,t0),Ng=de($y,Oe,at,qr),Tf=de(Kw,Oe,at,qr),Z0=de(C_,Oe,at,qr),F1=de(qw,Oe,at,qr),vo=de(w_,Oe,at,qr),wc=de(S_,Oe,at,qr),cc=de(x_,Oe,at,qr);return{deleteRow:ze,deleteColumn:lt,insertRowsBefore:nt,insertRowsAfter:Ne,insertColumnsBefore:st,insertColumnsAfter:Ae,mergeCells:yt,unmergeCells:Yt,pasteColsBefore:vn,pasteColsAfter:Yo,pasteRowsBefore:ga,pasteRowsAfter:zs,pasteCells:cl,makeCellsHeader:Ng,unmakeCellsHeader:Tf,makeColumnsHeader:Z0,unmakeColumnsHeader:F1,makeRowsHeader:vo,makeRowsBody:wc,makeRowsFooter:cc,getTableRowType:k_,getTableCellType:Qw,getTableColType:__}},nS=(i,m,h)=>{const v=ta(i,m,1);h===1||v<=1?vs(i,m):ms(i,m,Math.min(h,v))},n0=(i,m)=>h=>{const v=h.column+h.colspan-1,x=h.column;return v>=i&&x<m},O_=(i,m,h)=>{if(xn.hasColumns(i)){const v=Gn(xn.justColumns(i),n0(m,h)),x=$t(v,$=>{const z=Ba($.element);return nS(z,"span",h-m),z}),A=ue.fromTag("colgroup");return Sa(A,x),[A]}else return[]},D_=(i,m,h)=>$t(i.all,v=>{const x=Gn(v.cells,n0(m,h)),A=$t(x,z=>{const j=Ba(z.element);return nS(j,"colspan",h-m),j}),$=ue.fromTag("tr");return Sa($,A),$}),R_=(i,m)=>{const h=xn.fromTable(i);return dd(h,m).map(x=>{const A=x[x.length-1],$=x[0].column,z=A.column+A.colspan,j=O_(h,$,z),Q=D_(h,$,z);return[...j,...Q]})},M_=(i,m,h)=>{const v=xn.fromTable(i);return ud(v,m).bind(A=>{const $=jl(v,h,!1),j=na($).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),Q=Ro(j,ze=>{const lt=Gn(ze.cells,nt=>!nt.isLocked);return lt.length>0?[{...ze,cells:lt}]:[]}),de=Nh(Q);return Gf(de.length>0,de)}).map(A=>wr(A))},d1=fd.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),oS=(i,m,h)=>{const v=h.substring(0,h.length-i.length),x=parseFloat(v);return v===x.toString()?m(x):d1.invalid(h)},mg={...d1,from:i=>xa(i,"%")?oS("%",d1.percent,i):xa(i,"px")?oS("px",d1.pixels,i):d1.invalid(i)},sS=(i,m)=>$t(i,h=>mg.from(h).fold(()=>h,x=>x/m*100+"%",x=>x+"%")),o0=(i,m,h)=>{const v=h/m;return $t(i,x=>mg.from(x).fold(()=>x,$=>$*v+"px",$=>$/100*h+"px"))},rS=(i,m)=>{const h=i.fold(()=>ee(""),v=>{const x=v/m;return ee(x+"px")},()=>{const v=100/m;return ee(v+"%")});return ht(m,h)},B_=(i,m,h)=>i.fold(()=>m,v=>o0(m,h,v),v=>sS(m,h)),Zh=(i,m,h)=>{const v=mg.from(h),x=fn(i,A=>A==="0px")?rS(v,i.length):B_(v,i,m);return P_(x)},s0=(i,m)=>i.length===0?m:Dn(i,(h,v)=>mg.from(v).fold(ee(0),On,On)+h,0),aS=(i,m)=>{const h=Math.floor(i);return{value:h+m,remainder:i-h}},$_=(i,m)=>mg.from(i).fold(ee(i),h=>h+m+"px",h=>h+m+"%"),P_=i=>{if(i.length===0)return i;const m=Dn(i,(v,x)=>{const A=mg.from(x).fold(()=>({value:x,remainder:0}),$=>aS($,"px"),$=>({value:$+"%",remainder:0}));return{output:[A.value].concat(v.output),remainder:v.remainder+A.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([$_(h[h.length-1],Math.round(m.remainder))])},jh=mg.from,r0=(i,m,h)=>{Be(m,v=>{const x=i.slice(v.column,v.colspan+v.column),A=s0(x,gc());$o(v.element,"width",A+h)})},a0=(i,m,h)=>{Be(m,(v,x)=>{const A=s0([i[x]],gc());$o(v.element,"width",A+h)})},Ly=(i,m,h,v)=>{Be(h,x=>{const A=i.slice(x.row,x.rowspan+x.row),$=s0(A,qd());$o(x.element,"height",$+v)}),Be(m,(x,A)=>{$o(x.element,"height",i[A])})},cS=i=>jh(i).fold(ee("px"),ee("px"),ee("%")),bd=(i,m,h)=>{const v=xn.fromTable(i),x=v.all,A=xn.justCells(v),$=xn.justColumns(v);m.each(z=>{const j=cS(z),Q=an(i),de=du(v,i),ze=Zh(de,Q,z);xn.hasColumns(v)?a0(ze,$,j):r0(ze,A,j),$o(i,"width",z)}),h.each(z=>{const j=cS(z),Q=Ti(i),de=sg(v,i,el),ze=Zh(de,Q,z);Ly(ze,x,A,j),$o(i,"height",z)})},fg=fh,lS=$c,dm=Yv,gg=i=>{vs(i,"width")},m1=i=>{const m=yl(i);bd(i,oe.some(m),oe.none()),gg(i)},Hy=i=>{const m=ar(i);bd(i,oe.some(m),oe.none()),gg(i)},iS=i=>{Xc(i,"width");const m=au(i),h=m.length>0?m:Ka(i);Be(h,v=>{Xc(v,"width"),gg(v)}),gg(i)},F_={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},uS=()=>ue.fromTag("th"),I_=()=>ue.fromTag("td"),L_=()=>ue.fromTag("col"),dS=(i,m,h,v)=>{const x=ue.fromTag("tr");for(let A=0;A<i;A++){const $=v<m||A<h?uS():I_();A<h&&ms($,"scope","row"),v<m&&ms($,"scope","col"),fs($,ue.fromTag("br")),fs(x,$)}return x},H_=i=>{const m=ue.fromTag("colgroup");return ht(i,()=>fs(m,L_())),m},c0=(i,m,h,v)=>ht(i,x=>dS(m,h,v,x)),V_=(i,m,h,v,x,A=F_)=>{const $=ue.fromTag("table"),z=x!=="cells";sr($,A.styles),Rr($,A.attributes),A.colGroups&&fs($,H_(m));const j=Math.min(i,h);if(z&&h>0){const nt=ue.fromTag("thead");fs($,nt);const st=c0(h,m,x==="sectionCells"?j:0,v);Sa(nt,st)}const Q=ue.fromTag("tbody");fs($,Q);const de=z?i-j:i,lt=c0(de,m,z?0:h,v);return Sa(Q,lt),$},z_=i=>i.dom.innerHTML,U_=i=>{const m=ue.fromTag("div"),h=ue.fromDom(i.dom.cloneNode(!0));return fs(m,h),z_(m)},mS=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},f1=(i,m)=>{su(m,"td,th").each(Bn(mS,i))},fS=(i,m)=>{Be(Dc(m,"tr"),h=>{e0(i,h.dom),Be(Dc(h,"th,td"),v=>{Fy(i,v.dom)})})},W_=i=>Kt(i)&&i.indexOf("%")!==-1,Z_=(i,m,h,v,x)=>{const A=of(i),$={styles:A,attributes:Cr(i),colGroups:ey(i)};return i.undoManager.ignore(()=>{const z=V_(h,m,x,v,Jv(i),$);ms(z,"data-mce-id","__mce");const j=U_(z);i.insertContent(j),i.addVisual()}),su(ag(i),'table[data-mce-id="__mce"]').map(z=>(hu(i)?Hy(z):pu(i)?iS(z):(yh(i)||W_(A.width))&&m1(z),Pc(z),vs(z,"data-mce-id"),fS(i,z),f1(i,z),z.dom)).getOrNull()},j_=(i,m,h,v={})=>{const x=A=>Fs(A)&&A>0;if(x(m)&&x(h)){const A=v.headerRows||0,$=v.headerColumns||0;return Z_(i,h,m,$,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var l0=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const gS="x-tinymce/dom-table-",g1=gS+"rows",h1=gS+"columns",hS=i=>{const m=l0.FakeClipboardItem(i);l0.write([m])},Vy=i=>{var m;const h=(m=l0.read())!==null&&m!==void 0?m:[];return Zo(h,v=>oe.from(v.getType(i)))},zy=i=>{Vy(i).isSome()&&l0.clear()},Uy=i=>{i.fold(pS,m=>hS({[g1]:m}))},Wy=()=>Vy(g1),pS=()=>zy(g1),Gh=i=>{i.fold(G_,m=>hS({[h1]:m}))},bS=()=>Vy(h1),G_=()=>zy(h1),Zy=i=>ly(am(i),rm(i)).filter(Sh),q_=i=>Qp(am(i),rm(i)).filter(Sh),K_=(i,m)=>{const h=rm(i),v=()=>Zy(i).each(Ae=>{Ea(Ae,h).filter(q(h)).each(yt=>{const Yt=ue.fromText("");if(kc(yt,Yt),nr(yt),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const vn=i.dom.createRng();vn.setStart(Yt.dom,0),vn.setEnd(Yt.dom,0),i.selection.setRng(vn),i.nodeChanged()}})}),x=Ae=>Zy(i).each(yt=>{pu(i)||hu(i)||yh(i)||Ea(yt,h).each(vn=>{Ae==="relative"&&!fg(vn)?m1(vn):Ae==="fixed"&&!lS(vn)?Hy(vn):Ae==="responsive"&&!dm(vn)&&iS(vn),Pc(vn),Mi(i,vn.dom,qr)})}),A=Ae=>Ea(Ae,h),$=Ae=>q_(i).bind(yt=>A(yt).map(Yt=>Ae(Yt,yt))),z=(Ae,yt)=>{$(Yt=>{i.formatter.toggle("tableclass",{value:yt},Yt.dom),Mi(i,Yt.dom,um)})},j=(Ae,yt)=>{$(Yt=>{const vn=ld(i),ga=fn(vn,zs=>i.formatter.match("tablecellclass",{value:yt},zs.dom))?i.formatter.remove:i.formatter.apply;Be(vn,zs=>ga("tablecellclass",{value:yt},zs.dom)),Mi(i,Yt.dom,um)})},Q=()=>{Zy(i).each(Ae=>{Ea(Ae,h).each(yt=>{yi(yt,"caption").fold(()=>{const Yt=ue.fromTag("caption");fs(Yt,ue.fromText("Caption")),Bp(yt,Yt,0),i.selection.setCursorLocation(Yt.dom,0)},Yt=>{is("caption")(Ae)&&Nm("td",yt).each(vn=>i.selection.setCursorLocation(vn.dom,0)),nr(Yt)}),Mi(i,yt.dom,qr)})})},de=Ae=>{i.focus()},ze=(Ae,yt=!1)=>$((Yt,vn)=>{const Yo=cd(ld(i),Yt,vn);Ae(Yt,Yo,yt).each(de)}),lt=()=>$((Ae,yt)=>{const Yt=cd(ld(i),Ae,yt),vn=Zr(at,ue.fromDom(i.getDoc()),oe.none());return M_(Ae,Yt,vn)}),nt=()=>$((Ae,yt)=>{const Yt=cd(ld(i),Ae,yt);return R_(Ae,Yt)}),Ne=(Ae,yt)=>yt().each(Yt=>{const vn=$t(Yt,Yo=>Ba(Yo));$((Yo,ga)=>{const zs=Es(ue.fromDom(i.getDoc())),cl=kh(ld(i),ga,vn,zs);Ae(Yo,cl).each(de)})}),st=Ae=>(yt,Yt)=>Dm(Yt,"type").each(vn=>{ze(Ae(vn),Yt.no_events)});Eo({mceTableSplitCells:()=>ze(m.unmergeCells),mceTableMergeCells:()=>ze(m.mergeCells),mceTableInsertRowBefore:()=>ze(m.insertRowsBefore),mceTableInsertRowAfter:()=>ze(m.insertRowsAfter),mceTableInsertColBefore:()=>ze(m.insertColumnsBefore),mceTableInsertColAfter:()=>ze(m.insertColumnsAfter),mceTableDeleteCol:()=>ze(m.deleteColumn),mceTableDeleteRow:()=>ze(m.deleteRow),mceTableCutCol:()=>nt().each(Ae=>{Gh(Ae),ze(m.deleteColumn)}),mceTableCutRow:()=>lt().each(Ae=>{Uy(Ae),ze(m.deleteRow)}),mceTableCopyCol:()=>nt().each(Ae=>Gh(Ae)),mceTableCopyRow:()=>lt().each(Ae=>Uy(Ae)),mceTablePasteColBefore:()=>Ne(m.pasteColsBefore,bS),mceTablePasteColAfter:()=>Ne(m.pasteColsAfter,bS),mceTablePasteRowBefore:()=>Ne(m.pasteRowsBefore,Wy),mceTablePasteRowAfter:()=>Ne(m.pasteRowsAfter,Wy),mceTableDelete:v,mceTableCellToggleClass:j,mceTableToggleClass:z,mceTableToggleCaption:Q,mceTableSizingMode:(Ae,yt)=>x(yt),mceTableCellType:st(Ae=>Ae==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:st(Ae=>Ae==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:st(Ae=>{switch(Ae){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Ae,yt)=>i.addCommand(yt,Ae)),i.addCommand("mceInsertTable",(Ae,yt)=>{j_(i,yt.rows,yt.columns,yt.options)}),i.addCommand("mceTableApplyCellStyle",(Ae,yt)=>{const Yt=ga=>"tablecell"+ga.toLowerCase().replace("-","");if(!$e(yt))return;const vn=Gn(ld(i),Sh);if(vn.length===0)return;const Yo=Ma(yt,(ga,zs)=>i.formatter.has(Yt(zs))&&Kt(ga));Rm(Yo)||(Eo(Yo,(ga,zs)=>{const cl=Yt(zs);Be(vn,Ng=>{ga===""?i.formatter.remove(cl,{value:null},Ng.dom,!0):i.formatter.apply(cl,{value:ga},Ng.dom)})}),A(vn[0]).each(ga=>Mi(i,ga.dom,um)))})},hg=(i,m)=>{const h=rm(i),v=x=>Qp(am(i)).bind(A=>Ea(A,h).map($=>{const z=cd(ld(i),$,A);return x($,z)})).getOr("");Eo({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(x,A)=>i.addQueryValueHandler(A,x))},jy=fd.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),p1=(i,m,h,v)=>i.fold(m,h,v),X_=i=>i.fold(On,On,On),Y_=jy.before,Gy=jy.on,vS=jy.after,ac={before:Y_,on:Gy,after:vS,cata:p1,getStart:X_},vd={create:(i,m)=>({selection:i,kill:m})},mm=(i,m)=>{const h=i.document.createRange();return h.selectNode(m.dom),h},yS=(i,m)=>{const h=i.document.createRange();return qy(h,m),h},qy=(i,m)=>i.selectNodeContents(m.dom),Q_=(i,m)=>{m.fold(h=>{i.setStartBefore(h.dom)},(h,v)=>{i.setStart(h.dom,v)},h=>{i.setStartAfter(h.dom)})},CS=(i,m)=>{m.fold(h=>{i.setEndBefore(h.dom)},(h,v)=>{i.setEnd(h.dom,v)},h=>{i.setEndAfter(h.dom)})},i0=(i,m,h)=>{const v=i.document.createRange();return Q_(v,m),CS(v,h),v},b1=(i,m,h,v,x)=>{const A=i.document.createRange();return A.setStart(m.dom,h),A.setEnd(v.dom,x),A},Cc=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),ek=i=>{const m=i.getClientRects(),h=m.length>0?m[0]:i.getBoundingClientRect();return h.width>0||h.height>0?oe.some(h).map(Cc):oe.none()},v1=fd.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),pg=(i,m,h)=>m(ue.fromDom(h.startContainer),h.startOffset,ue.fromDom(h.endContainer),h.endOffset),Cf=(i,m)=>m.match({domRange:h=>({ltr:ee(h),rtl:oe.none}),relative:(h,v)=>({ltr:wi(()=>i0(i,h,v)),rtl:wi(()=>oe.some(i0(i,v,h)))}),exact:(h,v,x,A)=>({ltr:wi(()=>b1(i,h,v,x,A)),rtl:wi(()=>oe.some(b1(i,x,A,h,v)))})}),u0=(i,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(x=>x.collapsed===!1).map(x=>v1.rtl(ue.fromDom(x.endContainer),x.endOffset,ue.fromDom(x.startContainer),x.startOffset)).getOrThunk(()=>pg(i,v1.ltr,h)):pg(i,v1.ltr,h)},qh=(i,m)=>{const h=Cf(i,m);return u0(i,h)},d0=(i,m)=>qh(i,m).match({ltr:(v,x,A,$)=>{const z=i.document.createRange();return z.setStart(v.dom,x),z.setEnd(A.dom,$),z},rtl:(v,x,A,$)=>{const z=i.document.createRange();return z.setStart(A.dom,$),z.setEnd(v.dom,x),z}});v1.ltr,v1.rtl;const Kl={create:(i,m,h,v)=>({start:i,soffset:m,finish:h,foffset:v})},Ky={create:(i,m,h,v)=>({start:ac.on(i,m),finish:ac.on(h,v)})},y1=(i,m)=>{const h=d0(i,m);return Kl.create(ue.fromDom(h.startContainer),h.startOffset,ue.fromDom(h.endContainer),h.endOffset)},C1=Ky.create,Kh=(i,m,h,v,x,A,$)=>Bo(h,x)&&v===A?oe.none():qs(h,"td,th",m).bind(z=>qs(x,"td,th",m).bind(j=>wf(i,m,z,j,$))),wf=(i,m,h,v,x)=>Bo(h,v)?oe.none():Nb(h,v,m).bind(A=>{const $=A.boxes.getOr([]);return $.length>1?(x(i,$,A.start,A.finish),oe.some(vd.create(oe.some(C1(h,0,h,eo(h))),!0))):oe.none()}),m0=(i,m,h,v,x)=>{const A=$=>(x.clearBeforeUpdate(h),x.selectRange(h,$.boxes,$.start,$.finish),$.boxes);return uw(v,i,m,x.firstSelectedSelector,x.lastSelectedSelector).map(A)},f0=(i,m)=>({item:i,mode:m}),Xh=(i,m,h,v=Ni)=>i.property().parent(m).map(x=>f0(x,v)),Ni=(i,m,h,v=Yh)=>h.sibling(i,m).map(x=>f0(x,v)),Yh=(i,m,h,v=Yh)=>{const x=i.property().children(m);return h.first(x).map($=>f0($,v))},g0=[{current:Xh,next:Ni,fallback:oe.none()},{current:Ni,next:Yh,fallback:oe.some(Xh)},{current:Yh,next:Yh,fallback:oe.some(Ni)}],Jh=(i,m,h,v,x=g0)=>L(x,$=>$.current===h).bind($=>$.current(i,m,v,$.next).orThunk(()=>$.fallback.bind(z=>Jh(i,m,z,v)))),Bi={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?oe.some(h[h.length-1]):oe.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?oe.some(h[0]):oe.none()})},w1=(i,m,h,v,x,A)=>Jh(i,m,v,x).bind(z=>A(z.item)?oe.none():h(z.item)?oe.some(z.item):w1(i,z.item,h,z.mode,x,A)),h0=(i,m,h,v)=>w1(i,m,h,Ni,Bi.left(),v),vg=(i,m,h,v)=>w1(i,m,h,Ni,Bi.right(),v),p0=i=>m=>i.property().children(m).length===0,b0=(i,m,h)=>Xy(i,m,p0(i),h),nk=(i,m,h)=>Yy(i,m,p0(i),h),Xy=h0,Yy=vg,v0=cg(),y0=(i,m)=>b0(v0,i,m),Cu=(i,m)=>nk(v0,i,m),ok=(i,m,h)=>Xy(v0,i,m,h),sk=(i,m,h)=>Yy(v0,i,m,h),SS=(i,m,h)=>qc(i,m,h).isSome(),Qh=fd.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),rk=(i,m,h)=>{const v=i.getRect(m),x=i.getRect(h);return x.right>v.left&&x.left<v.right},MD=i=>qs(i,"tr"),yd={...Qh,verify:(i,m,h,v,x,A,$)=>qs(v,"td,th",$).bind(z=>qs(m,"td,th",$).map(j=>Bo(z,j)?Bo(v,z)&&eo(z)===x?A(j):Qh.none("in same cell"):Ai(MD,[z,j]).fold(()=>rk(i,j,z)?Qh.success():A(j),Q=>A(j)))).getOr(Qh.none("default")),cata:(i,m,h,v,x)=>i.fold(m,h,v,x)},Ua=(i,m,h,v)=>({parent:i,children:m,element:h,index:v}),Sf=i=>Bl(i).bind(m=>{const h=po(m);return fa(h,i).map(v=>Ua(m,h,i,v))}),fa=(i,m)=>dc(i,Bn(Bo,m)),Kr=is("br"),Oa=(i,m,h)=>m(i,h).bind(v=>Qi(v)&&Vt(v).trim().length===0?Oa(v,m,h):oe.some(v)),xl=(i,m,h)=>h.traverse(m).orThunk(()=>Oa(m,h.gather,i)).map(h.relative),C0=(i,m)=>wa(i,m).filter(Kr).orThunk(()=>wa(i,m-1).filter(Kr)),$i=(i,m,h,v)=>C0(m,h).bind(x=>v.traverse(x).fold(()=>Oa(x,v.gather,i).map(v.relative),A=>Sf(A).map($=>ac.on($.parent,$.index)))),yg=(i,m,h,v)=>(Kr(m)?xl(i,m,v):$i(i,m,h,v)).map(A=>({start:A,finish:A})),ak=i=>yd.cata(i,m=>oe.none(),()=>oe.none(),m=>oe.some(yc(m,0)),m=>oe.some(yc(m,eo(m)))),Cd=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),S1=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),w0=(i,m,h)=>({left:i.left+m,top:i.top+h,right:i.right+m,bottom:i.bottom+h}),wd=i=>i.top,x1=i=>i.bottom,S0=(i,m,h)=>h>=0&&h<eo(m)?i.getRangedRect(m,h,m,h+1):h>0?i.getRangedRect(m,h-1,m,h):oe.none(),Cg=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),Jy=(i,m)=>oe.some(i.getRect(m)),xS=(i,m,h)=>Vr(m)?Jy(i,m).map(Cg):Qi(m)?S0(i,m,h).map(Cg):oe.none(),Qy=(i,m)=>Vr(m)?Jy(i,m).map(Cg):Qi(m)?i.getRangedRect(m,0,m,eo(m)).map(Cg):oe.none(),fm=5,ES=100,Pi=fd.generate([{none:[]},{retry:["caret"]}]),e2=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,t2=(i,m,h)=>Gs(m,Wh).fold(It,v=>Qy(i,v).exists(x=>e2(h,x))),ck=(i,m,h,v,x)=>{const A=Cd(x,fm);return Math.abs(h.bottom-v.bottom)<1||h.top>x.bottom?Pi.retry(A):h.top===x.bottom?Pi.retry(Cd(x,1)):t2(i,m,x)?Pi.retry(w0(A,fm,0)):Pi.none()},lk={point:wd,adjuster:(i,m,h,v,x)=>{const A=S1(x,fm);return Math.abs(h.top-v.top)<1||h.bottom<x.top?Pi.retry(A):h.bottom===x.top?Pi.retry(S1(x,1)):t2(i,m,x)?Pi.retry(w0(A,fm,0)):Pi.none()},move:S1,gather:y0},ik={point:x1,adjuster:ck,move:Cd,gather:Cu},TS=(i,m,h)=>i.elementFromPoint(m,h).filter(v=>Ko(v)==="table").isSome(),Xl=(i,m,h,v,x)=>n2(i,m,h,m.move(v,fm),x),n2=(i,m,h,v,x)=>x===0?oe.some(v):TS(i,v.left,m.point(v))?Xl(i,m,h,v,x-1):i.situsFromPoint(v.left,m.point(v)).bind(A=>A.start.fold(oe.none,$=>Qy(i,$).bind(z=>m.adjuster(i,$,z,h,v).fold(oe.none,j=>n2(i,m,h,j,x-1))).orThunk(()=>oe.some(v)),oe.none)),x0=(i,m,h)=>i.point(m)>h.getInnerHeight()?oe.some(i.point(m)-h.getInnerHeight()):i.point(m)<0?oe.some(-i.point(m)):oe.none(),ep=(i,m,h)=>{const v=i.move(h,fm),x=n2(m,i,h,v,ES).getOr(v);return x0(i,x,m).fold(()=>m.situsFromPoint(x.left,i.point(x)),A=>(m.scrollBy(0,A),m.situsFromPoint(x.left,i.point(x)-A)))},E1={tryUp:Bn(ep,lk),tryDown:Bn(ep,ik),getJumpSize:ee(fm)},uk=20,$D=(i,m,h)=>i.getSelection().bind(v=>yg(m,v.finish,v.foffset,h).fold(()=>oe.some(yc(v.finish,v.foffset)),x=>{const A=i.fromSitus(x),$=yd.verify(i,v.finish,v.foffset,A.finish,A.foffset,h.failure,m);return ak($)})),T1=(i,m,h,v,x,A)=>A===0?oe.none():tp(i,m,h,v,x).bind($=>{const z=i.fromSitus($),j=yd.verify(i,h,v,z.finish,z.foffset,x.failure,m);return yd.cata(j,()=>oe.none(),()=>oe.some($),Q=>Bo(h,Q)&&v===0?Wn(i,h,v,S1,x):T1(i,m,Q,0,x,A-1),Q=>Bo(h,Q)&&v===eo(Q)?Wn(i,h,v,Cd,x):T1(i,m,Q,eo(Q),x,A-1))}),Wn=(i,m,h,v,x)=>xS(i,m,h).bind(A=>gm(i,x,v(A,E1.getJumpSize()))),gm=(i,m,h)=>{const v=sh().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,h):oe.none()},tp=(i,m,h,v,x)=>xS(i,h,v).bind(A=>gm(i,x,A)),E0=(i,m,h)=>$D(i,m,h).bind(v=>T1(i,m,v.element,v.offset,h,uk).map(i.fromSitus)),_S=(i,m)=>SS(i,h=>Bl(h).exists(v=>Bo(v,m))),T0=(i,m,h,v,x)=>qs(v,"td,th",m).bind(A=>qs(A,"table",m).bind($=>_S(x,$)?E0(i,m,h).bind(z=>qs(z.finish,"td,th",m).map(j=>({start:A,finish:j,range:z}))):oe.none())),_1=(i,m,h,v,x,A)=>A(v,m).orThunk(()=>T0(i,m,h,v,x).map($=>{const z=$.range;return vd.create(oe.some(C1(z.start,z.soffset,z.finish,z.foffset)),!0)})),k1=(i,m)=>qs(i,"tr",m).bind(h=>qs(h,"table",m).bind(v=>{const x=Dc(v,"tr");return Bo(h,x[0])?ok(v,A=>nm(A).isSome(),m).map(A=>{const $=eo(A);return vd.create(oe.some(C1(A,$,A,$)),!0)}):oe.none()})),o2=(i,m)=>qs(i,"tr",m).bind(h=>qs(h,"table",m).bind(v=>{const x=Dc(v,"tr");return Bo(h,x[x.length-1])?sk(v,A=>tc(A).isSome(),m).map(A=>vd.create(oe.some(C1(A,0,A,0)),!0)):oe.none()})),s2=(i,m,h,v,x,A,$)=>T0(i,h,v,x,A).bind(z=>wf(m,h,z.start,z.finish,$)),kS=i=>{let m=i;return{get:()=>m,set:x=>{m=x}}},PD=i=>{const m=kS(oe.none()),h=()=>m.get().each(i);return{clear:()=>{h(),m.set(oe.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:z=>{h(),m.set(oe.some(z))}}},_0=()=>{const i=PD(at);return{...i,on:h=>i.get().each(h)}},wg=(i,m)=>qs(i,"td,th",m),k0=i=>_c(i).exists(wh),dk=(i,m,h,v)=>{const x=_0(),A=x.clear,$=de=>{x.on(ze=>{v.clearBeforeUpdate(m),wg(de.target,h).each(lt=>{Nb(ze,lt,h).each(nt=>{const Ne=nt.boxes.getOr([]);if(Ne.length===1){const st=Ne[0],Ae=ty(st)==="false",yt=ys(rg(de.target),st,Bo);Ae&&yt&&(v.selectRange(m,Ne,st,st),i.selectContents(st))}else Ne.length>1&&(v.selectRange(m,Ne,nt.start,nt.finish),i.selectContents(lt))})})})};return{clearstate:A,mousedown:de=>{v.clear(m),wg(de.target,h).filter(k0).each(x.set)},mouseover:de=>{$(de)},mouseup:de=>{$(de),A()}}},r2={traverse:pi,gather:Cu,relative:ac.before,retry:E1.tryDown,failure:yd.failedDown},a2={traverse:Uu,gather:y0,relative:ac.before,retry:E1.tryUp,failure:yd.failedUp},hm=i=>m=>m===i,A0=hm(38),np=hm(40),Sd=i=>i>=37&&i<=40,c2={isBackward:hm(37),isForward:hm(39)},AS={isBackward:hm(39),isForward:hm(37)},A1=i=>{const m=i!==void 0?i.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return iu(h,v)},l2=(i,m,h)=>{const x=(h!==void 0?h.dom:document).defaultView;x&&x.scrollBy(i,m)},O0=fd.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Sg=i=>O0.exact(i.start,i.soffset,i.finish,i.foffset),OS=i=>i.match({domRange:m=>ue.fromDom(m.startContainer),relative:(m,h)=>ac.getStart(m),exact:(m,h,v,x)=>m}),mk=O0.domRange,DS=O0.relative,i2=O0.exact,op=i=>{const m=OS(i);return jo(m)},u2=Kl.create,sp={domRange:mk,relative:DS,exact:i2,exactFromRange:Sg,getWin:op,range:u2},fk=(i,m,h)=>{var v,x;return oe.from((x=(v=i.dom).caretPositionFromPoint)===null||x===void 0?void 0:x.call(v,m,h)).bind(A=>{if(A.offsetNode===null)return oe.none();const $=i.dom.createRange();return $.setStart(A.offsetNode,A.offset),$.collapse(),oe.some($)})},ut=(i,m,h)=>{var v,x;return oe.from((x=(v=i.dom).caretRangeFromPoint)===null||x===void 0?void 0:x.call(v,m,h))},Ts=(()=>document.caretPositionFromPoint?fk:document.caretRangeFromPoint?ut:oe.none)(),rp=(i,m,h)=>{const v=ue.fromDom(i.document);return Ts(v,m,h).map(x=>Kl.create(ue.fromDom(x.startContainer),x.startOffset,ue.fromDom(x.endContainer),x.endOffset))},Js=(i,m)=>{const h=Ko(i);return h==="input"?ac.after(i):io(["br","img"],h)?m===0?ac.before(i):ac.after(i):ac.on(i,m)},rl=(i,m)=>{const h=i.fold(ac.before,Js,ac.after),v=m.fold(ac.before,Js,ac.after);return sp.relative(h,v)},d2=(i,m,h,v)=>{const x=Js(i,m),A=Js(h,v);return sp.relative(x,A)},xg=(i,m,h,v)=>{const A=Nl(i).dom.createRange();return A.setStart(i.dom,m),A.setEnd(h.dom,v),A},O1=(i,m,h,v)=>{const x=xg(i,m,h,v),A=Bo(i,h)&&m===v;return x.collapsed&&!A},D0=i=>oe.from(i.getSelection()),RS=(i,m)=>{D0(i).each(h=>{h.removeAllRanges(),h.addRange(m)})},Yl=(i,m,h,v,x)=>{const A=b1(i,m,h,v,x);RS(i,A)},gk=(i,m,h,v,x,A)=>{m.collapse(h.dom,v),m.extend(x.dom,A)},MS=(i,m)=>qh(i,m).match({ltr:(h,v,x,A)=>{Yl(i,h,v,x,A)},rtl:(h,v,x,A)=>{D0(i).each($=>{if($.setBaseAndExtent)$.setBaseAndExtent(h.dom,v,x.dom,A);else if($.extend)try{gk(i,$,h,v,x,A)}catch{Yl(i,x,A,h,v)}else Yl(i,x,A,h,v)})}}),El=(i,m,h,v,x)=>{const A=d2(m,h,v,x);MS(i,A)},Er=(i,m,h)=>{const v=rl(m,h);MS(i,v)},NS=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),h=i.getRangeAt(i.rangeCount-1);return oe.some(Kl.create(ue.fromDom(m.startContainer),m.startOffset,ue.fromDom(h.endContainer),h.endOffset))}else return oe.none()},R0=i=>{if(i.anchorNode===null||i.focusNode===null)return NS(i);{const m=ue.fromDom(i.anchorNode),h=ue.fromDom(i.focusNode);return O1(m,i.anchorOffset,h,i.focusOffset)?oe.some(Kl.create(m,i.anchorOffset,h,i.focusOffset)):NS(i)}},xd=(i,m,h=!0)=>{const x=(h?yS:mm)(i,m);RS(i,x)},D1=i=>D0(i).filter(m=>m.rangeCount>0).bind(R0),R1=i=>D1(i).map(m=>sp.exact(m.start,m.soffset,m.finish,m.foffset)),M0=(i,m)=>{const h=d0(i,m);return ek(h)},m2=(i,m,h)=>rp(i,m,h),BS=i=>{D0(i).each(m=>m.removeAllRanges())},Eg=i=>({elementFromPoint:(Ae,yt)=>ue.fromPoint(ue.fromDom(i.document),Ae,yt),getRect:Ae=>Ae.dom.getBoundingClientRect(),getRangedRect:(Ae,yt,Yt,vn)=>{const Yo=sp.exact(Ae,yt,Yt,vn);return M0(i,Yo)},getSelection:()=>R1(i).map(Ae=>y1(i,Ae)),fromSitus:Ae=>{const yt=sp.relative(Ae.start,Ae.finish);return y1(i,yt)},situsFromPoint:(Ae,yt)=>m2(i,Ae,yt).map(Yt=>Ky.create(Yt.start,Yt.soffset,Yt.finish,Yt.foffset)),clearSelection:()=>{BS(i)},collapseSelection:(Ae=!1)=>{R1(i).each(yt=>yt.fold(Yt=>Yt.collapse(Ae),(Yt,vn)=>{const Yo=Ae?Yt:vn;Er(i,Yo,Yo)},(Yt,vn,Yo,ga)=>{const zs=Ae?Yt:Yo,cl=Ae?vn:ga;El(i,zs,cl,zs,cl)}))},setSelection:Ae=>{El(i,Ae.start,Ae.soffset,Ae.finish,Ae.foffset)},setRelativeSelection:(Ae,yt)=>{Er(i,Ae,yt)},selectNode:Ae=>{xd(i,Ae,!1)},selectContents:Ae=>{xd(i,Ae)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>A1(ue.fromDom(i.document)).top,scrollBy:(Ae,yt)=>{l2(Ae,yt,ue.fromDom(i.document))}}),pm=(i,m)=>({rows:i,cols:m}),hk=(i,m,h,v)=>{const x=Eg(i),A=dk(x,m,h,v);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},f2=i=>Gs(i,tn).exists(wh),N0=(i,m)=>f2(i)||f2(m),$S=(i,m,h,v)=>{const x=Eg(i),A=()=>(v.clear(m),oe.none());return{keydown:(j,Q,de,ze,lt,nt)=>{const Ne=j.raw,st=Ne.which,Ae=Ne.shiftKey===!0;return Th(m,v.selectedSelector).fold(()=>(Sd(st)&&!Ae&&v.clearBeforeUpdate(m),Sd(st)&&Ae&&!N0(Q,ze)?oe.none:np(st)&&Ae?Bn(s2,x,m,h,r2,ze,Q,v.selectRange):A0(st)&&Ae?Bn(s2,x,m,h,a2,ze,Q,v.selectRange):np(st)?Bn(_1,x,h,r2,ze,Q,o2):A0(st)?Bn(_1,x,h,a2,ze,Q,k1):oe.none),Yt=>{const vn=Yo=>()=>Zo(Yo,zs=>m0(zs.rows,zs.cols,m,Yt,v)).fold(()=>ay(m,v.firstSelectedSelector,v.lastSelectedSelector).map(zs=>{const cl=np(st)||nt.isForward(st)?ac.after:ac.before;return x.setRelativeSelection(ac.on(zs.first,0),cl(zs.table)),v.clear(m),vd.create(oe.none(),!0)}),zs=>oe.some(vd.create(oe.none(),!0)));return Sd(st)&&Ae&&!N0(Q,ze)?oe.none:np(st)&&Ae?vn([pm(1,0)]):A0(st)&&Ae?vn([pm(-1,0)]):nt.isBackward(st)&&Ae?vn([pm(0,-1),pm(-1,0)]):nt.isForward(st)&&Ae?vn([pm(0,1),pm(1,0)]):Sd(st)&&!Ae?A:oe.none})()},keyup:(j,Q,de,ze,lt)=>Th(m,v.selectedSelector).fold(()=>{const nt=j.raw,Ne=nt.which;return nt.shiftKey===!0&&Sd(Ne)&&N0(Q,ze)?Kh(m,h,Q,de,ze,lt,v.selectRange):oe.none()},oe.none)}},g2=(i,m,h,v)=>{const x=Eg(i);return(A,$)=>{v.clearBeforeUpdate(m),Nb(A,$,h).each(z=>{const j=z.boxes.getOr([]);v.selectRange(m,j,z.start,z.finish),x.selectContents($),x.collapseSelection()})}},Tg=(i,m)=>{const h=Mr(i,m);return h===void 0||h===""?[]:h.split(" ")},PS=(i,m,h)=>{const x=Tg(i,m).concat([h]);return ms(i,m,x.join(" ")),!0},Ed=(i,m,h)=>{const v=Gn(Tg(i,m),x=>x!==h);return v.length>0?ms(i,m,v.join(" ")):vs(i,m),!1},Qs=i=>i.dom.classList!==void 0,Fi=i=>Tg(i,"class"),Jl=(i,m)=>PS(i,"class",m),B0=(i,m)=>Ed(i,"class",m),Su=(i,m)=>{Qs(i)?i.dom.classList.add(m):Jl(i,m)},FS=i=>{(Qs(i)?i.dom.classList:Fi(i)).length===0&&vs(i,"class")},h2=(i,m)=>{Qs(i)?i.dom.classList.remove(m):B0(i,m),FS(i)},$0=(i,m)=>Qs(i)&&i.dom.classList.contains(m),p2=(i,m)=>{Be(m,h=>{h2(i,h)})},pk=i=>m=>{Su(m,i)},P0=i=>m=>{p2(m,i)},b2={byClass:i=>{const m=pk(i.selected),h=P0([i.selected,i.lastSelected,i.firstSelected]),v=A=>{const $=Dc(A,i.selectedSelector);Be($,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(A,$,z,j)=>{v(A),Be($,m),Su(z,i.firstSelected),Su(j,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,h)=>{const v=j=>{vs(j,i.selected),vs(j,i.firstSelected),vs(j,i.lastSelected)},x=j=>{ms(j,i.selected,"1")},A=j=>{$(j),h()},$=j=>{const Q=Dc(j,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);Be(Q,v)};return{clearBeforeUpdate:$,clear:A,selectRange:(j,Q,de,ze)=>{A(j),Be(Q,x),ms(de,i.firstSelected,"1"),ms(ze,i.lastSelected,"1"),m(Q,de,ze)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},v2=(i,m,h,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return h(i.elements)}},Vo=()=>({tag:"none"}),bm=i=>({tag:"multiple",elements:i}),LS=i=>({tag:"single",element:i}),HS=(i,m,h)=>({get:()=>Bb(i(),h).fold(()=>m().fold(Vo,LS),bm)}),VS=(i,m)=>{const h=i.slice(0,m[m.length-1].row+1),v=Nh(h);return Ro(v,x=>{const A=x.cells.slice(0,m[m.length-1].column+1);return $t(A,$=>$.element)})},y2=(i,m)=>{const h=i.slice(m[0].row+m[0].rowspan-1,i.length),v=Nh(h);return Ro(v,x=>{const A=x.cells.slice(m[0].column+m[0].colspan-1,x.cells.length);return $t(A,$=>$.element)})},zS=(i,m,h)=>{const v=xn.fromTable(i);return ud(v,m).map(A=>{const $=jl(v,h,!1),{rows:z}=na($),j=VS(z,A),Q=y2(z,A);return{upOrLeftCells:j,downOrRightCells:Q}})},C2=(i,m,h,v,x,A,$)=>({target:i,x:m,y:h,stop:v,prevent:x,kill:A,raw:$}),US=i=>{const m=ue.fromDom(Kn(i).getOr(i.target)),h=()=>i.stopPropagation(),v=()=>i.preventDefault(),x=tr(v,h);return C2(m,i.clientX,i.clientY,h,v,x,i)},WS=(i,m)=>h=>{i(h)&&m(US(h))},w2=(i,m,h,v,x)=>{const A=WS(h,v);return i.dom.addEventListener(m,A,x),{unbind:Bn(S2,i,m,A,x)}},ZS=(i,m,h,v)=>w2(i,m,h,v,!1),S2=(i,m,h,v)=>{i.dom.removeEventListener(m,h,v)},jS=Oe,_g=(i,m,h)=>ZS(i,m,jS,h),ap=US,x2=i=>!$0(ue.fromDom(i.target),"ephox-snooker-resizer-bar"),bk=(i,m)=>{const h=HS(()=>ue.fromDom(i.getBody()),()=>Qp(am(i),rm(i)),Oi.selectedSelector),v=(j,Q,de)=>{Ea(Q).each(lt=>{const nt=rw(i),Ne=Zr(at,ue.fromDom(i.getDoc()),nt),st=ld(i),Ae=zS(lt,{selection:st},Ne);Fo(i,j,Q,de,Ae)})},x=()=>eS(i),A=b2.byAttr(Oi,v,x);return i.on("init",j=>{const Q=i.getWin(),de=ag(i),ze=rm(i),lt=()=>{const vo=i.selection,wc=ue.fromDom(vo.getStart()),cc=ue.fromDom(vo.getEnd());Ai(Ea,[wc,cc]).fold(()=>A.clear(de),at)},nt=hk(Q,de,ze,A),Ne=$S(Q,de,ze,A),st=g2(Q,de,ze,A),Ae=vo=>vo.raw.shiftKey===!0;i.on("TableSelectorChange",vo=>st(vo.start,vo.finish));const yt=(vo,wc)=>{Ae(vo)&&(wc.kill&&vo.kill(),wc.selection.each(cc=>{const Ii=sp.relative(cc.start,cc.finish),_l=d0(Q,Ii);i.selection.setRng(_l)}))},Yt=vo=>{const wc=ap(vo);if(wc.raw.shiftKey&&Sd(wc.raw.which)){const cc=i.selection.getRng(),Ii=ue.fromDom(cc.startContainer),_l=ue.fromDom(cc.endContainer);Ne.keyup(wc,Ii,cc.startOffset,_l,cc.endOffset).each(Bg=>{yt(wc,Bg)})}},vn=vo=>{const wc=ap(vo);m.hide();const cc=i.selection.getRng(),Ii=ue.fromDom(cc.startContainer),_l=ue.fromDom(cc.endContainer),Bg=uh(c2,AS)(ue.fromDom(i.selection.getStart()));Ne.keydown(wc,Ii,cc.startOffset,_l,cc.endOffset,Bg).each(Sc=>{yt(wc,Sc)}),m.show()},Yo=vo=>vo.button===0,ga=vo=>vo.buttons===void 0?!0:(vo.buttons&1)!==0,zs=vo=>{nt.clearstate()},cl=vo=>{Yo(vo)&&x2(vo)&&nt.mousedown(ap(vo))},Ng=vo=>{ga(vo)&&x2(vo)&&nt.mouseover(ap(vo))},Tf=vo=>{Yo(vo)&&x2(vo)&&nt.mouseup(ap(vo))},F1=(()=>{const vo=kS(ue.fromDom(de)),wc=kS(0);return{touchEnd:Ii=>{const _l=ue.fromDom(Ii.target);if(is("td")(_l)||is("th")(_l)){const Bg=vo.get(),Sc=wc.get();Bo(Bg,_l)&&Ii.timeStamp-Sc<300&&(Ii.preventDefault(),st(_l,_l))}vo.set(_l),wc.set(Ii.timeStamp)}}})();i.on("dragstart",zs),i.on("mousedown",cl),i.on("mouseover",Ng),i.on("mouseup",Tf),i.on("touchend",F1.touchEnd),i.on("keyup",Yt),i.on("keydown",vn),i.on("NodeChange",lt)}),i.on("PreInit",()=>{i.serializer.addTempAttr(Oi.firstSelected),i.serializer.addTempAttr(Oi.lastSelected)}),{getSelectedCells:()=>v2(h.get(),ee([]),j=>$t(j,Q=>Q.dom),j=>[j.dom]),clearSelectedCells:j=>A.clear(ue.fromDom(j))}},ir=i=>{let m=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");m.push(A)},unbind:A=>{m=Gn(m,$=>$!==A)},trigger:(...A)=>{const $={};Be(i,(z,j)=>{$[z]=A[j]}),Be(m,z=>{z($)})}}},Tr=i=>{const m=mc(i,v=>({bind:v.bind,unbind:v.unbind})),h=mc(i,v=>v.trigger);return{registry:m,trigger:h}},cp=(i,m)=>{let h=null;const v=()=>{Zs(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...A)=>{v(),h=setTimeout(()=>{h=null,i.apply(null,A)},m)}}},N1=i=>i.slice(0).sort(),vk=(i,m)=>{throw new Error("All required keys ("+N1(i).join(", ")+") were not specified. Specified keys were: "+N1(m).join(", ")+".")},gt=i=>{throw new Error("Unsupported keys for object: "+N1(i).join(", "))},En=(i,m)=>{if(!Ht(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");Be(m,h=>{if(!Kt(h))throw new Error("The value "+h+" in the "+i+" fields was not a string.")})},yk=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+N1(i).join(", ")+") were not.")},E2=i=>{const m=N1(i);L(m,(v,x)=>x<m.length-1&&v===m[x+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},lp=(i,m)=>T2(i,m,{validate:qo,label:"function"}),T2=(i,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return En("required",m),E2(m),v=>{const x=Ct(v);fn(m,z=>io(x,z))||vk(m,x),i(m,x);const $=Gn(m,z=>!h.validate(v[z],z));return $.length>0&&yk($,h.label),v}},Ck=(i,m)=>{const h=Gn(m,v=>!io(i,v));h.length>0&&gt(h)},F0=i=>lp(Ck,i),wk=F0(["compare","extract","mutate","sink"]),Sk=F0(["element","start","stop","destroy"]),GS=F0(["forceDrop","drop","move","delayDrop"]),B1=()=>{let i=oe.none();const m=()=>{i=oe.none()},h=(A,$)=>{const z=i.map(j=>A.compare(j,$));return i=oe.some($),z},v=(A,$)=>{$.extract(A).each(j=>{h($,j).each(de=>{x.trigger.move(de)})})},x=Tr({move:ir(["info"])});return{onEvent:v,reset:m,events:x.registry}},kg=()=>{const i=Tr({move:ir(["info"])});return{onEvent:at,reset:at,events:i.registry}},_2=()=>{const i=kg(),m=B1();let h=i;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=i},isOn:()=>h===m,onEvent:(z,j)=>{h.onEvent(z,j)},events:m.events}},FD=(i,m,h)=>{let v=!1;const x=Tr({start:ir([]),stop:ir([])}),A=_2(),$=()=>{Ne.stop(),A.isOn()&&(A.off(),x.trigger.stop())},z=cp($,200),j=Ae=>{Ne.start(Ae),A.on(),x.trigger.start()},Q=Ae=>{z.cancel(),A.onEvent(Ae,m)};A.events.move.bind(Ae=>{m.mutate(i,Ae.info)});const de=()=>{v=!0},ze=()=>{v=!1},lt=()=>v,nt=Ae=>(...yt)=>{v&&Ae.apply(null,yt)},Ne=m.sink(GS({forceDrop:$,drop:nt($),move:nt(Q),delayDrop:nt(z.throttle)}),h),st=()=>{Ne.destroy()};return{element:Ne.element,go:j,on:de,off:ze,isActive:lt,destroy:st,events:x.registry}},qS=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},ID=qS("ephox-dragster").resolve,KS=i=>{const m={layerClass:ID("blocker"),...i},h=ue.fromTag("div");return ms(h,"role","presentation"),sr(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Su(h,ID("blocker")),Su(h,m.layerClass),{element:ee(h),destroy:()=>{nr(h)}}};var k2=wk({compare:(i,m)=>iu(m.left-i.left,m.top-i.top),extract:i=>oe.some(iu(i.x,i.y)),sink:(i,m)=>{const h=KS(m),v=_g(h.element(),"mousedown",i.forceDrop),x=_g(h.element(),"mouseup",i.drop),A=_g(h.element(),"mousemove",i.move),$=_g(h.element(),"mouseout",i.delayDrop),z=()=>{h.destroy(),x.unbind(),A.unbind(),$.unbind(),v.unbind()},j=de=>{fs(de,h.element())},Q=()=>{nr(h.element())};return Sk({element:h.element,start:j,stop:Q,destroy:z})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const $1=(i,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:k2;return FD(i,v,m)},I0=qS("ephox-snooker").resolve,Ek=()=>{const i=Tr({drag:ir(["xDelta","yDelta"])});return{mutate:(h,v)=>{i.trigger.drag(h,v)},events:i.registry}},Tk=()=>{const i=Tr({drag:ir(["xDelta","yDelta","target"])});let m=oe.none();const h=Ek();return h.events.drag.bind(A=>{m.each($=>{i.trigger.drag(A.xDelta,A.yDelta,$)})}),{assign:A=>{m=oe.some(A)},get:()=>m,mutate:h.mutate,events:i.registry}},xu=(i,m,h,v,x)=>{const A=ue.fromTag("div");return sr(A,{position:"absolute",left:m-v/2+"px",top:h+"px",height:x+"px",width:v+"px"}),Rr(A,{"data-column":i,role:"presentation"}),A},L0=(i,m,h,v,x)=>{const A=ue.fromTag("div");return sr(A,{position:"absolute",left:m+"px",top:h-x/2+"px",height:x+"px",width:v+"px"}),Rr(A,{"data-row":i,role:"presentation"}),A},A2=I0("resizer-bar"),O2=I0("resizer-rows"),D2=I0("resizer-cols"),R2=7,_k=(i,m)=>Ro(i.all,(h,v)=>m(h.element)?[v]:[]),kk=(i,m)=>{const h=[];return ht(i.grid.columns,v=>{xn.getColumnAt(i,v).map(A=>A.element).forall(m)&&h.push(v)}),Gn(h,v=>{const x=xn.filterItems(i,A=>A.column===v);return fn(x,A=>m(A.element))})},H0=i=>{const m=Dc(i.parent(),"."+A2);Be(m,nr)},Ag=(i,m,h)=>{const v=i.origin();Be(m,x=>{x.each(A=>{const $=h(v,A);Su($,A2),fs(i.parent(),$)})})},V0=(i,m,h,v)=>{Ag(i,m,(x,A)=>{const $=xu(A.col,A.x-x.left,h.top-x.top,R2,v);return Su($,D2),$})},to=(i,m,h,v)=>{Ag(i,m,(x,A)=>{const $=L0(A.row,h.left-x.left,A.y-x.top,v,R2);return Su($,O2),$})},XS=(i,m,h,v,x)=>{const A=Qu(h),$=m.isResizable,z=v.length>0?el.positions(v,h):[],j=z.length>0?_k(i,$):[],Q=Gn(z,(nt,Ne)=>Te(j,st=>Ne===st));to(m,Q,A,Qt(h));const de=x.length>0?Bc.positions(x,h):[],ze=de.length>0?kk(i,$):[],lt=Gn(de,(nt,Ne)=>Te(ze,st=>Ne===st));V0(m,lt,A,Qd(h))},Td=(i,m)=>{if(H0(i),i.isResizable(m)){const h=xn.fromTable(m),v=Zv(h),x=lh(h);XS(h,i,m,v,x)}},Ql=(i,m)=>{const h=Dc(i.parent(),"."+A2);Be(h,m)},z0=i=>{Ql(i,m=>{$o(m,"display","none")})},al=i=>{Ql(i,m=>{$o(m,"display","block")})},P1=i=>$0(i,O2),Og=i=>$0(i,D2),U0=I0("resizer-bar-dragging"),Dg=i=>{const m=Tk(),h=$1(m,{});let v=oe.none();const x=(Ne,st)=>oe.from(Mr(Ne,st));m.events.drag.bind(Ne=>{x(Ne.target,"data-row").each(st=>{const Ae=ao(Ne.target,"top");$o(Ne.target,"top",Ae+Ne.yDelta+"px")}),x(Ne.target,"data-column").each(st=>{const Ae=ao(Ne.target,"left");$o(Ne.target,"left",Ae+Ne.xDelta+"px")})});const A=(Ne,st)=>{const Ae=ao(Ne,st),yt=ta(Ne,"data-initial-"+st,0);return Ae-yt};h.events.stop.bind(()=>{m.get().each(Ne=>{v.each(st=>{x(Ne,"data-row").each(Ae=>{const yt=A(Ne,"top");vs(Ne,"data-initial-top"),nt.trigger.adjustHeight(st,yt,parseInt(Ae,10))}),x(Ne,"data-column").each(Ae=>{const yt=A(Ne,"left");vs(Ne,"data-initial-left"),nt.trigger.adjustWidth(st,yt,parseInt(Ae,10))}),Td(i,st)})})});const $=(Ne,st)=>{nt.trigger.startAdjust(),m.assign(Ne),ms(Ne,"data-initial-"+st,ao(Ne,st)),Su(Ne,U0),$o(Ne,"opacity","0.2"),h.go(i.parent())},z=_g(i.parent(),"mousedown",Ne=>{P1(Ne.target)&&$(Ne.target,"top"),Og(Ne.target)&&$(Ne.target,"left")}),j=Ne=>Bo(Ne,i.view()),Q=Ne=>qs(Ne,"table",j).filter(wh),de=_g(i.view(),"mouseover",Ne=>{Q(Ne.target).fold(()=>{Ds(Ne.target)&&H0(i)},st=>{h.isActive()&&(v=oe.some(st),Td(i,st))})}),ze=()=>{z.unbind(),de.unbind(),h.destroy(),H0(i)},lt=Ne=>{Td(i,Ne)},nt=Tr({adjustHeight:ir(["table","delta","row"]),adjustWidth:ir(["table","delta","column"]),startAdjust:ir([])});return{destroy:ze,refresh:lt,on:h.on,off:h.off,hideBars:Bn(z0,i),showBars:Bn(al,i),events:nt.registry}},Ak={create:(i,m,h)=>{const v=el,x=Bc,A=Dg(i),$=Tr({beforeResize:ir(["table","type"]),afterResize:ir(["table","type"]),startDrag:ir([])});return A.events.adjustHeight.bind(z=>{const j=z.table;$.trigger.beforeResize(j,"row");const Q=v.delta(z.delta,j);$w(j,Q,z.row,v),$.trigger.afterResize(j,"row")}),A.events.startAdjust.bind(z=>{$.trigger.startDrag()}),A.events.adjustWidth.bind(z=>{const j=z.table;$.trigger.beforeResize(j,"col");const Q=x.delta(z.delta,j),de=h(j);wy(j,Q,z.column,m,de),$.trigger.afterResize(j,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:$.registry}}},Tl={only:(i,m)=>{const h=Lu(i)?es(i):i;return{parent:ee(h),view:ee(i),origin:ee(iu(0,0)),isResizable:m}},detached:(i,m,h)=>{const v=()=>Qu(m);return{parent:ee(m),view:ee(i),origin:v,isResizable:h}},body:(i,m,h)=>({parent:ee(m),view:ee(i),origin:ee(iu(0,0)),isResizable:h})},Rg=()=>{const i=ue.fromTag("div");return sr(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),fs(eh(),i),i},W0=(i,m)=>i.inline?Tl.body(ue.fromDom(i.getBody()),Rg(),m):Tl.only(ue.fromDom(i.getDoc()),m),xf=(i,m)=>{i.inline&&nr(m.parent())},Hn=i=>Wo(i)&&i.nodeName==="TABLE",vm="bar-",Dk=i=>Mr(i,"data-mce-resize")!=="false",M2=i=>{const m=xn.fromTable(i);xn.hasColumns(m)||Be(Ka(i),h=>{const v=Kc(h,"width");$o(h,"width",v),vs(h,"width")})},Rk=i=>{const m=_0(),h=_0(),v=_0();let x,A;const $=Ne=>tS(i,Ne),z=()=>Ns(i)?dy():t1(),j=Ne=>Lb(Ne).columns,Q=(Ne,st,Ae)=>{const yt=xa(st,"e");if(A===""&&m1(Ne),Ae!==x&&A!==""){$o(Ne,"width",A);const Yt=z(),vn=$(Ne),Yo=Ns(i)||yt?j(Ne)-1:0;wy(Ne,Ae-x,Yo,Yt,vn)}else if(qp(A)){const Yt=parseFloat(A.replace("%","")),vn=Ae*Yt/x;$o(Ne,"width",vn+"%")}Kp(A)&&M2(Ne)},de=()=>{h.on(Ne=>{Ne.destroy()}),v.on(Ne=>{xf(i,Ne)})};return i.on("init",()=>{const Ne=W0(i,Dk);if(v.set(Ne),jp(i)&&Cl(i)){const st=z(),Ae=Ak.create(Ne,st,$);Ae.on(),Ae.events.startDrag.bind(yt=>{m.set(i.selection.getRng())}),Ae.events.beforeResize.bind(yt=>{const Yt=yt.table.dom;za(i,Yt,cm(Yt),ny(Yt),vm+yt.type)}),Ae.events.afterResize.bind(yt=>{const Yt=yt.table,vn=Yt.dom;Pc(Yt),m.on(Yo=>{i.selection.setRng(Yo),i.focus()}),Iy(i,vn,cm(vn),ny(vn),vm+yt.type),i.undoManager.add()}),h.set(Ae)}}),i.on("ObjectResizeStart",Ne=>{const st=Ne.target;if(Hn(st)){const Ae=ue.fromDom(st);Be(i.dom.select(".mce-clonedresizable"),yt=>{i.dom.addClass(yt,"mce-"+Qv(i)+"-columns")}),!lS(Ae)&&hu(i)?Hy(Ae):!fg(Ae)&&yh(i)&&m1(Ae),dm(Ae)&&qa(Ne.origin,vm)&&m1(Ae),x=Ne.width,A=pu(i)?"":cw(i,st).getOr("")}}),i.on("ObjectResized",Ne=>{const st=Ne.target;if(Hn(st)){const Ae=ue.fromDom(st),yt=Ne.origin;qa(yt,"corner-")&&Q(Ae,yt,Ne.width),Pc(Ae),Mi(i,Ae.dom,um)}}),i.on("SwitchMode",()=>{h.on(Ne=>{i.mode.isReadOnly()?Ne.hideBars():Ne.showBars()})}),i.on("dragstart dragend",Ne=>{h.on(st=>{Ne.type==="dragstart"?(st.hideBars(),st.off()):(st.on(),st.showBars())})}),i.on("remove",()=>{de()}),{refresh:Ne=>{h.on(st=>st.refreshBars(ue.fromDom(Ne)))},hide:()=>{h.on(Ne=>Ne.hideBars())},show:()=>{h.on(Ne=>Ne.showBars())}}},Mg=i=>{Zl(i);const m=Rk(i),h=bk(i,m),v=A_(i,m,h);return K_(i,v),hg(i,v),Ib(i,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},Ef=i=>({table:Mg(i)});var YS=()=>{qe.add("dom",Ef)};YS()})();(function(){var qe=tinymce.util.Tools.resolve("tinymce.PluginManager");const on=(w,E,F)=>{var U;return F(w,E.prototype)?!0:((U=w.constructor)===null||U===void 0?void 0:U.name)===E.name},qt=w=>{const E=typeof w;return w===null?"null":E==="object"&&Array.isArray(w)?"array":E==="object"&&on(w,String,(F,U)=>U.isPrototypeOf(F))?"string":E},Rn=w=>E=>qt(E)===w,Un=w=>E=>typeof E===w,Fn=w=>E=>w===E,Kt=Rn("string"),$e=Rn("array"),Ht=Un("boolean"),Zs=Fn(void 0),To=w=>w==null,As=w=>!To(w),_o=Un("function"),Wo=Un("number"),qo=()=>{},Fs=(w,E)=>F=>w(E(F)),at=w=>()=>w,tr=w=>w,Ut=(w,E)=>w===E;function ee(w,...E){return(...F)=>{const U=E.concat(F);return w.apply(null,U)}}const On=w=>{w()},Za=at(!1),Bn=at(!0);class q{constructor(E,F){this.tag=E,this.value=F}static some(E){return new q(!0,E)}static none(){return q.singletonNone}fold(E,F){return this.tag?F(this.value):E()}isSome(){return this.tag}isNone(){return!this.tag}map(E){return this.tag?q.some(E(this.value)):q.none()}bind(E){return this.tag?E(this.value):q.none()}exists(E){return this.tag&&E(this.value)}forall(E){return!this.tag||E(this.value)}filter(E){return!this.tag||E(this.value)?this:q.none()}getOr(E){return this.tag?this.value:E}or(E){return this.tag?this:E}getOrThunk(E){return this.tag?this.value:E()}orThunk(E){return this.tag?this:E()}getOrDie(E){if(this.tag)return this.value;throw new Error(E??"Called getOrDie on None")}static from(E){return As(E)?q.some(E):q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(E){this.tag&&E(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}q.singletonNone=new q(!1);const mn=Object.keys,xo=Object.hasOwnProperty,It=(w,E)=>{const F=mn(w);for(let U=0,ne=F.length;U<ne;U++){const ye=F[U],We=w[ye];E(We,ye)}},Oe=w=>(E,F)=>{w[F]=E},oe=(w,E,F,U)=>{It(w,(ne,ye)=>{(E(ne,ye)?F:U)(ne,ye)})},Os=(w,E)=>{const F={};return oe(w,E,Oe(F),qo),F},jn=(w,E)=>{const F=[];return It(w,(U,ne)=>{F.push(E(U,ne))}),F},Ot=w=>jn(w,tr),O=w=>mn(w).length,io=(w,E)=>Te(w,E)?q.from(w[E]):q.none(),Te=(w,E)=>xo.call(w,E),ht=(w,E)=>Te(w,E)&&w[E]!==void 0&&w[E]!==null,$t=w=>{for(const E in w)if(xo.call(w,E))return!1;return!0},Be=Array.prototype.indexOf,Tn=Array.prototype.push,ko=(w,E)=>Be.call(w,E),Gn=(w,E)=>ko(w,E)>-1,Dn=(w,E)=>{for(let F=0,U=w.length;F<U;F++){const ne=w[F];if(E(ne,F))return!0}return!1},ke=(w,E)=>{const F=[];for(let U=0;U<w;U++)F.push(E(U));return F},De=(w,E)=>{const F=w.length,U=new Array(F);for(let ne=0;ne<F;ne++){const ye=w[ne];U[ne]=E(ye,ne)}return U},L=(w,E)=>{for(let F=0,U=w.length;F<U;F++){const ne=w[F];E(ne,F)}},dc=(w,E)=>{for(let F=w.length-1;F>=0;F--){const U=w[F];E(U,F)}},qn=(w,E)=>{const F=[],U=[];for(let ne=0,ye=w.length;ne<ye;ne++){const We=w[ne];(E(We,ne)?F:U).push(We)}return{pass:F,fail:U}},Ro=(w,E)=>{const F=[];for(let U=0,ne=w.length;U<ne;U++){const ye=w[U];E(ye,U)&&F.push(ye)}return F},fn=(w,E,F)=>(dc(w,(U,ne)=>{F=E(F,U,ne)}),F),Fu=(w,E,F)=>(L(w,(U,ne)=>{F=E(F,U,ne)}),F),Me=(w,E,F)=>{for(let U=0,ne=w.length;U<ne;U++){const ye=w[U];if(E(ye,U))return q.some(ye);if(F(ye,U))break}return q.none()},Ie=(w,E)=>Me(w,E,Za),He=w=>{const E=[];for(let F=0,U=w.length;F<U;++F){if(!$e(w[F]))throw new Error("Arr.flatten item "+F+" was not an array, input: "+w);Tn.apply(E,w[F])}return E},me=(w,E)=>He(De(w,E)),ro=(w,E)=>{for(let F=0,U=w.length;F<U;++F){const ne=w[F];if(E(ne,F)!==!0)return!1}return!0},Zo=(w,E)=>{const F={};for(let U=0,ne=w.length;U<ne;U++){const ye=w[U];F[String(ye)]=E(ye,U)}return F},Ct=(w,E)=>E>=0&&E<w.length?q.some(w[E]):q.none(),fr=w=>Ct(w,0),Eo=w=>Ct(w,w.length-1),mc=(w,E)=>{for(let F=0;F<w.length;F++){const U=E(w[F],F);if(U.isSome())return U}return q.none()},Jo=8,Hr=9,Zc=11,Ma=1,gr=3,Qo=(w,E)=>{const U=(E||document).createElement("div");if(U.innerHTML=w,!U.hasChildNodes()||U.childNodes.length>1){const ne="HTML does not have a single root node";throw console.error(ne,w),new Error(ne)}return Mo(U.childNodes[0])},Dm=(w,E)=>{const U=(E||document).createElement(w);return Mo(U)},Is=(w,E)=>{const U=(E||document).createTextNode(w);return Mo(U)},Mo=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},In={fromHtml:Qo,fromTag:Dm,fromText:Is,fromDom:Mo,fromPoint:(w,E,F)=>q.from(w.dom.elementFromPoint(E,F)).map(Mo)},Na=(w,E)=>{const F=w.dom;if(F.nodeType!==Ma)return!1;{const U=F;if(U.matches!==void 0)return U.matches(E);if(U.msMatchesSelector!==void 0)return U.msMatchesSelector(E);if(U.webkitMatchesSelector!==void 0)return U.webkitMatchesSelector(E);if(U.mozMatchesSelector!==void 0)return U.mozMatchesSelector(E);throw new Error("Browser lacks native selectors")}},hr=w=>w.nodeType!==Ma&&w.nodeType!==Hr&&w.nodeType!==Zc||w.childElementCount===0,mi=(w,E)=>{const F=E===void 0?document:E.dom;return hr(F)?[]:De(F.querySelectorAll(w),In.fromDom)},Iu=(w,E)=>{const F=E===void 0?document:E.dom;return hr(F)?q.none():q.from(F.querySelector(w)).map(In.fromDom)},bs=(w,E)=>w.dom===E.dom,Mm=Na;typeof window<"u"||Function("return this;")();const Qe=w=>w.dom.nodeName.toLowerCase(),Qn=w=>w.dom.nodeType,ba=w=>E=>Qn(E)===w,va=w=>Qn(w)===Jo||Qe(w)==="#comment",Ol=ba(Ma),Dl=ba(gr),Ko=ba(Hr),Ji=ba(Zc),Tc=w=>E=>Ol(E)&&Qe(E)===w,No=w=>In.fromDom(w.dom.ownerDocument),tn=w=>Ko(w)?w:No(w),Vr=w=>q.from(w.dom.parentNode).map(In.fromDom),Qi=(w,E)=>{const F=_o(E)?E:Za;let U=w.dom;const ne=[];for(;U.parentNode!==null&&U.parentNode!==void 0;){const ye=U.parentNode,We=In.fromDom(ye);if(ne.push(We),F(We)===!0)break;U=ye}return ne},Lu=w=>q.from(w.dom.previousSibling).map(In.fromDom),Hu=w=>q.from(w.dom.nextSibling).map(In.fromDom),is=w=>De(w.dom.childNodes,In.fromDom),Dr=(w,E)=>{const F=w.dom.childNodes;return q.from(F[E]).map(In.fromDom)},ms=w=>Dr(w,0),Rr=w=>Ji(w)&&As(w.dom.host),Mr=_o(Element.prototype.attachShadow)&&_o(Node.prototype.getRootNode)?w=>In.fromDom(w.dom.getRootNode()):tn,fc=w=>{const E=Mr(w);return Rr(E)?q.some(E):q.none()},vs=w=>In.fromDom(w.dom.host),ya=w=>{const E=Dl(w)?w.dom.parentNode:w.dom;if(E==null||E.ownerDocument===null)return!1;const F=E.ownerDocument;return fc(In.fromDom(E)).fold(()=>F.body.contains(E),Fs(ya,vs))};var fi=(w,E,F,U,ne)=>w(F,U)?q.some(F):_o(ne)&&ne(F)?q.none():E(F,U,ne);const Vf=(w,E,F)=>{let U=w.dom;const ne=_o(F)?F:Za;for(;U.parentNode;){U=U.parentNode;const ye=In.fromDom(U);if(E(ye))return q.some(ye);if(ne(ye))break}return q.none()},tu=(w,E,F)=>fi((ne,ye)=>ye(ne),Vf,w,E,F),Rl=(w,E)=>{const F=ne=>E(In.fromDom(ne));return Ie(w.dom.childNodes,F).map(In.fromDom)},Vu=(w,E,F)=>Vf(w,U=>Na(U,E),F),ue=(w,E)=>Rl(w,F=>Na(F,E)),Ca=(w,E)=>Iu(E,w),Ml=(w,E,F)=>fi((ne,ye)=>Na(ne,ye),Vu,w,E,F),gi=w=>Ml(w,"[contenteditable]"),Nm=(w,E=!1)=>ya(w)?w.dom.isContentEditable:gi(w).fold(at(E),F=>Bo(F)==="true"),Bo=w=>w.dom.contentEditable,zf=w=>w.nodeName.toLowerCase(),Np=w=>In.fromDom(w.getBody()),Nl=w=>E=>bs(E,Np(w)),zu=w=>w?w.replace(/px$/,""):"",es=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,jo=w=>In.fromDom(w.selection.getStart()),Bl=w=>In.fromDom(w.selection.getEnd()),_c=w=>tu(w,Tc("table")).forall(Nm),hi=(w,E)=>Ro(is(w),E),Uu=(w,E)=>{let F=[];return L(is(w),U=>{E(U)&&(F=F.concat([U])),F=F.concat(Uu(U,E))}),F},pi=(w,E)=>hi(w,F=>Na(F,E)),po=(w,E)=>mi(E,w),wa=(w,E,F)=>{if(Kt(F)||Ht(F)||Wo(F))w.setAttribute(E,F+"");else throw console.error("Invalid call to Attribute.set. Key ",E,":: Value ",F,":: Element ",w),new Error("Attribute value was not simple")},Bm=(w,E,F)=>{wa(w.dom,E,F)},bi=(w,E)=>{const F=w.dom;It(E,(U,ne)=>{wa(F,ne,U)})},kc=(w,E)=>{const F=w.dom.getAttribute(E);return F===null?void 0:F},Ls=(w,E)=>q.from(kc(w,E)),fs=(w,E)=>{w.dom.removeAttribute(E)},Bp=w=>Fu(w.dom.attributes,(E,F)=>(E[F.name]=F.value,E),{}),Uf=(w,E,F=Ut)=>w.exists(U=>F(U,E)),Ao=w=>{const E=[],F=U=>{E.push(U)};for(let U=0;U<w.length;U++)w[U].each(F);return E},Sa=(w,E,F)=>w.isSome()&&E.isSome()?q.some(F(w.getOrDie(),E.getOrDie())):q.none(),ja=w=>w.bind(tr),nr=(w,E)=>w?q.some(E):q.none(),$m=(w,E)=>w.substring(E),fl=(w,E,F)=>E===""||w.length>=E.length&&w.substr(F,F+E.length)===E,Ac=(w,E)=>Ba(w,E)?$m(w,E.length):w,Ba=(w,E)=>fl(w,E,0),Wf=(w=>E=>E.replace(w,""))(/^\s+|\s+$/g),Pm=w=>w.length>0,Oc=w=>!Pm(w),gl=(w,E=10)=>{const F=parseInt(w,E);return isNaN(F)?q.none():q.some(F)},Zf=w=>{const E=parseFloat(w);return isNaN(E)?q.none():q.some(E)},hl=w=>w.style!==void 0&&_o(w.style.getPropertyValue),Zd=(w,E,F)=>{if(!Kt(F))throw console.error("Invalid call to CSS.set. Property ",E,":: Value ",F,":: Element ",w),new Error("CSS value must be a string: "+F);hl(w)&&w.style.setProperty(E,F)},Fm=(w,E)=>{hl(w)&&w.style.removeProperty(E)},Wu=(w,E,F)=>{const U=w.dom;Zd(U,E,F)},Im=(w,E)=>{const F=w.dom,ne=window.getComputedStyle(F).getPropertyValue(E);return ne===""&&!ya(w)?Jr(F,E):ne},Jr=(w,E)=>hl(w)?w.style.getPropertyValue(E):"",js=(w,E)=>{const F=w.dom,U=Jr(F,E);return q.from(U).filter(ne=>ne.length>0)},nu=(w,E)=>{const F=w.dom;Fm(F,E),Uf(Ls(w,"style").map(Wf),"")&&fs(w,"style")},jd=(w,E,F=0)=>Ls(w,E).map(U=>parseInt(U,10)).getOr(F),jf=(w,E)=>jc(w,E,Bn),jc=(w,E,F)=>me(is(w),U=>Na(U,E)?F(U)?[U]:[]:jc(U,E,F)),Qg=["tfoot","thead","tbody","colgroup"],$a=w=>Gn(Qg,w),Nr=(w,E)=>({rows:w,columns:E}),Gc=(w,E,F)=>({element:w,rowspan:E,colspan:F}),vi=(w,E,F,U,ne,ye)=>({element:w,rowspan:E,colspan:F,row:U,column:ne,isLocked:ye}),gn=(w,E,F)=>({element:w,cells:E,section:F}),Kn=(w,E,F,U)=>({startRow:w,startCol:E,finishRow:F,finishCol:U}),zr=(w,E,F)=>({element:w,colspan:E,column:F}),Ds=(w,E)=>({element:w,columns:E}),eh=(w,E,F=Za)=>{if(F(E))return q.none();if(Gn(w,Qe(E)))return q.some(E);const U=ne=>Na(ne,"table")||F(ne);return Vu(E,w.join(","),U)},ws=(w,E)=>eh(["td","th"],w,E),$p=w=>jf(w,"th,td"),ou=w=>Na(w,"colgroup")?pi(w,"col"):me(pl(w),E=>pi(E,"col")),Qr=(w,E)=>Ml(w,"table",E),Xt=w=>jf(w,"tr"),pl=w=>Qr(w).fold(at([]),E=>pi(E,"colgroup")),Dc=(w,E)=>De(w,F=>{if(Qe(F)==="colgroup"){const U=De(ou(F),ne=>{const ye=jd(ne,"span",1);return Gc(ne,1,ye)});return gn(F,U,"colgroup")}else{const U=De($p(F),ne=>{const ye=jd(ne,"rowspan",1),We=jd(ne,"colspan",1);return Gc(ne,ye,We)});return gn(F,U,E(F))}}),Ve=w=>Vr(w).map(E=>{const F=Qe(E);return $a(F)?F:"tbody"}).getOr("tbody"),qc=w=>{const E=Xt(w),U=[...pl(w),...E];return Dc(U,Ve)},Gs="data-snooker-locked-cols",ea=w=>Ls(w,Gs).bind(E=>q.from(E.match(/\d+/g))).map(E=>Zo(E,Bn)),Lm=(w,E)=>w+","+E,Ln=(w,E,F)=>q.from(w.access[Lm(E,F)]),yi=(w,E,F)=>{const U=su(w,ne=>F(E,ne.element));return U.length>0?q.some(U[0]):q.none()},su=(w,E)=>{const F=me(w.all,U=>U.cells);return Ro(F,E)},qs=w=>{const E={};let F=0;return L(w.cells,U=>{const ne=U.colspan;ke(ne,ye=>{const We=F+ye;E[We]=zr(U.element,ne,We)}),F+=ne}),E},ys=w=>{const E={},F=[],ne=fr(w).map(la=>la.element).bind(Qr).bind(ea).getOr({});let ye=0,We=0,ct=0;const{pass:Vt,fail:jt}=qn(w,la=>la.section==="colgroup");L(jt,la=>{const tl=[];L(la.cells,mu=>{let tc=0;for(;E[Lm(ct,tc)]!==void 0;)tc++;const nm=ht(ne,tc.toString()),bh=vi(mu.element,mu.rowspan,mu.colspan,ct,tc,nm);for(let om=0;om<mu.colspan;om++)for(let sd=0;sd<mu.rowspan;sd++){const Vs=ct+sd,nl=tc+om,fu=Lm(Vs,nl);E[fu]=bh,We=Math.max(We,nl+1)}tl.push(bh)}),ye++,F.push(gn(la.element,tl,la.section)),ct++});const{columns:mo,colgroups:eo}=Eo(Vt).map(la=>{const tl=qs(la);return{colgroups:[Ds(la.element,Ot(tl))],columns:tl}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Nr(ye,We),access:E,all:F,columns:mo,colgroups:eo}},qa={fromTable:w=>{const E=qc(w);return ys(E)},generate:ys,getAt:Ln,findItem:yi,filterItems:su,justCells:w=>me(w.all,E=>E.cells),justColumns:w=>Ot(w.columns),hasColumns:w=>mn(w.columns).length>0,getColumnAt:(w,E)=>q.from(w.columns[E])};var xa=tinymce.util.Tools.resolve("tinymce.util.Tools");const $l=(w,E,F)=>{const U=w.select("td,th",E);let ne;for(let ye=0;ye<U.length;ye++){const We=w.getStyle(U[ye],F);if(Zs(ne)&&(ne=We),ne!==We)return""}return ne},Pl=(w,E,F)=>{xa.each("left center right".split(" "),U=>{U!==F&&w.formatter.remove("align"+U,{},E)}),F&&w.formatter.apply("align"+F,{},E)},Io=(w,E,F)=>{xa.each("top middle bottom".split(" "),U=>{U!==F&&w.formatter.remove("valign"+U,{},E)}),F&&w.formatter.apply("valign"+F,{},E)},or=(w,E,F)=>{w.dispatch("TableModified",{...F,table:E})},Ur=(w,E)=>Zf(w).getOr(E),Gd=(w,E,F)=>Ur(Im(w,E),F),Rc=(w,E,F,U)=>{const ne=Gd(w,`padding-${F}`,0),ye=Gd(w,`padding-${U}`,0),We=Gd(w,`border-${F}-width`,0),ct=Gd(w,`border-${U}-width`,0);return E-ne-ye-We-ct},$o=(w,E)=>{const F=w.dom,U=F.getBoundingClientRect().width||F.offsetWidth;return E==="border-box"?U:Rc(w,U,"left","right")},Kc=w=>$o(w,"content-box");var Zu=tinymce.util.Tools.resolve("tinymce.Env");const Fl="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Xc=ke(5,w=>{const E=`${w+1}px`;return{title:E,value:E}}),Ss=De(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),ta="100%",pr=w=>{var E;const F=w.dom,U=(E=F.getParent(w.selection.getStart(),F.isBlock))!==null&&E!==void 0?E:w.getBody();return Kc(In.fromDom(U))+"px"},Yc=(w,E)=>Wm(w)||!Hl(w)?E:Um(w)?{...E,width:pr(w)}:{...E,width:ta},Ci=(w,E)=>Wm(w)||Hl(w)?E:Um(w)?{...E,width:pr(w)}:{...E,width:ta},ao=w=>E=>E.options.get(w),gc=w=>{const E=w.options.register;E("table_border_widths",{processor:"object[]",default:Xc}),E("table_border_styles",{processor:"object[]",default:Ss}),E("table_cell_advtab",{processor:"boolean",default:!0}),E("table_row_advtab",{processor:"boolean",default:!0}),E("table_advtab",{processor:"boolean",default:!0}),E("table_appearance_options",{processor:"boolean",default:!0}),E("table_grid",{processor:"boolean",default:!Zu.deviceType.isTouch()}),E("table_cell_class_list",{processor:"object[]",default:[]}),E("table_row_class_list",{processor:"object[]",default:[]}),E("table_class_list",{processor:"object[]",default:[]}),E("table_toolbar",{processor:"string",default:Fl}),E("table_background_color_map",{processor:"object[]",default:[]}),E("table_border_color_map",{processor:"object[]",default:[]})},qd=ao("table_sizing_mode"),Il=ao("table_border_widths"),ju=ao("table_border_styles"),Hm=ao("table_cell_advtab"),Ll=ao("table_row_advtab"),Ka=ao("table_advtab"),au=ao("table_appearance_options"),Ea=ao("table_grid"),Hl=ao("table_style_by_css"),bl=ao("table_cell_class_list"),Vm=ao("table_row_class_list"),Jc=ao("table_class_list"),zm=ao("table_toolbar"),Kd=ao("table_background_color_map"),wi=ao("table_border_color_map"),Um=w=>qd(w)==="fixed",Wm=w=>qd(w)==="responsive",cu=w=>{const E=w.options,F=E.get("table_default_styles");return E.isSet("table_default_styles")?F:Yc(w,F)},th=w=>{const E=w.options,F=E.get("table_default_attributes");return E.isSet("table_default_attributes")?F:Ci(w,F)},Y=(w,E)=>E.column>=w.startCol&&E.column+E.colspan-1<=w.finishCol&&E.row>=w.startRow&&E.row+E.rowspan-1<=w.finishRow,Zm=(w,E)=>{let F=!0;const U=ee(Y,E);for(let ne=E.startRow;ne<=E.finishRow;ne++)for(let ye=E.startCol;ye<=E.finishCol;ye++)F=F&&qa.getAt(w,ne,ye).exists(U);return F?q.some(E):q.none()},Ta=(w,E)=>Kn(Math.min(w.row,E.row),Math.min(w.column,E.column),Math.max(w.row+w.rowspan-1,E.row+E.rowspan-1),Math.max(w.column+w.colspan-1,E.column+E.colspan-1)),qf=(w,E,F)=>{const U=qa.findItem(w,E,bs),ne=qa.findItem(w,F,bs);return U.bind(ye=>ne.map(We=>Ta(ye,We)))},Pp=(w,E,F)=>qf(w,E,F).bind(U=>Zm(w,U)),Fp=(w,E,F)=>{const U=uo(w);return Pp(U,E,F)},uo=qa.fromTable,hc=(w,E)=>{Vr(w).each(U=>{U.dom.insertBefore(E.dom,w.dom)})},Br=(w,E)=>{Hu(w).fold(()=>{Vr(w).each(ne=>{Si(ne,E)})},U=>{hc(U,E)})},Vl=(w,E)=>{ms(w).fold(()=>{Si(w,E)},U=>{w.dom.insertBefore(E.dom,U.dom)})},Si=(w,E)=>{w.dom.appendChild(E.dom)},Gu=(w,E)=>{hc(w,E),Si(E,w)},Pa=(w,E)=>{L(E,(F,U)=>{const ne=U===0?w:E[U-1];Br(ne,F)})},jm=(w,E)=>{L(E,F=>{Si(w,F)})},Xd=w=>{const E=w.dom;E.parentNode!==null&&E.parentNode.removeChild(E)},Gm=w=>{const E=is(w);E.length>0&&Pa(w,E),Xd(w)},lu=((w,E)=>{const F=ye=>{if(!w(ye))throw new Error("Can only get "+E+" value of a "+E+" node");return U(ye).getOr("")},U=ye=>w(ye)?q.from(ye.dom.nodeValue):q.none();return{get:F,getOption:U,set:(ye,We)=>{if(!w(ye))throw new Error("Can only set raw "+E+" value of a "+E+" node");ye.dom.nodeValue=We}}})(Dl,"text"),nh=w=>lu.get(w),Xa=(w,E)=>lu.set(w,E);var br=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],xi=()=>{const w=jt=>In.fromDom(jt.dom.cloneNode(!1)),E=jt=>tn(jt).dom,F=jt=>Ol(jt)?Qe(jt)==="body"?!0:Gn(br,Qe(jt)):!1,U=jt=>Ol(jt)?Gn(["br","img","hr","input"],Qe(jt)):!1,ne=jt=>Ol(jt)&&kc(jt,"contenteditable")==="false",ye=(jt,mo)=>jt.dom.compareDocumentPosition(mo.dom),We=(jt,mo)=>{const eo=Bp(jt);bi(mo,eo)},ct=jt=>{const mo=Qe(jt);return Gn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],mo)},Vt=jt=>Ol(jt)?Ls(jt,"lang"):q.none();return{up:at({selector:Vu,closest:Ml,predicate:Vf,all:Qi}),down:at({selector:po,predicate:Uu}),styles:at({get:Im,getRaw:js,set:Wu,remove:nu}),attrs:at({get:kc,set:Bm,remove:fs,copyTo:We}),insert:at({before:hc,after:Br,afterAll:Pa,append:Si,appendAll:jm,prepend:Vl,wrap:Gu}),remove:at({unwrap:Gm,remove:Xd}),create:at({nu:In.fromTag,clone:w,text:In.fromText}),query:at({comparePosition:ye,prevSibling:Lu,nextSibling:Hu}),property:at({children:is,name:Qe,parent:Vr,document:E,isText:Dl,isComment:va,isElement:Ol,isSpecial:ct,getLanguage:Vt,getText:nh,setText:Xa,isBoundary:F,isEmptyTag:U,isNonEditable:ne}),eq:bs,is:Mm}};const qu=(w,E,F,U)=>{const ne=F[0],ye=F.slice(1);return U(w,E,ne,ye)},Ya=(w,E,F)=>F.length>0?qu(w,E,F,_a):q.none(),_a=(w,E,F,U)=>{const ne=E(w,F);return fn(U,(ye,We)=>{const ct=E(w,We);return Kf(w,ye,ct)},ne)},Kf=(w,E,F)=>E.bind(U=>F.filter(ee(w.eq,U))),oh=Ya,Ku=xi(),Yd=(w,E)=>oh(Ku,(F,U)=>w(U),E),Xf=w=>Vu(w,"table"),vl=(w,E)=>{const F=po(w,E);return F.length>0?q.some(F):q.none()},qm=(w,E,F)=>Ca(w,E).bind(U=>Ca(w,F).bind(ne=>Yd(Xf,[U,ne]).map(ye=>({first:U,last:ne,table:ye})))),Wv=(w,E)=>vl(w,E),Ip=(w,E,F)=>qm(w,E,F).bind(U=>{const ne=Vt=>bs(w,Vt),ye="thead,tfoot,tbody,table",We=Vu(U.first,ye,ne),ct=Vu(U.last,ye,ne);return We.bind(Vt=>ct.bind(jt=>bs(Vt,jt)?Fp(U.table,U.first,U.last):q.none()))}),Yf=w=>De(w,In.fromDom),Xu="data-mce-selected",sh="td["+Xu+"],th["+Xu+"]",zl="data-mce-first-selected",_="td["+zl+"],th["+zl+"]",M="data-mce-last-selected",V="td["+M+"],th["+M+"]",te={selected:Xu,selectedSelector:sh,firstSelected:zl,firstSelectedSelector:_,lastSelected:M,lastSelectedSelector:V},se=w=>Qr(w).bind(E=>Wv(E,te.firstSelectedSelector)).fold(at(w),E=>E[0]),Ze=w=>(E,F)=>{const U=Qe(E),ne=U==="col"||U==="colgroup"?se(E):E;return Ml(ne,w,F)},Wt=Ze("th,td,caption"),rn=Ze("th,td"),an=w=>Yf(w.model.table.getSelectedCells()),Qt=(w,E)=>{const F=rn(w),U=F.bind(ne=>Qr(ne)).map(ne=>Xt(ne));return Sa(F,U,(ne,ye)=>Ro(ye,We=>Dn(Yf(We.dom.cells),ct=>kc(ct,E)==="1"||bs(ct,ne)))).getOr([])},St=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],us=w=>({value:rh(w)}),vr=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Lp=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Jf=w=>vr.test(w)||Lp.test(w),rh=w=>Ac(w,"#").toUpperCase(),ah=w=>Jf(w)?q.some({value:rh(w)}):q.none(),rr=w=>{const E=w.toString(16);return(E.length===1?"0"+E:E).toUpperCase()},ka=w=>{const E=rr(w.red)+rr(w.green)+rr(w.blue);return us(E)},Ja=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,na=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ch=(w,E,F,U)=>({red:w,green:E,blue:F,alpha:U}),gs=(w,E,F,U)=>{const ne=parseInt(w,10),ye=parseInt(E,10),We=parseInt(F,10),ct=parseFloat(U);return ch(ne,ye,We,ct)},Qa=w=>{if(w==="transparent")return q.some(ch(0,0,0,0));const E=Ja.exec(w);if(E!==null)return q.some(gs(E[1],E[2],E[3],"1"));const F=na.exec(w);return F!==null?q.some(gs(F[1],F[2],F[3],F[4])):q.none()},Mc=w=>ah(w).orThunk(()=>Qa(w).map(ka)).getOrThunk(()=>{const E=document.createElement("canvas");E.height=1,E.width=1;const F=E.getContext("2d");F.clearRect(0,0,E.width,E.height),F.fillStyle="#FFFFFF",F.fillStyle=w,F.fillRect(0,0,1,1);const U=F.getImageData(0,0,1,1).data,ne=U[0],ye=U[1],We=U[2],ct=U[3];return ka(ch(ne,ye,We,ct))}),Km=w=>Qa(w).map(ka).map(E=>"#"+E.value).getOr(w),Rs=w=>{let E=w;return{get:()=>E,set:ne=>{E=ne}}},_b=w=>{const E=Rs(q.none()),F=()=>E.get().each(w);return{clear:()=>{F(),E.set(q.none())},isSet:()=>E.get().isSome(),get:()=>E.get(),set:ct=>{F(),E.set(q.some(ct))}}},Hp=()=>_b(w=>w.unbind()),Lo=(w,E,F)=>U=>{const ne=Hp(),ye=Oc(F),We=()=>{const ct=an(w),Vt=jt=>w.formatter.match(E,{value:F},jt.dom,ye);ye?(U.setActive(!Dn(ct,Vt)),ne.set(w.formatter.formatChanged(E,jt=>U.setActive(!jt),!0))):(U.setActive(ro(ct,Vt)),ne.set(w.formatter.formatChanged(E,U.setActive,!1,{value:F})))};return w.initialized?We():w.on("init",We),ne.clear},Ei=w=>ht(w,"menu"),no=w=>De(w,E=>{const F=E.text||E.title||"";return Ei(E)?{text:F,items:no(E.menu)}:{text:F,value:E.value}}),Fa=(w,E,F,U)=>De(E,ne=>{const ye=ne.text||ne.title;return Ei(ne)?{type:"nestedmenuitem",text:ye,getSubmenuItems:()=>Fa(w,ne.menu,F,U)}:{text:ye,type:"togglemenuitem",onAction:()=>U(ne.value),onSetup:Lo(w,F,ne.value)}}),Yu=(w,E)=>F=>{w.execCommand("mceTableApplyCellStyle",!1,{[E]:F})},Ju=w=>me(w,E=>Ei(E)?[{...E,menu:Ju(E.menu)}]:Pm(E.value)?[E]:[]),Jd=(w,E,F,U)=>ne=>ne(Fa(w,E,F,U)),xn=(w,E,F)=>{const U=De(E,ne=>({text:ne.title,value:"#"+Mc(ne.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:U.length>0?U:void 0,allowCustomColors:!1},onAction:ne=>{const ye=ne.value==="remove"?"":ne.value;w.execCommand("mceTableApplyCellStyle",!1,{[F]:ye})}}]},lh=w=>()=>{const F=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:F})},ih=w=>()=>{const F=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:F})},Zv=w=>{const E=no(bl(w));return E.length>0?q.some({name:"class",type:"listbox",label:"Class",items:E}):q.none()},nw=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:St}],uh=w=>nw.concat(Zv(w).toArray()),Qf=(w,E)=>{const U=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(no(ju(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:E==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(U):U}},Ti={normal:(w,E)=>{const F=w.dom;return{setAttrib:(We,ct)=>{F.setAttrib(E,We,ct)},setStyle:(We,ct)=>{F.setStyle(E,We,ct)},setFormat:(We,ct)=>{ct===""?w.formatter.remove(We,{value:null},E,!0):w.formatter.apply(We,{value:ct},E)}}}},Qd=Tc("th"),Gv=(w,E)=>w&&E?"sectionCells":w?"section":"cells",eg=w=>{const E=w.section==="thead",F=Uf(iu(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:E||F?{type:"header",subType:Gv(E,F)}:{type:"body"}},iu=w=>{const E=Ro(w,F=>Qd(F.element));return E.length===0?q.some("td"):E.length===w.length?q.some("th"):q.none()},Vp=w=>{const E=De(w,ne=>eg(ne).type),F=Gn(E,"header"),U=Gn(E,"footer");if(!F&&!U)return q.some("body");{const ne=Gn(E,"body");return F&&!ne&&!U?q.some("header"):!F&&!ne&&U?q.some("footer"):q.none()}},Ul=w=>{let E=!1,F;return(...U)=>(E||(E=!0,F=w.apply(null,U)),F)},Qu=(w,E)=>mc(w.all,F=>Ie(F.cells,U=>bs(E,U.element))),qv=(w,E,F)=>{const U=De(E.selection,ye=>ws(ye).bind(We=>Qu(w,We)).filter(F)),ne=Ao(U);return nr(ne.length>0,ne)},dh=(w,E)=>E.mergable,zp=(w,E)=>E.unmergable,Up=(w,E)=>qv(w,E,Bn),Wp=(w,E)=>Qu(w,E).exists(F=>!F.isLocked),Wr=(w,E)=>ro(E,F=>Wp(w,F)),mh=(w,E)=>dh(w,E).filter(F=>Wr(w,F.cells)),Ks=(w,E)=>zp(w,E).filter(F=>Wr(w,F));({...{generate:w=>{if(!$e(w))throw new Error("cases must be an array");if(w.length===0)throw new Error("there must be at least one case");const E=[],F={};return L(w,(U,ne)=>{const ye=mn(U);if(ye.length!==1)throw new Error("one and only one name per case");const We=ye[0],ct=U[We];if(F[We]!==void 0)throw new Error("duplicate key detected:"+We);if(We==="cata")throw new Error("cannot have a case named cata (sorry)");if(!$e(ct))throw new Error("case arguments must be an array");E.push(We),F[We]=(...Vt)=>{const jt=Vt.length;if(jt!==ct.length)throw new Error("Wrong number of arguments to case "+We+". Expected "+ct.length+" ("+ct+"), got "+jt);return{fold:(...eo)=>{if(eo.length!==w.length)throw new Error("Wrong number of arguments to fold. Expected "+w.length+", got "+eo.length);return eo[ne].apply(null,Vt)},match:eo=>{const ns=mn(eo);if(E.length!==ns.length)throw new Error("Wrong number of arguments to match. Expected: "+E.join(",")+`
Actual: `+ns.join(","));if(!ro(E,tl=>Gn(ns,tl)))throw new Error("Not all branches were specified when using match. Specified: "+ns.join(", ")+`
Required: `+E.join(", "));return eo[We].apply(null,Vt)},log:eo=>{console.log(eo,{constructors:E,constructor:We,params:Vt})}}}}),F}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const el=(w,E)=>{const F=qa.fromTable(w);return Up(F,E).bind(ne=>{const ye=ne[ne.length-1],We=ne[0].row,ct=ye.row+ye.rowspan,Vt=F.all.slice(We,ct);return Vp(Vt)}).getOr("")},Ym=w=>Ba(w,"rgb")?Km(w):w,tg=w=>{const E=In.fromDom(w);return{borderwidth:js(E,"border-width").getOr(""),borderstyle:js(E,"border-style").getOr(""),bordercolor:js(E,"border-color").map(Ym).getOr(""),backgroundcolor:js(E,"background-color").map(Ym).getOr("")}},Nc=w=>{const E=w[0],F=w.slice(1);return L(F,U=>{L(mn(E),ne=>{It(U,(ye,We)=>{const ct=E[ne];ct!==""&&ne===We&&ct!==ye&&(E[ne]="")})})}),E},Bc=(w,E,F,U)=>Ie(w,ne=>!Zs(F.formatter.matchNode(U,E+ne))).getOr(""),Jm=ee(Bc,["left","center","right"],"align"),hs=ee(Bc,["top","middle","bottom"],"valign"),Qm=(w,E)=>{const F=cu(w),U=th(w),ne=()=>({borderstyle:io(F,"border-style").getOr(""),bordercolor:Ym(io(F,"border-color").getOr("")),backgroundcolor:Ym(io(F,"background-color").getOr(""))}),ye={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},We=()=>{const mo=F["border-width"];return Hl(w)&&mo?{border:mo}:io(U,"border").fold(()=>({}),eo=>({border:eo}))},ct=E?ne():{},Vt=()=>{const mo=io(F,"border-spacing").or(io(U,"cellspacing")).fold(()=>({}),ns=>({cellspacing:ns})),eo=io(F,"border-padding").or(io(U,"cellpadding")).fold(()=>({}),ns=>({cellpadding:ns}));return{...mo,...eo}};return{...ye,...F,...U,...ct,...We(),...Vt()}},ng=w=>Qr(In.fromDom(w)).map(E=>{const F={selection:Yf(w.cells)};return el(E,F)}).getOr(""),je=(w,E,F)=>{const U=(ct,Vt)=>{const jt=js(In.fromDom(Vt),"border-width");return Hl(w)&&jt.isSome()?jt.getOr(""):ct.getAttrib(Vt,"border")||$l(w.dom,Vt,"border-width")||$l(w.dom,Vt,"border")||""},ne=w.dom,ye=Hl(w)?ne.getStyle(E,"border-spacing")||ne.getAttrib(E,"cellspacing"):ne.getAttrib(E,"cellspacing")||ne.getStyle(E,"border-spacing"),We=Hl(w)?$l(ne,E,"padding")||ne.getAttrib(E,"cellpadding"):ne.getAttrib(E,"cellpadding")||$l(ne,E,"padding");return{width:ne.getStyle(E,"width")||ne.getAttrib(E,"width"),height:ne.getStyle(E,"height")||ne.getAttrib(E,"height"),cellspacing:ye??"",cellpadding:We??"",border:U(ne,E),caption:!!ne.select("caption",E)[0],class:ne.getAttrib(E,"class",""),align:Jm(w,E),...F?tg(E):{}}},Kv=(w,E,F)=>{const U=w.dom;return{height:U.getStyle(E,"height")||U.getAttrib(E,"height"),class:U.getAttrib(E,"class",""),type:ng(E),align:Jm(w,E),...F?tg(E):{}}},Xv=(w,E,F,U)=>{const ne=w.dom,ye=U.getOr(E),We=(ct,Vt)=>ne.getStyle(ct,Vt)||ne.getAttrib(ct,Vt);return{width:We(ye,"width"),height:We(E,"height"),scope:ne.getAttrib(E,"scope"),celltype:zf(E),class:ne.getAttrib(E,"class",""),halign:Jm(w,E),valign:hs(w,E),...F?tg(E):{}}},pc=(w,E)=>{const F=qa.fromTable(w),U=qa.justCells(F),ne=Ro(U,ye=>Dn(E,We=>bs(ye.element,We)));return De(ne,ye=>({element:ye.element.dom,column:qa.getColumnAt(F,ye.column).map(We=>We.element.dom)}))},ef=(w,E,F,U)=>{U("scope")&&w.setAttrib("scope",F.scope),U("class")&&w.setAttrib("class",F.class),U("height")&&w.setStyle("height",es(F.height)),U("width")&&E.setStyle("width",es(F.width))},ed=(w,E,F)=>{F("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",E.backgroundcolor),F("bordercolor")&&w.setFormat("tablecellbordercolor",E.bordercolor),F("borderstyle")&&w.setFormat("tablecellborderstyle",E.borderstyle),F("borderwidth")&&w.setFormat("tablecellborderwidth",es(E.borderwidth))},ds=(w,E,F,U)=>{const ne=E.length===1;L(E,ye=>{const We=ye.element,ct=ne?Bn:U,Vt=Ti.normal(w,We),jt=ye.column.map(mo=>Ti.normal(w,mo)).getOr(Vt);ef(Vt,jt,F,ct),Hm(w)&&ed(Vt,F,ct),U("halign")&&Pl(w,We,F.halign),U("valign")&&Io(w,We,F.valign)})},kb=(w,E)=>{w.execCommand("mceTableCellType",!1,{type:E.celltype,no_events:!0})},bo=(w,E,F,U)=>{const ne=Os(U,(ye,We)=>F[We]!==ye);O(ne)>0&&E.length>=1&&Qr(E[0]).each(ye=>{const We=pc(ye,E),ct=O(Os(ne,(jt,mo)=>mo!=="scope"&&mo!=="celltype"))>0,Vt=Te(ne,"celltype");(ct||Te(ne,"scope"))&&ds(w,We,U,ee(Te,ne)),Vt&&kb(w,U),or(w,ye.dom,{structure:Vt,style:ct})})},co=(w,E,F,U)=>{const ne=U.getData();U.close(),w.undoManager.transact(()=>{bo(w,E,F,ne),w.focus()})},sa=(w,E)=>{const F=Qr(E[0]).map(U=>De(pc(U,E),ne=>Xv(w,ne.element,Hm(w),ne.column)));return Nc(F.getOrDie())},tf=w=>{const E=an(w);if(E.length===0)return;const F=sa(w,E),U={type:"tabpanel",tabs:[{title:"General",name:"general",items:uh(w)},Qf(w,"cell")]},ne={type:"panel",items:[{type:"grid",columns:2,items:uh(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:Hm(w)?U:ne,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:F,onSubmit:ee(co,w,E,F)})},Hs=w=>{const E=no(Vm(w));return E.length>0?q.some({name:"class",type:"listbox",label:"Class",items:E}):q.none()},em=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],yr=w=>em.concat(Hs(w).toArray()),Ia=(w,E,F)=>{F("class")&&w.setAttrib("class",E.class),F("height")&&w.setStyle("height",es(E.height))},uu=(w,E,F)=>{F("backgroundcolor")&&w.setStyle("background-color",E.backgroundcolor),F("bordercolor")&&w.setStyle("border-color",E.bordercolor),F("borderstyle")&&w.setStyle("border-style",E.borderstyle)},Ce=(w,E,F,U)=>{const ye=E.length===1?Bn:U;L(E,We=>{const ct=Ti.normal(w,We);Ia(ct,F,ye),Ll(w)&&uu(ct,F,ye),U("align")&&Pl(w,We,F.align)})},ec=(w,E)=>{w.execCommand("mceTableRowType",!1,{type:E.type,no_events:!0})},Ab=(w,E,F,U)=>{const ne=Os(U,(ye,We)=>F[We]!==ye);if(O(ne)>0){const ye=Te(ne,"type"),We=ye?O(ne)>1:!0;We&&Ce(w,E,U,ee(Te,ne)),ye&&ec(w,U),Qr(In.fromDom(E[0])).each(ct=>or(w,ct.dom,{structure:ye,style:We}))}},ar=(w,E,F,U)=>{const ne=U.getData();U.close(),w.undoManager.transact(()=>{Ab(w,E,F,ne),w.focus()})},yl=w=>{const E=Qt(jo(w),te.selected);if(E.length===0)return;const F=De(E,We=>Kv(w,We.dom,Ll(w))),U=Nc(F),ne={type:"tabpanel",tabs:[{title:"General",name:"general",items:yr(w)},Qf(w,"row")]},ye={type:"panel",items:[{type:"grid",columns:2,items:yr(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:Ll(w)?ne:ye,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:U,onSubmit:ee(ar,w,De(E,We=>We.dom),U)})},fh=(w,E,F)=>{const U=F?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ne=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],ye=au(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],We=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],ct=E.length>0?[{type:"listbox",name:"class",label:"Class",items:E}]:[];return U.concat(ne).concat(ye).concat(We).concat(ct)},$c=(w,E,F,U)=>{if(E.tagName==="TD"||E.tagName==="TH")Kt(F)&&As(U)?w.setStyle(E,F,U):w.setStyles(E,F);else if(E.children)for(let ne=0;ne<E.children.length;ne++)$c(w,E.children[ne],F,U)},Yv=(w,E,F,U)=>{const ne=w.dom,ye={},We={},ct=Hl(w),Vt=Ka(w);if(Zs(F.class)||(ye.class=F.class),We.height=es(F.height),ct?We.width=es(F.width):ne.getAttrib(E,"width")&&(ye.width=zu(F.width)),ct?(We["border-width"]=es(F.border),We["border-spacing"]=es(F.cellspacing)):(ye.border=F.border,ye.cellpadding=F.cellpadding,ye.cellspacing=F.cellspacing),ct&&E.children){const jt={};if(U.border&&(jt["border-width"]=es(F.border)),U.cellpadding&&(jt.padding=es(F.cellpadding)),Vt&&U.bordercolor&&(jt["border-color"]=F.bordercolor),!$t(jt))for(let mo=0;mo<E.children.length;mo++)$c(ne,E.children[mo],jt)}if(Vt){const jt=F;We["background-color"]=jt.backgroundcolor,We["border-color"]=jt.bordercolor,We["border-style"]=jt.borderstyle}ye.style=ne.serializeStyle({...cu(w),...We}),ne.setAttribs(E,{...th(w),...ye})},td=(w,E,F,U)=>{const ne=w.dom,ye=U.getData(),We=Os(ye,(ct,Vt)=>F[Vt]!==ct);U.close(),ye.class===""&&delete ye.class,w.undoManager.transact(()=>{if(!E){const ct=gl(ye.cols).getOr(1),Vt=gl(ye.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:Vt,columns:ct}),E=rn(jo(w),Nl(w)).bind(jt=>Qr(jt,Nl(w))).map(jt=>jt.dom).getOrDie()}if(O(We)>0){const ct={border:Te(We,"border"),bordercolor:Te(We,"bordercolor"),cellpadding:Te(We,"cellpadding")};Yv(w,E,ye,ct);const Vt=ne.select("caption",E)[0];(Vt&&!ye.caption||!Vt&&ye.caption)&&w.execCommand("mceTableToggleCaption"),Pl(w,E,ye.align)}if(w.focus(),w.addVisual(),O(We)>0){const ct=Te(We,"caption"),Vt=ct?O(We)>1:!0;or(w,E,{structure:ct,style:Vt})}})},Zp=(w,E)=>{const F=w.dom;let U,ne=Qm(w,Ka(w));E?(ne.cols="1",ne.rows="1",Ka(w)&&(ne.borderstyle="",ne.bordercolor="",ne.backgroundcolor="")):(U=F.getParent(w.selection.getStart(),"table",w.getBody()),U?ne=je(w,U,Ka(w)):Ka(w)&&(ne.borderstyle="",ne.bordercolor="",ne.backgroundcolor=""));const ye=no(Jc(w));ye.length>0&&ne.class&&(ne.class=ne.class.replace(/\s*mce\-item\-table\s*/g,""));const We={type:"grid",columns:2,items:fh(w,ye,E)},ct=()=>({type:"panel",items:[We]}),Vt=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[We]},Qf(w,"table")]}),jt=Ka(w)?Vt():ct();w.windowManager.open({title:"Table Properties",size:"normal",body:jt,onSubmit:ee(td,w,U,ne),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ne})},bc=w=>{const E=F=>{_c(jo(w))&&F()};It({mceTableProps:ee(Zp,w,!1),mceTableRowProps:ee(yl,w),mceTableCellProps:ee(tf,w),mceInsertTableDialog:ee(Zp,w,!0)},(F,U)=>w.addCommand(U,()=>E(F)))},oo=(w,E)=>ue(w,E).isSome(),_i=tr,og=w=>{const E=(U,ne)=>Ls(U,ne).exists(ye=>parseInt(ye,10)>1),F=U=>E(U,"rowspan")||E(U,"colspan");return w.length>0&&ro(w,F)?q.some(w):q.none()},ra=(w,E,F)=>E.length<=1?q.none():Ip(w,F.firstSelectedSelector,F.lastSelectedSelector).map(U=>({bounds:U,cells:E})),gh=w=>({element:w,mergable:q.none(),unmergable:q.none(),selection:[w]}),nd=(w,E,F)=>({element:F,mergable:ra(E,w,te),unmergable:og(w),selection:_i(w)}),du=w=>{const E=Rs(q.none()),F=Rs([]);let U=q.none();const ne=Tc("caption"),ye=Sn=>U.forall(os=>!os[Sn]),We=()=>Wt(jo(w),Nl(w)),ct=()=>Wt(Bl(w),Nl(w)),Vt=()=>We().bind(Sn=>ja(Sa(Qr(Sn),ct().bind(Qr),(os,Zr)=>bs(os,Zr)?ne(Sn)?q.some(gh(Sn)):q.some(nd(an(w),os,Sn)):q.none()))),jt=Sn=>Qr(Sn.element).map(Zr=>{const Es=qa.fromTable(Zr),gu=Up(Es,Sn).getOr([]),ki=Fu(gu,(Wl,vc)=>(vc.isLocked&&(Wl.onAny=!0,vc.column===0?Wl.onFirst=!0:vc.column+vc.colspan>=Es.grid.columns&&(Wl.onLast=!0)),Wl),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:mh(Es,Sn).isSome(),unmergeable:Ks(Es,Sn).isSome(),locked:ki}}),mo=()=>{E.set(Ul(Vt)()),U=E.get().bind(jt),L(F.get(),On)},eo=Sn=>(Sn(),F.set(F.get().concat([Sn])),()=>{F.set(Ro(F.get(),os=>os!==Sn))}),ns=(Sn,os)=>eo(()=>E.get().fold(()=>{Sn.setEnabled(!1)},Zr=>{Sn.setEnabled(!os(Zr)&&w.selection.isEditable())})),la=(Sn,os,Zr)=>eo(()=>E.get().fold(()=>{Sn.setEnabled(!1),Sn.setActive(!1)},Es=>{Sn.setEnabled(!os(Es)&&w.selection.isEditable()),Sn.setActive(Zr(Es))})),tl=Sn=>U.exists(os=>os.locked[Sn]),mu=Sn=>ns(Sn,os=>!1),tc=Sn=>ns(Sn,os=>ne(os.element)),nm=Sn=>os=>ns(os,Zr=>ne(Zr.element)||tl(Sn)),bh=Sn=>os=>ns(os,Zr=>ne(Zr.element)||Sn().isNone()),om=(Sn,os)=>Zr=>ns(Zr,Es=>ne(Es.element)||Sn().isNone()||tl(os)),sd=Sn=>ns(Sn,os=>ye("mergeable")),Vs=Sn=>ns(Sn,os=>ye("unmergeable")),nl=Sn=>la(Sn,Za,os=>Qr(os.element,Nl(w)).exists(Es=>oo(Es,"caption"))),fu=(Sn,os)=>Zr=>la(Zr,Es=>ne(Es.element),()=>w.queryCommandValue(Sn)===os),sm=fu("mceTableRowType","header"),Ob=fu("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",mo),{onSetupTable:mu,onSetupCellOrRow:tc,onSetupColumn:nm,onSetupPasteable:bh,onSetupPasteableColumn:om,onSetupMergeable:sd,onSetupUnmergeable:Vs,resetTargets:mo,onSetupTableWithCaption:nl,onSetupTableRowHeaders:sm,onSetupTableColumnHeaders:Ob,targets:E.get}};var Ms=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const hh="x-tinymce/dom-table-",fe=hh+"rows",aa=hh+"columns",sg=w=>{var E;const F=(E=Ms.read())!==null&&E!==void 0?E:[];return mc(F,U=>q.from(U.getType(w)))},La=()=>sg(fe),Ha=()=>sg(aa),ca=w=>E=>{const F=()=>{E.setEnabled(w.selection.isEditable())};return w.on("NodeChange",F),F(),()=>{w.off("NodeChange",F)}},xs=(w,E)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:ca(w),fetch:ct=>ct("inserttable | cell row column | advtablesort | tableprops deletetable")});const F=ct=>()=>w.execCommand(ct),U=(ct,Vt)=>{w.queryCommandSupported(Vt.command)&&w.ui.registry.addButton(ct,{...Vt,onAction:_o(Vt.onAction)?Vt.onAction:F(Vt.command)})},ne=(ct,Vt)=>{w.queryCommandSupported(Vt.command)&&w.ui.registry.addToggleButton(ct,{...Vt,onAction:_o(Vt.onAction)?Vt.onAction:F(Vt.command)})};U("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:E.onSetupTable}),U("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:E.onSetupTable}),U("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:E.onSetupCellOrRow}),U("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:E.onSetupMergeable}),U("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:E.onSetupUnmergeable}),U("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:E.onSetupCellOrRow}),U("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:E.onSetupCellOrRow}),U("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:E.onSetupCellOrRow}),U("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:E.onSetupCellOrRow}),U("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:E.onSetupColumn("onFirst")}),U("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:E.onSetupColumn("onLast")}),U("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:E.onSetupColumn("onAny")}),U("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:E.onSetupCellOrRow}),U("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:E.onSetupCellOrRow}),U("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:E.onSetupPasteable(La)}),U("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:E.onSetupPasteable(La)}),U("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:E.onSetupColumn("onAny")}),U("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:E.onSetupColumn("onAny")}),U("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:E.onSetupPasteableColumn(Ha,"onFirst")}),U("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:E.onSetupPasteableColumn(Ha,"onLast")}),U("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:ca(w)});const ye=Ju(Jc(w));ye.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Jd(w,ye,"tableclass",ct=>w.execCommand("mceTableToggleClass",!1,ct)),onSetup:E.onSetupTable});const We=Ju(bl(w));We.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Jd(w,We,"tablecellclass",ct=>w.execCommand("mceTableCellToggleClass",!1,ct)),onSetup:E.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Jd(w,St,"tablecellverticalalign",Yu(w,"vertical-align")),onSetup:E.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Jd(w,Il(w),"tablecellborderwidth",Yu(w,"border-width")),onSetup:E.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Jd(w,ju(w),"tablecellborderstyle",Yu(w,"border-style")),onSetup:E.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:ct=>ct(xn(w,Kd(w),"background-color")),onSetup:E.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:ct=>ct(xn(w,wi(w),"border-color")),onSetup:E.onSetupCellOrRow})),ne("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:E.onSetupTableWithCaption}),ne("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:lh(w),onSetup:E.onSetupTableRowHeaders}),ne("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ih(w),onSetup:E.onSetupTableColumnHeaders})},ph=w=>{const E=U=>w.dom.is(U,"table")&&w.getBody().contains(U)&&w.dom.isEditable(U.parentNode),F=zm(w);F.length>0&&w.ui.registry.addContextToolbar("table",{predicate:E,items:F,scope:"node",position:"node"})},tm=w=>E=>{const F=()=>{E.setEnabled(w.selection.isEditable())};return w.on("NodeChange",F),F(),()=>{w.off("NodeChange",F)}},od=(w,E)=>{const F=eo=>()=>w.execCommand(eo),U=(eo,ns)=>w.queryCommandSupported(ns.command)?(w.ui.registry.addMenuItem(eo,{...ns,onAction:_o(ns.onAction)?ns.onAction:F(ns.command)}),!0):!1,ne=(eo,ns)=>{w.queryCommandSupported(ns.command)&&w.ui.registry.addToggleMenuItem(eo,{...ns,onAction:_o(ns.onAction)?ns.onAction:F(ns.command)})},ye=eo=>{w.execCommand("mceInsertTable",!1,{rows:eo.numRows,columns:eo.numColumns})},We=[U("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:E.onSetupCellOrRow}),U("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:E.onSetupCellOrRow}),U("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:E.onSetupCellOrRow}),U("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:E.onSetupCellOrRow}),U("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:E.onSetupCellOrRow}),U("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:E.onSetupCellOrRow}),U("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:E.onSetupPasteable(La)}),U("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:E.onSetupPasteable(La)})],ct=[U("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:E.onSetupColumn("onFirst")}),U("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:E.onSetupColumn("onLast")}),U("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:E.onSetupColumn("onAny")}),U("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:E.onSetupColumn("onAny")}),U("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:E.onSetupColumn("onAny")}),U("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:E.onSetupPasteableColumn(Ha,"onFirst")}),U("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:E.onSetupPasteableColumn(Ha,"onLast")})],Vt=[U("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:E.onSetupCellOrRow}),U("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:E.onSetupMergeable}),U("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:E.onSetupUnmergeable})];Ea(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:ye}],onSetup:tm(w)}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:tm(w)}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:tm(w)}),U("tableprops",{text:"Table properties",onSetup:E.onSetupTable,command:"mceTableProps"}),U("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:E.onSetupTable,command:"mceTableDelete"}),Gn(We,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:at("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),Gn(ct,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:at("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),Gn(Vt,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:at("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(E.resetTargets(),E.targets().fold(at(""),eo=>Qe(eo.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const jt=Ju(Jc(w));jt.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Fa(w,jt,"tableclass",eo=>w.execCommand("mceTableToggleClass",!1,eo)),onSetup:E.onSetupTable});const mo=Ju(bl(w));mo.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Fa(w,mo,"tablecellclass",eo=>w.execCommand("mceTableCellToggleClass",!1,eo)),onSetup:E.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Fa(w,St,"tablecellverticalalign",Yu(w,"vertical-align")),onSetup:E.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Fa(w,Il(w),"tablecellborderwidth",Yu(w,"border-width")),onSetup:E.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Fa(w,ju(w),"tablecellborderstyle",Yu(w,"border-style")),onSetup:E.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>xn(w,Kd(w),"background-color"),onSetup:E.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>xn(w,wi(w),"border-color"),onSetup:E.onSetupCellOrRow})),ne("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:E.onSetupTableWithCaption}),ne("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:lh(w),onSetup:E.onSetupTableRowHeaders}),ne("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ih(w),onSetup:E.onSetupTableRowHeaders})},Lt=w=>{const E=du(w);gc(w),bc(w),od(w,E),xs(w,E),ph(w)};var ow=()=>{qe.add("table",Lt)};ow()})();(function(){var qe=tinymce.util.Tools.resolve("tinymce.PluginManager");const on=(_,M,V)=>{var te;return V(_,M.prototype)?!0:((te=_.constructor)===null||te===void 0?void 0:te.name)===M.name},qt=_=>{const M=typeof _;return _===null?"null":M==="object"&&Array.isArray(_)?"array":M==="object"&&on(_,String,(V,te)=>te.isPrototypeOf(V))?"string":M},Rn=_=>M=>qt(M)===_,Un=_=>M=>typeof M===_,Fn=Rn("string"),Kt=Rn("object"),$e=Rn("array"),Ht=Un("boolean"),Zs=_=>_==null,To=_=>!Zs(_),As=Un("function"),_o=Un("number"),Wo=()=>{},qo=_=>()=>_,Fs=(_,M)=>_===M,at=_=>M=>!_(M),tr=qo(!1);class Ut{constructor(M,V){this.tag=M,this.value=V}static some(M){return new Ut(!0,M)}static none(){return Ut.singletonNone}fold(M,V){return this.tag?V(this.value):M()}isSome(){return this.tag}isNone(){return!this.tag}map(M){return this.tag?Ut.some(M(this.value)):Ut.none()}bind(M){return this.tag?M(this.value):Ut.none()}exists(M){return this.tag&&M(this.value)}forall(M){return!this.tag||M(this.value)}filter(M){return!this.tag||M(this.value)?this:Ut.none()}getOr(M){return this.tag?this.value:M}or(M){return this.tag?this:M}getOrThunk(M){return this.tag?this.value:M()}orThunk(M){return this.tag?this:M()}getOrDie(M){if(this.tag)return this.value;throw new Error(M??"Called getOrDie on None")}static from(M){return To(M)?Ut.some(M):Ut.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(M){this.tag&&M(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ut.singletonNone=new Ut(!1);const ee=Array.prototype.slice,On=Array.prototype.indexOf,Za=Array.prototype.push,Bn=(_,M)=>On.call(_,M),q=(_,M)=>Bn(_,M)>-1,mn=(_,M)=>{for(let V=0,te=_.length;V<te;V++){const se=_[V];if(M(se,V))return!0}return!1},xo=(_,M)=>{const V=_.length,te=new Array(V);for(let se=0;se<V;se++){const Ze=_[se];te[se]=M(Ze,se)}return te},It=(_,M)=>{for(let V=0,te=_.length;V<te;V++){const se=_[V];M(se,V)}},Oe=(_,M)=>{const V=[];for(let te=0,se=_.length;te<se;te++){const Ze=_[te];M(Ze,te)&&V.push(Ze)}return V},oe=(_,M)=>{if(_.length===0)return[];{let V=M(_[0]);const te=[];let se=[];for(let Ze=0,Wt=_.length;Ze<Wt;Ze++){const rn=_[Ze],an=M(rn);an!==V&&(te.push(se),se=[]),V=an,se.push(rn)}return se.length!==0&&te.push(se),te}},Os=(_,M,V)=>(It(_,(te,se)=>{V=M(V,te,se)}),V),jn=(_,M,V)=>{for(let te=0,se=_.length;te<se;te++){const Ze=_[te];if(M(Ze,te))return Ut.some(Ze);if(V(Ze,te))break}return Ut.none()},Ot=(_,M)=>jn(_,M,tr),O=_=>{const M=[];for(let V=0,te=_.length;V<te;++V){if(!$e(_[V]))throw new Error("Arr.flatten item "+V+" was not an array, input: "+_);Za.apply(M,_[V])}return M},io=(_,M)=>O(xo(_,M)),Te=_=>{const M=ee.call(_,0);return M.reverse(),M},ht=(_,M)=>M>=0&&M<_.length?Ut.some(_[M]):Ut.none(),$t=_=>ht(_,0),Be=_=>ht(_,_.length-1),Tn=(_,M)=>{const V=[],te=As(M)?se=>mn(V,Ze=>M(Ze,se)):se=>q(V,se);for(let se=0,Ze=_.length;se<Ze;se++){const Wt=_[se];te(Wt)||V.push(Wt)}return V},ko=(_,M,V=Fs)=>_.exists(te=>V(te,M)),Gn=(_,M,V=Fs)=>Dn(_,M,V).getOr(_.isNone()&&M.isNone()),Dn=(_,M,V)=>_.isSome()&&M.isSome()?Ut.some(V(_.getOrDie(),M.getOrDie())):Ut.none(),ke=1,De=(_,M)=>{const te=(M||document).createElement("div");if(te.innerHTML=_,!te.hasChildNodes()||te.childNodes.length>1){const se="HTML does not have a single root node";throw console.error(se,_),new Error(se)}return qn(te.childNodes[0])},L=(_,M)=>{const te=(M||document).createElement(_);return qn(te)},dc=(_,M)=>{const te=(M||document).createTextNode(_);return qn(te)},qn=_=>{if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},fn={fromHtml:De,fromTag:L,fromText:dc,fromDom:qn,fromPoint:(_,M,V)=>Ut.from(_.dom.elementFromPoint(M,V)).map(qn)},Fu=(_,M)=>{const V=_.dom;if(V.nodeType!==ke)return!1;{const te=V;if(te.matches!==void 0)return te.matches(M);if(te.msMatchesSelector!==void 0)return te.msMatchesSelector(M);if(te.webkitMatchesSelector!==void 0)return te.webkitMatchesSelector(M);if(te.mozMatchesSelector!==void 0)return te.mozMatchesSelector(M);throw new Error("Browser lacks native selectors")}},Me=(_,M)=>_.dom===M.dom,Ie=(_,M)=>{const V=_.dom,te=M.dom;return V===te?!1:V.contains(te)},He=Fu;var me=(_,M,V,te,se)=>_(V,te)?Ut.some(V):As(se)&&se(V)?Ut.none():M(V,te,se);typeof window<"u"||Function("return this;")();const ro=_=>_.dom.nodeName.toLowerCase(),Zo=_=>_.dom.nodeType,fr=(_=>M=>Zo(M)===_)(ke),Eo=_=>M=>fr(M)&&ro(M)===_,mc=_=>Ut.from(_.dom.parentNode).map(fn.fromDom),Jo=_=>Ut.from(_.dom.parentElement).map(fn.fromDom),Hr=_=>Ut.from(_.dom.nextSibling).map(fn.fromDom),Zc=_=>xo(_.dom.childNodes,fn.fromDom),Ma=(_,M)=>{const V=_.dom.childNodes;return Ut.from(V[M]).map(fn.fromDom)},gr=_=>Ma(_,0),Qo=_=>Ma(_,_.dom.childNodes.length-1),Dm=(_,M,V)=>{let te=_.dom;const se=As(V)?V:tr;for(;te.parentNode;){te=te.parentNode;const Ze=fn.fromDom(te);if(M(Ze))return Ut.some(Ze);if(se(Ze))break}return Ut.none()},Is=(_,M,V)=>me((se,Ze)=>Ze(se),Dm,_,M,V),Mo=(_,M)=>{mc(_).each(te=>{te.dom.insertBefore(M.dom,_.dom)})},Rm=(_,M)=>{Hr(_).fold(()=>{mc(_).each(se=>{In(se,M)})},te=>{Mo(te,M)})},In=(_,M)=>{_.dom.appendChild(M.dom)},Na=(_,M)=>{It(M,V=>{Mo(_,V)})},hr=(_,M)=>{It(M,V=>{In(_,V)})},mi=_=>{_.dom.textContent="",It(Zc(_),M=>{Iu(M)})},Iu=_=>{const M=_.dom;M.parentNode!==null&&M.parentNode.removeChild(M)};var bs=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Mm=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Qe=tinymce.util.Tools.resolve("tinymce.util.VK");const Qn=_=>xo(_,fn.fromDom),ba=Object.keys,va=(_,M)=>{const V=ba(_);for(let te=0,se=V.length;te<se;te++){const Ze=V[te],Wt=_[Ze];M(Wt,Ze)}},Ol=_=>(M,V)=>{_[V]=M},Dl=(_,M,V,te)=>{va(_,(se,Ze)=>{(M(se,Ze)?V:te)(se,Ze)})},Ko=(_,M)=>{const V={};return Dl(_,M,Ol(V),Wo),V},Ji=(_,M,V)=>{if(Fn(V)||Ht(V)||_o(V))_.setAttribute(M,V+"");else throw console.error("Invalid call to Attribute.set. Key ",M,":: Value ",V,":: Element ",_),new Error("Attribute value was not simple")},Tc=(_,M)=>{const V=_.dom;va(M,(te,se)=>{Ji(V,se,te)})},No=_=>Os(_.dom.attributes,(M,V)=>(M[V.name]=V.value,M),{}),tn=(_,M)=>fn.fromDom(_.dom.cloneNode(M)),Vr=_=>tn(_,!0),Qi=(_,M)=>{const V=fn.fromTag(M),te=No(_);return Tc(V,te),V},Lu=(_,M)=>{const V=Qi(_,M);Rm(_,V);const te=Zc(_);return hr(V,te),Iu(_),V};var Hu=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),is=tinymce.util.Tools.resolve("tinymce.util.Tools");const Dr=_=>M=>To(M)&&M.nodeName.toLowerCase()===_,ms=_=>M=>To(M)&&_.test(M.nodeName),Rr=_=>To(_)&&_.nodeType===3,eu=_=>To(_)&&_.nodeType===1,Mr=ms(/^(OL|UL|DL)$/),fc=ms(/^(OL|UL)$/),vs=Dr("ol"),ya=ms(/^(LI|DT|DD)$/),fi=ms(/^(DT|DD)$/),Vf=ms(/^(TH|TD)$/),tu=Dr("br"),Rl=_=>{var M;return((M=_.parentNode)===null||M===void 0?void 0:M.firstChild)===_},Vu=(_,M)=>To(M)&&M.nodeName in _.schema.getTextBlockElements(),ue=(_,M)=>To(_)&&_.nodeName in M,Ca=(_,M)=>To(M)&&M.nodeName in _.schema.getVoidElements(),Ml=(_,M)=>tu(M)?_.isBlock(M.nextSibling)&&!tu(M.previousSibling):!1,gi=(_,M,V)=>{const te=_.isEmpty(M);return V&&_.select("span[data-mce-type=bookmark]",M).length>0?!1:te},Nm=(_,M)=>_.isChildOf(M,_.getRoot()),Bo=_=>M=>M.options.get(_),zf=_=>{const M=_.options.register;M("lists_indent_on_tab",{processor:"boolean",default:!0})},Np=Bo("lists_indent_on_tab"),Nl=Bo("forced_root_block"),zu=Bo("forced_root_block_attrs"),es=(_,M)=>{const V=_.dom,te=_.schema.getBlockElements(),se=V.createFragment(),Ze=Nl(_),Wt=zu(_);let rn,an,Qt=!1;for(an=V.create(Ze,Wt),ue(M.firstChild,te)||se.appendChild(an);rn=M.firstChild;){const St=rn.nodeName;!Qt&&(St!=="SPAN"||rn.getAttribute("data-mce-type")!=="bookmark")&&(Qt=!0),ue(rn,te)?(se.appendChild(rn),an=null):(an||(an=V.create(Ze,Wt),se.appendChild(an)),an.appendChild(rn))}return!Qt&&an&&an.appendChild(V.create("br",{"data-mce-bogus":"1"})),se},jo=Hu.DOM,Bl=(_,M,V)=>{const te=Qt=>{const St=Qt.parentNode;St&&is.each(se,us=>{St.insertBefore(us,V.parentNode)}),jo.remove(Qt)},se=jo.select('span[data-mce-type="bookmark"]',M),Ze=es(_,V),Wt=jo.createRng();Wt.setStartAfter(V),Wt.setEndAfter(M);const rn=Wt.extractContents();for(let Qt=rn.firstChild;Qt;Qt=Qt.firstChild)if(Qt.nodeName==="LI"&&_.dom.isEmpty(Qt)){jo.remove(Qt);break}_.dom.isEmpty(rn)||jo.insertAfter(rn,M),jo.insertAfter(Ze,M);const an=V.parentElement;an&&gi(_.dom,an)&&te(an),jo.remove(V),gi(_.dom,M)&&jo.remove(M)},_c=Eo("dd"),hi=Eo("dt"),Uu=(_,M)=>{_c(M)?Lu(M,"dt"):hi(M)&&Jo(M).each(V=>Bl(_,V.dom,M.dom))},pi=_=>{hi(_)&&Lu(_,"dd")},po=(_,M,V)=>{M==="Indent"?It(V,pi):It(V,te=>Uu(_,te))},wa=(_,M)=>{if(Rr(_))return{container:_,offset:M};const V=bs.getNode(_,M);return Rr(V)?{container:V,offset:M>=_.childNodes.length?V.data.length:0}:V.previousSibling&&Rr(V.previousSibling)?{container:V.previousSibling,offset:V.previousSibling.data.length}:V.nextSibling&&Rr(V.nextSibling)?{container:V.nextSibling,offset:0}:{container:_,offset:M}},Bm=_=>{const M=_.cloneRange(),V=wa(_.startContainer,_.startOffset);M.setStart(V.container,V.offset);const te=wa(_.endContainer,_.endOffset);return M.setEnd(te.container,te.offset),M},bi=["OL","UL","DL"],kc=bi.join(","),Ls=(_,M)=>{const V=M||_.selection.getStart(!0);return _.dom.getParent(V,kc,fl(_,V))},fs=(_,M)=>To(_)&&M.length===1&&M[0]===_,Bp=_=>Oe(_.querySelectorAll(kc),Mr),Uf=_=>{const M=Ls(_),V=_.selection.getSelectedBlocks();return fs(M,V)?Bp(M):Oe(V,te=>Mr(te)&&M!==te)},Ao=(_,M)=>{const V=is.map(M,te=>{const se=_.dom.getParent(te,"li,dd,dt",fl(_,te));return se||te});return Tn(V)},Sa=_=>{const M=_.selection.getSelectedBlocks();return Oe(Ao(_,M),ya)},ja=_=>Oe(Sa(_),fi),nr=(_,M)=>{const V=_.dom.getParents(M,"TD,TH");return V.length>0?V[0]:_.getBody()},$m=(_,M)=>!Mr(M)&&!ya(M)&&mn(bi,V=>_.isValidChild(M.nodeName,V)),fl=(_,M)=>{const V=_.dom.getParents(M,_.dom.isBlock);return Ot(V,se=>$m(_.schema,se)).getOr(_.getBody())},Ac=(_,M)=>{const V=_.dom.getParents(M,"ol,ul",fl(_,M));return Be(V)},Ba=_=>{const M=Ac(_,_.selection.getStart()),V=Oe(_.selection.getSelectedBlocks(),fc);return M.toArray().concat(V)},Jg=_=>{const M=Ba(_);return Wf(_,M)},Wf=(_,M)=>{const V=xo(M,te=>Ac(_,te).getOr(te));return Tn(V)},Pm=_=>/\btox\-/.test(_.className),Oc=(_,M)=>jn(_,Mr,Vf).exists(V=>V.nodeName===M&&!Pm(V)),gl=(_,M)=>M!==null&&!_.dom.isEditable(M),Zf=_=>{const M=Ls(_);return gl(_,M)},hl=(_,M)=>{const V=_.dom.getParent(M,"ol,ul,dl");return gl(_,V)},Zd=(_,M)=>{const V=_.selection.getNode();return M({parents:_.dom.getParents(V),element:V}),_.on("NodeChange",M),()=>_.off("NodeChange",M)},Fm=(_,M)=>{const te=(M||document).createDocumentFragment();return It(_,se=>{te.appendChild(se.dom)}),fn.fromDom(te)},Wu=(_,M,V)=>_.dispatch("ListMutation",{action:M,element:V}),Jr=(_=>M=>M.replace(_,""))(/^\s+|\s+$/g),js=_=>_.length>0,nu=_=>!js(_),jd=_=>_.style!==void 0&&As(_.style.getPropertyValue),jf=(_,M,V)=>{if(!Fn(V))throw console.error("Invalid call to CSS.set. Property ",M,":: Value ",V,":: Element ",_),new Error("CSS value must be a string: "+V);jd(_)&&_.style.setProperty(M,V)},jc=(_,M,V)=>{const te=_.dom;jf(te,M,V)},Qg=(_,M)=>{In(_.item,M.list)},$a=_=>{for(let M=1;M<_.length;M++)Qg(_[M-1],_[M])},Nr=(_,M)=>{Dn(Be(_),$t(M),Qg)},Gc=(_,M)=>{const V={list:fn.fromTag(M,_),item:fn.fromTag("li",_)};return In(V.list,V.item),V},vi=(_,M,V)=>{const te=[];for(let se=0;se<V;se++)te.push(Gc(_,M.listType));return te},gn=(_,M)=>{for(let V=0;V<_.length-1;V++)jc(_[V].item,"list-style-type","none");Be(_).each(V=>{Tc(V.list,M.listAttributes),Tc(V.item,M.itemAttributes),hr(V.item,M.content)})},Kn=(_,M)=>{ro(_.list)!==M.listType&&(_.list=Lu(_.list,M.listType)),Tc(_.list,M.listAttributes)},zr=(_,M,V)=>{const te=fn.fromTag("li",_);return Tc(te,M),hr(te,V),te},Ds=(_,M)=>{In(_.list,M),_.item=M},eh=(_,M,V)=>{const te=M.slice(0,V.depth);return Be(te).each(se=>{const Ze=zr(_,V.itemAttributes,V.content);Ds(se,Ze),Kn(se,V)}),te},ws=(_,M,V)=>{const te=vi(_,V,V.depth-M.length);return $a(te),gn(te,V),Nr(M,te),M.concat(te)},$p=(_,M)=>{const V=Os(M,(te,se)=>se.depth>te.length?ws(_,te,se):eh(_,te,se),[]);return $t(V).map(te=>te.list)},ou=_=>He(_,"OL,UL"),Qr=_=>gr(_).exists(ou),Xt=_=>Qo(_).exists(ou),pl=_=>_.depth>0,Dc=_=>_.isSelected,Ve=_=>{const M=Zc(_),V=Xt(_)?M.slice(0,-1):M;return xo(V,Vr)},qc=(_,M,V)=>mc(_).filter(fr).map(te=>({depth:M,dirty:!1,isSelected:V,content:Ve(_),itemAttributes:No(_),listAttributes:No(te),listType:ro(te)})),Gs=(_,M)=>{switch(_){case"Indent":M.depth++;break;case"Outdent":M.depth--;break;case"Flatten":M.depth=0}M.dirty=!0},ea=(_,M)=>{_.listType=M.listType,_.listAttributes={...M.listAttributes}},Lm=_=>{_.listAttributes=Ko(_.listAttributes,(M,V)=>V!=="start")},Ln=(_,M)=>{const V=_[M].depth,te=Ze=>Ze.depth===V&&!Ze.dirty,se=Ze=>Ze.depth<V;return jn(Te(_.slice(0,M)),te,se).orThunk(()=>jn(_.slice(M+1),te,se))},yi=_=>(It(_,(M,V)=>{Ln(_,V).fold(()=>{M.dirty&&Lm(M)},te=>ea(M,te))}),_),su=_=>{let M=_;return{get:()=>M,set:se=>{M=se}}},qs=(_,M,V,te)=>gr(te).filter(ou).fold(()=>{M.each(Wt=>{Me(Wt.start,te)&&V.set(!0)});const se=qc(te,_,V.get());M.each(Wt=>{Me(Wt.end,te)&&V.set(!1)});const Ze=Qo(te).filter(ou).map(Wt=>ys(_,M,V,Wt)).getOr([]);return se.toArray().concat(Ze)},se=>ys(_,M,V,se)),ys=(_,M,V,te)=>io(Zc(te),se=>{const Ze=ou(se)?ys:qs,Wt=_+1;return Ze(Wt,M,V,se)}),ru=(_,M)=>{const V=su(!1),te=0;return xo(_,se=>({sourceList:se,entries:ys(te,M,V,se)}))},Tb=(_,M)=>{const V=yi(M);return xo(V,te=>{const se=Fm(te.content);return fn.fromDom(es(_,se.dom))})},Gf=(_,M)=>{const V=yi(M);return $p(_.contentDocument,V).toArray()},ts=(_,M)=>io(oe(M,pl),V=>$t(V).exists(pl)?Gf(_,V):Tb(_,V)),Ga=(_,M)=>{It(Oe(_,Dc),V=>Gs(M,V))},qa=_=>{const M=xo(Sa(_),fn.fromDom);return Dn(Ot(M,at(Qr)),Ot(Te(M),at(Qr)),(V,te)=>({start:V,end:te}))},xa=(_,M,V)=>{const te=ru(M,qa(_));It(te,se=>{Ga(se.entries,V);const Ze=ts(_,se.entries);It(Ze,Wt=>{Wu(_,V==="Indent"?"IndentList":"OutdentList",Wt.dom)}),Na(se.sourceList,Ze),Iu(se.sourceList)})},$l=(_,M)=>{const V=Qn(Jg(_)),te=Qn(ja(_));let se=!1;if(V.length||te.length){const Ze=_.selection.getBookmark();xa(_,V,M),po(_,M,te),_.selection.moveToBookmark(Ze),_.selection.setRng(Bm(_.selection.getRng())),_.nodeChanged(),se=!0}return se},Pl=(_,M)=>!Zf(_)&&$l(_,M),Io=_=>Pl(_,"Indent"),or=_=>Pl(_,"Outdent"),Ur=_=>Pl(_,"Flatten"),Gd="\uFEFF",Rc=_=>_===Gd;var $o=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const sr=Hu.DOM,Kc=_=>{const M={},V=te=>{let se=_[te?"startContainer":"endContainer"],Ze=_[te?"startOffset":"endOffset"];if(eu(se)){const Wt=sr.create("span",{"data-mce-type":"bookmark"});se.hasChildNodes()?(Ze=Math.min(Ze,se.childNodes.length-1),te?se.insertBefore(Wt,se.childNodes[Ze]):sr.insertAfter(Wt,se.childNodes[Ze])):se.appendChild(Wt),se=Wt,Ze=0}M[te?"startContainer":"endContainer"]=se,M[te?"startOffset":"endOffset"]=Ze};return V(!0),_.collapsed||V(),M},Zu=_=>{const M=te=>{const se=rn=>{var an;let Qt=(an=rn.parentNode)===null||an===void 0?void 0:an.firstChild,St=0;for(;Qt;){if(Qt===rn)return St;(!eu(Qt)||Qt.getAttribute("data-mce-type")!=="bookmark")&&St++,Qt=Qt.nextSibling}return-1};let Ze=_[te?"startContainer":"endContainer"],Wt=_[te?"startOffset":"endOffset"];if(Ze){if(eu(Ze)&&Ze.parentNode){const rn=Ze;Wt=se(Ze),Ze=Ze.parentNode,sr.remove(rn),!Ze.hasChildNodes()&&sr.isBlock(Ze)&&Ze.appendChild(sr.create("br"))}_[te?"startContainer":"endContainer"]=Ze,_[te?"startOffset":"endOffset"]=Wt}};M(!0),M();const V=sr.createRng();return V.setStart(_.startContainer,_.startOffset),_.endContainer&&V.setEnd(_.endContainer,_.endOffset),Bm(V)},Fl=_=>{switch(_){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Xc=(_,M,V)=>{const te=V["list-style-type"]?V["list-style-type"]:null;_.setStyle(M,"list-style-type",te)},Ss=(_,M)=>{is.each(M,(V,te)=>{_.setAttribute(te,V)})},ta=(_,M,V)=>{Ss(M,V["list-attributes"]),is.each(_.select("li",M),te=>{Ss(te,V["list-item-attributes"])})},pr=(_,M,V)=>{Xc(_,M,V),ta(_,M,V)},Yc=(_,M,V)=>{is.each(V,te=>_.setStyle(M,te,""))},Ci=(_,M)=>To(M)&&!ue(M,_.schema.getBlockElements()),ao=(_,M,V,te)=>{let se=M[V?"startContainer":"endContainer"];const Ze=M[V?"startOffset":"endOffset"];eu(se)&&(se=se.childNodes[Math.min(Ze,se.childNodes.length-1)]||se),!V&&tu(se.nextSibling)&&(se=se.nextSibling);const Wt=(rn,an)=>{var Qt;const St=new Mm(rn,te),us=an?"next":"prev";let vr;for(;vr=St[us]();)if(!(Ca(_,vr)||Rc(vr.textContent)||((Qt=vr.textContent)===null||Qt===void 0?void 0:Qt.length)===0))return Ut.some(vr);return Ut.none()};if(V&&Rr(se))if(Rc(se.textContent))se=Wt(se,!1).getOr(se);else for(se.parentNode!==null&&Ci(_,se.parentNode)&&(se=se.parentNode);se.previousSibling!==null&&(Ci(_,se.previousSibling)||Rr(se.previousSibling));)se=se.previousSibling;if(!V&&Rr(se))if(Rc(se.textContent))se=Wt(se,!0).getOr(se);else for(se.parentNode!==null&&Ci(_,se.parentNode)&&(se=se.parentNode);se.nextSibling!==null&&(Ci(_,se.nextSibling)||Rr(se.nextSibling));)se=se.nextSibling;for(;se.parentNode!==te;){const rn=se.parentNode;if(Vu(_,se)||/^(TD|TH)$/.test(rn.nodeName))return se;se=rn}return se},gc=(_,M,V)=>{const te=[],se=_.dom,Ze=ao(_,M,!0,V),Wt=ao(_,M,!1,V);let rn;const an=[];for(let Qt=Ze;Qt&&(an.push(Qt),Qt!==Wt);Qt=Qt.nextSibling);return is.each(an,Qt=>{var St;if(Vu(_,Qt)){te.push(Qt),rn=null;return}if(se.isBlock(Qt)||tu(Qt)){tu(Qt)&&se.remove(Qt),rn=null;return}const us=Qt.nextSibling;if($o.isBookmarkNode(Qt)&&(Mr(us)||Vu(_,us)||!us&&Qt.parentNode===V)){rn=null;return}rn||(rn=se.create("p"),(St=Qt.parentNode)===null||St===void 0||St.insertBefore(rn,Qt),te.push(rn)),rn.appendChild(Qt)}),te},qd=(_,M,V)=>{const te=_.getStyle(M,"list-style-type");let se=V?V["list-style-type"]:"";return se=se===null?"":se,te===se},Il=(_,M,V)=>{const te=_.selection.getRng();let se="LI";const Ze=fl(_,_.selection.getStart(!0)),Wt=_.dom;if(Wt.getContentEditable(_.selection.getNode())==="false")return;M=M.toUpperCase(),M==="DL"&&(se="DT");const rn=Kc(te),an=Oe(gc(_,te,Ze),_.dom.isEditable);is.each(an,Qt=>{let St;const us=Qt.previousSibling,vr=Qt.parentNode;ya(vr)||(us&&Mr(us)&&us.nodeName===M&&qd(Wt,us,V)?(St=us,Qt=Wt.rename(Qt,se),us.appendChild(Qt)):(St=Wt.create(M),vr.insertBefore(St,Qt),St.appendChild(Qt),Qt=Wt.rename(Qt,se)),Yc(Wt,Qt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),pr(Wt,St,V),au(_.dom,St))}),_.selection.setRng(Zu(rn))},ju=(_,M)=>Mr(_)&&_.nodeName===(M==null?void 0:M.nodeName),Hm=(_,M,V)=>{const te=_.getStyle(M,"list-style-type",!0),se=_.getStyle(V,"list-style-type",!0);return te===se},Ll=(_,M)=>_.className===M.className,Ka=(_,M,V)=>ju(M,V)&&Hm(_,M,V)&&Ll(M,V),au=(_,M)=>{let V,te=M.nextSibling;if(Ka(_,M,te)){const se=te;for(;V=se.firstChild;)M.appendChild(V);_.remove(se)}if(te=M.previousSibling,Ka(_,M,te)){const se=te;for(;V=se.lastChild;)M.insertBefore(V,M.firstChild);_.remove(se)}},Ea=(_,M,V,te)=>{if(M.nodeName!==V){const se=_.dom.rename(M,V);pr(_.dom,se,te),Wu(_,Fl(V),se)}else pr(_.dom,M,te),Wu(_,Fl(V),M)},Hl=(_,M,V,te,se)=>{const Ze=Mr(M);if(Ze&&M.nodeName===te&&!bl(se))Ur(_);else{Il(_,te,se);const Wt=Kc(_.selection.getRng()),rn=Ze?[M,...V]:V;is.each(rn,an=>{Ea(_,an,te,se)}),_.selection.setRng(Zu(Wt))}},bl=_=>"list-style-type"in _,Vm=(_,M,V,te)=>{if(M!==_.getBody())if(M)if(M.nodeName===V&&!bl(te)&&!Pm(M))Ur(_);else{const se=Kc(_.selection.getRng());pr(_.dom,M,te);const Ze=_.dom.rename(M,V);au(_.dom,Ze),_.selection.setRng(Zu(se)),Il(_,V,te),Wu(_,Fl(V),Ze)}else Il(_,V,te),Wu(_,Fl(V),M)},Jc=(_,M,V)=>{const te=Ls(_);if(hl(_,te)||!_.hasEditableRoot())return;const se=Uf(_),Ze=Kt(V)?V:{};se.length>0?Hl(_,te,se,M,Ze):Vm(_,te,M,Ze)},zm=Hu.DOM,Kd=(_,M)=>{const V=M.parentElement;if(V&&V.nodeName==="LI"&&V.firstChild===M){const te=V.previousSibling;te&&te.nodeName==="LI"?(te.appendChild(M),gi(_,V)&&zm.remove(V)):zm.setStyle(V,"listStyleType","none")}if(Mr(V)){const te=V.previousSibling;te&&te.nodeName==="LI"&&te.appendChild(M)}},wi=(_,M)=>{const V=is.grep(_.select("ol,ul",M));is.each(V,te=>{Kd(_,te)})},Um=(_,M,V,te)=>{let se=M.startContainer;const Ze=M.startOffset;if(Rr(se)&&(V?Ze<se.data.length:Ze>0))return se;const Wt=_.schema.getNonEmptyElements();eu(se)&&(se=bs.getNode(se,Ze));const rn=new Mm(se,te);V&&Ml(_.dom,se)&&rn.next();const an=V?rn.next.bind(rn):rn.prev2.bind(rn);for(;se=an();)if(se.nodeName==="LI"&&!se.hasChildNodes()||Wt[se.nodeName]||Rr(se)&&se.data.length>0)return se;return null},Wm=(_,M)=>{const V=M.childNodes;return V.length===1&&!Mr(V[0])&&_.isBlock(V[0])},cu=(_,M)=>{Wm(_,M)&&_.remove(M.firstChild,!0)},th=(_,M,V)=>{let te;const se=Wm(_,V)?V.firstChild:V;if(cu(_,M),!gi(_,M,!0))for(;te=M.firstChild;)se.appendChild(te)},Y=(_,M,V)=>{let te;const se=M.parentNode;if(!Nm(_,M)||!Nm(_,V))return;Mr(V.lastChild)&&(te=V.lastChild),se===V.lastChild&&tu(se.previousSibling)&&_.remove(se.previousSibling);const Ze=V.lastChild;Ze&&tu(Ze)&&M.hasChildNodes()&&_.remove(Ze),gi(_,V,!0)&&mi(fn.fromDom(V)),th(_,M,V),te&&V.appendChild(te);const rn=Ie(fn.fromDom(V),fn.fromDom(M))?_.getParents(M,Mr,V):[];_.remove(M),It(rn,an=>{gi(_,an)&&an!==_.getRoot()&&_.remove(an)})},Zm=(_,M,V)=>{mi(fn.fromDom(V)),Y(_.dom,M,V),_.selection.setCursorLocation(V,0)},Ta=(_,M,V,te)=>{const se=_.dom;if(se.isEmpty(te))Zm(_,V,te);else{const Ze=Kc(M);Y(se,V,te),_.selection.setRng(Zu(Ze))}},qf=(_,M,V,te)=>{const se=Kc(M);Y(_.dom,V,te);const Ze=Zu(se);_.selection.setRng(Ze)},Pp=(_,M)=>{const V=_.dom,te=_.selection,se=te.getStart(),Ze=nr(_,se),Wt=V.getParent(te.getStart(),"LI",Ze);if(Wt){const rn=Wt.parentElement;if(rn===_.getBody()&&gi(V,rn))return!0;const an=Bm(te.getRng()),Qt=V.getParent(Um(_,an,M,Ze),"LI",Ze);if(Qt&&Qt!==Wt)return _.undoManager.transact(()=>{M?Ta(_,an,Qt,Wt):Rl(Wt)?or(_):qf(_,an,Wt,Qt)}),!0;if(!Qt&&!M&&an.startOffset===0&&an.endOffset===0)return _.undoManager.transact(()=>{Ur(_)}),!0}return!1},Fp=(_,M,V)=>{const te=_.getParent(M.parentNode,_.isBlock,V);_.remove(M),te&&_.isEmpty(te)&&_.remove(te)},uo=(_,M)=>{const V=_.dom,te=_.selection.getStart(),se=nr(_,te),Ze=V.getParent(te,V.isBlock,se);if(Ze&&V.isEmpty(Ze)){const Wt=Bm(_.selection.getRng()),rn=V.getParent(Um(_,Wt,M,se),"LI",se);if(rn){const an=vr=>q(["td","th","caption"],ro(vr)),Qt=vr=>vr.dom===se,St=Is(fn.fromDom(rn),an,Qt),us=Is(fn.fromDom(Wt.startContainer),an,Qt);return Gn(St,us,Me)?(_.undoManager.transact(()=>{Fp(V,Ze,se),au(V,rn.parentNode),_.selection.select(rn,!0),_.selection.collapse(M)}),!0):!1}}return!1},hc=(_,M)=>Pp(_,M)||uo(_,M),Br=_=>{const M=_.selection.getStart(),V=nr(_,M);return _.dom.getParent(M,"LI,DT,DD",V)||Sa(_).length>0},Vl=_=>Br(_)?(_.undoManager.transact(()=>{_.execCommand("Delete"),wi(_.dom,_.getBody())}),!0):!1,Si=(_,M)=>{const V=_.selection;return!hl(_,V.getNode())&&(V.isCollapsed()?hc(_,M):Vl(_))},Gu=_=>{_.on("ExecCommand",M=>{const V=M.command.toLowerCase();(V==="delete"||V==="forwarddelete")&&Br(_)&&wi(_.dom,_.getBody())}),_.on("keydown",M=>{M.keyCode===Qe.BACKSPACE?Si(_,!1)&&M.preventDefault():M.keyCode===Qe.DELETE&&Si(_,!0)&&M.preventDefault()})},Pa=_=>({backspaceDelete:M=>{Si(_,M)}}),jm=(_,M)=>{const V=Ls(_);V===null||hl(_,V)||_.undoManager.transact(()=>{Kt(M.styles)&&_.dom.setStyles(V,M.styles),Kt(M.attrs)&&va(M.attrs,(te,se)=>_.dom.setAttrib(V,se,te))})},Xd=_=>{const M=Te(Jr(_).split("")),V=xo(M,(te,se)=>{const Ze=te.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,se)*Ze});return Os(V,(te,se)=>te+se,0)},Gm=_=>{if(_--,_<0)return"";{const M=_%26,V=Math.floor(_/26),te=Gm(V),se=String.fromCharCode("A".charCodeAt(0)+M);return te+se}},Qc=_=>/^[A-Z]+$/.test(_),lu=_=>/^[a-z]+$/.test(_),nh=_=>/^[0-9]+$/.test(_),Xa=_=>nh(_)?2:Qc(_)?0:lu(_)?1:nu(_)?3:4,br=_=>{switch(Xa(_)){case 2:return Ut.some({listStyleType:Ut.none(),start:_});case 0:return Ut.some({listStyleType:Ut.some("upper-alpha"),start:Xd(_).toString()});case 1:return Ut.some({listStyleType:Ut.some("lower-alpha"),start:Xd(_).toString()});case 3:return Ut.some({listStyleType:Ut.none(),start:""});case 4:return Ut.none()}},xi=_=>{const M=parseInt(_.start,10);return ko(_.listStyleType,"upper-alpha")?Gm(M):ko(_.listStyleType,"lower-alpha")?Gm(M).toLowerCase():_.start},qu=_=>{const M=Ls(_);!vs(M)||hl(_,M)||_.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:xi({start:_.dom.getAttrib(M,"start","1"),listStyleType:Ut.from(_.dom.getStyle(M,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:V=>{const te=V.getData();br(te.start).each(se=>{_.execCommand("mceListUpdate",!1,{attrs:{start:se.start==="1"?"":se.start},styles:{"list-style-type":se.listStyleType.getOr("")}})}),V.close()}})},Ya=(_,M)=>()=>{const V=Ls(_);return To(V)&&V.nodeName===M},_a=_=>{_.addCommand("mceListProps",()=>{qu(_)})},Kf=_=>{_.on("BeforeExecCommand",M=>{const V=M.command.toLowerCase();V==="indent"?Io(_):V==="outdent"&&or(_)}),_.addCommand("InsertUnorderedList",(M,V)=>{Jc(_,"UL",V)}),_.addCommand("InsertOrderedList",(M,V)=>{Jc(_,"OL",V)}),_.addCommand("InsertDefinitionList",(M,V)=>{Jc(_,"DL",V)}),_.addCommand("RemoveList",()=>{Ur(_)}),_a(_),_.addCommand("mceListUpdate",(M,V)=>{Kt(V)&&jm(_,V)}),_.addQueryStateHandler("InsertUnorderedList",Ya(_,"UL")),_.addQueryStateHandler("InsertOrderedList",Ya(_,"OL")),_.addQueryStateHandler("InsertDefinitionList",Ya(_,"DL"))};var oh=tinymce.util.Tools.resolve("tinymce.html.Node");const Ku=_=>_.type===3,Yd=_=>_.length===0,Xf=_=>{const M=(se,Ze)=>{const Wt=oh.create("li");It(se,rn=>Wt.append(rn)),Ze?_.insert(Wt,Ze,!0):_.append(Wt)},V=(se,Ze)=>Ku(Ze)?[...se,Ze]:!Yd(se)&&!Ku(Ze)?(M(se,Ze),[]):se,te=Os(_.children(),V,[]);Yd(te)||M(te)},vl=_=>{_.on("PreInit",()=>{const{parser:M}=_;M.addNodeFilter("ul,ol",V=>It(V,Xf))})},qm=_=>{_.on("keydown",M=>{M.keyCode!==Qe.TAB||Qe.metaKeyPressed(M)||_.undoManager.transact(()=>{(M.shiftKey?or(_):Io(_))&&M.preventDefault()})})},Wv=_=>{Np(_)&&qm(_),Gu(_)},Ip=(_,M)=>V=>{const te=se=>{V.setActive(Oc(se.parents,M)),V.setEnabled(!hl(_,se.element)&&_.selection.isEditable())};return V.setEnabled(_.selection.isEditable()),Zd(_,te)},Yf=_=>{const M=V=>()=>_.execCommand(V);_.hasPlugin("advlist")||(_.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:M("InsertOrderedList"),onSetup:Ip(_,"OL")}),_.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:M("InsertUnorderedList"),onSetup:Ip(_,"UL")}))},Xu=(_,M)=>V=>Zd(_,se=>V.setEnabled(Oc(se.parents,M)&&!hl(_,se.element))),sh=_=>{const M={text:"List properties...",icon:"ordered-list",onAction:()=>_.execCommand("mceListProps"),onSetup:Xu(_,"OL")};_.ui.registry.addMenuItem("listprops",M),_.ui.registry.addContextMenu("lists",{update:V=>{const te=Ls(_,V);return vs(te)?["listprops"]:[]}})};var zl=()=>{qe.add("lists",_=>(zf(_),vl(_),_.hasPlugin("rtc",!0)?_a(_):(Wv(_),Kf(_)),Yf(_),sh(_),Pa(_)))};zl()})();(function(){var qe=tinymce.util.Tools.resolve("tinymce.PluginManager");const qt=(Me=>Ie=>Me===Ie)(null),Rn=Me=>Me,Un=(Me,Ie)=>{const He=Me.length,me=new Array(He);for(let ro=0;ro<He;ro++){const Zo=Me[ro];me[ro]=Ie(Zo,ro)}return me},Kt={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},$e={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},Ht=[new RegExp(Kt.aletter),new RegExp(Kt.midnumlet),new RegExp(Kt.midletter),new RegExp(Kt.midnum),new RegExp(Kt.numeric),new RegExp(Kt.cr),new RegExp(Kt.lf),new RegExp(Kt.newline),new RegExp(Kt.extend),new RegExp(Kt.format),new RegExp(Kt.katakana),new RegExp(Kt.extendnumlet),new RegExp("@")],Zs="",To=new RegExp("^"+Kt.punctuation+"$"),As=/^\s+$/,_o=Ht,Wo=$e.OTHER,qo=Me=>{let Ie=Wo;const He=_o.length;for(let me=0;me<He;++me){const ro=_o[me];if(ro&&ro.test(Me)){Ie=me;break}}return Ie},Fs=Me=>{const Ie={};return He=>{if(Ie[He])return Ie[He];{const me=Me(He);return Ie[He]=me,me}}},at=Me=>{const Ie=Fs(qo);return Un(Me,Ie)},tr=(Me,Ie)=>{const He=Me[Ie],me=Me[Ie+1];if(Ie<0||Ie>Me.length-1&&Ie!==0||He===$e.ALETTER&&me===$e.ALETTER)return!1;const ro=Me[Ie+2];if(He===$e.ALETTER&&(me===$e.MIDLETTER||me===$e.MIDNUMLET||me===$e.AT)&&ro===$e.ALETTER)return!1;const Zo=Me[Ie-1];return(He===$e.MIDLETTER||He===$e.MIDNUMLET||me===$e.AT)&&me===$e.ALETTER&&Zo===$e.ALETTER||(He===$e.NUMERIC||He===$e.ALETTER)&&(me===$e.NUMERIC||me===$e.ALETTER)||(He===$e.MIDNUM||He===$e.MIDNUMLET)&&me===$e.NUMERIC&&Zo===$e.NUMERIC||He===$e.NUMERIC&&(me===$e.MIDNUM||me===$e.MIDNUMLET)&&ro===$e.NUMERIC||(He===$e.EXTEND||He===$e.FORMAT)&&(me===$e.ALETTER||me===$e.NUMERIC||me===$e.KATAKANA||me===$e.EXTEND||me===$e.FORMAT)||(me===$e.EXTEND||me===$e.FORMAT&&(ro===$e.ALETTER||ro===$e.NUMERIC||ro===$e.KATAKANA||ro===$e.EXTEND||ro===$e.FORMAT))&&(He===$e.ALETTER||He===$e.NUMERIC||He===$e.KATAKANA||He===$e.EXTEND||He===$e.FORMAT)||He===$e.CR&&me===$e.LF?!1:He===$e.NEWLINE||He===$e.CR||He===$e.LF||me===$e.NEWLINE||me===$e.CR||me===$e.LF?!0:!(He===$e.KATAKANA&&me===$e.KATAKANA||me===$e.EXTENDNUMLET&&(He===$e.ALETTER||He===$e.NUMERIC||He===$e.KATAKANA||He===$e.EXTENDNUMLET)||He===$e.EXTENDNUMLET&&(me===$e.ALETTER||me===$e.NUMERIC||me===$e.KATAKANA)||He===$e.AT)},Ut=Zs,ee=As,On=To,Za=Me=>Me==="http"||Me==="https",Bn=(Me,Ie)=>{let He;for(He=Ie;He<Me.length&&!ee.test(Me[He]);He++);return He},q=(Me,Ie)=>{const He=Bn(Me,Ie+1);return Me.slice(Ie+1,He).join(Ut).substr(0,3)==="://"?He:Ie},mn=(Me,Ie,He,me)=>{const ro=[],Zo=[];let Ct=[];for(let fr=0;fr<He.length;++fr)if(Ct.push(Me[fr]),tr(He,fr)){const Eo=Ie[fr];if((me.includeWhitespace||!ee.test(Eo))&&(me.includePunctuation||!On.test(Eo))){const mc=fr-Ct.length+1,Jo=fr+1,Hr=Ie.slice(mc,Jo).join(Ut);if(Za(Hr)){const Zc=q(Ie,fr),Ma=Me.slice(Jo,Zc);Array.prototype.push.apply(Ct,Ma),fr=Zc}ro.push(Ct),Zo.push({start:mc,end:Jo})}Ct=[]}return{words:ro,indices:Zo}},xo=()=>({includeWhitespace:!1,includePunctuation:!1}),It=(Me,Ie,He)=>{He={...xo(),...He};const me=Un(Me,Ie),ro=at(me);return mn(Me,me,ro,He)},oe=(Me,Ie,He)=>It(Me,Ie,He).words,Os=Me=>Me.replace(/\uFEFF/g,"");var jn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Ot=(Me,Ie)=>{const He=Ie.getBlockElements(),me=Ie.getVoidElements(),ro=mc=>He[mc.nodeName]||me[mc.nodeName],Zo=[];let Ct="";const fr=new jn(Me,Me);let Eo;for(;Eo=fr.next();)Eo.nodeType===3?Ct+=Os(Eo.data):ro(Eo)&&Ct.length&&(Zo.push(Ct),Ct="");return Ct.length&&Zo.push(Ct),Zo},O=Me=>Me.replace(/\u200B/g,""),io=Me=>Me.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,Te=(Me,Ie)=>{const He=O(Ot(Me,Ie).join(`
`));return oe(He.split(""),Rn).length},ht=(Me,Ie)=>{const He=Ot(Me,Ie).join("");return io(He)},$t=(Me,Ie)=>{const He=Ot(Me,Ie).join("").replace(/\s/g,"");return io(He)},Be=(Me,Ie)=>()=>Ie(Me.getBody(),Me.schema),Tn=(Me,Ie)=>()=>Ie(Me.selection.getRng().cloneContents(),Me.schema),ko=Me=>Be(Me,Te),Gn=Me=>({body:{getWordCount:ko(Me),getCharacterCount:Be(Me,ht),getCharacterCountWithoutSpaces:Be(Me,$t)},selection:{getWordCount:Tn(Me,Te),getCharacterCount:Tn(Me,ht),getCharacterCountWithoutSpaces:Tn(Me,$t)},getCount:ko(Me)}),Dn=(Me,Ie)=>{Me.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Ie.body.getWordCount()),String(Ie.selection.getWordCount())],["Characters (no spaces)",String(Ie.body.getCharacterCountWithoutSpaces()),String(Ie.selection.getCharacterCountWithoutSpaces())],["Characters",String(Ie.body.getCharacterCount()),String(Ie.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},ke=(Me,Ie)=>{Me.addCommand("mceWordCount",()=>Dn(Me,Ie))},De=(Me,Ie)=>{let He=null;return{cancel:()=>{qt(He)||(clearTimeout(He),He=null)},throttle:(...Zo)=>{qt(He)&&(He=setTimeout(()=>{He=null,Me.apply(null,Zo)},Ie))}}};var L=tinymce.util.Tools.resolve("tinymce.util.Delay");const dc=(Me,Ie)=>{Me.dispatch("wordCountUpdate",{wordCount:{words:Ie.body.getWordCount(),characters:Ie.body.getCharacterCount(),charactersWithoutSpaces:Ie.body.getCharacterCountWithoutSpaces()}})},qn=(Me,Ie)=>{dc(Me,Ie)},Ro=(Me,Ie,He)=>{const me=De(()=>qn(Me,Ie),He);Me.on("init",()=>{qn(Me,Ie),L.setEditorTimeout(Me,()=>{Me.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",me.throttle)},0),Me.on("remove",me.cancel)})},fn=Me=>{const Ie=()=>Me.execCommand("mceWordCount");Me.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:Ie}),Me.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:Ie})};var Fu=(Me=300)=>{qe.add("wordcount",Ie=>{const He=Gn(Ie);return ke(Ie,He),fn(Ie),Ro(Ie,He,Me),He})};Fu()})();(function(){var qe=tinymce.util.Tools.resolve("tinymce.PluginManager");const on=($e,Ht)=>{$e.focus(),$e.undoManager.transact(()=>{$e.setContent(Ht)}),$e.selection.setCursorLocation(),$e.nodeChanged()},qt=$e=>$e.getContent({source_view:!0}),Rn=$e=>{const Ht=qt($e);$e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Ht},onSubmit:Zs=>{on($e,Zs.getData().code),Zs.close()}})},Un=$e=>{$e.addCommand("mceCodeEditor",()=>{Rn($e)})},Fn=$e=>{const Ht=()=>$e.execCommand("mceCodeEditor");$e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Ht}),$e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Ht})};var Kt=()=>{qe.add("code",$e=>(Un($e),Fn($e),{}))};Kt()})();const Pq={__name:"TEditor",props:{content:{type:String,default:""},select_text:{type:String,default:""},ai_write_type:{type:String,default:""},baseUrl:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"lists  table"},toolbar:{type:[String,Array],default:"undo redo removeformat | codesample bold italic  underline | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify bullist numlist outdent indent | formatselect | fontselect | fontsizeselect | forecolor backcolor   "}},emits:["getContent","selectText","aiType"],setup(qe,{emit:on}){const qt=qe,Rn=tw({get(){return qt.content},set(Ht){on("getContent",Ht)}}),Un=tw({get(){return qt.select_text},set(Ht){on("selectText",Ht)}}),Fn=tw({get(){return qt.ai_write_type},set(Ht){on("aiType",Ht)}}),Kt=Pu("vue-tinymce-"+ +new Date+((Math.random()*1e3).toFixed(0)+"")),$e=HG({selector:"#"+Kt.value,language_url:"/tinymce/langs/zh_CN.js",language:"zh-Hans",skin_url:"/tinymce/skins/ui/oxide",height:400,branding:!1,menubar:!1,promotion:!1,image_dimensions:!1,plugins:qt.plugins,toolbar:qt.toolbar,font_formats:"Arial=arial,helvetica,sans-serif; 宋体=SimSun; 微软雅黑=Microsoft Yahei; Impact=impact,chicago;",fontsize_formats:"11px 12px 14px 16px 18px 24px 36px 48px 64px 72px",paste_webkit_styles:"all",paste_merge_formats:!0,nonbreaking_force_tab:!1,paste_auto_cleanup_on_paste:!1,file_picker_types:"file",content_css:"/tinymce/skins/content/default/content.css",contextmenu:["customMenu","customMenu2"],setup:function(Ht){Ht.ui.registry.addMenuItem("customMenu",{icon:"edit-block",text:"改写",onAction:function(){Un.value=Ht.selection.getContent({format:"text"}),Fn.value="content_change"}}),Ht.ui.registry.addMenuItem("customMenu2",{icon:"duplicate",text:"续写",onAction:function(){Un.value=Ht.selection.getContent({format:"text"}),Fn.value="content_long"}})},images_upload_handler:(Ht,Zs)=>new Promise((To,As)=>{if(Ht.blob().size/1024/1024>2){As({message:"上传失败，图片大小请控制在 2M 以内",remove:!0});return}else new FormData().append("file",Ht.blob())}),file_picker_callback:(Ht,Zs,To)=>{To.filetype=="file"&&Ht("mypage.html",{text:"My text"}),To.filetype=="image"&&Ht("myimage.jpg",{alt:"My alt text"}),To.filetype=="media"&&Ht("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})}});return aG(()=>{Cq.init({})}),(Ht,Zs)=>(Om(),Mp("main",null,[So("p",null,qT(qt.value),1),wn(Al($q),{placeholder:"输入文本内容",modelValue:Al(Rn),"onUpdate:modelValue":Zs[0]||(Zs[0]=To=>VG(Rn)?Rn.value=To:null),init:$e,disabled:qe.disabled,id:Kt.value},null,8,["modelValue","init","disabled","id"])]))}},Fq=Pq,Iq={class:"main overflow-auto ai-write"},Lq={class:"write_content m-4 pb-10"},Hq={class:"write_header flex justify-content-between"},Vq={class:"left_write_header flex align-center"},zq={class:"cloud_save cursor-pointer"},Uq={class:"right_write_header"},Wq={class:"ai_write_wrap"},Zq={class:"container_w mb-2 bg-white"},jq={class:"right_ai_content"},Gq=So("h3",null,"AI模版",-1),qq={class:"flex items-center justify-between"},Kq={class:"flex flex-column"},Xq=So("img",{src:eq,alt:"内容修改",class:"mr-3 w-14"},null,-1),Yq=So("h5",null,"内容修改",-1),Jq=So("p",null,"修改某段文章段落内容，保留原意操作",-1),Qq={class:"flex items-center justify-between"},eK={class:"flex flex-column"},tK=So("img",{src:tq,alt:"句子续写",class:"mr-3 w-14"},null,-1),nK=So("h5",null,"句子续写",-1),oK=So("p",null,"根据上下文句子延续写作创新",-1),sK={class:"flex items-center justify-between"},rK={class:"flex flex-column"},aK=So("img",{src:nq,alt:"风格润色",class:"mr-3 w-14"},null,-1),cK=So("h5",null,"风格润色",-1),lK=So("p",null,"修改当前内容的整体写作风格",-1),iK={class:"flex items-center justify-between"},uK={class:"flex flex-column"},dK=So("img",{src:oq,alt:"创意故事",class:"mr-3 w-14"},null,-1),mK=So("h5",null,"创意故事",-1),fK=So("p",null,"帮你构思一个创意",-1),gK={key:0,class:"content_sel"},hK={class:"info_title flex justify-content-between"},pK=So("h4",null,"内容",-1),bK={key:1,class:"content_sel"},vK={class:"info_title flex justify-content-between"},yK=So("h4",null,"续写的句子信息",-1),CK={key:2,class:"content_sel"},wK={class:"info_title flex justify-content-between"},SK=So("h4",null,"关键词或中心句",-1),xK=So("h4",{class:"mt-2"},"风格",-1),EK={key:3,class:"content_sel"},TK={class:"info_title flex justify-content-between"},_K=So("h4",null,"剧情描述",-1),kK={key:4,class:"content_result bg-white shadow-sm p-4 mt-4"},AK={class:"content_info"},LK=cF({__name:"[writeid]",setup(qe){const on=zG(),qt=UG("token"),Rn=WG(),Un=XG(),Fn=Pu(""),Kt=Pu(""),$e=Te=>{Kt.value=Te},Ht=Pu(""),Zs=Te=>{Ht.value=Te},To=Te=>{Wo.value=Te,qo.value=Ht.value,io()},As=Pu(!1),_o=Pu(on.query.ai_write?on.query.ai_write:!1),Wo=Pu(on.query.ai_write_type?on.query.ai_write_type:""),qo=Pu(""),Fs=()=>{YG({id:on.params.writeid}).then(Te=>{Fn.value=Te._rawValue.data.title,Kt.value=Te._rawValue.data.content}).catch(Te=>{console.log(Te)})};qt.value&&Fs();const at=Te=>{Wo.value=Te},tr=Pu("");AD(Kt,Te=>{clearTimeout(tr.value),tr.value=String(setTimeout(function(){Ut()},3e3))}),AD(Fn,Te=>{clearTimeout(tr.value),tr.value=String(setTimeout(function(){Ut()},3e3))});const Ut=()=>{As.value=!0,JG({title:Fn.value,content:Kt.value,id:on.params.writeid}).then(Te=>{console.log(Te),As.value=!1}).catch(Te=>{console.log(Te),As.value=!1})},ee=()=>{_o.value=!_o.value,Wd.success(_o.value?"已开启AI写作":"已关闭AI写作")},On=()=>{Kt.value+=Oe.value},Za=()=>{navigator.clipboard.writeText(Oe.value).then(()=>{Wd.success("复制成功")},()=>{Wd.error("复制失败")})},Bn=()=>{Oe.value="",Wo.value=""},q=Pu(!1),{public:{baseUrl:mn}}=KG(),xo={Authorization:`Bearer ${qt.value}`,Accept:"text/event-stream"},It=Pu(""),Oe=Pu(""),oe=Pu(1),Os=Pu([{name:"专业",value:1},{name:"学术的",value:2},{name:"活泼的",value:3},{name:"幽默的",value:4},{name:"吐槽",value:5}]),jn=()=>{QG({id:on.params.writeid}).then(Te=>{Wd.success("删除成功"),Rn.push("/ai_write")}).catch(Te=>{console.log(Te)})},Ot=()=>{sq(Kt.value).then(Te=>{rq.saveAs(Te,Fn.value+".docx")})},O=async()=>{var Tn;if(qo.value=="")return Wd.error("请输入内容"),!1;Oe.value="",q.value=!0;const Te=await fetch(`${mn}api/generate_content`,{method:"POST",headers:xo,body:JSON.stringify({title:Fn.value,content:qo.value,type:Wo.value,style:oe.value})});if(Te.status==500)return q.value=!1,Wd.error("服务器错误"),!1;if(Te.status==401)return q.value=!1,Wd.error("请先登录"),!1;if(Te.status==402)return q.value=!1,Wd.error("发送次数已达上限或余额不足"),!1;if(Te.status==403)return q.value=!1,Wd.error("禁止发送违禁词"),!1;const ht=(Tn=Te.body)==null?void 0:Tn.getReader(),$t=({value:ko})=>{let Dn=new TextDecoder().decode(ko).split(`

`).map(De=>De.replace(/\n/g,"")),ke=[];for(let De=0;De<Dn.length;De++)if(Dn[De].slice(-2)=="]}"&&Dn[De].startsWith("data:"))ke.push(JSON.parse(Dn[De].replace("data:","")));else if(Dn[De].startsWith("data:")&&Dn[De].slice(-2)!="]}")It.value=Dn[De].replace("data:","");else if(Dn[De].slice(-2)=="]}"&&Dn[De].startsWith("data:")==!1){let L=It.value+=Dn[De];ke.push(JSON.parse(L.replace("data:",""))),It.value=""}else Dn[De].includes('"error"')&&(Oe.value=JSON.parse(Dn[De]).error.message),It.value="";for(let De=0;De<ke.length;De++)setTimeout(()=>{ke[De].choices[0].delta.content&&(Oe.value+=ke[De].choices[0].delta.content)},100)},Be=async()=>{const ko=await(ht==null?void 0:ht.read());ko!=null&&ko.done?(q.value=!1,qo.value=""):($t(ko),await Be())};await Be()},io=async()=>{var Tn;if(Ht.value=="")return Wd.error("请选择内容"),!1;q.value=!0;const Te=await fetch(`${mn}api/generate_content_c`,{method:"POST",headers:xo,body:JSON.stringify({title:Fn.value,content:Ht.value,type:Wo.value})});if(Te.status==500)return q.value=!1,Wd.error("服务器错误"),!1;if(Te.status==401)return q.value=!1,Wd.error("请先登录"),!1;if(Te.status==402)return q.value=!1,Wd.error("发送次数已达上限或余额不足"),!1;if(Te.status==403)return q.value=!1,Wd.error("禁止发送违禁词"),!1;const ht=(Tn=Te.body)==null?void 0:Tn.getReader(),$t=({value:ko})=>{let Dn=new TextDecoder().decode(ko).split(`

`).map(De=>De.replace(/\n/g,"")),ke=[];for(let De=0;De<Dn.length;De++)if(Dn[De].slice(-2)=="]}"&&Dn[De].startsWith("data:"))ke.push(JSON.parse(Dn[De].replace("data:","")));else if(Dn[De].startsWith("data:")&&Dn[De].slice(-2)!="]}")It.value=Dn[De].replace("data:","");else if(Dn[De].slice(-2)=="]}"&&Dn[De].startsWith("data:")==!1){let L=It.value+=Dn[De];ke.push(JSON.parse(L.replace("data:",""))),It.value=""}else Dn[De].includes('"error"')&&(Oe.value=JSON.parse(Dn[De]).error.message),It.value="";for(let De=0;De<ke.length;De++)setTimeout(()=>{ke[De].choices[0].delta.content&&(Kt.value+=ke[De].choices[0].delta.content)},100)},Be=async()=>{const ko=await(ht==null?void 0:ht.read());ko!=null&&ko.done?(q.value=!1,Ht.value=""):($t(ko),await Be())};await Be()};return(Te,ht)=>{const $t=NG,Be=MG,Tn=Yg("a-button"),ko=BG,Gn=Yg("a-tooltip"),Dn=Yg("a-popconfirm"),ke=Yg("a-input"),De=Fq,L=Yg("a-col"),dc=Yg("a-typography-text"),qn=Yg("a-card"),Ro=Yg("a-row"),fn=Yg("a-textarea"),Fu=Yg("a-option"),Me=Yg("a-select");return Om(),Mp(Yj,null,[wn(Be,null,{default:Jn(()=>[wn($t,null,{default:Jn(()=>[Uv(qT(Fn.value)+" - "+qT(Al(Un).setting.title),1)]),_:1})]),_:1}),So("main",Iq,[So("div",Lq,[So("div",Hq,[So("div",Vq,[wn(ko,{to:"/ai_write"},{default:Jn(()=>[wn(Tn,{type:"text"},{icon:Jn(()=>[wn(Al(kD),{class:"cursor-pointer v-2 text-black-50"})]),_:1})]),_:1}),So("div",zq,[wn(Tn,{type:"text",onClick:ht[0]||(ht[0]=Ie=>Ut()),class:"text-black-50"},{icon:Jn(()=>[wn(Al(aq),{size:"",class:"mr-1"})]),default:Jn(()=>[So("span",null,qT(As.value?"自动保存中....":"自动保存完成"),1)]),_:1})])]),So("div",Uq,[wn(Gn,{content:_o.value?"关闭AI写作":"开启AI写作"},{default:Jn(()=>[wn(Tn,{class:"mr-4 text-black-50",type:"text",onClick:ht[1]||(ht[1]=Ie=>ee())},{icon:Jn(()=>[wn(Al(vq))]),_:1})]),_:1},8,["content"]),wn(Gn,{content:"下载Word文档",onClick:ht[2]||(ht[2]=Ie=>Ot())},{default:Jn(()=>[wn(Tn,{class:"mr-4 text-black-50",type:"text"},{icon:Jn(()=>[wn(Al(cq))]),_:1})]),_:1}),wn(Gn,{content:"删除当前文档"},{default:Jn(()=>[wn(Dn,{content:"此操作将永久删除当前文档,确定要删除吗?",onOk:ht[3]||(ht[3]=Ie=>jn()),type:"warning"},{default:Jn(()=>[wn(Tn,{class:"mr-4 text-black-50",type:"text"},{icon:Jn(()=>[wn(Al(ZG))]),_:1})]),_:1})]),_:1})])]),So("div",Wq,[wn(Ro,{gutter:40,class:"mt-40"},{default:Jn(()=>[wn(L,{xs:{span:24},lg:{span:_o.value?12:24}},{default:Jn(()=>[So("div",Zq,[wn(ke,{modelValue:Fn.value,"onUpdate:modelValue":ht[4]||(ht[4]=Ie=>Fn.value=Ie),placeholder:"标题",size:"large"},null,8,["modelValue"]),wn(De,{ai_write_type:Wo.value,select_text:Ht.value,content:Kt.value,disabled:!1,onGetContent:$e,onSelectText:Zs,onAiType:To},null,8,["ai_write_type","select_text","content"])])]),_:1},8,["lg"]),_o.value&&Wo.value==""?(Om(),CZ(L,{key:0,xs:{span:24},lg:{span:12}},{default:Jn(()=>[So("div",jq,[Gq,wn(Ro,{gutter:20,style:{marginBottom:"20px"}},{default:Jn(()=>[wn(L,{xs:{span:24},lg:{span:12}},{default:Jn(()=>[wn(qn,{hoverable:"",class:"bg-white mb-2 rounded-3",onClick:ht[5]||(ht[5]=Ie=>at("content_change"))},{default:Jn(()=>[So("div",qq,[So("span",Kq,[Xq,wn(dc,null,{default:Jn(()=>[Yq,Jq]),_:1})])])]),_:1})]),_:1}),wn(L,{xs:{span:24},lg:{span:12}},{default:Jn(()=>[wn(qn,{hoverable:"",class:"bg-white mb-2 rounded-3",onClick:ht[6]||(ht[6]=Ie=>at("content_long"))},{default:Jn(()=>[So("div",Qq,[So("span",eK,[tK,wn(dc,null,{default:Jn(()=>[nK,oK]),_:1})])])]),_:1})]),_:1}),wn(L,{xs:{span:24},lg:{span:12}},{default:Jn(()=>[wn(qn,{hoverable:"",class:"bg-white mb-2 rounded-3",onClick:ht[7]||(ht[7]=Ie=>at("content_color"))},{default:Jn(()=>[So("div",sK,[So("span",rK,[aK,wn(dc,null,{default:Jn(()=>[cK,lK]),_:1})])])]),_:1})]),_:1}),wn(L,{xs:{span:24},lg:{span:12}},{default:Jn(()=>[wn(qn,{hoverable:"",class:"bg-white mb-2 rounded-3",onClick:ht[8]||(ht[8]=Ie=>at("content_think"))},{default:Jn(()=>[So("div",iK,[So("span",uK,[dK,wn(dc,null,{default:Jn(()=>[mK,fK]),_:1})])])]),_:1})]),_:1})]),_:1})])]),_:1})):JC("",!0),_o.value&&Wo.value!=""?(Om(),CZ(L,{key:1,xs:{span:24},lg:{span:12}},{default:Jn(()=>[Wo.value=="content_change"?(Om(),Mp("div",gK,[So("div",hK,[pK,wn(Tn,{type:"text",onClick:ht[9]||(ht[9]=Ie=>Bn())},{icon:Jn(()=>[wn(Al(kD),{class:"cursor-pointer v-2 text-black-50"})]),_:1})]),wn(fn,{modelValue:qo.value,"onUpdate:modelValue":ht[10]||(ht[10]=Ie=>qo.value=Ie),disabled:!1,placeholder:"请输入内容",autoSize:{minRows:4,maxRows:4}},null,8,["modelValue"]),wn(Tn,{loading:q.value,type:"primary",class:"w-100",onClick:ht[11]||(ht[11]=Ie=>O())},{icon:Jn(()=>[wn(Al(aF))]),default:Jn(()=>[Uv(" 生成内容 ")]),_:1},8,["loading"])])):JC("",!0),Wo.value=="content_long"?(Om(),Mp("div",bK,[So("div",vK,[yK,wn(Tn,{type:"text",onClick:ht[12]||(ht[12]=Ie=>Bn())},{icon:Jn(()=>[wn(Al(kD),{class:"cursor-pointer v-2 text-black-50"})]),_:1})]),wn(fn,{modelValue:qo.value,"onUpdate:modelValue":ht[13]||(ht[13]=Ie=>qo.value=Ie),disabled:!1,placeholder:"请输入内容",autoSize:{minRows:4,maxRows:4}},null,8,["modelValue"]),wn(Tn,{loading:q.value,type:"primary",class:"w-100",onClick:ht[14]||(ht[14]=Ie=>O())},{icon:Jn(()=>[wn(Al(aF))]),default:Jn(()=>[Uv(" 生成内容 ")]),_:1},8,["loading"])])):JC("",!0),Wo.value=="content_color"?(Om(),Mp("div",CK,[So("div",wK,[SK,wn(Tn,{type:"text",onClick:ht[15]||(ht[15]=Ie=>Bn())},{icon:Jn(()=>[wn(Al(kD),{class:"cursor-pointer v-2 text-black-50"})]),_:1})]),wn(fn,{modelValue:qo.value,"onUpdate:modelValue":ht[16]||(ht[16]=Ie=>qo.value=Ie),disabled:!1,placeholder:"请输入内容",autoSize:{minRows:4,maxRows:4}},null,8,["modelValue"]),xK,wn(Me,{modelValue:oe.value,"onUpdate:modelValue":ht[17]||(ht[17]=Ie=>oe.value=Ie),class:"mb-4"},{default:Jn(()=>[(Om(!0),Mp(Yj,null,jG(Os.value,(Ie,He)=>(Om(),CZ(Fu,{value:Ie.value,key:He},{default:Jn(()=>[Uv(qT(Ie.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),wn(Tn,{loading:q.value,type:"primary",class:"w-100",onClick:ht[18]||(ht[18]=Ie=>O())},{icon:Jn(()=>[wn(Al(aF))]),default:Jn(()=>[Uv(" 生成内容 ")]),_:1},8,["loading"])])):JC("",!0),Wo.value=="content_think"?(Om(),Mp("div",EK,[So("div",TK,[_K,wn(Tn,{type:"text",onClick:ht[19]||(ht[19]=Ie=>Bn())},{icon:Jn(()=>[wn(Al(kD),{class:"cursor-pointer v-2 text-black-50"})]),_:1})]),wn(fn,{modelValue:qo.value,"onUpdate:modelValue":ht[20]||(ht[20]=Ie=>qo.value=Ie),disabled:!1,placeholder:"例如：黑暗魔王是一位令人闻风丧胆的恶魔，他在传说中被描绘为邪恶和强大的存在。无论是在古老的神话故事还是现代的电影和小说中，黑暗魔王都扮演着一个恐怖而具有威胁性的角色。",autoSize:{minRows:4,maxRows:4}},null,8,["modelValue"]),wn(Tn,{loading:q.value,type:"primary",class:"w-100",onClick:ht[21]||(ht[21]=Ie=>O())},{icon:Jn(()=>[wn(Al(aF))]),default:Jn(()=>[Uv(" 生成内容 ")]),_:1},8,["loading"])])):JC("",!0),Oe.value?(Om(),Mp("div",kK,[So("div",AK,qT(Oe.value),1),wn(Ro,{gutter:20,class:"mt-4"},{default:Jn(()=>[wn(L,{span:"12"},{default:Jn(()=>[wn(Tn,{type:"primary",class:"w-100",onClick:ht[22]||(ht[22]=Ie=>On())},{icon:Jn(()=>[wn(Al(GG))]),default:Jn(()=>[Uv(" 加入到内容 ")]),_:1})]),_:1}),wn(L,{span:"12"},{default:Jn(()=>[wn(Tn,{type:"primary",status:"success",class:"w-100",onClick:ht[23]||(ht[23]=Ie=>Za())},{icon:Jn(()=>[wn(Al(qG))]),default:Jn(()=>[Uv(" 复制内容 ")]),_:1})]),_:1})]),_:1})])):JC("",!0)]),_:1})):JC("",!0)]),_:1})])])])],64)}}});export{LK as default};
